const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/modal-D6mKceGM.js","assets/diff-vendor-BaWSTkgn.js"])))=>i.map(i=>d[i]);
import{c as d,a as s,o as l,d as xt,r as j,b as v,t as $,n as bt,e as X,f as Z,u as ts,w as pe,g as _s,F as re,h as ue,i as M,j as ge,v as We,k as we,l as io,m as fe,p as qe,q as _e,s as be,x as fi,y as ss,z as Ce,A as fn,B as ao,C as Pt,D as vi,E as hi,G as _i,H as gs,I as bs,J as gi,K as bi}from"./vue-vendor-DHmAiWve.js";import{m as rt,p as rs}from"./markdown-vendor-BRsjnVvP.js";import{c as yi}from"./diff-vendor-BaWSTkgn.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();const wi={class:"flex-grow-1 d-flex flex-column justify-content-center align-items-center text-center p-5"},$i={__name:"NoSessionSelected",setup(n){return(e,t)=>(l(),d("div",wi,[...t[0]||(t[0]=[s("h2",{class:"text-muted"},"No Session Selected",-1),s("p",{class:"text-secondary"}," Create a new session or select an existing one to start chatting with Claude Code. ",-1)])]))}},Ei="modulepreload",Si=function(n){return"/"+n},vn={},Ae=function(e,t,o){let i=Promise.resolve();if(t&&t.length>0){let p=function(f){return Promise.all(f.map(c=>Promise.resolve(c).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),m=r?.nonce||r?.getAttribute("nonce");i=p(t.map(f=>{if(f=Si(f),f in vn)return;vn[f]=!0;const c=f.endsWith(".css"),E=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${E}`))return;const g=document.createElement("link");if(g.rel=c?"stylesheet":Ei,c||(g.as="script"),g.crossOrigin="",g.href=f,m&&g.setAttribute("nonce",m),document.head.appendChild(g),c)return new Promise((w,y)=>{g.addEventListener("load",w),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(r){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=r,window.dispatchEvent(m),!m.defaultPrevented)throw r}return i.then(r=>{for(const m of r||[])m.status==="rejected"&&a(m.reason);return e().catch(a)})};class ys extends Error{constructor(e,t,o){super(e),this.name="APIError",this.status=t,this.data=o}}async function yt(n,e={}){try{const t=await fetch(n,{headers:{"Content-Type":"application/json",...e.headers},...e});if(!t.ok){let i;try{i=await t.json()}catch{i={detail:t.statusText}}throw new ys(i.detail||`HTTP ${t.status}: ${t.statusText}`,t.status,i)}const o=t.headers.get("content-type");return o&&o.includes("application/json")?await t.json():await t.text()}catch(t){throw t instanceof ys?t:(console.error("API request failed:",t),new ys(`Network error: ${t.message}`,0,null))}}async function Ci(n,e={}){let t=n;if(e.params){const o=new URLSearchParams;for(const[m,p]of Object.entries(e.params))p!=null&&o.append(m,p);const i=o.toString();i&&(t=`${n}?${i}`);const{params:a,...r}=e;return yt(t,{...r,method:"GET"})}return yt(t,{...e,method:"GET"})}async function ki(n,e,t={}){return yt(n,{...t,method:"POST",body:JSON.stringify(e)})}async function Ti(n,e,t={}){return yt(n,{...t,method:"PUT",body:JSON.stringify(e)})}async function xi(n,e={}){return yt(n,{...e,method:"DELETE"})}async function Ai(n,e,t={}){return yt(n,{...t,method:"PATCH",body:JSON.stringify(e)})}const ce={get:Ci,post:ki,put:Ti,delete:xi,patch:Ai},de=xt("session",()=>{const n=j(new Map),e=j(null),t=j(new Map),o=j(new Map),i=j(new Set),a=j(!1);let r=null;const m=v(()=>n.value.get(e.value)),p=v(()=>Array.from(n.value.values()).sort((A,W)=>A.order-W.order)),f=A=>v(()=>p.value.filter(W=>W.project_id===A)),c=v({get:()=>t.value.get(e.value)||"",set:A=>{e.value&&t.value.set(e.value,A)}});async function E(){try{const A=await ce.get("/api/sessions");return n.value.clear(),A.sessions.forEach(W=>{n.value.set(W.session_id,W)}),console.log(`Loaded ${n.value.size} sessions`),A.sessions}catch(A){throw console.error("Failed to fetch sessions:",A),A}}async function g(A,W){try{const C=(await ce.post("/api/sessions",{project_id:A,...W})).session_id,U=(await ce.get(`/api/sessions/${C}`)).session;return n.value.set(C,U),n.value=new Map(n.value),console.log(`Created session ${C}`),U}catch(S){throw console.error("Failed to create session:",S),S}}async function w(A){if(e.value===A&&!a.value)return;r&&(console.log(`Aborting pending selection to switch to ${A}`),r.abort(),r=null);const W=new AbortController;r=W,a.value=!0;try{if(e.value=A,W.signal.aborted){console.log(`Selection of ${A} aborted early`);return}let S=n.value.get(A);if(!S)try{const U=await ce.get(`/api/sessions/${A}`);if(W.signal.aborted){console.log(`Selection of ${A} aborted after fetch`);return}S=U.session,n.value.set(A,S),n.value=new Map(n.value),console.log(`Fetched session ${A} for deeplink`)}catch(U){console.error(`Failed to fetch session ${A}:`,U);return}if(S&&(S.state==="created"||S.state==="terminated"))try{if(await _(A),W.signal.aborted){console.log(`Selection of ${A} aborted after start`);return}console.log(`Auto-started session ${A} (was in ${S.state} state)`);const U=6e4,I=200,P=5e3;let F=0,x=0;for(;F<U;){if(W.signal.aborted){console.log(`Selection of ${A} aborted during state wait`);return}const z=n.value.get(A);if(z&&z.state==="active"){console.log(`Session ${A} is now active after ${F}ms`);break}if(F-x>=P){const L=n.value.get(A)?.state||"unknown";console.log(`Waiting for session ${A} to become active (current: ${L}, ${F/1e3}s elapsed)`),x=F}await new Promise(L=>setTimeout(L,I)),F+=I}const O=n.value.get(A);O&&O.state!=="active"&&console.warn(`Session ${A} did not become active within ${U/1e3}s (state: ${O.state}), continuing anyway`)}catch(U){console.error(`Failed to auto-start session ${A}:`,U)}if(W.signal.aborted){console.log(`Selection of ${A} aborted before message load`);return}if(await(await Ae(()=>Promise.resolve().then(()=>Yi),void 0)).useMessageStore().loadMessages(A),W.signal.aborted){console.log(`Selection of ${A} aborted after message load`);return}await(await Ae(()=>Promise.resolve().then(()=>ha),void 0)).useWebSocketStore().connectSession(A),W.signal.aborted||console.log(`Selected session ${A}`)}finally{r===W&&(r=null),a.value=!1}}function y(A,W){const S=n.value.get(A);S?Object.assign(S,W):(n.value.set(A,W),console.log(`Added new session ${A} via WebSocket update`)),n.value=new Map(n.value)}async function b(A){i.value.add(A);try{const S=(await ce.delete(`/api/sessions/${A}`)).deleted_session_ids||[A];for(const C of S)n.value.delete(C),t.value.delete(C),o.value.delete(C);return n.value=new Map(n.value),S.includes(e.value)&&(e.value=null),console.log(`Deleted ${S.length} session(s): ${S.join(", ")}`),S}catch(W){throw console.error("Failed to delete session:",W),W}finally{i.value.delete(A)}}async function u(A,W){try{await ce.patch(`/api/sessions/${A}`,W),y(A,W),console.log(`Updated session ${A}:`,W)}catch(S){throw console.error("Failed to update session:",S),S}}async function h(A,W){try{await ce.post(`/api/sessions/${A}/permission-mode`,{mode:W}),y(A,{current_permission_mode:W});const S=o.value.get(A);S&&(S.permissionMode=W,o.value.set(A,S)),console.log(`Set permission mode for session ${A} to ${W}`)}catch(S){throw console.error("Failed to set permission mode:",S),S}}async function _(A){try{await ce.post(`/api/sessions/${A}/start`),console.log(`Started session ${A}`)}catch(W){throw console.error("Failed to start session:",W),W}}async function k(A){try{await ce.post(`/api/sessions/${A}/pause`),console.log(`Paused session ${A}`)}catch(W){throw console.error("Failed to pause session:",W),W}}async function T(A){try{await ce.post(`/api/sessions/${A}/terminate`),console.log(`Terminated session ${A}`)}catch(W){throw console.error("Failed to terminate session:",W),W}}function H(A){return n.value.get(A)}function V(A,W){o.value.set(A,W),W.permissionMode&&y(A,{current_permission_mode:W.permissionMode})}return{sessions:n,currentSessionId:e,inputCache:t,initData:o,deletingSessions:i,currentSession:m,orderedSessions:p,sessionsInProject:f,currentInput:c,fetchSessions:E,createSession:g,selectSession:w,updateSession:y,deleteSession:b,patchSession:u,setPermissionMode:h,startSession:_,pauseSession:k,terminateSession:T,getSession:H,storeInitData:V}}),hn=Object.freeze(Object.defineProperty({__proto__:null,useSessionStore:de},Symbol.toStringTag,{value:"Module"})),he=xt("ui",()=>{const n=j(window.innerWidth<768),e=j(300),t=j(window.innerWidth),o=v(()=>t.value<768),i=j(!0),a=j(null),r=j(null),m=v(()=>a.value?{name:a.value,data:r.value}:null),p=j(!1),f=j("Loading...");function c(){n.value=!n.value}function E(k){n.value=k}function g(k){e.value=Math.max(200,Math.min(k,window.innerWidth*.3))}function w(k){i.value=k}function y(k,T=null){a.value=null,r.value=null,setTimeout(()=>{a.value=k,r.value=T},0)}function b(){a.value=null,r.value=null}function u(k="Loading..."){p.value=!0,f.value=k}function h(){p.value=!1}function _(){const k=t.value;t.value=window.innerWidth,t.value<768&&k>=768?n.value=!0:t.value>=768&&k<768&&(n.value=!1)}return{sidebarCollapsed:n,sidebarWidth:e,isMobile:o,autoScrollEnabled:i,activeModal:a,modalData:r,currentModal:m,isLoading:p,loadingMessage:f,toggleSidebar:c,setSidebarCollapsed:E,setSidebarWidth:g,setAutoScroll:w,showModal:y,hideModal:b,showLoading:u,hideLoading:h,handleResize:_}}),Le=xt("project",()=>{const n=j(new Map),e=j(null),t=v(()=>n.value.get(e.value)),o=v(()=>Array.from(n.value.values()).sort((u,h)=>u.order-h.order));async function i(){try{const u=await ce.get("/api/projects");return n.value.clear(),u.projects.forEach(h=>{n.value.set(h.project_id,h)}),console.log(`Loaded ${n.value.size} projects`),u.projects}catch(u){throw console.error("Failed to fetch projects:",u),u}}async function a(u,h){try{const k=(await ce.post("/api/projects",{name:u,working_directory:h})).project;return n.value.set(k.project_id,k),n.value=new Map(n.value),console.log(`Created project ${k.project_id}`),k}catch(_){throw console.error("Failed to create project:",_),_}}async function r(u,h){try{await ce.put(`/api/projects/${u}`,h),m(u,h),console.log(`Updated project ${u}`,h)}catch(_){throw console.error("Failed to update project:",_),_}}function m(u,h){const _=n.value.get(u);_&&(Object.assign(_,h),n.value=new Map(n.value))}async function p(u){try{await ce.delete(`/api/projects/${u}`),n.value.delete(u),n.value=new Map(n.value),e.value===u&&(e.value=null),console.log(`Deleted project ${u}`)}catch(h){throw console.error("Failed to delete project:",h),h}}async function f(u){try{const h=await ce.put(`/api/projects/${u}/toggle-expansion`),_=n.value.get(u);return _&&(_.is_expanded=h.is_expanded,n.value=new Map(n.value)),h.is_expanded}catch(h){throw console.error("Failed to toggle expansion:",h),h}}async function c(u){try{await ce.put("/api/projects/reorder",{project_ids:u}),u.forEach((h,_)=>{const k=n.value.get(h);k&&(k.order=_)}),n.value=new Map(n.value),console.log("Reordered projects",u)}catch(h){throw console.error("Failed to reorder projects:",h),h}}async function E(u,h){try{await ce.put(`/api/projects/${u}/sessions/reorder`,{session_ids:h});const _=n.value.get(u);_&&(_.session_ids=h,n.value=new Map(n.value)),console.log(`Reordered sessions in project ${u}`,h)}catch(_){throw console.error("Failed to reorder sessions:",_),_}}function g(u){return n.value.get(u)}function w(u){e.value=u}function y(){e.value=null}function b(u){if(!u)return"";const h=u.split(/[/\\]/).filter(_=>_);return h.length===0?"/":h.length===1?`/${h[0]}`:h.length===2?`/${h.join("/")}`:`.../${h.slice(-2).join("/")}`}return{projects:n,currentProjectId:e,currentProject:t,orderedProjects:o,fetchProjects:i,createProject:a,updateProject:r,updateProjectLocal:m,deleteProject:p,toggleExpansion:f,reorderProjects:c,reorderSessionsInProject:E,getProject:g,selectProject:w,clearProjectSelection:y,formatPath:b}}),ne=(n,e)=>{const t=n.__vccOpts||n;for(const[o,i]of e)t[o]=i;return t},Oi={class:"session-header border-bottom p-3"},Mi={class:"project-name"},Di=["title"],Ni={__name:"SessionHeader",props:{sessionId:{type:String,required:!0}},setup(n){const e=n,t=de(),o=Le(),i=v(()=>t.sessions.get(e.sessionId)),a=v(()=>i.value?.name||e.sessionId),r=v(()=>{for(const p of o.projects.values())if(p.session_ids?.includes(e.sessionId))return p;return null}),m=v(()=>r.value?.name||"Unknown Project");return(p,f)=>(l(),d("div",Oi,[s("div",null,[s("div",Mi,$(m.value),1),s("div",{class:"session-name",title:n.sessionId},$(a.value),9,Di)])]))}},Li=ne(Ni,[["__scopeId","data-v-89e9c269"]]),Ii={class:"progress session-state-status-line",style:{height:"4px","border-radius":"0"}},ji=["title"],Pi={key:1,class:"progress-bar bg-secondary",style:{width:"100%"},title:"No session selected"},Ri={__name:"SessionStateStatusLine",props:{sessionId:{type:String,required:!0}},setup(n){const e=n,t=de(),o=v(()=>t.sessions.get(e.sessionId)),i=v(()=>o.value?o.value.state==="paused"&&o.value.is_processing?"pending-prompt":o.value.is_processing?"processing":o.value.state:"unknown"),a=v(()=>{const p=i.value;return{created:"#d3d3d3",starting:"#90ee90",active:"#90ee90",running:"#90ee90",processing:"#dda0dd",paused:"#d3d3d3","pending-prompt":"#ffc107",terminated:"#d3d3d3",error:"#ffb3b3",failed:"#ffb3b3",unknown:"#d3d3d3"}[p]||"#d3d3d3"}),r=v(()=>{const p=i.value;return p==="starting"||p==="processing"||p==="pending-prompt"}),m=v(()=>{if(!o.value)return"No session selected";const p=i.value,f=p.charAt(0).toUpperCase()+p.slice(1).replace("-"," "),c=o.value.name||"Unnamed Session",E=o.value.role?` (${o.value.role})`:"";return`${c}${E}: ${f}`});return(p,f)=>(l(),d("div",Ii,[o.value?(l(),d("div",{key:0,class:X(["progress-bar",{"progress-bar-striped progress-bar-animated":r.value}]),style:bt({width:"100%",backgroundColor:a.value}),title:m.value},null,14,ji)):(l(),d("div",Pi))]))}},Wi=ne(Ri,[["__scopeId","data-v-63d222fe"]]),Hi={class:"session-status-bar border-top p-2 bg-light"},Vi={class:"d-flex justify-content-between align-items-center gap-2"},Fi={class:"d-flex gap-2"},Bi=["disabled"],qi={class:"mode-label"},Ui=["disabled"],zi=["disabled"],Ki={__name:"SessionStatusBar",props:{sessionId:{type:String,required:!0}},setup(n){const e=n,t=de(),o=he(),i=v(()=>t.sessions.get(e.sessionId)),a=v(()=>i.value?.current_permission_mode||"default"),r={default:"ðŸ”’",acceptEdits:"âœï¸",plan:"ðŸ“‹",bypassPermissions:"â˜¢ï¸"},m=v(()=>r[a.value]||"ðŸ”’"),p=v(()=>a.value),f=["default","acceptEdits","plan"],c=async()=>{if(!i.value)return;if(a.value==="bypassPermissions"){try{await t.setPermissionMode(e.sessionId,"default")}catch(h){console.error("Failed to cycle permission mode:",h)}return}const b=(f.indexOf(a.value)+1)%f.length,u=f[b];try{await t.setPermissionMode(e.sessionId,u)}catch(h){console.error("Failed to cycle permission mode:",h)}},E=()=>{o.showModal("session-info",{sessionId:e.sessionId})},g=()=>{o.showModal("manage-session",{session:i.value})},w=()=>{o.setAutoScroll(!o.autoScrollEnabled)};return(y,b)=>(l(),d("div",Hi,[s("div",Vi,[s("div",Fi,[s("button",{class:"btn btn-sm btn-outline-secondary",onClick:c,disabled:!i.value},[Z($(m.value)+" ",1),s("span",qi,$(p.value),1)],8,Bi),s("button",{class:"btn btn-sm btn-outline-secondary",onClick:E,disabled:!i.value},[...b[0]||(b[0]=[Z(" â„¹ï¸ ",-1),s("span",{class:"button-label"},"Info",-1)])],8,Ui),s("button",{class:"btn btn-sm btn-outline-secondary",onClick:g,disabled:!i.value},[...b[1]||(b[1]=[Z(" âš™ï¸ ",-1),s("span",{class:"button-label"},"Manage",-1)])],8,zi)]),s("div",null,[s("button",{class:X(["btn btn-sm",ts(o).autoScrollEnabled?"btn-primary":"btn-outline-secondary"]),onClick:w}," â¬‡ï¸ "+$(ts(o).autoScrollEnabled?"ON":"OFF"),3)])])]))}},Gi=ne(Ki,[["__scopeId","data-v-fdcd3535"]]),Me=xt("message",()=>{const n=j(new Map),e=j(new Map),t=j(new Map),o=j(new Map),i=j(new Map),a=j(new Map),r=j(new Map),m=j(new Map),p=v(()=>{const x=de();return n.value.get(x.currentSessionId)||[]}),f=v(()=>{const x=de();return e.value.get(x.currentSessionId)||[]});async function c(x,O=null,z=0){try{const L=O||1e4,D=await ce.get(`/api/sessions/${x}/messages?limit=${L}&offset=${z}`),G=D.messages||[],ie=D.total_count||G.length,J=D.has_more||!1;if(console.log(`Loaded ${G.length} of ${ie} messages for session ${x}`),n.value.set(x,G),G.length>0){const R=G[G.length-1];R.timestamp&&(r.value.set(x,R.timestamp),console.log(`Tracked last received timestamp for session ${x}: ${R.timestamp}`))}const Q=new Set;G.forEach(R=>{R.type==="assistant"&&R.metadata?.tool_uses&&R.metadata.tool_uses.forEach(N=>{Q.add(N.id)}),R.type==="user"&&R.metadata?.tool_results&&R.metadata.tool_results.forEach(N=>{Q.delete(N.tool_use_id);const Y=a.value.get(x);Y&&Y.delete(N.tool_use_id)}),R.type==="system"&&R.metadata?.subtype==="client_launched"&&(Q.forEach(N=>{W(x,N,"Session was restarted")}),Q.clear()),R.type==="system"&&R.metadata?.subtype==="interrupt"&&(Q.forEach(N=>{W(x,N,"Session was interrupted")}),Q.clear()),R.metadata?.has_tool_uses&&R.metadata.tool_uses&&R.metadata.tool_uses.forEach(N=>{b(x,N)}),R.metadata?.has_tool_results&&R.metadata.tool_results&&R.metadata.tool_results.forEach(N=>{_(x,N)}),(R.type==="permission_request"||R.metadata?.has_permission_requests)&&u(x,R),R.type==="permission_response"&&h(x,{request_id:R.metadata?.request_id,decision:R.metadata?.decision,updated_input:R.metadata?.updated_input,reasoning:R.metadata?.reasoning,applied_updates:R.metadata?.applied_updates}),R.type==="system"&&(R.subtype==="init"||R.metadata?.subtype==="init")&&R.metadata?.init_data&&de().storeInitData(x,R.metadata.init_data)});const me=de().sessions.get(x);return me&&!["active","paused","starting"].includes(me.state)&&(Q.forEach(R=>{W(x,R,"Session was terminated")}),Q.clear()),i.value.set(x,Q),n.value=new Map(n.value),J&&console.warn(`Warning: Only loaded ${G.length} of ${ie} messages. Some messages may be missing.`),{messages:G,totalCount:ie,hasMore:J}}catch(L){throw console.error("Failed to load messages:",L),L}}function E(x,O){const z=i.value.get(x)||new Set;O.type==="assistant"&&O.metadata?.tool_uses&&O.metadata.tool_uses.forEach(L=>{z.add(L.id)}),O.type==="user"&&O.metadata?.tool_results&&O.metadata.tool_results.forEach(L=>{z.delete(L.tool_use_id);const D=a.value.get(x);D&&D.delete(L.tool_use_id)}),O.type==="system"&&O.metadata?.subtype==="client_launched"&&(z.forEach(L=>{W(x,L,"Session was restarted")}),z.clear()),O.type==="system"&&O.metadata?.subtype==="interrupt"&&(z.forEach(L=>{W(x,L,"Session was interrupted")}),z.clear()),i.value.set(x,z)}function g(x,O){n.value.has(x)||n.value.set(x,[]);const z=n.value.get(x);if(O.id){const L=z.findIndex(D=>D.id===O.id);if(L!==-1){console.log(`Skipping duplicate message ${O.id} (already exists at index ${L})`);return}}z.push(O),O.timestamp&&r.value.set(x,O.timestamp),H(x,O),E(x,O),n.value=new Map(n.value)}function w(x,O){e.value.has(x)||e.value.set(x,[]),e.value.get(x).push(O),e.value=new Map(e.value)}function y(x,O,z){const L=e.value.get(x);if(L){const D=L.find(G=>G.id===O);D&&(Object.assign(D,z),e.value=new Map(e.value))}}function b(x,O){const z=T(O.name,O.input);t.value.set(z,O.id);const L={id:O.id,name:O.name,input:O.input,signature:z,status:"pending",permissionRequestId:null,permissionDecision:null,result:null,explanation:null,timestamp:new Date().toISOString(),isExpanded:!0};return w(x,L),console.log(`Created tool call ${L.id} for ${L.name}`),L}function u(x,O){console.log("handlePermissionRequest received:",O);const z=O.metadata?.tool_name||O.tool_name,L=O.metadata?.input_params||O.input_params,D=O.metadata?.request_id||O.request_id,G=O.metadata?.suggestions||O.suggestions||[];console.log("Extracted data:",{toolName:z,inputParams:L,requestId:D,suggestions:G});const ie=T(z,L),J=t.value.get(ie);J?(o.value.set(D,J),y(x,J,{status:"permission_required",permissionRequestId:D,suggestions:G}),console.log(`Permission required for tool ${J}`,{suggestions:G})):console.warn("No tool use ID found for permission request signature:",ie,{toolName:z,inputParams:L,availableSignatures:Array.from(t.value.keys())})}function h(x,O){const z=o.value.get(O.request_id);if(z){const L={permissionDecision:O.decision,appliedUpdates:O.applied_updates||[]};O.decision==="allow"?L.status="executing":(L.status="completed",L.result={error:!0,message:O.reasoning||"Permission denied"},L.isExpanded=!1),O.updated_input&&(L.input=O.updated_input),y(x,z,L),console.log(`Permission ${O.decision} for tool ${z}`)}}function _(x,O){const z=O.tool_use_id;y(x,z,{status:O.is_error?"error":"completed",result:{error:O.is_error,content:O.content},isExpanded:!1}),console.log(`Tool ${z} ${O.is_error?"failed":"completed"}`)}function k(x,O){const z=e.value.get(x);if(z){const L=z.find(D=>D.id===O);L&&(L.isExpanded=!L.isExpanded,e.value=new Map(e.value))}}function T(x,O){if(!x)return"unknown:{}";if(!O||typeof O!="object")return`${x}:{}`;const z=JSON.stringify(O,Object.keys(O).sort());return`${x}:${z}`}function H(x,O){const z=O.metadata?.display||O.display;if(!z)return;m.value.has(x)||m.value.set(x,new Map);const L=m.value.get(x);if(z.tool_states)for(const[D,G]of Object.entries(z.tool_states)){L.set(D,G);const ie=e.value.get(x);if(ie){const J=ie.find(Q=>Q.id===D);if(J){const Q={pending:"pending",permission_required:"permission_required",executing:"executing",completed:"completed",failed:"error",orphaned:"completed"};J.status=Q[G.state]||G.state,J.backendState=G}}}if(z.orphaned_tools&&z.orphaned_tools.length>0){const D=a.value.get(x)||new Map;for(const G of z.orphaned_tools)D.has(G)||D.set(G,{reason:"denied",message:"Session was interrupted"});a.value.set(x,D)}if(z.linked_permissions)for(const[D,G]of Object.entries(z.linked_permissions))o.value.set(D,G);z.tool_states&&Object.keys(z.tool_states).length>0&&(e.value=new Map(e.value)),console.log(`Applied backend display metadata for session ${x}:`,{toolStates:Object.keys(z.tool_states||{}).length,orphanedTools:(z.orphaned_tools||[]).length,linkedPermissions:Object.keys(z.linked_permissions||{}).length})}function V(x,O){return m.value.get(x)?.get(O)}function A(x){const O=m.value.get(x);return O&&O.size>0}function W(x,O,z){const L=a.value.get(x)||new Map;L.set(O,{reason:"denied",message:z}),a.value.set(x,L);const D=e.value.get(x);if(D){const G=D.find(ie=>ie.id===O);G&&G.isExpanded&&(G.isExpanded=!1,e.value=new Map(e.value))}console.log(`Marked tool use ${O} as orphaned: ${z}`)}function S(x,O){const z=V(x,O);return z&&z.state==="orphaned"?!0:a.value.get(x)?.has(O)||!1}function C(x,O){const z=V(x,O);return z&&z.state==="orphaned"?{reason:"denied",message:"Session was interrupted",backendState:z}:a.value.get(x)?.get(O)}function q(x,O){const z=i.value.get(x);z&&z.size>0&&(z.forEach(L=>W(x,L,O)),z.clear())}function U(x){n.value.delete(x),e.value.delete(x),n.value=new Map(n.value),e.value=new Map(e.value)}function I(x){return r.value.get(x)}async function P(x){const O=r.value.get(x);if(!O)return console.log(`No sync needed for session ${x} (no previous messages)`),{syncedCount:0,hasMore:!1};try{console.log(`Syncing messages for session ${x} since ${O}`);const z=await ce.get(`/api/sessions/${x}/messages?limit=1000&offset=0`),L=z.messages||[],D=z.has_more||!1,G=N=>N?typeof N=="number"?N*1e3:new Date(N).getTime():0,ie=G(O),J=L.filter(N=>N.timestamp?G(N.timestamp)>ie:!1);if(J.length===0)return console.log(`No missed messages for session ${x}`),{syncedCount:0,hasMore:!1};console.log(`Synced ${J.length} missed messages for session ${x}`);const Q=n.value.get(x)||[],ae=new Set(Q.map(N=>N.id).filter(Boolean)),me=J.filter(N=>!N.id||!ae.has(N.id));if(console.log(`After deduplication: ${me.length} unique new messages`),me.length>0){const N=me.sort((je,Ye)=>{const B=G(je.timestamp),oe=G(Ye.timestamp);return B-oe}),Y=n.value.get(x)||[],ee=Y.length>0?G(Y[Y.length-1].timestamp):0,se=G(N[0].timestamp),ve=G(N[N.length-1].timestamp);if(console.log("Timestamp comparison:",{existingCount:Y.length,lastExisting:ee,lastExistingDate:Y.length>0?Y[Y.length-1].timestamp:"none",firstNew:se,firstNewDate:N[0].timestamp,lastNew:ve,lastNewDate:N[N.length-1].timestamp,shouldAppend:se>ee}),se>ee){const je=[...Y,...N];n.value.set(x,je),console.log(`âœ… Appended ${N.length} new messages (no full sort needed)`)}else{const je=[...Y,...N].sort((Ye,B)=>{const oe=G(Ye.timestamp),le=G(B.timestamp);return oe-le});n.value.set(x,je),console.log(`âš ï¸ Merged and sorted ${N.length} new messages (interleaved with existing)`)}}else console.log(`No new messages to merge, keeping existing ${Q.length} messages unchanged`);me.forEach(N=>{E(x,N),N.metadata?.has_tool_uses&&N.metadata.tool_uses&&N.metadata.tool_uses.forEach(Y=>{b(x,Y)}),N.metadata?.has_tool_results&&N.metadata.tool_results&&N.metadata.tool_results.forEach(Y=>{_(x,Y)}),(N.type==="permission_request"||N.metadata?.has_permission_requests)&&u(x,N),N.type==="permission_response"&&h(x,{request_id:N.metadata?.request_id,decision:N.metadata?.decision,updated_input:N.metadata?.updated_input,reasoning:N.metadata?.reasoning,applied_updates:N.metadata?.applied_updates}),N.type==="system"&&(N.subtype==="init"||N.metadata?.subtype==="init")&&N.metadata?.init_data&&de().storeInitData(x,N.metadata.init_data)});const R=n.value.get(x);if(R&&R.length>0){const N=R[R.length-1];N.timestamp&&r.value.set(x,N.timestamp)}return n.value=new Map(n.value),{syncedCount:me.length,hasMore:D}}catch(z){return console.error(`Failed to sync messages for session ${x}:`,z),{syncedCount:0,hasMore:!1,error:z.message}}}const F=de();return pe(()=>Array.from(F.sessions.values()).map(O=>({id:O.session_id,state:O.state})),(x,O)=>{O&&x.forEach((z,L)=>{const D=O[L];if(!D||D.id!==z.id)return;const G=["active","paused","starting"].includes(D.state),ie=!["active","paused","starting"].includes(z.state);G&&ie&&q(z.id,"Session was terminated")})},{deep:!0}),{messagesBySession:n,toolCallsBySession:e,activeToolUses:_s(i),orphanedToolUses:_s(a),currentMessages:p,currentToolCalls:f,loadMessages:c,addMessage:g,addToolCall:w,updateToolCall:y,handleToolUse:b,handlePermissionRequest:u,handlePermissionResponse:h,handleToolResult:_,toggleToolExpansion:k,clearMessages:U,markToolUseOrphaned:W,isToolUseOrphaned:S,getOrphanedInfo:C,clearOrphanedToolUses:q,getLastReceivedTimestamp:I,syncMessages:P,getBackendToolState:V,hasBackendDisplayMetadata:A,backendToolStates:_s(m)}}),Yi=Object.freeze(Object.defineProperty({__proto__:null,useMessageStore:Me},Symbol.toStringTag,{value:"Module"}));function Ji(n){if(!n)return new Date;if(typeof n=="string"){const e=new Date(n);return isNaN(e.getTime())?new Date:e}return typeof n=="number"?n<1e10?new Date(n*1e3):new Date(n):new Date}function Rt(n){return Ji(n).toLocaleTimeString()}const Qi={class:"message-row message-row-user"},Xi=["title"],Zi={class:"message-content-column"},ea=["innerHTML"],ta={key:0,class:"tool-results mt-2"},sa={class:"tool-results-header text-muted small mb-2"},na={class:"d-flex align-items-start gap-2"},oa={class:"flex-grow-1"},ia={class:"text-muted"},aa={key:0,class:"text-danger small"},ra={__name:"UserMessage",props:{message:{type:Object,required:!0}},setup(n){const e=n;rt.setOptions({breaks:!0,gfm:!0});const t=v(()=>Rt(e.message.timestamp)),o=v(()=>`user
${t.value}`),i=v(()=>{const p=e.message.content||"";let f=rt.parse(p);return f=f.replace(/\n</g,"<"),f=f.replace(/\n+$/,""),rs.sanitize(f)}),a=v(()=>e.message.metadata?.has_tool_results&&e.message.metadata?.tool_results?.length>0),r=v(()=>e.message.metadata?.tool_results||[]);function m(p,f){return p?p.length<=f?p:p.substring(0,f)+"...":""}return(p,f)=>(l(),d("div",Qi,[s("div",{class:"message-speaker",title:o.value},[...f[0]||(f[0]=[s("span",{class:"speaker-label"},"user",-1)])],8,Xi),s("div",Zi,[s("div",{class:"message-text",innerHTML:i.value},null,8,ea),a.value?(l(),d("div",ta,[s("div",sa," ðŸ”§ Tool Results ("+$(r.value.length)+") ",1),(l(!0),d(re,null,ue(r.value,(c,E)=>(l(),d("div",{key:E,class:X(["tool-result-summary p-2 mb-2 rounded",c.is_error?"bg-danger bg-opacity-10":"bg-success bg-opacity-10"])},[s("div",na,[s("span",null,$(c.is_error?"âŒ":"âœ…"),1),s("div",oa,[s("small",ia,"Tool: "+$(c.tool_use_id),1),c.is_error?(l(),d("div",aa,$(m(c.content,200)),1)):M("",!0)])])],2))),128))])):M("",!0)])]))}},la=ne(ra,[["__scopeId","data-v-7665755b"]]),ca={class:"thinking-block"},ua=["aria-label"],da={class:"text-muted ms-auto"},ma={key:0,class:"thinking-content mt-2 p-3 bg-light rounded border"},pa=["innerHTML"],fa={__name:"ThinkingBlock",props:{thinking:{type:String,required:!0}},setup(n){const e=n,t=j(!1),o=v(()=>e.thinking?.length||0),i=v(()=>{const r=e.thinking||"",m=rt.parse(r);return rs.sanitize(m)});function a(){t.value=!t.value}return(r,m)=>(l(),d("div",ca,[s("div",{class:"thinking-header d-flex align-items-center gap-2 p-2 bg-info bg-opacity-10 rounded cursor-pointer",onClick:a},[s("span",{"aria-label":t.value?"Collapse":"Expand"},$(t.value?"â–¾":"â–¸"),9,ua),m[0]||(m[0]=s("span",{class:"thinking-label"}," ðŸ’¡ Thinking ",-1)),s("small",da,$(o.value)+" characters",1)]),t.value?(l(),d("div",ma,[s("div",{class:"thinking-text",innerHTML:i.value},null,8,pa)])):M("",!0)]))}},va=ne(fa,[["__scopeId","data-v-fda2352c"]]),et=xt("websocket",()=>{const n=j(null),e=j(!1),t=j(0),o=10,i=j(null),a=j(!1),r=j(0),m=5,p=j(null);let f=null;const c=j(0),E=j(null),g=j(new Map),w=j(null),y=j(!1),b=j(0),u=5,h=j(null),_=1e4,k=1e3,T=j(Date.now()),H=j(Date.now()),V=j(Date.now());let A=null,W=null,S=null;const C=v(()=>e.value&&(a.value||!p.value)?"connected":e.value?"partial":"disconnected");function q(R){return`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}${R}`}function U(R){const N={ui:{timer:()=>A,setTimer:Y=>{A=Y},lastPing:T,connected:e,name:"UI"},session:{timer:()=>W,setTimer:Y=>{W=Y},lastPing:H,connected:a,name:"Session"},legion:{timer:()=>S,setTimer:Y=>{S=Y},lastPing:V,connected:y,name:"Legion"}}[R];N.timer()&&clearInterval(N.timer()),N.setTimer(setInterval(()=>{if(!N.connected.value)return;const Y=Date.now()-N.lastPing.value;if(Y>_){console.warn(`âš ï¸ ${N.name} WebSocket heartbeat timeout (${Y}ms since last ping) - forcing close to trigger reconnection`),N.connected.value=!1;const se={ui:n,session:i,legion:w}[R];se.value&&se.value.readyState===WebSocket.OPEN&&se.value.close()}},k)),console.log(`âœ… Started heartbeat monitor for ${N.name} WebSocket`)}function I(R){const N={ui:{get:()=>A,set:Y=>{A=Y}},session:{get:()=>W,set:Y=>{W=Y}},legion:{get:()=>S,set:Y=>{S=Y}}}[R];N.get()&&(clearInterval(N.get()),N.set(null),console.log(`ðŸ›‘ Stopped heartbeat monitor for ${R} WebSocket`))}function P(){if(n.value)return;const R=q("/ws/ui");console.log(`Connecting to UI WebSocket: ${R}`),n.value=new WebSocket(R),n.value.onopen=()=>{e.value=!0,t.value=0,T.value=Date.now(),U("ui"),console.log("UI WebSocket connected")},n.value.onmessage=N=>{const Y=JSON.parse(N.data);ie(Y)},n.value.onclose=()=>{if(I("ui"),e.value=!1,n.value=null,console.log("UI WebSocket closed"),t.value<o){t.value++;const N=Math.min(2e3*t.value,3e4);console.log(`Reconnecting UI WebSocket in ${N}ms (attempt ${t.value})`),setTimeout(P,N)}},n.value.onerror=N=>{console.error("UI WebSocket error:",N)}}function F(){n.value&&(n.value.close(),n.value=null,e.value=!1)}async function x(R){c.value++;const N=c.value;if(console.log(`[Gen ${N}] Starting connection to session ${R}`),f&&(clearTimeout(f),f=null),await O(),c.value!==N){console.log(`[Gen ${N}] Connection cancelled (current generation: ${c.value})`);return}p.value=R,E.value=N;const Y=q(`/ws/session/${R}`);console.log(`[Gen ${N}] Connecting to Session WebSocket: ${Y}`),i.value=new WebSocket(Y),i.value.onopen=async()=>{if(E.value!==N){console.log(`[Gen ${N}] Ignoring onopen (stale connection, current: ${E.value})`),i.value.close();return}a.value=!0,r.value=0,H.value=Date.now(),U("session"),console.log(`[Gen ${N}] Session WebSocket connected for ${R}`);const ee=g.value.get(R);if(g.value.set(R,!0),ee){console.log(`[Gen ${N}] Reconnection detected, syncing missed messages...`);try{const ve=await Me().syncMessages(R);ve.syncedCount>0?console.log(`[Gen ${N}] âœ… Synced ${ve.syncedCount} missed messages`):ve.error?console.warn(`[Gen ${N}] âš ï¸ Message sync failed: ${ve.error}`):console.log(`[Gen ${N}] No missed messages to sync`),ve.hasMore&&console.warn(`[Gen ${N}] âš ï¸ More than 1000 missed messages, showing recent 1000 only`)}catch(se){console.error(`[Gen ${N}] Error during message sync:`,se)}}else console.log(`[Gen ${N}] Initial connection, no sync needed`)},i.value.onmessage=ee=>{if(E.value!==N){console.log(`[Gen ${N}] Ignoring message (stale connection, current: ${E.value})`);return}const se=JSON.parse(ee.data);J(se,R)},i.value.onclose=()=>{I("session"),a.value=!1,i.value=null,console.log(`[Gen ${N}] Session WebSocket closed for ${R}`);const ee=de();if(ee.currentSessionId===R&&E.value===N&&r.value<m){r.value++;const se=Math.min(2e3*r.value,3e4);console.log(`[Gen ${N}] Reconnecting Session WebSocket in ${se}ms (attempt ${r.value})`),f=setTimeout(()=>{E.value===N&&ee.currentSessionId===R?(f=null,x(R)):console.log(`[Gen ${N}] Skipping reconnect (generation or session changed)`)},se)}},i.value.onerror=ee=>{console.error(`[Gen ${N}] Session WebSocket error:`,ee)}}function O(){return new Promise(R=>{if(f&&(clearTimeout(f),f=null,console.log("Cancelled pending session reconnect timer")),i.value){const N=p.value,Y=()=>{i.value=null,a.value=!1,p.value=null,E.value=null,r.value=0,N&&g.value.delete(N),R()};if(i.value.readyState===WebSocket.CLOSED)Y();else{const ee=setTimeout(()=>{console.warn("Session WebSocket close timeout - forcing cleanup"),Y()},2e3);i.value.addEventListener("close",()=>{clearTimeout(ee),Y()},{once:!0}),i.value.close()}}else p.value=null,E.value=null,R()})}function z(R){i.value&&a.value?(i.value.send(JSON.stringify({type:"send_message",content:R})),console.log("Sent message to session")):console.error("Cannot send message: Session WebSocket not connected")}function L(R,N,Y=!1,ee=null){if(i.value&&a.value){const se={type:"permission_response",request_id:R,decision:N,apply_suggestions:Y,timestamp:new Date().toISOString()};ee&&(se.clarification_message=ee),i.value.send(JSON.stringify(se)),console.log(`Sent permission ${N} for request ${R}`,{applySuggestions:Y,clarification:ee})}}function D(R,N,Y){if(i.value&&a.value){const ee={type:"permission_response",request_id:R,decision:N,updated_input:Y,timestamp:new Date().toISOString()};i.value.send(JSON.stringify(ee)),console.log(`Sent permission ${N} with updated_input for request ${R}`,Y)}}function G(){i.value&&a.value&&(i.value.send(JSON.stringify({type:"interrupt_session"})),console.log("Sent interrupt to session"))}function ie(R){const N=de(),Y=Le();switch(R.type){case"sessions_list":R.sessions&&Array.isArray(R.sessions)&&R.sessions.forEach(ee=>{N.updateSession(ee.session_id,ee)});break;case"state_change":R.data&&R.data.session_id&&R.data.session&&N.updateSession(R.data.session_id,R.data.session);break;case"project_updated":if(R.data&&R.data.project){const ee=R.data.project;Y.updateProjectLocal(ee.project_id,ee),N.fetchSessions()}break;case"project_deleted":R.data&&R.data.project_id&&Y.projects.delete(R.data.project_id);break;case"connection_established":console.log("UI WebSocket: Connection established");break;case"ping":T.value=Date.now(),n.value?.readyState===WebSocket.OPEN&&n.value.send(JSON.stringify({type:"pong",timestamp:new Date().toISOString()}));break;default:console.warn("Unknown UI WebSocket message type:",R.type)}}function J(R,N){const Y=de();if(Y.currentSessionId!==N){console.warn(`Ignoring message for session ${N} (current: ${Y.currentSessionId})`);return}const ee=Me();switch(R.type){case"message":const se=R.data;if(!se||!se.type){console.warn("Received message event with invalid data:",R);break}if(se.type==="permission_request"){ee.handlePermissionRequest(N,se);break}if(se.type==="permission_response"){ee.handlePermissionResponse(N,se);break}se.metadata?.has_tool_uses&&se.metadata.tool_uses.forEach(ve=>{ee.handleToolUse(N,ve)}),se.metadata?.has_tool_results&&se.metadata.tool_results.forEach(ve=>{ee.handleToolResult(N,ve)}),se.type==="system"&&(se.subtype==="init"||se.metadata?.subtype==="init")&&se.metadata?.init_data&&Y.storeInitData(N,se.metadata.init_data),ee.addMessage(N,se);break;case"permission_request":ee.handlePermissionRequest(N,R);break;case"permission_response":ee.handlePermissionResponse(N,R);break;case"tool_result":ee.handleToolResult(N,R);break;case"state_change":Y.updateSession(N,R.updates);break;case"connection_established":console.log(`Session WebSocket: Connection established for ${N}`);break;case"ping":H.value=Date.now(),i.value?.readyState===WebSocket.OPEN&&i.value.send(JSON.stringify({type:"pong",timestamp:new Date().toISOString()}));break;default:console.warn("Unknown Session WebSocket message type:",R.type)}}function Q(R){ae(),h.value=R;const N=q(`/ws/legion/${R}`);console.log(`Connecting to Legion WebSocket: ${N}`),w.value=new WebSocket(N),w.value.onopen=()=>{y.value=!0,b.value=0,V.value=Date.now(),U("legion"),console.log(`Legion WebSocket connected for ${R}`)},w.value.onmessage=Y=>{const ee=JSON.parse(Y.data);me(ee,R)},w.value.onclose=()=>{if(I("legion"),y.value=!1,w.value=null,console.log(`Legion WebSocket closed for ${R}`),h.value===R&&b.value<u){b.value++;const Y=Math.min(2e3*b.value,3e4);setTimeout(()=>Q(R),Y)}},w.value.onerror=Y=>{console.error("Legion WebSocket error:",Y)}}function ae(){w.value&&(w.value.close(),w.value=null,y.value=!1,h.value=null)}function me(R,N){Ae(async()=>{const{useLegionStore:Y}=await Promise.resolve().then(()=>N_);return{useLegionStore:Y}},void 0).then(({useLegionStore:Y})=>{const ee=Y();switch(R.type){case"comm":R.comm&&(ee.addComm(N,R.comm),console.log("Legion WebSocket: Received new comm",R.comm));break;case"minion_created":R.data&&(console.log("Legion WebSocket: Minion created, reloading sessions",R.data),Ae(async()=>{const{useSessionStore:se}=await Promise.resolve().then(()=>hn);return{useSessionStore:se}},void 0).then(({useSessionStore:se})=>{se().loadSessions()}));break;case"minion_updated":R.data&&(console.log("Legion WebSocket: Minion updated, reloading sessions",R.data),Ae(async()=>{const{useSessionStore:se}=await Promise.resolve().then(()=>hn);return{useSessionStore:se}},void 0).then(({useSessionStore:se})=>{se().loadSessions()}));break;case"connection_established":console.log(`Legion WebSocket: Connection established for ${N}`);break;case"ping":V.value=Date.now(),w.value?.readyState===WebSocket.OPEN&&w.value.send(JSON.stringify({type:"pong",timestamp:new Date().toISOString()}));break;default:console.warn("Unknown Legion WebSocket message type:",R.type)}})}return{uiConnected:e,uiRetryCount:t,sessionConnected:a,sessionRetryCount:r,legionConnected:y,legionRetryCount:b,overallStatus:C,connectUI:P,disconnectUI:F,connectSession:x,disconnectSession:O,sendMessage:z,sendPermissionResponse:L,sendPermissionResponseWithInput:D,interruptSession:G,connectLegion:Q,disconnectLegion:ae}}),ha=Object.freeze(Object.defineProperty({__proto__:null,useWebSocketStore:et},Symbol.toStringTag,{value:"Module"})),_a={class:"base-tool-handler"},ga={class:"tool-section"},ba={class:"tool-parameters"},ya={class:"tool-code"},wa={key:0,class:"tool-section"},$a={class:"tool-section-label"},Ea={class:"tool-code"},Sa={__name:"BaseToolHandler",props:{toolCall:{type:Object,required:!0}},setup(n){const e=n,t=v(()=>e.toolCall.input?JSON.stringify(e.toolCall.input,null,2):"{}"),o=v(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),i=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),a=v(()=>{if(!o.value)return"";const r=e.toolCall.result;return r.content!==void 0?typeof r.content=="string"?r.content:JSON.stringify(r.content,null,2):r.message?r.message:JSON.stringify(r,null,2)});return(r,m)=>(l(),d("div",_a,[s("div",ga,[m[0]||(m[0]=s("div",{class:"tool-section-label"},"Parameters:",-1)),s("div",ba,[s("pre",ya,$(t.value),1)])]),o.value?(l(),d("div",wa,[s("div",$a,$(i.value?"Error:":"Result:"),1),s("div",{class:X(["tool-result",{"tool-result-error":i.value}])},[s("pre",Ea,$(a.value),1)],2)])):M("",!0)]))}},Ca=ne(Sa,[["__scopeId","data-v-1e69f57d"]]),ka={class:"read-tool-handler"},Ta={class:"tool-section"},xa={class:"read-file-info"},Aa={class:"file-path"},Oa={key:0,class:"read-range"},Ma={key:0,class:"tool-section"},Da={key:0,class:"tool-result tool-result-error"},Na={class:"tool-code"},La={key:1,class:"file-content-preview"},Ia={class:"content-header"},ja={class:"line-count-badge"},Pa={key:0,class:"preview-note"},Ra={class:"tool-code content-display"},Wa={key:0,class:"more-indicator"},ws=100,Ha={__name:"ReadToolHandler",props:{toolCall:{type:Object,required:!0}},setup(n){const e=n,t=v(()=>e.toolCall.input?.file_path||"Unknown"),o=v(()=>{const w=e.toolCall.input?.offset,y=e.toolCall.input?.limit;return w!==void 0||y!==void 0}),i=v(()=>{const w=e.toolCall.input?.offset;return w!==void 0?w+1:1}),a=v(()=>{const w=e.toolCall.input?.offset||0,y=e.toolCall.input?.limit;return y!==void 0?w+y:"âˆž"}),r=v(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),m=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),p=v(()=>{if(!r.value)return"";const w=e.toolCall.result;return w.content!==void 0?typeof w.content=="string"?w.content:JSON.stringify(w.content,null,2):w.message?w.message:JSON.stringify(w,null,2)}),f=v(()=>m.value||!p.value?[]:p.value.split(`
`)),c=v(()=>f.value.length),E=v(()=>c.value>ws),g=v(()=>m.value?"":f.value.slice(0,ws).join(`
`));return(w,y)=>(l(),d("div",ka,[s("div",Ta,[s("div",xa,[y[0]||(y[0]=s("span",{class:"file-icon"},"ðŸ“„",-1)),y[1]||(y[1]=s("strong",null,"Reading:",-1)),s("code",Aa,$(t.value),1),o.value?(l(),d("span",Oa,"Lines "+$(i.value)+"-"+$(a.value),1)):M("",!0)])]),r.value?(l(),d("div",Ma,[m.value?(l(),d("div",Da,[s("pre",Na,$(p.value),1)])):(l(),d("div",La,[s("div",Ia,[y[2]||(y[2]=s("span",{class:"content-label"},"Content Preview:",-1)),s("span",ja,$(c.value)+" lines",1),E.value?(l(),d("span",Pa,"(showing first "+$(ws)+")")):M("",!0)]),s("pre",Ra,$(g.value),1),E.value?(l(),d("div",Wa,"...")):M("",!0)]))])):M("",!0)]))}},Va=ne(Ha,[["__scopeId","data-v-1f2b0569"]]),Fa={class:"write-tool-handler"},Ba={class:"tool-section"},qa={class:"write-file-info mb-2"},Ua={class:"file-path"},za={class:"write-content-preview"},Ka={class:"content-header"},Ga={class:"line-count-badge"},Ya={key:0,class:"preview-note"},Ja={class:"tool-code content-display"},Qa={key:0,class:"more-indicator"},Xa={key:0,class:"tool-section"},Za={key:0,class:"tool-result tool-result-error"},er={class:"tool-code"},tr={key:1,class:"tool-result tool-result-success"},sr={class:"success-message"},$s=100,nr={__name:"WriteToolHandler",props:{toolCall:{type:Object,required:!0}},setup(n){const e=n,t=v(()=>e.toolCall.input?.file_path||"Unknown"),o=v(()=>e.toolCall.input?.content||""),i=v(()=>o.value.split(`
`)),a=v(()=>i.value.length),r=v(()=>a.value>$s),m=v(()=>i.value.slice(0,$s).join(`
`)),p=v(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),f=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),c=v(()=>{if(!p.value)return"";const E=e.toolCall.result;return E.content!==void 0?typeof E.content=="string"?E.content:JSON.stringify(E.content,null,2):E.message?E.message:JSON.stringify(E,null,2)});return(E,g)=>(l(),d("div",Fa,[s("div",Ba,[s("div",qa,[g[0]||(g[0]=s("span",{class:"file-icon"},"ðŸ“",-1)),g[1]||(g[1]=s("strong",null,"Writing:",-1)),s("code",Ua,$(t.value),1)]),s("div",za,[s("div",Ka,[g[2]||(g[2]=s("span",{class:"content-label"},"Content:",-1)),s("span",Ga,$(a.value)+" lines",1),r.value?(l(),d("span",Ya,"(showing first "+$($s)+")")):M("",!0)]),s("pre",Ja,$(m.value),1),r.value?(l(),d("div",Qa,"...")):M("",!0)])]),p.value?(l(),d("div",Xa,[f.value?(l(),d("div",Za,[g[3]||(g[3]=s("strong",null,"Error:",-1)),s("pre",er,$(c.value),1)])):(l(),d("div",tr,[s("div",sr,[g[4]||(g[4]=s("span",{class:"success-icon"},"âœ…",-1)),s("strong",null,"File created successfully ("+$(a.value)+" lines written)",1)])]))])):M("",!0)]))}},or=ne(nr,[["__scopeId","data-v-ddc24a0f"]]),ir={class:"bash-tool-handler"},ar={class:"tool-section"},rr={class:"bash-header"},lr={class:"bash-header-content"},cr={key:0,class:"bash-description"},ur={key:1,class:"bash-flags"},dr={class:"bash-command-section"},mr={class:"bash-command-content"},pr={key:0,class:"tool-section"},fr={key:0,class:"bash-output"},vr={key:1,class:"bash-output-empty"},hr={__name:"BashToolHandler",props:{toolCall:{type:Object,required:!0}},setup(n){const e=n,t=v(()=>e.toolCall.input?.command||""),o=v(()=>e.toolCall.input?.description||""),i=v(()=>e.toolCall.input?.timeout),a=v(()=>e.toolCall.input?.run_in_background||!1),r=v(()=>i.value||a.value),m=v(()=>{const g=[];return i.value&&g.push(`timeout: ${i.value}ms`),a.value&&g.push("background"),g.join(", ")}),p=v(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),f=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),c=v(()=>f.value?"tool-result-error":"tool-result-success"),E=v(()=>{if(!p.value)return"";const g=e.toolCall.result;return g.content!==void 0?typeof g.content=="string"?g.content:JSON.stringify(g.content,null,2):g.message?g.message:JSON.stringify(g,null,2)});return(g,w)=>(l(),d("div",ir,[s("div",ar,[s("div",rr,[w[1]||(w[1]=s("span",{class:"bash-icon"},"ðŸ’»",-1)),s("div",lr,[o.value?(l(),d("div",cr,[w[0]||(w[0]=s("strong",null,"Description:",-1)),Z(" "+$(o.value),1)])):M("",!0),r.value?(l(),d("div",ur,$(m.value),1)):M("",!0)])]),s("div",dr,[w[2]||(w[2]=s("div",{class:"bash-command-label"},[s("strong",null,"Command:")],-1)),s("div",mr,$(t.value),1)])]),p.value?(l(),d("div",pr,[s("div",{class:X(["tool-result",c.value])},[w[3]||(w[3]=s("strong",null,"Output:",-1)),E.value?(l(),d("pre",fr,$(E.value),1)):(l(),d("div",vr,"No output"))],2)])):M("",!0)]))}},_r=ne(hr,[["__scopeId","data-v-ab50fe73"]]),gr={class:"todo-tool-handler"},br={class:"tool-section"},yr={class:"todo-header"},wr={class:"todo-summary"},$r={key:0,class:"todo-count todo-count-completed"},Er={key:1,class:"todo-count todo-count-in-progress"},Sr={key:2,class:"todo-count todo-count-pending"},Cr={class:"todo-checklist"},kr={class:"todo-checkbox"},Tr={class:"todo-content"},xr={key:0,class:"tool-section"},Ar={key:0,class:"tool-result tool-result-error"},Or={class:"tool-code"},Mr={key:1,class:"tool-result tool-result-success"},Dr={class:"success-message"},Nr={__name:"TodoToolHandler",props:{toolCall:{type:Object,required:!0}},setup(n){const e=n,t=v(()=>e.toolCall.input?.todos||[]),o=v(()=>t.value.filter(c=>c.status==="completed").length),i=v(()=>t.value.filter(c=>c.status==="in_progress").length),a=v(()=>t.value.filter(c=>c.status==="pending").length);function r(c){return{pending:"â˜",in_progress:"â—",completed:"â˜‘"}[c]||"â˜"}const m=v(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),p=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),f=v(()=>{if(!m.value)return"";const c=e.toolCall.result;return c.content!==void 0?typeof c.content=="string"?c.content:JSON.stringify(c.content,null,2):c.message?c.message:JSON.stringify(c,null,2)});return(c,E)=>(l(),d("div",gr,[s("div",br,[s("div",yr,[E[0]||(E[0]=s("span",{class:"todo-icon"},"ðŸ“‹",-1)),E[1]||(E[1]=s("strong",null,"Task List:",-1)),s("div",wr,[o.value>0?(l(),d("span",$r,$(o.value)+" completed ",1)):M("",!0),i.value>0?(l(),d("span",Er,$(i.value)+" in progress ",1)):M("",!0),a.value>0?(l(),d("span",Sr,$(a.value)+" pending ",1)):M("",!0)])]),s("div",Cr,[(l(!0),d(re,null,ue(t.value,(g,w)=>(l(),d("div",{key:w,class:X(["todo-item",`todo-${g.status}`])},[s("span",kr,$(r(g.status)),1),s("span",Tr,$(g.content),1)],2))),128))])]),m.value?(l(),d("div",xr,[p.value?(l(),d("div",Ar,[E[2]||(E[2]=s("strong",null,"Error:",-1)),s("pre",Or,$(f.value),1)])):(l(),d("div",Mr,[s("div",Dr,[E[3]||(E[3]=s("span",{class:"success-icon"},"âœ…",-1)),s("strong",null,"Task list updated ("+$(t.value.length)+" tasks)",1)])]))])):M("",!0)]))}},Lr=ne(Nr,[["__scopeId","data-v-bbe55ee7"]]),Ir={class:"edit-tool-handler"},jr={class:"tool-section"},Pr={class:"edit-file-info"},Rr={class:"file-path"},Wr={key:0,class:"replace-all-badge"},Hr={class:"edit-diff-container"},Vr={class:"diff-header"},Fr={class:"diff-stats"},Br={class:"stat-removed"},qr={class:"stat-added"},Ur={class:"unified-diff"},zr={class:"diff-scroll-container"},Kr={class:"diff-marker"},Gr={class:"diff-content"},Yr={key:0,class:"tool-section"},Jr={key:0,class:"tool-result tool-result-error"},Qr={class:"tool-code"},Xr={key:1,class:"tool-result tool-result-success"},Zr={class:"success-message"},el={key:0,class:"success-detail"},tl={__name:"EditToolHandler",props:{toolCall:{type:Object,required:!0}},setup(n){const e=n,t=v(()=>e.toolCall.input?.file_path||"Unknown"),o=v(()=>e.toolCall.input?.old_string||""),i=v(()=>e.toolCall.input?.new_string||""),a=v(()=>e.toolCall.input?.replace_all||!1),r=v(()=>{const w=yi(t.value,o.value,i.value,"","",{context:3}).split(`
`),y=[];for(let b=4;b<w.length;b++){const u=w[b];u&&(u.startsWith("-")?y.push({type:"removed",content:u.substring(1)}):u.startsWith("+")?y.push({type:"added",content:u.substring(1)}):u.startsWith(" ")?y.push({type:"context",content:u.substring(1)}):u.startsWith("@@")&&y.push({type:"hunk",content:u}))}return y}),m=v(()=>r.value.filter(g=>g.type==="removed").length),p=v(()=>r.value.filter(g=>g.type==="added").length),f=v(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),c=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),E=v(()=>{if(!f.value)return"";const g=e.toolCall.result;return g.content!==void 0?typeof g.content=="string"?g.content:JSON.stringify(g.content,null,2):g.message?g.message:JSON.stringify(g,null,2)});return(g,w)=>(l(),d("div",Ir,[s("div",jr,[s("div",Pr,[w[0]||(w[0]=s("span",{class:"file-icon"},"âœï¸",-1)),w[1]||(w[1]=s("strong",null,"Editing:",-1)),s("code",Rr,$(t.value),1),a.value?(l(),d("span",Wr,"Replace All")):M("",!0)]),s("div",Hr,[s("div",Vr,[w[2]||(w[2]=s("span",{class:"diff-label"},"Changes:",-1)),s("span",Fr,[s("span",Br,"-"+$(m.value),1),s("span",qr,"+"+$(p.value),1)])]),s("div",Ur,[s("div",zr,[(l(!0),d(re,null,ue(r.value,(y,b)=>(l(),d("div",{key:b,class:X(["diff-line",{"diff-line-removed":y.type==="removed","diff-line-added":y.type==="added","diff-line-context":y.type==="context","diff-line-hunk":y.type==="hunk"}])},[s("span",Kr,$(y.type==="removed"?"-":y.type==="added"?"+":y.type==="hunk"?"@":" "),1),s("span",Gr,$(y.content),1)],2))),128))])])])]),f.value?(l(),d("div",Yr,[c.value?(l(),d("div",Jr,[w[3]||(w[3]=s("strong",null,"Error:",-1)),s("pre",Qr,$(E.value),1)])):(l(),d("div",Xr,[s("div",Zr,[w[4]||(w[4]=s("span",{class:"success-icon"},"âœ…",-1)),w[5]||(w[5]=s("strong",null,"File edited successfully",-1)),a.value?(l(),d("span",el,"(all occurrences replaced)")):M("",!0)])]))])):M("",!0)]))}},sl=ne(tl,[["__scopeId","data-v-dd74055e"]]),nl={class:"search-tool-handler"},ol={class:"tool-section"},il={class:"search-info"},al={class:"search-icon"},rl={class:"search-pattern"},ll={key:0,class:"search-path"},cl={key:1,class:"search-filters"},ul={key:0,class:"filter-badge"},dl={key:1,class:"filter-badge"},ml={key:2,class:"filter-badge"},pl={key:0,class:"tool-section"},fl={key:0,class:"tool-result tool-result-error"},vl={class:"tool-code"},hl={key:1,class:"search-results"},_l={class:"results-header"},gl={class:"results-label"},bl={class:"results-count-badge"},yl={class:"results-content"},wl={class:"tool-code"},$l={__name:"SearchToolHandler",props:{toolCall:{type:Object,required:!0}},setup(n){const e=n,t=v(()=>e.toolCall.name==="Grep"),o=v(()=>e.toolCall.input?.pattern||"Unknown"),i=v(()=>e.toolCall.input?.path||null),a=v(()=>e.toolCall.input?.type||null),r=v(()=>e.toolCall.input?.glob||null),m=v(()=>e.toolCall.input?.["-i"]||!1),p=v(()=>a.value||r.value||m.value),f=v(()=>t.value?"ðŸ”":"ðŸ“"),c=v(()=>t.value?"Searching content":"Finding files"),E=v(()=>t.value?"Matches":"Files found"),g=v(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),w=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),y=v(()=>{if(!g.value)return"";const u=e.toolCall.result;return u.content!==void 0?typeof u.content=="string"?u.content:JSON.stringify(u.content,null,2):u.message?u.message:JSON.stringify(u,null,2)}),b=v(()=>!g.value||w.value||!y.value?0:y.value.split(`
`).filter(h=>h.trim()).length);return(u,h)=>(l(),d("div",nl,[s("div",ol,[s("div",il,[s("span",al,$(f.value),1),s("strong",null,$(c.value)+":",1),s("code",rl,$(o.value),1),i.value?(l(),d("span",ll,"in "+$(i.value),1)):M("",!0),p.value?(l(),d("span",cl,[a.value?(l(),d("span",ul,"type: "+$(a.value),1)):M("",!0),r.value?(l(),d("span",dl,"glob: "+$(r.value),1)):M("",!0),m.value?(l(),d("span",ml,"case-insensitive")):M("",!0)])):M("",!0)])]),g.value?(l(),d("div",pl,[w.value?(l(),d("div",fl,[h[0]||(h[0]=s("strong",null,"Error:",-1)),s("pre",vl,$(y.value),1)])):(l(),d("div",hl,[s("div",_l,[s("span",gl,$(E.value)+":",1),s("span",bl,$(b.value)+" "+$(b.value===1?"match":"matches"),1)]),s("div",yl,[s("pre",wl,$(y.value),1)])]))])):M("",!0)]))}},_n=ne($l,[["__scopeId","data-v-0d272c39"]]),El={class:"web-tool-handler"},Sl={class:"tool-section"},Cl={class:"web-info"},kl={class:"web-icon"},Tl=["href"],xl={key:1,class:"web-query"},Al={key:0,class:"web-prompt-container"},Ol={class:"prompt-content"},Ml={key:1,class:"web-domains"},Dl={class:"domains-label"},Nl={key:0,class:"tool-section"},Ll={key:0,class:"tool-result tool-result-error"},Il={class:"tool-code"},jl={key:1,class:"web-results"},Pl={class:"results-header"},Rl={class:"results-label"},Wl={class:"results-content"},Hl={class:"tool-code"},Vl={__name:"WebToolHandler",props:{toolCall:{type:Object,required:!0}},setup(n){const e=n,t=v(()=>e.toolCall.name==="WebFetch"),o=v(()=>e.toolCall.input?.url||null),i=v(()=>e.toolCall.input?.query||null),a=v(()=>e.toolCall.input?.prompt||null),r=v(()=>e.toolCall.input?.allowed_domains||[]),m=v(()=>e.toolCall.input?.blocked_domains||[]),p=v(()=>r.value.length>0?r.value:m.value.length>0?m.value:[]),f=v(()=>r.value.length>0?"Allowed domains":m.value.length>0?"Blocked domains":"Domains"),c=v(()=>t.value?"ðŸŒ":"ðŸ”Ž"),E=v(()=>t.value?"Fetching URL":"Searching web"),g=v(()=>t.value?"Fetched content":"Search results"),w=v(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),y=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),b=v(()=>{if(!w.value)return"";const u=e.toolCall.result;return u.content!==void 0?typeof u.content=="string"?u.content:JSON.stringify(u.content,null,2):u.message?u.message:JSON.stringify(u,null,2)});return(u,h)=>(l(),d("div",El,[s("div",Sl,[s("div",Cl,[s("span",kl,$(c.value),1),s("strong",null,$(E.value)+":",1),o.value?(l(),d("a",{key:0,href:o.value,target:"_blank",class:"web-url"},$(o.value),9,Tl)):i.value?(l(),d("code",xl,$(i.value),1)):M("",!0)]),a.value?(l(),d("div",Al,[h[0]||(h[0]=s("div",{class:"prompt-label"},"Prompt:",-1)),s("div",Ol,$(a.value),1)])):M("",!0),p.value.length>0?(l(),d("div",Ml,[s("span",Dl,$(f.value)+":",1),(l(!0),d(re,null,ue(p.value,_=>(l(),d("span",{key:_,class:"domain-badge"},$(_),1))),128))])):M("",!0)]),w.value?(l(),d("div",Nl,[y.value?(l(),d("div",Ll,[h[1]||(h[1]=s("strong",null,"Error:",-1)),s("pre",Il,$(b.value),1)])):(l(),d("div",jl,[s("div",Pl,[s("span",Rl,$(g.value)+":",1)]),s("div",Wl,[s("pre",Hl,$(b.value),1)])]))])):M("",!0)]))}},gn=ne(Vl,[["__scopeId","data-v-62b55b55"]]),Fl={class:"task-tool-handler"},Bl={class:"tool-section"},ql={class:"task-header"},Ul={key:0,class:"agent-type-badge"},zl={key:0,class:"task-description"},Kl={class:"description-content"},Gl={key:1,class:"task-prompt-container"},Yl={class:"prompt-header"},Jl={class:"prompt-length"},Ql={class:"prompt-code"},Xl={key:0,class:"tool-section"},Zl={key:0,class:"tool-result tool-result-error"},ec={class:"tool-code"},tc={key:1,class:"agent-output"},sc={class:"output-header"},nc={key:0,class:"output-count-badge"},oc={class:"output-content"},ic={class:"tool-code"},ac={__name:"TaskToolHandler",props:{toolCall:{type:Object,required:!0}},setup(n){const e=n,t=v(()=>e.toolCall.input?.description||null),o=v(()=>e.toolCall.input?.prompt||null),i=v(()=>e.toolCall.input?.subagent_type||null),a=v(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),r=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),m=v(()=>{if(!a.value)return"";const f=e.toolCall.result;return f.content!==void 0?typeof f.content=="string"?f.content:JSON.stringify(f.content,null,2):f.message?f.message:JSON.stringify(f,null,2)}),p=v(()=>m.value?m.value.split(`
`).length:0);return(f,c)=>(l(),d("div",Fl,[s("div",Bl,[s("div",ql,[c[0]||(c[0]=s("span",{class:"task-icon"},"ðŸ¤–",-1)),c[1]||(c[1]=s("strong",null,"Agent Task:",-1)),i.value?(l(),d("span",Ul,$(i.value),1)):M("",!0)]),t.value?(l(),d("div",zl,[c[2]||(c[2]=s("div",{class:"description-label"},"Description:",-1)),s("div",Kl,$(t.value),1)])):M("",!0),o.value?(l(),d("div",Gl,[s("div",Yl,[c[3]||(c[3]=s("span",{class:"prompt-label"},"Task Prompt:",-1)),s("span",Jl,$(o.value.length)+" characters",1)]),s("pre",Ql,$(o.value),1)])):M("",!0)]),a.value?(l(),d("div",Xl,[r.value?(l(),d("div",Zl,[c[4]||(c[4]=s("strong",null,"Error:",-1)),s("pre",ec,$(m.value),1)])):(l(),d("div",tc,[s("div",sc,[c[5]||(c[5]=s("span",{class:"output-label"},"Agent Output:",-1)),p.value>0?(l(),d("span",nc,$(p.value)+" lines",1)):M("",!0)]),s("div",oc,[s("pre",ic,$(m.value),1)])]))])):M("",!0)]))}},rc=ne(ac,[["__scopeId","data-v-c520c244"]]),lc={class:"notebook-edit-tool-handler"},cc={class:"tool-section"},uc={class:"notebook-info"},dc={class:"file-path"},mc={class:"cell-info mt-2"},pc={class:"info-row"},fc={class:"info-row"},vc={key:0,class:"info-row"},hc={class:"badge bg-info"},_c={key:0,class:"source-preview mt-3"},gc={class:"preview-header"},bc={class:"preview-stats"},yc={class:"source-code"},wc={key:0,class:"tool-section"},$c={key:0},Ec={key:1,class:"text-danger"},Sc={__name:"NotebookEditToolHandler",props:{toolCall:{type:Object,required:!0}},setup(n){const e=n,t=v(()=>e.toolCall.input?.notebook_path||"Unknown"),o=v(()=>e.toolCall.input?.cell_id),i=v(()=>e.toolCall.input?.cell_type||"code"),a=v(()=>e.toolCall.input?.edit_mode||"replace"),r=v(()=>e.toolCall.input?.new_source||""),m=v(()=>r.value.split(`
`).length),p=v(()=>i.value==="code"?"bg-primary":"bg-secondary"),f=v(()=>e.toolCall.result?.success===!1?"tool-result-error":"tool-result-success"),c=v(()=>{if(e.toolCall.result?.message)return e.toolCall.result.message;const E=a.value;return E==="insert"?"Cell inserted successfully":E==="delete"?"Cell deleted successfully":"Cell updated successfully"});return(E,g)=>(l(),d("div",lc,[s("div",cc,[s("div",uc,[g[0]||(g[0]=s("span",{class:"notebook-icon"},"ðŸ““",-1)),g[1]||(g[1]=s("strong",null,"Notebook:",-1)),s("code",dc,$(t.value),1)]),s("div",mc,[s("div",pc,[g[2]||(g[2]=s("strong",null,"Cell ID:",-1)),s("code",null,$(o.value||"N/A"),1)]),s("div",fc,[g[3]||(g[3]=s("strong",null,"Cell Type:",-1)),s("span",{class:X(["badge",p.value])},$(i.value),3)]),a.value?(l(),d("div",vc,[g[4]||(g[4]=s("strong",null,"Edit Mode:",-1)),s("span",hc,$(a.value),1)])):M("",!0)]),r.value?(l(),d("div",_c,[s("div",gc,[g[5]||(g[5]=s("span",{class:"preview-label"},"New Source:",-1)),s("span",bc,$(m.value)+" lines",1)]),s("pre",yc,[s("code",null,$(r.value),1)])])):M("",!0)]),n.toolCall.result?(l(),d("div",wc,[g[6]||(g[6]=s("div",{class:"result-header mb-2"},[s("strong",null,"Result:")],-1)),s("div",{class:X(["tool-result",f.value])},[n.toolCall.result.success!==!1?(l(),d("div",$c," âœ… "+$(c.value),1)):(l(),d("div",Ec," â— "+$(n.toolCall.result.error||"Operation failed"),1))],2)])):M("",!0)]))}},Cc=ne(Sc,[["__scopeId","data-v-c81a9bcf"]]),kc={class:"shell-tool-handler"},Tc={class:"tool-section"},xc={class:"shell-info"},Ac={class:"shell-icon"},Oc={key:0,class:"shell-id"},Mc={key:0,class:"filter-info mt-2"},Dc={class:"filter-pattern"},Nc={key:0,class:"tool-section"},Lc={class:"result-header mb-2"},Ic={key:0,class:"mb-2"},jc={class:"shell-output"},Pc={key:1,class:"mb-2"},Rc={class:"shell-output shell-output-error"},Wc={key:0},Hc={key:1,class:"text-danger"},Vc={__name:"ShellToolHandler",props:{toolCall:{type:Object,required:!0}},setup(n){const e=n,t=v(()=>e.toolCall.name==="BashOutput"?"ðŸ“¤":e.toolCall.name==="KillShell"?"ðŸ›‘":"ðŸš"),o=v(()=>e.toolCall.name==="BashOutput"?"Reading Shell Output":e.toolCall.name==="KillShell"?"Terminating Shell":"Shell Operation"),i=v(()=>e.toolCall.name==="BashOutput"?"Output":e.toolCall.name==="KillShell"?"Status":"Result"),a=v(()=>e.toolCall.input?.bash_id||e.toolCall.input?.shell_id),r=v(()=>e.toolCall.input?.filter);function m(w,y){if(!w)return null;const b=new RegExp(`<${y}>([\\s\\S]*?)<\\/${y}>`,"i"),u=w.match(b);return u?u[1].trim():null}const p=v(()=>{const w=e.toolCall.result;if(!w)return null;let y=w;if(w.content&&(y=w.content),typeof y=="string")return{status:m(y,"status"),stdout:m(y,"stdout"),stderr:m(y,"stderr"),exit_code:m(y,"exit_code")};if(Array.isArray(y)){const b=y.find(u=>u.type==="text")?.text||"";return{status:m(b,"status"),stdout:m(b,"stdout"),stderr:m(b,"stderr"),exit_code:m(b,"exit_code")}}return{status:w.status||y.status,stdout:w.stdout||w.output||y.stdout||y.output,stderr:w.stderr||y.stderr,exit_code:w.exit_code||y.exit_code}}),f=v(()=>p.value?.status),c=v(()=>{const w=f.value;return w==="running"?"bg-success":w==="completed"?"bg-secondary":w==="killed"||w==="terminated"?"bg-danger":"bg-info"}),E=v(()=>e.toolCall.result?.success===!1?"tool-result-error":"tool-result-success"),g=v(()=>{if(e.toolCall.result?.message)return e.toolCall.result.message;if(e.toolCall.name==="KillShell")return"Shell terminated successfully";if(e.toolCall.name==="BashOutput"){const w=p.value;if(w?.status==="running"&&!w.stdout&&!w.stderr)return"No new output since last check";if(w?.status==="failed")return`Shell failed (exit code ${w.exit_code||"unknown"})`}return"Operation completed"});return(w,y)=>(l(),d("div",kc,[s("div",Tc,[s("div",xc,[s("span",Ac,$(t.value),1),s("strong",null,$(o.value)+":",1),a.value?(l(),d("code",Oc,"Shell "+$(a.value),1)):M("",!0)]),n.toolCall.name==="BashOutput"&&r.value?(l(),d("div",Mc,[y[0]||(y[0]=s("strong",null,"Filter:",-1)),s("code",Dc,$(r.value),1)])):M("",!0)]),n.toolCall.result?(l(),d("div",Nc,[s("div",Lc,[s("strong",null,$(i.value)+":",1),f.value?(l(),d("span",{key:0,class:X(["badge",c.value])},$(f.value),3)):M("",!0)]),p.value?.stdout?(l(),d("div",Ic,[y[1]||(y[1]=s("div",{class:"output-label"},"Output:",-1)),s("div",jc,[s("pre",null,[s("code",null,$(p.value.stdout),1)])])])):M("",!0),p.value?.stderr?(l(),d("div",Pc,[y[2]||(y[2]=s("div",{class:"output-label text-danger"}," â— Errors: ",-1)),s("div",Rc,[s("pre",null,[s("code",null,$(p.value.stderr),1)])])])):M("",!0),!p.value?.stdout&&!p.value?.stderr?(l(),d("div",{key:2,class:X(["tool-result",E.value])},[n.toolCall.result.success!==!1?(l(),d("div",Wc," âœ… "+$(g.value),1)):(l(),d("div",Hc," â— "+$(n.toolCall.result.error||"Operation failed"),1))],2)):M("",!0)])):M("",!0)]))}},bn=ne(Vc,[["__scopeId","data-v-86def281"]]),Fc={class:"skill-tool-handler"},Bc={key:0,class:"tool-section"},qc={class:"d-flex align-items-center gap-2"},Uc={class:"text-muted small"},zc={key:0,class:"skill-content-body"},Kc={class:"skill-content-text"},Gc={key:1,class:"tool-section mt-3"},Yc={class:"tool-result tool-result-error"},Jc={class:"tool-code"},Qc={__name:"SkillToolHandler",props:{toolCall:{type:Object,required:!0}},setup(n){const e=n,t=Me(),o=de(),i=j(!1);function a(){i.value=!i.value}const r=v(()=>{const g=o.currentSessionId;if(!g)return{running:null,content:null};const w=t.messagesBySession.get(g)||[],y=w.findIndex(h=>h.type==="user"&&h.metadata?.has_tool_results&&h.metadata?.tool_results?.some(_=>_.tool_use_id===e.toolCall.id));if(y===-1)return{running:null,content:null};let b=null,u=null;for(let h=y+1;h<Math.min(y+3,w.length);h++){const _=w[h];if(_.type!=="user")continue;const k=_.content||"";k.includes("<command-message>")&&k.includes("skill is running")?b=_:k.startsWith("Base directory for this skill:")&&(u=_)}return{running:b,content:u}}),m=v(()=>{const g=r.value.content;if(!g)return"";const w=g.content||"",y=/Base directory(?:\s+for\s+this\s+skill)?:.*?\n/i;return w.replace(y,"").trim()}),p=v(()=>m.value.length>0),f=v(()=>m.value?m.value.split(`
`).length:0),c=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),E=v(()=>{if(!c.value)return"";const g=e.toolCall.result;return g?.message?g.message:g?.error?g.error:"An error occurred"});return(g,w)=>(l(),d("div",Fc,[p.value?(l(),d("div",Bc,[s("div",{class:"skill-content-header",onClick:a},[s("div",qc,[s("i",{class:X(["bi",i.value?"bi-chevron-down":"bi-chevron-right"])},null,2),w[0]||(w[0]=s("strong",null,"Skill Content",-1)),s("span",Uc,"("+$(f.value)+" lines)",1)])]),i.value?(l(),d("div",zc,[s("pre",Kc,$(m.value),1)])):M("",!0)])):M("",!0),c.value?(l(),d("div",Gc,[w[1]||(w[1]=s("div",{class:"tool-section-label text-danger"}," â— Error: ",-1)),s("div",Yc,[s("pre",Jc,$(E.value),1)])])):M("",!0)]))}},Xc=ne(Qc,[["__scopeId","data-v-0a48ca0f"]]),Zc={class:"slashcommand-tool-handler"},eu={key:0,class:"tool-section"},tu={class:"d-flex align-items-center gap-2"},su=["aria-label"],nu={class:"text-muted small"},ou={key:0,class:"command-content-body"},iu={class:"command-content-text"},au={key:1,class:"tool-section mt-3"},ru={class:"tool-result tool-result-error"},lu={class:"tool-code"},cu={__name:"SlashCommandToolHandler",props:{toolCall:{type:Object,required:!0}},setup(n){const e=n,t=Me(),o=de(),i=j(!1);function a(){i.value=!i.value}const r=v(()=>{const g=o.currentSessionId;if(!g)return{running:null,content:null};const w=t.messagesBySession.get(g)||[],y=w.findIndex(h=>h.type==="user"&&h.metadata?.has_tool_results&&h.metadata?.tool_results?.some(_=>_.tool_use_id===e.toolCall.id));if(y===-1)return{running:null,content:null};let b=null,u=null;for(let h=y+1;h<Math.min(y+3,w.length);h++){const _=w[h];if(_.type!=="user")continue;const k=_.content||"";k.includes("<command-message>")&&k.includes("<command-name>")&&k.includes("<command-args>")?b=_:k.includes("ARGUMENTS:")&&(u=_)}return{running:b,content:u}}),m=v(()=>{const g=r.value.content;if(!g)return"";const w=g.content||"",y=/\nARGUMENTS:.*$/s;return w.replace(y,"").replace(/<command-message>.*?<\/command-message>/s,"").replace(/<command-name>.*?<\/command-name>/s,"").replace(/<command-args>.*?<\/command-args>/s,"").trim()}),p=v(()=>m.value.length>0),f=v(()=>m.value?m.value.split(`
`).length:0),c=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),E=v(()=>{if(!c.value)return"";const g=e.toolCall.result;return g?.message?g.message:g?.error?g.error:"An error occurred"});return(g,w)=>(l(),d("div",Zc,[p.value?(l(),d("div",eu,[s("div",{class:"command-content-header",onClick:a},[s("div",tu,[s("span",{"aria-label":i.value?"Collapse":"Expand"},$(i.value?"â–¾":"â–¸"),9,su),w[0]||(w[0]=s("strong",null,"Command Content",-1)),s("span",nu,"("+$(f.value)+" lines)",1)])]),i.value?(l(),d("div",ou,[s("pre",iu,$(m.value),1)])):M("",!0)])):M("",!0),c.value?(l(),d("div",au,[w[1]||(w[1]=s("div",{class:"tool-section-label text-danger"}," â— Error: ",-1)),s("div",ru,[s("pre",lu,$(E.value),1)])])):M("",!0)]))}},uu=ne(cu,[["__scopeId","data-v-15991acf"]]),du={class:"exit-plan-mode-tool-handler"},mu={class:"tool-section"},pu={key:0,class:"plan-content mt-2"},fu={class:"plan-text"},vu={key:0,class:"tool-section"},hu={key:0},_u={key:1,class:"text-danger"},gu={__name:"ExitPlanModeToolHandler",props:{toolCall:{type:Object,required:!0}},setup(n){const e=n,t=v(()=>e.toolCall.input?.plan),o=v(()=>e.toolCall.result?.success===!1?"tool-result-error":"tool-result-success");return(i,a)=>(l(),d("div",du,[s("div",mu,[a[1]||(a[1]=s("div",{class:"plan-info"},[s("span",{class:"plan-icon"},"ðŸ“‹"),s("strong",null,"Exiting Plan Mode")],-1)),t.value?(l(),d("div",pu,[a[0]||(a[0]=s("div",{class:"plan-header"},[s("strong",null,"Proposed Plan:")],-1)),s("div",fu,$(t.value),1)])):M("",!0)]),n.toolCall.result?(l(),d("div",vu,[a[2]||(a[2]=s("div",{class:"result-header mb-2"},[s("strong",null,"Result:")],-1)),s("div",{class:X(["tool-result",o.value])},[n.toolCall.result.success!==!1?(l(),d("div",hu," âœ… Permission mode reverted to default ")):(l(),d("div",_u," â— "+$(n.toolCall.result.error||"Failed to exit plan mode"),1))],2)])):M("",!0)]))}},bu=ne(gu,[["__scopeId","data-v-e2e3c781"]]),yu={class:"ask-user-question-handler"},wu={key:0,class:"answers-summary"},$u={class:"answer-question text-muted small"},Eu={class:"answer-value fw-medium"},Su={key:1,class:"text-muted small"},Cu={key:0,class:"questions-container"},ku={class:"question-header d-flex align-items-center gap-2 mb-2"},Tu={key:0,class:"badge bg-secondary"},xu={class:"question-text fw-medium"},Au={class:"options-list"},Ou=["id","checked","onChange"],Mu=["id","name","checked","onChange"],Du=["for"],Nu={class:"option-label"},Lu={key:0,class:"option-description text-muted d-block small"},Iu={class:"option-item form-check other-option"},ju=["id","checked","onChange"],Pu=["id","name","checked","onChange"],Ru=["for"],Wu={key:2,class:"other-input mt-2"},Hu=["onUpdate:modelValue","onInput"],Vu={key:1,class:"alert alert-info mb-0"},Fu={__name:"AskUserQuestionToolHandler",props:{toolCall:{type:Object,required:!0}},emits:["answer"],setup(n,{expose:e,emit:t}){const o=n,i=t,a=v(()=>o.toolCall.status==="completed"||o.toolCall.result!=null),r=v(()=>{if(!a.value)return{};const T=o.toolCall.result;if(T?.content){if(typeof T.content=="object"&&T.content.answers)return T.content.answers;if(typeof T.content=="string")try{const V=JSON.parse(T.content);if(V.answers)return V.answers}catch{}}const H=o.toolCall.input||{};return H.answers?H.answers:{}}),m=v(()=>Object.keys(r.value).length>0),p=v(()=>(o.toolCall.input||{}).questions||[]),f=j({}),c=j({});pe(p,T=>{T.forEach((H,V)=>{V in f.value||(f.value[V]=H.multiSelect?[]:null),V in c.value||(c.value[V]="")})},{immediate:!0});function E(T,H){const V=f.value[T];return Array.isArray(V)?V.includes(H):V===H}function g(T){const H=f.value[T];return Array.isArray(H)?H.includes("__OTHER__"):H==="__OTHER__"}function w(T,H){f.value[T]=H,_()}function y(T){f.value[T]="__OTHER__",_()}function b(T,H){const V=f.value[T];if(!Array.isArray(V))f.value[T]=[H];else{const A=V.indexOf(H);A===-1?V.push(H):V.splice(A,1)}_()}function u(T){const H=f.value[T];if(!Array.isArray(H))f.value[T]=["__OTHER__"];else{const V=H.indexOf("__OTHER__");V===-1?H.push("__OTHER__"):H.splice(V,1)}_()}function h(T){_()}function _(){const T={};p.value.forEach((H,V)=>{const A=f.value[V],W=H.question;if(H.multiSelect){if(Array.isArray(A)&&A.length>0){const S=A.map(C=>C==="__OTHER__"?c.value[V]||"":C).filter(C=>C);T[W]=S.join(", ")}}else A==="__OTHER__"?T[W]=c.value[V]||"":A&&(T[W]=A)}),i("answer",T)}const k=v(()=>p.value.every((T,H)=>{const V=f.value[H];if(T.multiSelect){if(!Array.isArray(V)||V.length===0||V.includes("__OTHER__")&&!c.value[H])return!1}else if(!V||V==="__OTHER__"&&!c.value[H])return!1;return!0}));return e({allQuestionsAnswered:k,getAnswers:()=>{const T={};return p.value.forEach((H,V)=>{const A=f.value[V],W=H.question;if(H.multiSelect){if(Array.isArray(A)&&A.length>0){const S=A.map(C=>C==="__OTHER__"?c.value[V]||"":C).filter(C=>C);T[W]=S.join(", ")}}else A==="__OTHER__"?T[W]=c.value[V]||"":A&&(T[W]=A)}),T}}),(T,H)=>(l(),d("div",yu,[a.value?(l(),d(re,{key:0},[m.value?(l(),d("div",wu,[(l(!0),d(re,null,ue(r.value,(V,A)=>(l(),d("div",{key:A,class:"answer-item mb-2"},[s("div",$u,$(A),1),s("div",Eu,$(V),1)]))),128))])):(l(),d("div",Su," No answers recorded. "))],64)):(l(),d(re,{key:1},[p.value.length>0?(l(),d("div",Cu,[(l(!0),d(re,null,ue(p.value,(V,A)=>(l(),d("div",{key:A,class:"question-block mb-3"},[s("div",ku,[V.header?(l(),d("span",Tu,$(V.header),1)):M("",!0),s("span",xu,$(V.question),1)]),s("div",Au,[(l(!0),d(re,null,ue(V.options,(W,S)=>(l(),d("div",{key:S,class:X(["option-item form-check",{selected:E(A,W.label)}])},[V.multiSelect?(l(),d("input",{key:0,type:"checkbox",class:"form-check-input",id:`q${A}-opt${S}`,checked:E(A,W.label),onChange:C=>b(A,W.label)},null,40,Ou)):(l(),d("input",{key:1,type:"radio",class:"form-check-input",id:`q${A}-opt${S}`,name:`question-${A}`,checked:E(A,W.label),onChange:C=>w(A,W.label)},null,40,Mu)),s("label",{class:"form-check-label",for:`q${A}-opt${S}`},[s("span",Nu,$(W.label),1),W.description?(l(),d("span",Lu,$(W.description),1)):M("",!0)],8,Du)],2))),128)),s("div",Iu,[V.multiSelect?(l(),d("input",{key:0,type:"checkbox",class:"form-check-input",id:`q${A}-other`,checked:g(A),onChange:W=>u(A)},null,40,ju)):(l(),d("input",{key:1,type:"radio",class:"form-check-input",id:`q${A}-other`,name:`question-${A}`,checked:g(A),onChange:W=>y(A)},null,40,Pu)),s("label",{class:"form-check-label",for:`q${A}-other`},[...H[0]||(H[0]=[s("span",{class:"option-label"},"Other",-1)])],8,Ru),g(A)?(l(),d("div",Wu,[ge(s("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":W=>c.value[A]=W,placeholder:"Enter your custom answer...",onInput:W=>h()},null,40,Hu),[[We,c.value[A]]])])):M("",!0)])])]))),128))])):(l(),d("div",Vu," No questions to display. "))],64))]))}},yn=ne(Fu,[["__scopeId","data-v-75ce45b4"]]),Bu={class:"d-flex align-items-center gap-2 flex-grow-1 min-width-0"},qu={class:"tool-status-icon"},Uu=["title"],zu={class:"d-flex align-items-center gap-2"},Ku={class:"text-muted"},Gu=["aria-label"],Yu={key:0,class:"card-body"},Ju={key:0,class:"alert alert-warning mb-3"},Qu={class:"d-flex align-items-center"},Xu={class:"mb-0 small"},Zu={key:2,class:"permission-prompt mt-3"},ed={class:"question-buttons d-flex gap-2 mt-3"},td=["disabled"],sd=["disabled"],nd={class:"alert alert-warning mb-3"},od={class:"mb-0"},id={class:"tool-name"},ad={key:0,class:"suggestions-section mb-3"},rd={class:"alert alert-info mb-0"},ld={class:"suggestion-details p-2 bg-white rounded"},cd={class:"permission-buttons d-flex gap-2 mb-3"},ud=["disabled"],dd=["disabled"],md=["disabled"],pd={class:"guidance-section mt-3"},fd=["disabled"],vd=["disabled"],hd={key:3,class:"mt-3"},_d={class:"alert alert-warning mb-0"},gd={class:"d-flex align-items-center"},bd={class:"mb-0 small"},yd={key:4,class:"tool-section"},wd={class:"alert alert-danger mb-0"},$d={key:0},Ed={__name:"ToolCallCard",props:{toolCall:{type:Object,required:!0}},setup(n){const e=n,t=Me(),o=de(),i=et(),a=j(!1),r=j(null),m=j(""),p=j(null),f=j({}),c=v(()=>e.toolCall.name==="AskUserQuestion"),E=v(()=>!c.value||!p.value?!1:p.value.allQuestionsAnswered);function g(L){f.value=L}async function w(){if(!a.value&&p.value){a.value=!0,r.value="submit-answers";try{const L=o.currentSessionId,D=p.value.getAnswers(),G={questions:e.toolCall.input?.questions||[],answers:D};L&&(t.updateToolCall(L,e.toolCall.id,{input:G}),t.handlePermissionResponse(L,{request_id:e.toolCall.permissionRequestId,decision:"allow",reasoning:"User answered questions",applied_updates:[]})),await i.sendPermissionResponseWithInput(e.toolCall.permissionRequestId,"allow",G)}catch(L){console.error("Failed to submit question answers:",L)}finally{a.value=!1,r.value=null}}}const y=v(()=>t.isToolUseOrphaned(o.currentSessionId,e.toolCall.id)),b=v(()=>t.getOrphanedInfo(o.currentSessionId,e.toolCall.id)),u=v(()=>t.getBackendToolState(o.currentSessionId,e.toolCall.id)),h=v(()=>{if(u.value){const L=u.value.state;return{pending:"pending",permission_required:"permission_required",executing:"executing",completed:"completed",failed:"error",orphaned:"completed"}[L]||L}return e.toolCall.status}),_={Read:Va,Write:or,Bash:_r,TodoWrite:Lr,Edit:sl,Grep:_n,Glob:_n,WebFetch:gn,WebSearch:gn,Task:rc,NotebookEdit:Cc,BashOutput:bn,KillShell:bn,SlashCommand:uu,Skill:Xc,ExitPlanMode:bu,AskUserQuestion:yn},k=v(()=>{const L=e.toolCall.name;return _[L]?_[L]:Ca}),T=v(()=>{const L=[];if(y.value)return L.push("border-warning"),L.join(" ");switch(h.value){case"pending":L.push("border-secondary");break;case"permission_required":L.push("border-warning");break;case"executing":L.push("border-primary");break;case"completed":A.value||e.toolCall.permissionDecision==="deny"?L.push("border-danger"):L.push("border-success");break;case"error":L.push("border-danger");break}return L.join(" ")}),H=v(()=>{if(y.value)return"â¹ï¸";switch(h.value){case"pending":return"ðŸ”„";case"permission_required":return"â“";case"executing":return"âš¡";case"completed":return e.toolCall.permissionDecision==="deny"?"âŒ":A.value?"â—":"âœ…";case"error":return"â—";default:return"ðŸ”§"}}),V=v(()=>Rt(e.toolCall.timestamp)),A=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),W=v(()=>e.toolCall.suggestions&&e.toolCall.suggestions.length>0);function S(L){if(!L)return"";const D=L.replace(/\\/g,"/").split("/");return D[D.length-1]}function C(L){if(!L)return"";const D=L.match(/cd\s+"[^"]+"\s+&&\s+(.+)$/);return D?D[1]:L}function q(L,D=200){return L?L.length<=D?L:L.substring(0,D)+"...":""}function U(L){if(!L)return null;if(L.content){const D=L.content.match(/exit code (\d+)/i);if(D)return parseInt(D[1])}return L.error?1:0}function I(L,D){const G=L?L.split(`
`).length:0;return{added:D?D.split(`
`).length:0,removed:G}}const P=v(()=>{const L=e.toolCall.name,D=e.toolCall.input||{},G=e.toolCall.result,ie=h.value;switch(L){case"Bash":case"Shell":case"Command":{const J=C(D.command),Q=q(J,200);if(ie==="completed"&&G){const ae=U(G);return`Bash: ${Q} (exit ${ae})`}return`Bash: ${Q}`}case"SlashCommand":{const J=q(D.command,200);return ie==="completed"&&G?`SlashCommand: ${J}`:`SlashCommand: ${J}`}case"Edit":{const J=S(D.file_path);if(ie==="completed"&&G&&!G.error){const{added:Q,removed:ae}=I(D.old_string,D.new_string);return Q===ae?`Edit: ${J} (${Q} lines changed)`:`Edit: ${J} (${Q} lines added, ${ae} removed)`}return`Edit: ${J}`}case"Read":{const J=S(D.file_path);if(D.offset!==void 0||D.limit!==void 0){const ae=(D.offset||0)+1,me=D.limit?(D.offset||0)+D.limit:"âˆž";return`Read: ${J} (lines ${ae}-${me})`}return`Read: ${J} (full file)`}case"Write":{const J=S(D.file_path);if(ie==="completed"&&G&&!G.error&&D.content){const Q=D.content.split(`
`).length;return`Write: ${J} (${Q} lines written)`}return`Write: ${J}`}case"Skill":{const J=D.skill||"Unknown";return ie==="completed"&&G?G.error?`Skill: ${J} (error)`:`Skill: ${J} (completed)`:`Skill: ${J}`}case"Task":{const J=D.subagent_type||"general",Q=D.description||"Task";return ie==="completed"&&G?G.error?`Task: (${J}) ${Q} (error)`:`Task: (${J}) ${Q} (completed)`:`Task: (${J}) ${Q}`}case"TodoWrite":{if(D.todos&&Array.isArray(D.todos)){const J=D.todos.filter(me=>me.status==="completed").length,Q=D.todos.length,ae=D.todos.find(me=>me.status==="in_progress");return ae?`Todo: Working on "${ae.content}"`:`Todo: ${J}/${Q} Tasks Completed`}return"Todo: Updated"}case"Grep":case"Glob":{const J=D.pattern||"",Q=L==="Grep"?"Grep":"Glob";if(ie==="completed"&&G&&!G.error){let ae=0;return G.content&&(ae=G.content.split(`
`).filter(R=>R.trim()).length),`${Q}: "${J}" (${ae} results)`}return`${Q}: "${J}"`}case"WebFetch":case"WebSearch":{const J=D.url||D.query||"";if(L==="WebSearch"){const ae=D.query||"",me=ae.length>50?ae.substring(0,50)+"...":ae;return ie==="completed"&&G?G.error?`Web: ${me} (error)`:`Web: ${me} (success)`:`Web: ${me}`}let Q="";try{J&&(Q=new URL(J.startsWith("http")?J:`https://${J}`).hostname)}catch{Q=J.length>50?J.substring(0,50)+"...":J}return ie==="completed"&&G?G.error?`Web: ${Q} (error)`:`Web: ${Q} (success)`:`Web: ${Q||J}`}case"NotebookEdit":{const J=S(D.notebook_path),Q=D.cell_number!==void 0?D.cell_number:"?",ae=D.edit_mode||"replace";return`NotebookEdit: ${J} cell #${Q} (${ae})`}case"ExitPlanMode":return"ExitPlanMode: Plan submitted";case"BashOutput":return`BashOutput: Read output from ${D.bash_id||"unknown"}`;case"KillShell":return`KillShell: Terminate ${D.shell_id||"unknown"}`;case"AskUserQuestion":{const Q=(D.questions||[]).length;return ie==="completed"&&G&&!G.error?`AskUserQuestion: ${Q} question(s) answered`:ie==="permission_required"?`AskUserQuestion: ${Q} question(s) awaiting response`:`AskUserQuestion: ${Q} question(s)`}default:return`${L}: executed`}}),F=v(()=>{const L=e.toolCall.name,D=e.toolCall.input||{};return["Bash","Shell","Command","SlashCommand"].includes(L)?D.command||L:["Edit","Read","Write","NotebookEdit"].includes(L)&&(D.file_path||D.notebook_path)||L});function x(){const L=o.currentSessionId;L&&t.toggleToolExpansion(L,e.toolCall.id)}function O(L){return L.type==="setMode"?`Set permission mode to "${L.mode}"`:L.type==="allow"?`Allow tool: ${L.tool}`:JSON.stringify(L)}async function z(L,D,G=null){if(!a.value){a.value=!0,L==="allow"?r.value=D?"approve-apply":"approve":G?r.value="deny-guidance":r.value="deny";try{const ie=o.currentSessionId;if(ie){const J=D&&e.toolCall.suggestions?e.toolCall.suggestions:[];t.handlePermissionResponse(ie,{request_id:e.toolCall.permissionRequestId,decision:L,reasoning:L==="allow"?"User allowed permission":"User denied permission",applied_updates:J})}await i.sendPermissionResponse(e.toolCall.permissionRequestId,L,D,G)}catch(ie){console.error("Failed to send permission response:",ie)}finally{a.value=!1,r.value=null}}}return(L,D)=>(l(),d("div",{class:X(["tool-call-card card",T.value])},[s("div",{class:"card-header d-flex align-items-center justify-content-between cursor-pointer",onClick:x},[s("div",Bu,[s("span",qu,$(H.value),1),s("span",{class:"tool-name",title:F.value},$(P.value),9,Uu)]),s("div",zu,[s("small",Ku,$(V.value),1),s("span",{"aria-label":n.toolCall.isExpanded?"Collapse":"Expand"},$(n.toolCall.isExpanded?"â–¾":"â–¸"),9,Gu)])]),n.toolCall.isExpanded?(l(),d("div",Yu,[y.value?(l(),d("div",Ju,[s("div",Qu,[D[7]||(D[7]=s("span",{class:"me-2",style:{"font-size":"1.2rem"}},"â¹ï¸",-1)),s("div",null,[D[6]||(D[6]=s("strong",null,"Tool Execution Cancelled",-1)),s("p",Xu,$(b.value?.message||"Session was terminated"),1)])])])):M("",!0),c.value&&h.value==="permission_required"?M("",!0):(l(),we(io(k.value),{key:1,toolCall:n.toolCall},null,8,["toolCall"])),h.value==="permission_required"&&!y.value?(l(),d("div",Zu,[c.value?(l(),d(re,{key:0},[D[8]||(D[8]=s("div",{class:"alert alert-info mb-3"},[s("p",{class:"mb-0"},[s("strong",null,"â“ Claude is asking for your input")])],-1)),fe(yn,{ref_key:"questionHandlerRef",ref:p,toolCall:n.toolCall,onAnswer:g},null,8,["toolCall"]),s("div",ed,[s("button",{class:"btn btn-primary",onClick:w,disabled:a.value||!E.value},$(a.value?"â³ Submitting...":"ðŸ“¤ Submit Answers"),9,td),s("button",{class:"btn btn-outline-secondary",onClick:D[0]||(D[0]=G=>z("deny",!1)),disabled:a.value}," Skip Question ",8,sd)])],64)):(l(),d(re,{key:1},[s("div",nd,[D[11]||(D[11]=s("p",{class:"mb-2"},[s("strong",null,"ðŸ” Permission Required")],-1)),s("p",od,[D[9]||(D[9]=Z("Claude wants to use the ",-1)),s("code",id,$(n.toolCall.name),1),D[10]||(D[10]=Z(" tool.",-1))])]),W.value?(l(),d("div",ad,[s("div",rd,[D[12]||(D[12]=s("h6",{class:"mb-2"}," ðŸ’¾ Suggested Permission Update ",-1)),D[13]||(D[13]=s("p",{class:"mb-2 small"},"Claude suggests updating your permissions:",-1)),s("div",ld,[(l(!0),d(re,null,ue(n.toolCall.suggestions,(G,ie)=>(l(),d("div",{key:ie,class:"suggestion-item"},[s("code",null,$(O(G)),1)]))),128))]),D[14]||(D[14]=s("small",{class:"text-muted mt-2 d-block"}," This will prevent future permission prompts for this action. ",-1))])])):M("",!0),s("div",cd,[W.value?(l(),d("button",{key:0,class:"btn btn-success",onClick:D[1]||(D[1]=G=>z("allow",!0)),disabled:a.value},$(a.value&&r.value==="approve-apply"?"â³ Submitting...":"âœ… Approve & Apply"),9,ud)):M("",!0),s("button",{class:X(["btn",W.value?"btn-outline-success":"btn-success"]),onClick:D[2]||(D[2]=G=>z("allow",!1)),disabled:a.value},$(a.value&&r.value==="approve"?"â³ Submitting...":W.value?"âœ… Approve Only":"âœ… Approve"),11,dd),s("button",{class:"btn btn-danger",onClick:D[3]||(D[3]=G=>z("deny",!1)),disabled:a.value}," ðŸš« "+$(a.value&&r.value==="deny"?"Submitting...":"Deny"),9,md)]),s("div",pd,[D[15]||(D[15]=s("label",{class:"form-label fw-bold"}," Provide Guidance (Optional) ",-1)),D[16]||(D[16]=s("p",{class:"text-muted small mb-2"}," Provide guidance to help Claude retry with better context. If provided, Claude will continue with your guidance instead of stopping. ",-1)),ge(s("textarea",{"onUpdate:modelValue":D[4]||(D[4]=G=>m.value=G),class:"form-control mb-2",rows:"3",placeholder:"e.g., 'Try using a different approach...' or 'Make sure to check the file exists first...'",disabled:a.value},null,8,fd),[[We,m.value]]),m.value.trim()?(l(),d("button",{key:0,class:"btn btn-warning btn-sm",onClick:D[5]||(D[5]=G=>z("deny",!1,m.value)),disabled:a.value},$(a.value&&r.value==="deny-guidance"?"â³ Submitting...":"ðŸ”€ Provide Guidance & Continue"),9,vd)):M("",!0)])],64))])):M("",!0),h.value==="permission_required"&&y.value?(l(),d("div",hd,[s("div",_d,[s("div",gd,[D[18]||(D[18]=s("span",{class:"me-2",style:{"font-size":"1.2rem"}},"ðŸš§",-1)),s("div",null,[D[17]||(D[17]=s("strong",null,"Permission Request Cancelled",-1)),s("p",bd,$(b.value?.message||"Session was terminated before permission could be granted"),1)])])])])):M("",!0),n.toolCall.permissionDecision==="deny"?(l(),d("div",yd,[s("div",wd,[D[19]||(D[19]=Z(" ðŸš« Permission denied ",-1)),n.toolCall.result?.message?(l(),d("span",$d," - "+$(n.toolCall.result.message),1)):M("",!0)])])):M("",!0)])):M("",!0)],2))}},wn=ne(Ed,[["__scopeId","data-v-4661b75e"]]),Sd={class:"tool-footer-container"},Cd=["aria-label","onKeydown"],kd={class:"footer-left"},Td={class:"footer-text"},xd={class:"footer-middle"},Ad={class:"footer-text"},Od={class:"footer-right"},Md={class:"expand-icon"},Dd={key:0,class:"tool-footer-expanded"},Nd={key:1,class:"active-tools-area"},Ld={__name:"ToolFooter",props:{tools:{type:Array,required:!0,default:()=>[]}},setup(n){const e=n,t=Me(),o=de(),i=j(!1);function a(w){return w.map((y,b)=>({tool:y,originalIndex:b})).sort((y,b)=>{if(y.tool.timestamp&&b.tool.timestamp){const u=new Date(y.tool.timestamp).getTime(),h=new Date(b.tool.timestamp).getTime();if(u!==h)return u-h}return y.originalIndex-b.originalIndex}).map(({tool:y})=>y)}const r=v(()=>{const w=e.tools.filter(y=>y.status==="executing"||y.status==="permission_required");return a(w)}),m=v(()=>{const w=e.tools.filter(y=>y.status!=="executing"&&y.status!=="permission_required");return a(w)}),p=v(()=>{const w=new Map;e.tools.forEach(_=>{const k=w.get(_.name)||0;w.set(_.name,k+1)});const y=Array.from(w.entries()).sort((_,k)=>k[1]-_[1]),b=y.slice(0,5),u=y.length-b.length,h=b.map(([_,k])=>`${_} (${k})`).join(", ");return u>0?`${h}, +${u} more`:h}),f=v(()=>{const w=e.tools.length;let y=0,b=0,u=0;e.tools.forEach(T=>{const H=o.currentSessionId;(H?t.isToolUseOrphaned(H,T.id):!1)?u++:T.status==="completed"&&!T.result?.error&&T.permissionDecision!=="deny"?y++:(T.status==="error"||T.result?.error||T.permissionDecision==="deny")&&b++});let h=[];y>0&&h.push(`${y} âœ…`),b>0&&h.push(`${b} âŒ`),u>0&&h.push(`${u} â¹ï¸`);const _=w===1?"tool":"tools",k=h.length>0?": "+h.join(" "):"";return`${w} ${_}${k}`}),c=v(()=>i.value?"â–²":"â–¼"),E=v(()=>{const w=o.currentSessionId,y=e.tools.some(_=>_.status==="error"||_.result?.error||_.permissionDecision==="deny"),b=e.tools.some(_=>w?t.isToolUseOrphaned(w,_.id):!1),u=r.value.length>0,h=e.tools.every(_=>!(w?t.isToolUseOrphaned(w,_.id):!1)&&_.status==="completed"&&!_.result?.error&&_.permissionDecision!=="deny");return y?"footer-status-error":b?"footer-status-orphaned":u?"footer-status-in-progress":h?"footer-status-success":""});function g(){i.value=!i.value}return(w,y)=>(l(),d("div",Sd,[s("div",{class:X(["tool-footer-summary",E.value]),onClick:g,role:"button","aria-label":i.value?"Collapse tools":"Expand tools",tabindex:"0",onKeydown:[qe(g,["enter"]),qe(_e(g,["prevent"]),["space"])]},[s("div",kd,[s("span",Td,"Used: "+$(p.value),1)]),s("div",xd,[y[0]||(y[0]=s("span",{class:"footer-separator"},"|",-1)),s("span",Ad,$(f.value),1)]),s("div",Od,[s("span",Md,$(c.value),1)])],42,Cd),i.value?(l(),d("div",Dd,[(l(!0),d(re,null,ue(m.value,b=>(l(),we(wn,{key:b.id,toolCall:b},null,8,["toolCall"]))),128))])):M("",!0),r.value.length>0?(l(),d("div",Nd,[(l(!0),d(re,null,ue(r.value,b=>(l(),we(wn,{key:b.id,toolCall:b},null,8,["toolCall"]))),128))])):M("",!0)]))}},Id=ne(Ld,[["__scopeId","data-v-7bae7ae1"]]),jd={class:"message-row message-row-assistant"},Pd=["title"],Rd={class:"message-content-column"},Wd={key:0,class:"thinking-block mb-2"},Hd=["innerHTML"],Vd={__name:"AssistantMessage",props:{message:{type:Object,required:!0},attachedTools:{type:Array,default:()=>[]}},setup(n){const e=n,t=Me(),o=de();rt.setOptions({breaks:!0,gfm:!0});const i=v(()=>Rt(e.message.timestamp)),a=v(()=>e.message.metadata?.model||null),r=v(()=>{const y=i.value;return`assistant${a.value?`
Model: ${a.value}`:""}
${y}`}),m=v(()=>{const y=e.message.content||"";return y.trim().length>0&&y!=="Assistant response"}),p=v(()=>{const y=e.message.content||"";let b=rt.parse(y);return b=b.replace(/\n</g,"<"),b=b.replace(/\n+$/,""),rs.sanitize(b)}),f=v(()=>e.message.metadata?.has_thinking&&e.message.metadata?.thinking_content),c=v(()=>e.message.metadata?.thinking_content||""),E=v(()=>{const y=e.message.metadata?.has_tool_uses&&e.message.metadata?.tool_uses?.length>0,b=e.attachedTools&&e.attachedTools.length>0;return y||b}),g=v(()=>{const y=e.message.metadata?.tool_uses||[],b=e.attachedTools||[],u=[...y],h=new Set(y.map(_=>_.id));for(const _ of b)h.has(_.id)||u.push(_);return u}),w=v(()=>{const y=o.currentSessionId;if(!y)return[];const b=t.toolCallsBySession.get(y)||[];return g.value.map(u=>{const h=b.find(_=>_.id===u.id);return h||{id:u.id,name:u.name,input:u.input,status:"pending",result:null,timestamp:u.timestamp||e.message.timestamp,isExpanded:!0}})});return(y,b)=>(l(),d("div",jd,[s("div",{class:"message-speaker",title:r.value},[...b[0]||(b[0]=[s("span",{class:"speaker-label"},"assistant",-1)])],8,Pd),s("div",Rd,[f.value?(l(),d("div",Wd,[fe(va,{thinking:c.value},null,8,["thinking"])])):M("",!0),m.value?(l(),d("div",{key:1,class:"message-text",innerHTML:p.value},null,8,Hd)):M("",!0),E.value?(l(),we(Id,{key:2,tools:w.value},null,8,["tools"])):M("",!0)])]))}},Fd=ne(Vd,[["__scopeId","data-v-2e32f6ef"]]),Bd={key:0,class:"message-row message-row-compaction"},qd=["title"],Ud={class:"message-content-column"},zd={class:"compaction-status-content"},Kd={class:"text-muted ms-auto"},Gd={key:1,class:"message-row message-row-system"},Yd=["title"],Jd={class:"message-content-column"},Qd={class:"system-text"},Xd={__name:"SystemMessage",props:{message:{type:Object,required:!0}},setup(n){const e=n,t=v(()=>Rt(e.message.timestamp)),o=v(()=>`system
${t.value}`),i=v(()=>e.message.metadata?.subtype==="status"&&e.message.metadata?.init_data?.status==="compacting");return(a,r)=>i.value?(l(),d("div",Bd,[s("div",{class:"message-speaker",title:o.value},[...r[0]||(r[0]=[s("span",{class:"speaker-label"},"system",-1)])],8,qd),s("div",Ud,[s("div",zd,[r[1]||(r[1]=s("span",{class:"me-2"},"ðŸ—œï¸",-1)),r[2]||(r[2]=s("strong",{class:"me-2"},"Context compaction in progress...",-1)),s("small",Kd,$(t.value),1)])])])):(l(),d("div",Gd,[s("div",{class:"message-speaker",title:o.value},[...r[3]||(r[3]=[s("span",{class:"speaker-label"},"system",-1)])],8,Yd),s("div",Jd,[s("span",Qd,$(n.message.content),1)])]))}},$n=ne(Xd,[["__scopeId","data-v-a078178f"]]),Zd={__name:"MessageItem",props:{message:{type:Object,required:!0},attachedTools:{type:Array,default:()=>[]}},setup(n){const e=n,t=v(()=>{switch(e.message.type){case"user":return la;case"assistant":return Fd;case"system":return $n;default:return $n}});return(o,i)=>(l(),we(io(t.value),{message:n.message,attachedTools:n.attachedTools},null,8,["message","attachedTools"]))}},em=ne(Zd,[["__scopeId","data-v-11dff525"]]);var $e="top",ke="bottom",Te="right",Ee="left",ls="auto",At=[$e,ke,Te,Ee],lt="start",wt="end",ro="clippingParents",zs="viewport",vt="popper",lo="reference",Ws=At.reduce(function(n,e){return n.concat([e+"-"+lt,e+"-"+wt])},[]),Ks=[].concat(At,[ls]).reduce(function(n,e){return n.concat([e,e+"-"+lt,e+"-"+wt])},[]),co="beforeRead",uo="read",mo="afterRead",po="beforeMain",fo="main",vo="afterMain",ho="beforeWrite",_o="write",go="afterWrite",bo=[co,uo,mo,po,fo,vo,ho,_o,go];function Be(n){return n?(n.nodeName||"").toLowerCase():null}function xe(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function ct(n){var e=xe(n).Element;return n instanceof e||n instanceof Element}function Oe(n){var e=xe(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function Gs(n){if(typeof ShadowRoot>"u")return!1;var e=xe(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function tm(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var o=e.styles[t]||{},i=e.attributes[t]||{},a=e.elements[t];!Oe(a)||!Be(a)||(Object.assign(a.style,o),Object.keys(i).forEach(function(r){var m=i[r];m===!1?a.removeAttribute(r):a.setAttribute(r,m===!0?"":m)}))})}function sm(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(o){var i=e.elements[o],a=e.attributes[o]||{},r=Object.keys(e.styles.hasOwnProperty(o)?e.styles[o]:t[o]),m=r.reduce(function(p,f){return p[f]="",p},{});!Oe(i)||!Be(i)||(Object.assign(i.style,m),Object.keys(a).forEach(function(p){i.removeAttribute(p)}))})}}const yo={name:"applyStyles",enabled:!0,phase:"write",fn:tm,effect:sm,requires:["computeStyles"]};function Ve(n){return n.split("-")[0]}var at=Math.max,ns=Math.min,$t=Math.round;function Hs(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function wo(){return!/^((?!chrome|android).)*safari/i.test(Hs())}function Et(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var o=n.getBoundingClientRect(),i=1,a=1;e&&Oe(n)&&(i=n.offsetWidth>0&&$t(o.width)/n.offsetWidth||1,a=n.offsetHeight>0&&$t(o.height)/n.offsetHeight||1);var r=ct(n)?xe(n):window,m=r.visualViewport,p=!wo()&&t,f=(o.left+(p&&m?m.offsetLeft:0))/i,c=(o.top+(p&&m?m.offsetTop:0))/a,E=o.width/i,g=o.height/a;return{width:E,height:g,top:c,right:f+E,bottom:c+g,left:f,x:f,y:c}}function Ys(n){var e=Et(n),t=n.offsetWidth,o=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-o)<=1&&(o=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:o}}function $o(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&Gs(t)){var o=e;do{if(o&&n.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function Ke(n){return xe(n).getComputedStyle(n)}function nm(n){return["table","td","th"].indexOf(Be(n))>=0}function tt(n){return((ct(n)?n.ownerDocument:n.document)||window.document).documentElement}function cs(n){return Be(n)==="html"?n:n.assignedSlot||n.parentNode||(Gs(n)?n.host:null)||tt(n)}function En(n){return!Oe(n)||Ke(n).position==="fixed"?null:n.offsetParent}function om(n){var e=/firefox/i.test(Hs()),t=/Trident/i.test(Hs());if(t&&Oe(n)){var o=Ke(n);if(o.position==="fixed")return null}var i=cs(n);for(Gs(i)&&(i=i.host);Oe(i)&&["html","body"].indexOf(Be(i))<0;){var a=Ke(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function Wt(n){for(var e=xe(n),t=En(n);t&&nm(t)&&Ke(t).position==="static";)t=En(t);return t&&(Be(t)==="html"||Be(t)==="body"&&Ke(t).position==="static")?e:t||om(n)||e}function Js(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function It(n,e,t){return at(n,ns(e,t))}function im(n,e,t){var o=It(n,e,t);return o>t?t:o}function Eo(){return{top:0,right:0,bottom:0,left:0}}function So(n){return Object.assign({},Eo(),n)}function Co(n,e){return e.reduce(function(t,o){return t[o]=n,t},{})}var am=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,So(typeof e!="number"?e:Co(e,At))};function rm(n){var e,t=n.state,o=n.name,i=n.options,a=t.elements.arrow,r=t.modifiersData.popperOffsets,m=Ve(t.placement),p=Js(m),f=[Ee,Te].indexOf(m)>=0,c=f?"height":"width";if(!(!a||!r)){var E=am(i.padding,t),g=Ys(a),w=p==="y"?$e:Ee,y=p==="y"?ke:Te,b=t.rects.reference[c]+t.rects.reference[p]-r[p]-t.rects.popper[c],u=r[p]-t.rects.reference[p],h=Wt(a),_=h?p==="y"?h.clientHeight||0:h.clientWidth||0:0,k=b/2-u/2,T=E[w],H=_-g[c]-E[y],V=_/2-g[c]/2+k,A=It(T,V,H),W=p;t.modifiersData[o]=(e={},e[W]=A,e.centerOffset=A-V,e)}}function lm(n){var e=n.state,t=n.options,o=t.element,i=o===void 0?"[data-popper-arrow]":o;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||$o(e.elements.popper,i)&&(e.elements.arrow=i))}const ko={name:"arrow",enabled:!0,phase:"main",fn:rm,effect:lm,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function St(n){return n.split("-")[1]}var cm={top:"auto",right:"auto",bottom:"auto",left:"auto"};function um(n,e){var t=n.x,o=n.y,i=e.devicePixelRatio||1;return{x:$t(t*i)/i||0,y:$t(o*i)/i||0}}function Sn(n){var e,t=n.popper,o=n.popperRect,i=n.placement,a=n.variation,r=n.offsets,m=n.position,p=n.gpuAcceleration,f=n.adaptive,c=n.roundOffsets,E=n.isFixed,g=r.x,w=g===void 0?0:g,y=r.y,b=y===void 0?0:y,u=typeof c=="function"?c({x:w,y:b}):{x:w,y:b};w=u.x,b=u.y;var h=r.hasOwnProperty("x"),_=r.hasOwnProperty("y"),k=Ee,T=$e,H=window;if(f){var V=Wt(t),A="clientHeight",W="clientWidth";if(V===xe(t)&&(V=tt(t),Ke(V).position!=="static"&&m==="absolute"&&(A="scrollHeight",W="scrollWidth")),V=V,i===$e||(i===Ee||i===Te)&&a===wt){T=ke;var S=E&&V===H&&H.visualViewport?H.visualViewport.height:V[A];b-=S-o.height,b*=p?1:-1}if(i===Ee||(i===$e||i===ke)&&a===wt){k=Te;var C=E&&V===H&&H.visualViewport?H.visualViewport.width:V[W];w-=C-o.width,w*=p?1:-1}}var q=Object.assign({position:m},f&&cm),U=c===!0?um({x:w,y:b},xe(t)):{x:w,y:b};if(w=U.x,b=U.y,p){var I;return Object.assign({},q,(I={},I[T]=_?"0":"",I[k]=h?"0":"",I.transform=(H.devicePixelRatio||1)<=1?"translate("+w+"px, "+b+"px)":"translate3d("+w+"px, "+b+"px, 0)",I))}return Object.assign({},q,(e={},e[T]=_?b+"px":"",e[k]=h?w+"px":"",e.transform="",e))}function dm(n){var e=n.state,t=n.options,o=t.gpuAcceleration,i=o===void 0?!0:o,a=t.adaptive,r=a===void 0?!0:a,m=t.roundOffsets,p=m===void 0?!0:m,f={placement:Ve(e.placement),variation:St(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Sn(Object.assign({},f,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:r,roundOffsets:p})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Sn(Object.assign({},f,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:p})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const To={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:dm,data:{}};var Ut={passive:!0};function mm(n){var e=n.state,t=n.instance,o=n.options,i=o.scroll,a=i===void 0?!0:i,r=o.resize,m=r===void 0?!0:r,p=xe(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&f.forEach(function(c){c.addEventListener("scroll",t.update,Ut)}),m&&p.addEventListener("resize",t.update,Ut),function(){a&&f.forEach(function(c){c.removeEventListener("scroll",t.update,Ut)}),m&&p.removeEventListener("resize",t.update,Ut)}}const xo={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:mm,data:{}};var pm={left:"right",right:"left",bottom:"top",top:"bottom"};function Xt(n){return n.replace(/left|right|bottom|top/g,function(e){return pm[e]})}var fm={start:"end",end:"start"};function Cn(n){return n.replace(/start|end/g,function(e){return fm[e]})}function Qs(n){var e=xe(n),t=e.pageXOffset,o=e.pageYOffset;return{scrollLeft:t,scrollTop:o}}function Xs(n){return Et(tt(n)).left+Qs(n).scrollLeft}function vm(n,e){var t=xe(n),o=tt(n),i=t.visualViewport,a=o.clientWidth,r=o.clientHeight,m=0,p=0;if(i){a=i.width,r=i.height;var f=wo();(f||!f&&e==="fixed")&&(m=i.offsetLeft,p=i.offsetTop)}return{width:a,height:r,x:m+Xs(n),y:p}}function hm(n){var e,t=tt(n),o=Qs(n),i=(e=n.ownerDocument)==null?void 0:e.body,a=at(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),r=at(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),m=-o.scrollLeft+Xs(n),p=-o.scrollTop;return Ke(i||t).direction==="rtl"&&(m+=at(t.clientWidth,i?i.clientWidth:0)-a),{width:a,height:r,x:m,y:p}}function Zs(n){var e=Ke(n),t=e.overflow,o=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+o)}function Ao(n){return["html","body","#document"].indexOf(Be(n))>=0?n.ownerDocument.body:Oe(n)&&Zs(n)?n:Ao(cs(n))}function jt(n,e){var t;e===void 0&&(e=[]);var o=Ao(n),i=o===((t=n.ownerDocument)==null?void 0:t.body),a=xe(o),r=i?[a].concat(a.visualViewport||[],Zs(o)?o:[]):o,m=e.concat(r);return i?m:m.concat(jt(cs(r)))}function Vs(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function _m(n,e){var t=Et(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function kn(n,e,t){return e===zs?Vs(vm(n,t)):ct(e)?_m(e,t):Vs(hm(tt(n)))}function gm(n){var e=jt(cs(n)),t=["absolute","fixed"].indexOf(Ke(n).position)>=0,o=t&&Oe(n)?Wt(n):n;return ct(o)?e.filter(function(i){return ct(i)&&$o(i,o)&&Be(i)!=="body"}):[]}function bm(n,e,t,o){var i=e==="clippingParents"?gm(n):[].concat(e),a=[].concat(i,[t]),r=a[0],m=a.reduce(function(p,f){var c=kn(n,f,o);return p.top=at(c.top,p.top),p.right=ns(c.right,p.right),p.bottom=ns(c.bottom,p.bottom),p.left=at(c.left,p.left),p},kn(n,r,o));return m.width=m.right-m.left,m.height=m.bottom-m.top,m.x=m.left,m.y=m.top,m}function Oo(n){var e=n.reference,t=n.element,o=n.placement,i=o?Ve(o):null,a=o?St(o):null,r=e.x+e.width/2-t.width/2,m=e.y+e.height/2-t.height/2,p;switch(i){case $e:p={x:r,y:e.y-t.height};break;case ke:p={x:r,y:e.y+e.height};break;case Te:p={x:e.x+e.width,y:m};break;case Ee:p={x:e.x-t.width,y:m};break;default:p={x:e.x,y:e.y}}var f=i?Js(i):null;if(f!=null){var c=f==="y"?"height":"width";switch(a){case lt:p[f]=p[f]-(e[c]/2-t[c]/2);break;case wt:p[f]=p[f]+(e[c]/2-t[c]/2);break}}return p}function Ct(n,e){e===void 0&&(e={});var t=e,o=t.placement,i=o===void 0?n.placement:o,a=t.strategy,r=a===void 0?n.strategy:a,m=t.boundary,p=m===void 0?ro:m,f=t.rootBoundary,c=f===void 0?zs:f,E=t.elementContext,g=E===void 0?vt:E,w=t.altBoundary,y=w===void 0?!1:w,b=t.padding,u=b===void 0?0:b,h=So(typeof u!="number"?u:Co(u,At)),_=g===vt?lo:vt,k=n.rects.popper,T=n.elements[y?_:g],H=bm(ct(T)?T:T.contextElement||tt(n.elements.popper),p,c,r),V=Et(n.elements.reference),A=Oo({reference:V,element:k,placement:i}),W=Vs(Object.assign({},k,A)),S=g===vt?W:V,C={top:H.top-S.top+h.top,bottom:S.bottom-H.bottom+h.bottom,left:H.left-S.left+h.left,right:S.right-H.right+h.right},q=n.modifiersData.offset;if(g===vt&&q){var U=q[i];Object.keys(C).forEach(function(I){var P=[Te,ke].indexOf(I)>=0?1:-1,F=[$e,ke].indexOf(I)>=0?"y":"x";C[I]+=U[F]*P})}return C}function ym(n,e){e===void 0&&(e={});var t=e,o=t.placement,i=t.boundary,a=t.rootBoundary,r=t.padding,m=t.flipVariations,p=t.allowedAutoPlacements,f=p===void 0?Ks:p,c=St(o),E=c?m?Ws:Ws.filter(function(y){return St(y)===c}):At,g=E.filter(function(y){return f.indexOf(y)>=0});g.length===0&&(g=E);var w=g.reduce(function(y,b){return y[b]=Ct(n,{placement:b,boundary:i,rootBoundary:a,padding:r})[Ve(b)],y},{});return Object.keys(w).sort(function(y,b){return w[y]-w[b]})}function wm(n){if(Ve(n)===ls)return[];var e=Xt(n);return[Cn(n),e,Cn(e)]}function $m(n){var e=n.state,t=n.options,o=n.name;if(!e.modifiersData[o]._skip){for(var i=t.mainAxis,a=i===void 0?!0:i,r=t.altAxis,m=r===void 0?!0:r,p=t.fallbackPlacements,f=t.padding,c=t.boundary,E=t.rootBoundary,g=t.altBoundary,w=t.flipVariations,y=w===void 0?!0:w,b=t.allowedAutoPlacements,u=e.options.placement,h=Ve(u),_=h===u,k=p||(_||!y?[Xt(u)]:wm(u)),T=[u].concat(k).reduce(function(Q,ae){return Q.concat(Ve(ae)===ls?ym(e,{placement:ae,boundary:c,rootBoundary:E,padding:f,flipVariations:y,allowedAutoPlacements:b}):ae)},[]),H=e.rects.reference,V=e.rects.popper,A=new Map,W=!0,S=T[0],C=0;C<T.length;C++){var q=T[C],U=Ve(q),I=St(q)===lt,P=[$e,ke].indexOf(U)>=0,F=P?"width":"height",x=Ct(e,{placement:q,boundary:c,rootBoundary:E,altBoundary:g,padding:f}),O=P?I?Te:Ee:I?ke:$e;H[F]>V[F]&&(O=Xt(O));var z=Xt(O),L=[];if(a&&L.push(x[U]<=0),m&&L.push(x[O]<=0,x[z]<=0),L.every(function(Q){return Q})){S=q,W=!1;break}A.set(q,L)}if(W)for(var D=y?3:1,G=function(ae){var me=T.find(function(R){var N=A.get(R);if(N)return N.slice(0,ae).every(function(Y){return Y})});if(me)return S=me,"break"},ie=D;ie>0;ie--){var J=G(ie);if(J==="break")break}e.placement!==S&&(e.modifiersData[o]._skip=!0,e.placement=S,e.reset=!0)}}const Mo={name:"flip",enabled:!0,phase:"main",fn:$m,requiresIfExists:["offset"],data:{_skip:!1}};function Tn(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function xn(n){return[$e,Te,ke,Ee].some(function(e){return n[e]>=0})}function Em(n){var e=n.state,t=n.name,o=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,r=Ct(e,{elementContext:"reference"}),m=Ct(e,{altBoundary:!0}),p=Tn(r,o),f=Tn(m,i,a),c=xn(p),E=xn(f);e.modifiersData[t]={referenceClippingOffsets:p,popperEscapeOffsets:f,isReferenceHidden:c,hasPopperEscaped:E},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":E})}const Do={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Em};function Sm(n,e,t){var o=Ve(n),i=[Ee,$e].indexOf(o)>=0?-1:1,a=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,r=a[0],m=a[1];return r=r||0,m=(m||0)*i,[Ee,Te].indexOf(o)>=0?{x:m,y:r}:{x:r,y:m}}function Cm(n){var e=n.state,t=n.options,o=n.name,i=t.offset,a=i===void 0?[0,0]:i,r=Ks.reduce(function(c,E){return c[E]=Sm(E,e.rects,a),c},{}),m=r[e.placement],p=m.x,f=m.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=p,e.modifiersData.popperOffsets.y+=f),e.modifiersData[o]=r}const No={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Cm};function km(n){var e=n.state,t=n.name;e.modifiersData[t]=Oo({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const Lo={name:"popperOffsets",enabled:!0,phase:"read",fn:km,data:{}};function Tm(n){return n==="x"?"y":"x"}function xm(n){var e=n.state,t=n.options,o=n.name,i=t.mainAxis,a=i===void 0?!0:i,r=t.altAxis,m=r===void 0?!1:r,p=t.boundary,f=t.rootBoundary,c=t.altBoundary,E=t.padding,g=t.tether,w=g===void 0?!0:g,y=t.tetherOffset,b=y===void 0?0:y,u=Ct(e,{boundary:p,rootBoundary:f,padding:E,altBoundary:c}),h=Ve(e.placement),_=St(e.placement),k=!_,T=Js(h),H=Tm(T),V=e.modifiersData.popperOffsets,A=e.rects.reference,W=e.rects.popper,S=typeof b=="function"?b(Object.assign({},e.rects,{placement:e.placement})):b,C=typeof S=="number"?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),q=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,U={x:0,y:0};if(V){if(a){var I,P=T==="y"?$e:Ee,F=T==="y"?ke:Te,x=T==="y"?"height":"width",O=V[T],z=O+u[P],L=O-u[F],D=w?-W[x]/2:0,G=_===lt?A[x]:W[x],ie=_===lt?-W[x]:-A[x],J=e.elements.arrow,Q=w&&J?Ys(J):{width:0,height:0},ae=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Eo(),me=ae[P],R=ae[F],N=It(0,A[x],Q[x]),Y=k?A[x]/2-D-N-me-C.mainAxis:G-N-me-C.mainAxis,ee=k?-A[x]/2+D+N+R+C.mainAxis:ie+N+R+C.mainAxis,se=e.elements.arrow&&Wt(e.elements.arrow),ve=se?T==="y"?se.clientTop||0:se.clientLeft||0:0,je=(I=q?.[T])!=null?I:0,Ye=O+Y-je-ve,B=O+ee-je,oe=It(w?ns(z,Ye):z,O,w?at(L,B):L);V[T]=oe,U[T]=oe-O}if(m){var le,Pe=T==="x"?$e:Ee,Re=T==="x"?ke:Te,ye=V[H],qt=H==="y"?"height":"width",ln=ye+u[Pe],cn=ye-u[Re],hs=[$e,Ee].indexOf(h)!==-1,un=(le=q?.[H])!=null?le:0,dn=hs?ln:ye-A[qt]-W[qt]-un+C.altAxis,mn=hs?ye+A[qt]+W[qt]-un-C.altAxis:cn,pn=w&&hs?im(dn,ye,mn):It(w?dn:ln,ye,w?mn:cn);V[H]=pn,U[H]=pn-ye}e.modifiersData[o]=U}}const Io={name:"preventOverflow",enabled:!0,phase:"main",fn:xm,requiresIfExists:["offset"]};function Am(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function Om(n){return n===xe(n)||!Oe(n)?Qs(n):Am(n)}function Mm(n){var e=n.getBoundingClientRect(),t=$t(e.width)/n.offsetWidth||1,o=$t(e.height)/n.offsetHeight||1;return t!==1||o!==1}function Dm(n,e,t){t===void 0&&(t=!1);var o=Oe(e),i=Oe(e)&&Mm(e),a=tt(e),r=Et(n,i,t),m={scrollLeft:0,scrollTop:0},p={x:0,y:0};return(o||!o&&!t)&&((Be(e)!=="body"||Zs(a))&&(m=Om(e)),Oe(e)?(p=Et(e,!0),p.x+=e.clientLeft,p.y+=e.clientTop):a&&(p.x=Xs(a))),{x:r.left+m.scrollLeft-p.x,y:r.top+m.scrollTop-p.y,width:r.width,height:r.height}}function Nm(n){var e=new Map,t=new Set,o=[];n.forEach(function(a){e.set(a.name,a)});function i(a){t.add(a.name);var r=[].concat(a.requires||[],a.requiresIfExists||[]);r.forEach(function(m){if(!t.has(m)){var p=e.get(m);p&&i(p)}}),o.push(a)}return n.forEach(function(a){t.has(a.name)||i(a)}),o}function Lm(n){var e=Nm(n);return bo.reduce(function(t,o){return t.concat(e.filter(function(i){return i.phase===o}))},[])}function Im(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function jm(n){var e=n.reduce(function(t,o){var i=t[o.name];return t[o.name]=i?Object.assign({},i,o,{options:Object.assign({},i.options,o.options),data:Object.assign({},i.data,o.data)}):o,t},{});return Object.keys(e).map(function(t){return e[t]})}var An={placement:"bottom",modifiers:[],strategy:"absolute"};function On(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function jo(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,o=t===void 0?[]:t,i=e.defaultOptions,a=i===void 0?An:i;return function(m,p,f){f===void 0&&(f=a);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},An,a),modifiersData:{},elements:{reference:m,popper:p},attributes:{},styles:{}},E=[],g=!1,w={state:c,setOptions:function(h){var _=typeof h=="function"?h(c.options):h;b(),c.options=Object.assign({},a,c.options,_),c.scrollParents={reference:ct(m)?jt(m):m.contextElement?jt(m.contextElement):[],popper:jt(p)};var k=Lm(jm([].concat(o,c.options.modifiers)));return c.orderedModifiers=k.filter(function(T){return T.enabled}),y(),w.update()},forceUpdate:function(){if(!g){var h=c.elements,_=h.reference,k=h.popper;if(On(_,k)){c.rects={reference:Dm(_,Wt(k),c.options.strategy==="fixed"),popper:Ys(k)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(C){return c.modifiersData[C.name]=Object.assign({},C.data)});for(var T=0;T<c.orderedModifiers.length;T++){if(c.reset===!0){c.reset=!1,T=-1;continue}var H=c.orderedModifiers[T],V=H.fn,A=H.options,W=A===void 0?{}:A,S=H.name;typeof V=="function"&&(c=V({state:c,options:W,name:S,instance:w})||c)}}}},update:Im(function(){return new Promise(function(u){w.forceUpdate(),u(c)})}),destroy:function(){b(),g=!0}};if(!On(m,p))return w;w.setOptions(f).then(function(u){!g&&f.onFirstUpdate&&f.onFirstUpdate(u)});function y(){c.orderedModifiers.forEach(function(u){var h=u.name,_=u.options,k=_===void 0?{}:_,T=u.effect;if(typeof T=="function"){var H=T({state:c,name:h,instance:w,options:k}),V=function(){};E.push(H||V)}})}function b(){E.forEach(function(u){return u()}),E=[]}return w}}var Pm=[xo,Lo,To,yo,No,Mo,Io,ko,Do],en=jo({defaultModifiers:Pm});const Po=Object.freeze(Object.defineProperty({__proto__:null,afterMain:vo,afterRead:mo,afterWrite:go,applyStyles:yo,arrow:ko,auto:ls,basePlacements:At,beforeMain:po,beforeRead:co,beforeWrite:ho,bottom:ke,clippingParents:ro,computeStyles:To,createPopper:en,detectOverflow:Ct,end:wt,eventListeners:xo,flip:Mo,hide:Do,left:Ee,main:fo,modifierPhases:bo,offset:No,placements:Ks,popper:vt,popperGenerator:jo,popperOffsets:Lo,preventOverflow:Io,read:uo,reference:lo,right:Te,start:lt,top:$e,variationPlacements:Ws,viewport:zs,write:_o},Symbol.toStringTag,{value:"Module"}));const Je=new Map,Es={set(n,e,t){Je.has(n)||Je.set(n,new Map);const o=Je.get(n);if(!o.has(e)&&o.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(o.keys())[0]}.`);return}o.set(e,t)},get(n,e){return Je.has(n)&&Je.get(n).get(e)||null},remove(n,e){if(!Je.has(n))return;const t=Je.get(n);t.delete(e),t.size===0&&Je.delete(n)}},Rm=1e6,Wm=1e3,Fs="transitionend",Ro=n=>(n&&window.CSS&&window.CSS.escape&&(n=n.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),n),Hm=n=>n==null?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),Vm=n=>{do n+=Math.floor(Math.random()*Rm);while(document.getElementById(n));return n},Fm=n=>{if(!n)return 0;let{transitionDuration:e,transitionDelay:t}=window.getComputedStyle(n);const o=Number.parseFloat(e),i=Number.parseFloat(t);return!o&&!i?0:(e=e.split(",")[0],t=t.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(t))*Wm)},Wo=n=>{n.dispatchEvent(new Event(Fs))},Ue=n=>!n||typeof n!="object"?!1:(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),Qe=n=>Ue(n)?n.jquery?n[0]:n:typeof n=="string"&&n.length>0?document.querySelector(Ro(n)):null,Ot=n=>{if(!Ue(n)||n.getClientRects().length===0)return!1;const e=getComputedStyle(n).getPropertyValue("visibility")==="visible",t=n.closest("details:not([open])");if(!t)return e;if(t!==n){const o=n.closest("summary");if(o&&o.parentNode!==t||o===null)return!1}return e},Xe=n=>!n||n.nodeType!==Node.ELEMENT_NODE||n.classList.contains("disabled")?!0:typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false",Ho=n=>{if(!document.documentElement.attachShadow)return null;if(typeof n.getRootNode=="function"){const e=n.getRootNode();return e instanceof ShadowRoot?e:null}return n instanceof ShadowRoot?n:n.parentNode?Ho(n.parentNode):null},os=()=>{},Ht=n=>{n.offsetHeight},Vo=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ss=[],Bm=n=>{document.readyState==="loading"?(Ss.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of Ss)e()}),Ss.push(n)):n()},De=()=>document.documentElement.dir==="rtl",Ie=n=>{Bm(()=>{const e=Vo();if(e){const t=n.NAME,o=e.fn[t];e.fn[t]=n.jQueryInterface,e.fn[t].Constructor=n,e.fn[t].noConflict=()=>(e.fn[t]=o,n.jQueryInterface)}})},Se=(n,e=[],t=n)=>typeof n=="function"?n.call(...e):t,Fo=(n,e,t=!0)=>{if(!t){Se(n);return}const i=Fm(e)+5;let a=!1;const r=({target:m})=>{m===e&&(a=!0,e.removeEventListener(Fs,r),Se(n))};e.addEventListener(Fs,r),setTimeout(()=>{a||Wo(e)},i)},tn=(n,e,t,o)=>{const i=n.length;let a=n.indexOf(e);return a===-1?!t&&o?n[i-1]:n[0]:(a+=t?1:-1,o&&(a=(a+i)%i),n[Math.max(0,Math.min(a,i-1))])},qm=/[^.]*(?=\..*)\.|.*/,Um=/\..*/,zm=/::\d+$/,Cs={};let Mn=1;const Bo={mouseenter:"mouseover",mouseleave:"mouseout"},Km=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function qo(n,e){return e&&`${e}::${Mn++}`||n.uidEvent||Mn++}function Uo(n){const e=qo(n);return n.uidEvent=e,Cs[e]=Cs[e]||{},Cs[e]}function Gm(n,e){return function t(o){return sn(o,{delegateTarget:n}),t.oneOff&&K.off(n,o.type,e),e.apply(n,[o])}}function Ym(n,e,t){return function o(i){const a=n.querySelectorAll(e);for(let{target:r}=i;r&&r!==this;r=r.parentNode)for(const m of a)if(m===r)return sn(i,{delegateTarget:r}),o.oneOff&&K.off(n,i.type,e,t),t.apply(r,[i])}}function zo(n,e,t=null){return Object.values(n).find(o=>o.callable===e&&o.delegationSelector===t)}function Ko(n,e,t){const o=typeof e=="string",i=o?t:e||t;let a=Go(n);return Km.has(a)||(a=n),[o,i,a]}function Dn(n,e,t,o,i){if(typeof e!="string"||!n)return;let[a,r,m]=Ko(e,t,o);e in Bo&&(r=(y=>function(b){if(!b.relatedTarget||b.relatedTarget!==b.delegateTarget&&!b.delegateTarget.contains(b.relatedTarget))return y.call(this,b)})(r));const p=Uo(n),f=p[m]||(p[m]={}),c=zo(f,r,a?t:null);if(c){c.oneOff=c.oneOff&&i;return}const E=qo(r,e.replace(qm,"")),g=a?Ym(n,t,r):Gm(n,r);g.delegationSelector=a?t:null,g.callable=r,g.oneOff=i,g.uidEvent=E,f[E]=g,n.addEventListener(m,g,a)}function Bs(n,e,t,o,i){const a=zo(e[t],o,i);a&&(n.removeEventListener(t,a,!!i),delete e[t][a.uidEvent])}function Jm(n,e,t,o){const i=e[t]||{};for(const[a,r]of Object.entries(i))a.includes(o)&&Bs(n,e,t,r.callable,r.delegationSelector)}function Go(n){return n=n.replace(Um,""),Bo[n]||n}const K={on(n,e,t,o){Dn(n,e,t,o,!1)},one(n,e,t,o){Dn(n,e,t,o,!0)},off(n,e,t,o){if(typeof e!="string"||!n)return;const[i,a,r]=Ko(e,t,o),m=r!==e,p=Uo(n),f=p[r]||{},c=e.startsWith(".");if(typeof a<"u"){if(!Object.keys(f).length)return;Bs(n,p,r,a,i?t:null);return}if(c)for(const E of Object.keys(p))Jm(n,p,E,e.slice(1));for(const[E,g]of Object.entries(f)){const w=E.replace(zm,"");(!m||e.includes(w))&&Bs(n,p,r,g.callable,g.delegationSelector)}},trigger(n,e,t){if(typeof e!="string"||!n)return null;const o=Vo(),i=Go(e),a=e!==i;let r=null,m=!0,p=!0,f=!1;a&&o&&(r=o.Event(e,t),o(n).trigger(r),m=!r.isPropagationStopped(),p=!r.isImmediatePropagationStopped(),f=r.isDefaultPrevented());const c=sn(new Event(e,{bubbles:m,cancelable:!0}),t);return f&&c.preventDefault(),p&&n.dispatchEvent(c),c.defaultPrevented&&r&&r.preventDefault(),c}};function sn(n,e={}){for(const[t,o]of Object.entries(e))try{n[t]=o}catch{Object.defineProperty(n,t,{configurable:!0,get(){return o}})}return n}function Nn(n){if(n==="true")return!0;if(n==="false")return!1;if(n===Number(n).toString())return Number(n);if(n===""||n==="null")return null;if(typeof n!="string")return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function ks(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const ze={setDataAttribute(n,e,t){n.setAttribute(`data-bs-${ks(e)}`,t)},removeDataAttribute(n,e){n.removeAttribute(`data-bs-${ks(e)}`)},getDataAttributes(n){if(!n)return{};const e={},t=Object.keys(n.dataset).filter(o=>o.startsWith("bs")&&!o.startsWith("bsConfig"));for(const o of t){let i=o.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1),e[i]=Nn(n.dataset[o])}return e},getDataAttribute(n,e){return Nn(n.getAttribute(`data-bs-${ks(e)}`))}};class Vt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const o=Ue(t)?ze.getDataAttribute(t,"config"):{};return{...this.constructor.Default,...typeof o=="object"?o:{},...Ue(t)?ze.getDataAttributes(t):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[o,i]of Object.entries(t)){const a=e[o],r=Ue(a)?"element":Hm(a);if(!new RegExp(i).test(r))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${o}" provided type "${r}" but expected type "${i}".`)}}}const Qm="5.3.8";class He extends Vt{constructor(e,t){super(),e=Qe(e),e&&(this._element=e,this._config=this._getConfig(t),Es.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Es.remove(this._element,this.constructor.DATA_KEY),K.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,o=!0){Fo(e,t,o)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Es.get(Qe(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,typeof t=="object"?t:null)}static get VERSION(){return Qm}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Ts=n=>{let e=n.getAttribute("data-bs-target");if(!e||e==="#"){let t=n.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),e=t&&t!=="#"?t.trim():null}return e?e.split(",").map(t=>Ro(t)).join(","):null},te={find(n,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,n))},findOne(n,e=document.documentElement){return Element.prototype.querySelector.call(e,n)},children(n,e){return[].concat(...n.children).filter(t=>t.matches(e))},parents(n,e){const t=[];let o=n.parentNode.closest(e);for(;o;)t.push(o),o=o.parentNode.closest(e);return t},prev(n,e){let t=n.previousElementSibling;for(;t;){if(t.matches(e))return[t];t=t.previousElementSibling}return[]},next(n,e){let t=n.nextElementSibling;for(;t;){if(t.matches(e))return[t];t=t.nextElementSibling}return[]},focusableChildren(n){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(e,n).filter(t=>!Xe(t)&&Ot(t))},getSelectorFromElement(n){const e=Ts(n);return e&&te.findOne(e)?e:null},getElementFromSelector(n){const e=Ts(n);return e?te.findOne(e):null},getMultipleElementsFromSelector(n){const e=Ts(n);return e?te.find(e):[]}},us=(n,e="hide")=>{const t=`click.dismiss${n.EVENT_KEY}`,o=n.NAME;K.on(document,t,`[data-bs-dismiss="${o}"]`,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),Xe(this))return;const a=te.getElementFromSelector(this)||this.closest(`.${o}`);n.getOrCreateInstance(a)[e]()})},Xm="alert",Zm="bs.alert",Yo=`.${Zm}`,ep=`close${Yo}`,tp=`closed${Yo}`,sp="fade",np="show";class ds extends He{static get NAME(){return Xm}close(){if(K.trigger(this._element,ep).defaultPrevented)return;this._element.classList.remove(np);const t=this._element.classList.contains(sp);this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),K.trigger(this._element,tp),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=ds.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}us(ds,"close");Ie(ds);const op="button",ip="bs.button",ap=`.${ip}`,rp=".data-api",lp="active",Ln='[data-bs-toggle="button"]',cp=`click${ap}${rp}`;class ms extends He{static get NAME(){return op}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(lp))}static jQueryInterface(e){return this.each(function(){const t=ms.getOrCreateInstance(this);e==="toggle"&&t[e]()})}}K.on(document,cp,Ln,n=>{n.preventDefault();const e=n.target.closest(Ln);ms.getOrCreateInstance(e).toggle()});Ie(ms);const up="swipe",Mt=".bs.swipe",dp=`touchstart${Mt}`,mp=`touchmove${Mt}`,pp=`touchend${Mt}`,fp=`pointerdown${Mt}`,vp=`pointerup${Mt}`,hp="touch",_p="pen",gp="pointer-event",bp=40,yp={endCallback:null,leftCallback:null,rightCallback:null},wp={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class is extends Vt{constructor(e,t){super(),this._element=e,!(!e||!is.isSupported())&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return yp}static get DefaultType(){return wp}static get NAME(){return up}dispose(){K.off(this._element,Mt)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Se(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=bp)return;const t=e/this._deltaX;this._deltaX=0,t&&Se(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(K.on(this._element,fp,e=>this._start(e)),K.on(this._element,vp,e=>this._end(e)),this._element.classList.add(gp)):(K.on(this._element,dp,e=>this._start(e)),K.on(this._element,mp,e=>this._move(e)),K.on(this._element,pp,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===_p||e.pointerType===hp)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const $p="carousel",Ep="bs.carousel",st=`.${Ep}`,Jo=".data-api",Sp="ArrowLeft",Cp="ArrowRight",kp=500,Nt="next",pt="prev",ht="left",Zt="right",Tp=`slide${st}`,xs=`slid${st}`,xp=`keydown${st}`,Ap=`mouseenter${st}`,Op=`mouseleave${st}`,Mp=`dragstart${st}`,Dp=`load${st}${Jo}`,Np=`click${st}${Jo}`,Qo="carousel",zt="active",Lp="slide",Ip="carousel-item-end",jp="carousel-item-start",Pp="carousel-item-next",Rp="carousel-item-prev",Xo=".active",Zo=".carousel-item",Wp=Xo+Zo,Hp=".carousel-item img",Vp=".carousel-indicators",Fp="[data-bs-slide], [data-bs-slide-to]",Bp='[data-bs-ride="carousel"]',qp={[Sp]:Zt,[Cp]:ht},Up={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},zp={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ft extends He{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=te.findOne(Vp,this._element),this._addEventListeners(),this._config.ride===Qo&&this.cycle()}static get Default(){return Up}static get DefaultType(){return zp}static get NAME(){return $p}next(){this._slide(Nt)}nextWhenVisible(){!document.hidden&&Ot(this._element)&&this.next()}prev(){this._slide(pt)}pause(){this._isSliding&&Wo(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){K.one(this._element,xs,()=>this.cycle());return}this.cycle()}}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding){K.one(this._element,xs,()=>this.to(e));return}const o=this._getItemIndex(this._getActive());if(o===e)return;const i=e>o?Nt:pt;this._slide(i,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&K.on(this._element,xp,e=>this._keydown(e)),this._config.pause==="hover"&&(K.on(this._element,Ap,()=>this.pause()),K.on(this._element,Op,()=>this._maybeEnableCycle())),this._config.touch&&is.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const o of te.find(Hp,this._element))K.on(o,Mp,i=>i.preventDefault());const t={leftCallback:()=>this._slide(this._directionToOrder(ht)),rightCallback:()=>this._slide(this._directionToOrder(Zt)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),kp+this._config.interval))}};this._swipeHelper=new is(this._element,t)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=qp[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=te.findOne(Xo,this._indicatorsElement);t.classList.remove(zt),t.removeAttribute("aria-current");const o=te.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);o&&(o.classList.add(zt),o.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const o=this._getActive(),i=e===Nt,a=t||tn(this._getItems(),o,i,this._config.wrap);if(a===o)return;const r=this._getItemIndex(a),m=w=>K.trigger(this._element,w,{relatedTarget:a,direction:this._orderToDirection(e),from:this._getItemIndex(o),to:r});if(m(Tp).defaultPrevented||!o||!a)return;const f=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(r),this._activeElement=a;const c=i?jp:Ip,E=i?Pp:Rp;a.classList.add(E),Ht(a),o.classList.add(c),a.classList.add(c);const g=()=>{a.classList.remove(c,E),a.classList.add(zt),o.classList.remove(zt,E,c),this._isSliding=!1,m(xs)};this._queueCallback(g,o,this._isAnimated()),f&&this.cycle()}_isAnimated(){return this._element.classList.contains(Lp)}_getActive(){return te.findOne(Wp,this._element)}_getItems(){return te.find(Zo,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return De()?e===ht?pt:Nt:e===ht?Nt:pt}_orderToDirection(e){return De()?e===pt?ht:Zt:e===pt?Zt:ht}static jQueryInterface(e){return this.each(function(){const t=Ft.getOrCreateInstance(this,e);if(typeof e=="number"){t.to(e);return}if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}K.on(document,Np,Fp,function(n){const e=te.getElementFromSelector(this);if(!e||!e.classList.contains(Qo))return;n.preventDefault();const t=Ft.getOrCreateInstance(e),o=this.getAttribute("data-bs-slide-to");if(o){t.to(o),t._maybeEnableCycle();return}if(ze.getDataAttribute(this,"slide")==="next"){t.next(),t._maybeEnableCycle();return}t.prev(),t._maybeEnableCycle()});K.on(window,Dp,()=>{const n=te.find(Bp);for(const e of n)Ft.getOrCreateInstance(e)});Ie(Ft);const Kp="collapse",Gp="bs.collapse",Bt=`.${Gp}`,Yp=".data-api",Jp=`show${Bt}`,Qp=`shown${Bt}`,Xp=`hide${Bt}`,Zp=`hidden${Bt}`,ef=`click${Bt}${Yp}`,As="show",gt="collapse",Kt="collapsing",tf="collapsed",sf=`:scope .${gt} .${gt}`,nf="collapse-horizontal",of="width",af="height",rf=".collapse.show, .collapse.collapsing",qs='[data-bs-toggle="collapse"]',lf={parent:null,toggle:!0},cf={parent:"(null|element)",toggle:"boolean"};class kt extends He{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const o=te.find(qs);for(const i of o){const a=te.getSelectorFromElement(i),r=te.find(a).filter(m=>m===this._element);a!==null&&r.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return lf}static get DefaultType(){return cf}static get NAME(){return Kp}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(rf).filter(m=>m!==this._element).map(m=>kt.getOrCreateInstance(m,{toggle:!1}))),e.length&&e[0]._isTransitioning||K.trigger(this._element,Jp).defaultPrevented)return;for(const m of e)m.hide();const o=this._getDimension();this._element.classList.remove(gt),this._element.classList.add(Kt),this._element.style[o]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(Kt),this._element.classList.add(gt,As),this._element.style[o]="",K.trigger(this._element,Qp)},r=`scroll${o[0].toUpperCase()+o.slice(1)}`;this._queueCallback(i,this._element,!0),this._element.style[o]=`${this._element[r]}px`}hide(){if(this._isTransitioning||!this._isShown()||K.trigger(this._element,Xp).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,Ht(this._element),this._element.classList.add(Kt),this._element.classList.remove(gt,As);for(const i of this._triggerArray){const a=te.getElementFromSelector(i);a&&!this._isShown(a)&&this._addAriaAndCollapsedClass([i],!1)}this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(Kt),this._element.classList.add(gt),K.trigger(this._element,Zp)};this._element.style[t]="",this._queueCallback(o,this._element,!0)}_isShown(e=this._element){return e.classList.contains(As)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Qe(e.parent),e}_getDimension(){return this._element.classList.contains(nf)?of:af}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(qs);for(const t of e){const o=te.getElementFromSelector(t);o&&this._addAriaAndCollapsedClass([t],this._isShown(o))}}_getFirstLevelChildren(e){const t=te.find(sf,this._config.parent);return te.find(e,this._config.parent).filter(o=>!t.includes(o))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const o of e)o.classList.toggle(tf,!t),o.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return typeof e=="string"&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const o=kt.getOrCreateInstance(this,t);if(typeof e=="string"){if(typeof o[e]>"u")throw new TypeError(`No method named "${e}"`);o[e]()}})}}K.on(document,ef,qs,function(n){(n.target.tagName==="A"||n.delegateTarget&&n.delegateTarget.tagName==="A")&&n.preventDefault();for(const e of te.getMultipleElementsFromSelector(this))kt.getOrCreateInstance(e,{toggle:!1}).toggle()});Ie(kt);const In="dropdown",uf="bs.dropdown",dt=`.${uf}`,nn=".data-api",df="Escape",jn="Tab",mf="ArrowUp",Pn="ArrowDown",pf=2,ff=`hide${dt}`,vf=`hidden${dt}`,hf=`show${dt}`,_f=`shown${dt}`,ei=`click${dt}${nn}`,ti=`keydown${dt}${nn}`,gf=`keyup${dt}${nn}`,_t="show",bf="dropup",yf="dropend",wf="dropstart",$f="dropup-center",Ef="dropdown-center",ot='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Sf=`${ot}.${_t}`,es=".dropdown-menu",Cf=".navbar",kf=".navbar-nav",Tf=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",xf=De()?"top-end":"top-start",Af=De()?"top-start":"top-end",Of=De()?"bottom-end":"bottom-start",Mf=De()?"bottom-start":"bottom-end",Df=De()?"left-start":"right-start",Nf=De()?"right-start":"left-start",Lf="top",If="bottom",jf={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Pf={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Fe extends He{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=te.next(this._element,es)[0]||te.prev(this._element,es)[0]||te.findOne(es,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return jf}static get DefaultType(){return Pf}static get NAME(){return In}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Xe(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!K.trigger(this._element,hf,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(kf))for(const o of[].concat(...document.body.children))K.on(o,"mouseover",os);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(_t),this._element.classList.add(_t),K.trigger(this._element,_f,e)}}hide(){if(Xe(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!K.trigger(this._element,ff,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))K.off(o,"mouseover",os);this._popper&&this._popper.destroy(),this._menu.classList.remove(_t),this._element.classList.remove(_t),this._element.setAttribute("aria-expanded","false"),ze.removeDataAttribute(this._menu,"popper"),K.trigger(this._element,vf,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!Ue(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${In.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof Po>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let e=this._element;this._config.reference==="parent"?e=this._parent:Ue(this._config.reference)?e=Qe(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=en(e,this._menu,t)}_isShown(){return this._menu.classList.contains(_t)}_getPlacement(){const e=this._parent;if(e.classList.contains(yf))return Df;if(e.classList.contains(wf))return Nf;if(e.classList.contains($f))return Lf;if(e.classList.contains(Ef))return If;const t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(bf)?t?Af:xf:t?Mf:Of}_detectNavbar(){return this._element.closest(Cf)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(ze.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Se(this._config.popperConfig,[void 0,e])}}_selectMenuItem({key:e,target:t}){const o=te.find(Tf,this._menu).filter(i=>Ot(i));o.length&&tn(o,t,e===Pn,!o.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=Fe.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(e.button===pf||e.type==="keyup"&&e.key!==jn)return;const t=te.find(Sf);for(const o of t){const i=Fe.getInstance(o);if(!i||i._config.autoClose===!1)continue;const a=e.composedPath(),r=a.includes(i._menu);if(a.includes(i._element)||i._config.autoClose==="inside"&&!r||i._config.autoClose==="outside"&&r||i._menu.contains(e.target)&&(e.type==="keyup"&&e.key===jn||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const m={relatedTarget:i._element};e.type==="click"&&(m.clickEvent=e),i._completeHide(m)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),o=e.key===df,i=[mf,Pn].includes(e.key);if(!i&&!o||t&&!o)return;e.preventDefault();const a=this.matches(ot)?this:te.prev(this,ot)[0]||te.next(this,ot)[0]||te.findOne(ot,e.delegateTarget.parentNode),r=Fe.getOrCreateInstance(a);if(i){e.stopPropagation(),r.show(),r._selectMenuItem(e);return}r._isShown()&&(e.stopPropagation(),r.hide(),a.focus())}}K.on(document,ti,ot,Fe.dataApiKeydownHandler);K.on(document,ti,es,Fe.dataApiKeydownHandler);K.on(document,ei,Fe.clearMenus);K.on(document,gf,Fe.clearMenus);K.on(document,ei,ot,function(n){n.preventDefault(),Fe.getOrCreateInstance(this).toggle()});Ie(Fe);const si="backdrop",Rf="fade",Rn="show",Wn=`mousedown.bs.${si}`,Wf={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Hf={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class ni extends Vt{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Wf}static get DefaultType(){return Hf}static get NAME(){return si}show(e){if(!this._config.isVisible){Se(e);return}this._append();const t=this._getElement();this._config.isAnimated&&Ht(t),t.classList.add(Rn),this._emulateAnimation(()=>{Se(e)})}hide(e){if(!this._config.isVisible){Se(e);return}this._getElement().classList.remove(Rn),this._emulateAnimation(()=>{this.dispose(),Se(e)})}dispose(){this._isAppended&&(K.off(this._element,Wn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(Rf),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Qe(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),K.on(e,Wn,()=>{Se(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){Fo(e,this._getElement(),this._config.isAnimated)}}const Vf="focustrap",Ff="bs.focustrap",as=`.${Ff}`,Bf=`focusin${as}`,qf=`keydown.tab${as}`,Uf="Tab",zf="forward",Hn="backward",Kf={autofocus:!0,trapElement:null},Gf={autofocus:"boolean",trapElement:"element"};class oi extends Vt{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Kf}static get DefaultType(){return Gf}static get NAME(){return Vf}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),K.off(document,as),K.on(document,Bf,e=>this._handleFocusin(e)),K.on(document,qf,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,K.off(document,as))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const o=te.focusableChildren(t);o.length===0?t.focus():this._lastTabNavDirection===Hn?o[o.length-1].focus():o[0].focus()}_handleKeydown(e){e.key===Uf&&(this._lastTabNavDirection=e.shiftKey?Hn:zf)}}const Vn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Fn=".sticky-top",Gt="padding-right",Bn="margin-right";class Us{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Gt,t=>t+e),this._setElementAttributes(Vn,Gt,t=>t+e),this._setElementAttributes(Fn,Bn,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Gt),this._resetElementAttributes(Vn,Gt),this._resetElementAttributes(Fn,Bn)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,o){const i=this.getWidth(),a=r=>{if(r!==this._element&&window.innerWidth>r.clientWidth+i)return;this._saveInitialAttribute(r,t);const m=window.getComputedStyle(r).getPropertyValue(t);r.style.setProperty(t,`${o(Number.parseFloat(m))}px`)};this._applyManipulationCallback(e,a)}_saveInitialAttribute(e,t){const o=e.style.getPropertyValue(t);o&&ze.setDataAttribute(e,t,o)}_resetElementAttributes(e,t){const o=i=>{const a=ze.getDataAttribute(i,t);if(a===null){i.style.removeProperty(t);return}ze.removeDataAttribute(i,t),i.style.setProperty(t,a)};this._applyManipulationCallback(e,o)}_applyManipulationCallback(e,t){if(Ue(e)){t(e);return}for(const o of te.find(e,this._element))t(o)}}const Yf="modal",Jf="bs.modal",Ne=`.${Jf}`,Qf=".data-api",Xf="Escape",Zf=`hide${Ne}`,ev=`hidePrevented${Ne}`,ii=`hidden${Ne}`,ai=`show${Ne}`,tv=`shown${Ne}`,sv=`resize${Ne}`,nv=`click.dismiss${Ne}`,ov=`mousedown.dismiss${Ne}`,iv=`keydown.dismiss${Ne}`,av=`click${Ne}${Qf}`,qn="modal-open",rv="fade",Un="show",Os="modal-static",lv=".modal.show",cv=".modal-dialog",uv=".modal-body",dv='[data-bs-toggle="modal"]',mv={backdrop:!0,focus:!0,keyboard:!0},pv={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ut extends He{constructor(e,t){super(e,t),this._dialog=te.findOne(cv,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Us,this._addEventListeners()}static get Default(){return mv}static get DefaultType(){return pv}static get NAME(){return Yf}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||K.trigger(this._element,ai,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(qn),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||K.trigger(this._element,Zf).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Un),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){K.off(window,Ne),K.off(this._dialog,Ne),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new ni({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new oi({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=te.findOne(uv,this._dialog);t&&(t.scrollTop=0),Ht(this._element),this._element.classList.add(Un);const o=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,K.trigger(this._element,tv,{relatedTarget:e})};this._queueCallback(o,this._dialog,this._isAnimated())}_addEventListeners(){K.on(this._element,iv,e=>{if(e.key===Xf){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),K.on(window,sv,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),K.on(this._element,ov,e=>{K.one(this._element,nv,t=>{if(!(this._element!==e.target||this._element!==t.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(qn),this._resetAdjustments(),this._scrollBar.reset(),K.trigger(this._element,ii)})}_isAnimated(){return this._element.classList.contains(rv)}_triggerBackdropTransition(){if(K.trigger(this._element,ev).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,o=this._element.style.overflowY;o==="hidden"||this._element.classList.contains(Os)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(Os),this._queueCallback(()=>{this._element.classList.remove(Os),this._queueCallback(()=>{this._element.style.overflowY=o},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),o=t>0;if(o&&!e){const i=De()?"paddingLeft":"paddingRight";this._element.style[i]=`${t}px`}if(!o&&e){const i=De()?"paddingRight":"paddingLeft";this._element.style[i]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const o=ut.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof o[e]>"u")throw new TypeError(`No method named "${e}"`);o[e](t)}})}}K.on(document,av,dv,function(n){const e=te.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),K.one(e,ai,i=>{i.defaultPrevented||K.one(e,ii,()=>{Ot(this)&&this.focus()})});const t=te.findOne(lv);t&&ut.getInstance(t).hide(),ut.getOrCreateInstance(e).toggle(this)});us(ut);Ie(ut);const fv="offcanvas",vv="bs.offcanvas",Ge=`.${vv}`,ri=".data-api",hv=`load${Ge}${ri}`,_v="Escape",zn="show",Kn="showing",Gn="hiding",gv="offcanvas-backdrop",li=".offcanvas.show",bv=`show${Ge}`,yv=`shown${Ge}`,wv=`hide${Ge}`,Yn=`hidePrevented${Ge}`,ci=`hidden${Ge}`,$v=`resize${Ge}`,Ev=`click${Ge}${ri}`,Sv=`keydown.dismiss${Ge}`,Cv='[data-bs-toggle="offcanvas"]',kv={backdrop:!0,keyboard:!0,scroll:!1},Tv={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ze extends He{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return kv}static get DefaultType(){return Tv}static get NAME(){return fv}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||K.trigger(this._element,bv,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Us().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Kn);const o=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(zn),this._element.classList.remove(Kn),K.trigger(this._element,yv,{relatedTarget:e})};this._queueCallback(o,this._element,!0)}hide(){if(!this._isShown||K.trigger(this._element,wv).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Gn),this._backdrop.hide();const t=()=>{this._element.classList.remove(zn,Gn),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Us().reset(),K.trigger(this._element,ci)};this._queueCallback(t,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){K.trigger(this._element,Yn);return}this.hide()},t=!!this._config.backdrop;return new ni({className:gv,isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?e:null})}_initializeFocusTrap(){return new oi({trapElement:this._element})}_addEventListeners(){K.on(this._element,Sv,e=>{if(e.key===_v){if(this._config.keyboard){this.hide();return}K.trigger(this._element,Yn)}})}static jQueryInterface(e){return this.each(function(){const t=Ze.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}K.on(document,Ev,Cv,function(n){const e=te.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),Xe(this))return;K.one(e,ci,()=>{Ot(this)&&this.focus()});const t=te.findOne(li);t&&t!==e&&Ze.getInstance(t).hide(),Ze.getOrCreateInstance(e).toggle(this)});K.on(window,hv,()=>{for(const n of te.find(li))Ze.getOrCreateInstance(n).show()});K.on(window,$v,()=>{for(const n of te.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(n).position!=="fixed"&&Ze.getOrCreateInstance(n).hide()});us(Ze);Ie(Ze);const xv=/^aria-[\w-]*$/i,ui={"*":["class","dir","id","lang","role",xv],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Av=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Ov=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Mv=(n,e)=>{const t=n.nodeName.toLowerCase();return e.includes(t)?Av.has(t)?!!Ov.test(n.nodeValue):!0:e.filter(o=>o instanceof RegExp).some(o=>o.test(t))};function Dv(n,e,t){if(!n.length)return n;if(t&&typeof t=="function")return t(n);const i=new window.DOMParser().parseFromString(n,"text/html"),a=[].concat(...i.body.querySelectorAll("*"));for(const r of a){const m=r.nodeName.toLowerCase();if(!Object.keys(e).includes(m)){r.remove();continue}const p=[].concat(...r.attributes),f=[].concat(e["*"]||[],e[m]||[]);for(const c of p)Mv(c,f)||r.removeAttribute(c.nodeName)}return i.body.innerHTML}const Nv="TemplateFactory",Lv={allowList:ui,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Iv={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},jv={entry:"(string|element|function|null)",selector:"(string|element)"};class Pv extends Vt{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Lv}static get DefaultType(){return Iv}static get NAME(){return Nv}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[i,a]of Object.entries(this._config.content))this._setContent(e,a,i);const t=e.children[0],o=this._resolvePossibleFunction(this._config.extraClass);return o&&t.classList.add(...o.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,o]of Object.entries(e))super._typeCheckConfig({selector:t,entry:o},jv)}_setContent(e,t,o){const i=te.findOne(o,e);if(i){if(t=this._resolvePossibleFunction(t),!t){i.remove();return}if(Ue(t)){this._putElementInTemplate(Qe(t),i);return}if(this._config.html){i.innerHTML=this._maybeSanitize(t);return}i.textContent=t}}_maybeSanitize(e){return this._config.sanitize?Dv(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return Se(e,[void 0,this])}_putElementInTemplate(e,t){if(this._config.html){t.innerHTML="",t.append(e);return}t.textContent=e.textContent}}const Rv="tooltip",Wv=new Set(["sanitize","allowList","sanitizeFn"]),Ms="fade",Hv="modal",Yt="show",Vv=".tooltip-inner",Jn=`.${Hv}`,Qn="hide.bs.modal",Lt="hover",Ds="focus",Ns="click",Fv="manual",Bv="hide",qv="hidden",Uv="show",zv="shown",Kv="inserted",Gv="click",Yv="focusin",Jv="focusout",Qv="mouseenter",Xv="mouseleave",Zv={AUTO:"auto",TOP:"top",RIGHT:De()?"left":"right",BOTTOM:"bottom",LEFT:De()?"right":"left"},eh={allowList:ui,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},th={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Dt extends He{constructor(e,t){if(typeof Po>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return eh}static get DefaultType(){return th}static get NAME(){return Rv}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),K.off(this._element.closest(Jn),Qn,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=K.trigger(this._element,this.constructor.eventName(Uv)),o=(Ho(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!o)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:a}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(a.append(i),K.trigger(this._element,this.constructor.eventName(Kv))),this._popper=this._createPopper(i),i.classList.add(Yt),"ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))K.on(m,"mouseover",os);const r=()=>{K.trigger(this._element,this.constructor.eventName(zv)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(r,this.tip,this._isAnimated())}hide(){if(!this._isShown()||K.trigger(this._element,this.constructor.eventName(Bv)).defaultPrevented)return;if(this._getTipElement().classList.remove(Yt),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))K.off(i,"mouseover",os);this._activeTrigger[Ns]=!1,this._activeTrigger[Ds]=!1,this._activeTrigger[Lt]=!1,this._isHovered=null;const o=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),K.trigger(this._element,this.constructor.eventName(qv)))};this._queueCallback(o,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(Ms,Yt),t.classList.add(`bs-${this.constructor.NAME}-auto`);const o=Vm(this.constructor.NAME).toString();return t.setAttribute("id",o),this._isAnimated()&&t.classList.add(Ms),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Pv({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Vv]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Ms)}_isShown(){return this.tip&&this.tip.classList.contains(Yt)}_createPopper(e){const t=Se(this._config.placement,[this,e,this._element]),o=Zv[t.toUpperCase()];return en(this._element,e,this._getPopperConfig(o))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_resolvePossibleFunction(e){return Se(e,[this._element,this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:o=>{this._getTipElement().setAttribute("data-popper-placement",o.state.placement)}}]};return{...t,...Se(this._config.popperConfig,[void 0,t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if(t==="click")K.on(this._element,this.constructor.eventName(Gv),this._config.selector,o=>{const i=this._initializeOnDelegatedTarget(o);i._activeTrigger[Ns]=!(i._isShown()&&i._activeTrigger[Ns]),i.toggle()});else if(t!==Fv){const o=t===Lt?this.constructor.eventName(Qv):this.constructor.eventName(Yv),i=t===Lt?this.constructor.eventName(Xv):this.constructor.eventName(Jv);K.on(this._element,o,this._config.selector,a=>{const r=this._initializeOnDelegatedTarget(a);r._activeTrigger[a.type==="focusin"?Ds:Lt]=!0,r._enter()}),K.on(this._element,i,this._config.selector,a=>{const r=this._initializeOnDelegatedTarget(a);r._activeTrigger[a.type==="focusout"?Ds:Lt]=r._element.contains(a.relatedTarget),r._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},K.on(this._element.closest(Jn),Qn,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=ze.getDataAttributes(this._element);for(const o of Object.keys(t))Wv.has(o)&&delete t[o];return e={...t,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Qe(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,o]of Object.entries(this._config))this.constructor.Default[t]!==o&&(e[t]=o);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=Dt.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}Ie(Dt);const sh="popover",nh=".popover-header",oh=".popover-body",ih={...Dt.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},ah={...Dt.DefaultType,content:"(null|string|element|function)"};class on extends Dt{static get Default(){return ih}static get DefaultType(){return ah}static get NAME(){return sh}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[nh]:this._getTitle(),[oh]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=on.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}Ie(on);const rh="scrollspy",lh="bs.scrollspy",an=`.${lh}`,ch=".data-api",uh=`activate${an}`,Xn=`click${an}`,dh=`load${an}${ch}`,mh="dropdown-item",ft="active",ph='[data-bs-spy="scroll"]',Ls="[href]",fh=".nav, .list-group",Zn=".nav-link",vh=".nav-item",hh=".list-group-item",_h=`${Zn}, ${vh} > ${Zn}, ${hh}`,gh=".dropdown",bh=".dropdown-toggle",yh={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},wh={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ps extends He{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return yh}static get DefaultType(){return wh}static get NAME(){return rh}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Qe(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(t=>Number.parseFloat(t))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(K.off(this._config.target,Xn),K.on(this._config.target,Xn,Ls,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const o=this._rootElement||window,i=t.offsetTop-this._element.offsetTop;if(o.scrollTo){o.scrollTo({top:i,behavior:"smooth"});return}o.scrollTop=i}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(t=>this._observerCallback(t),e)}_observerCallback(e){const t=r=>this._targetLinks.get(`#${r.target.id}`),o=r=>{this._previousScrollData.visibleEntryTop=r.target.offsetTop,this._process(t(r))},i=(this._rootElement||document.documentElement).scrollTop,a=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const r of e){if(!r.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(r));continue}const m=r.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(a&&m){if(o(r),!i)return;continue}!a&&!m&&o(r)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=te.find(Ls,this._config.target);for(const t of e){if(!t.hash||Xe(t))continue;const o=te.findOne(decodeURI(t.hash),this._element);Ot(o)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,o))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(ft),this._activateParents(e),K.trigger(this._element,uh,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(mh)){te.findOne(bh,e.closest(gh)).classList.add(ft);return}for(const t of te.parents(e,fh))for(const o of te.prev(t,_h))o.classList.add(ft)}_clearActiveClass(e){e.classList.remove(ft);const t=te.find(`${Ls}.${ft}`,e);for(const o of t)o.classList.remove(ft)}static jQueryInterface(e){return this.each(function(){const t=ps.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}K.on(window,dh,()=>{for(const n of te.find(ph))ps.getOrCreateInstance(n)});Ie(ps);const $h="tab",Eh="bs.tab",mt=`.${Eh}`,Sh=`hide${mt}`,Ch=`hidden${mt}`,kh=`show${mt}`,Th=`shown${mt}`,xh=`click${mt}`,Ah=`keydown${mt}`,Oh=`load${mt}`,Mh="ArrowLeft",eo="ArrowRight",Dh="ArrowUp",to="ArrowDown",Is="Home",so="End",it="active",no="fade",js="show",Nh="dropdown",di=".dropdown-toggle",Lh=".dropdown-menu",Ps=`:not(${di})`,Ih='.list-group, .nav, [role="tablist"]',jh=".nav-item, .list-group-item",Ph=`.nav-link${Ps}, .list-group-item${Ps}, [role="tab"]${Ps}`,mi='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Rs=`${Ph}, ${mi}`,Rh=`.${it}[data-bs-toggle="tab"], .${it}[data-bs-toggle="pill"], .${it}[data-bs-toggle="list"]`;class Tt extends He{constructor(e){super(e),this._parent=this._element.closest(Ih),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),K.on(this._element,Ah,t=>this._keydown(t)))}static get NAME(){return $h}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),o=t?K.trigger(t,Sh,{relatedTarget:e}):null;K.trigger(e,kh,{relatedTarget:t}).defaultPrevented||o&&o.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){if(!e)return;e.classList.add(it),this._activate(te.getElementFromSelector(e));const o=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(js);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),K.trigger(e,Th,{relatedTarget:t})};this._queueCallback(o,e,e.classList.contains(no))}_deactivate(e,t){if(!e)return;e.classList.remove(it),e.blur(),this._deactivate(te.getElementFromSelector(e));const o=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(js);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),K.trigger(e,Ch,{relatedTarget:t})};this._queueCallback(o,e,e.classList.contains(no))}_keydown(e){if(![Mh,eo,Dh,to,Is,so].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter(i=>!Xe(i));let o;if([Is,so].includes(e.key))o=t[e.key===Is?0:t.length-1];else{const i=[eo,to].includes(e.key);o=tn(t,e.target,i,!0)}o&&(o.focus({preventScroll:!0}),Tt.getOrCreateInstance(o).show())}_getChildren(){return te.find(Rs,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const o of t)this._setInitialAttributesOnChild(o)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),o=this._getOuterElement(e);e.setAttribute("aria-selected",t),o!==e&&this._setAttributeIfNotExists(o,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=te.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const o=this._getOuterElement(e);if(!o.classList.contains(Nh))return;const i=(a,r)=>{const m=te.findOne(a,o);m&&m.classList.toggle(r,t)};i(di,it),i(Lh,js),o.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,o){e.hasAttribute(t)||e.setAttribute(t,o)}_elemIsActive(e){return e.classList.contains(it)}_getInnerElement(e){return e.matches(Rs)?e:te.findOne(Rs,e)}_getOuterElement(e){return e.closest(jh)||e}static jQueryInterface(e){return this.each(function(){const t=Tt.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}K.on(document,xh,mi,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!Xe(this)&&Tt.getOrCreateInstance(this).show()});K.on(window,Oh,()=>{for(const n of te.find(Rh))Tt.getOrCreateInstance(n)});Ie(Tt);const Wh="toast",Hh="bs.toast",nt=`.${Hh}`,Vh=`mouseover${nt}`,Fh=`mouseout${nt}`,Bh=`focusin${nt}`,qh=`focusout${nt}`,Uh=`hide${nt}`,zh=`hidden${nt}`,Kh=`show${nt}`,Gh=`shown${nt}`,Yh="fade",oo="hide",Jt="show",Qt="showing",Jh={animation:"boolean",autohide:"boolean",delay:"number"},Qh={animation:!0,autohide:!0,delay:5e3};class fs extends He{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Qh}static get DefaultType(){return Jh}static get NAME(){return Wh}show(){if(K.trigger(this._element,Kh).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Yh);const t=()=>{this._element.classList.remove(Qt),K.trigger(this._element,Gh),this._maybeScheduleHide()};this._element.classList.remove(oo),Ht(this._element),this._element.classList.add(Jt,Qt),this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this.isShown()||K.trigger(this._element,Uh).defaultPrevented)return;const t=()=>{this._element.classList.add(oo),this._element.classList.remove(Qt,Jt),K.trigger(this._element,zh)};this._element.classList.add(Qt),this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Jt),super.dispose()}isShown(){return this._element.classList.contains(Jt)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=t;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=t;break}}if(t){this._clearTimeout();return}const o=e.relatedTarget;this._element===o||this._element.contains(o)||this._maybeScheduleHide()}_setListeners(){K.on(this._element,Vh,e=>this._onInteraction(e,!0)),K.on(this._element,Fh,e=>this._onInteraction(e,!1)),K.on(this._element,Bh,e=>this._onInteraction(e,!0)),K.on(this._element,qh,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=fs.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}us(fs);Ie(fs);const Xh={class:"message-content-column"},Zh=["id"],e_={class:"accordion-item"},t_=["id"],s_=["aria-controls"],n_={class:"d-flex align-items-center w-100"},o_={class:"badge bg-warning text-dark ms-auto me-2"},i_={class:"text-muted"},a_=["id","aria-labelledby"],r_={class:"accordion-body bg-light"},l_={class:"alert alert-warning mb-3",role:"alert"},c_={class:"compaction-metadata"},u_={class:"metadata-row"},d_={class:"metadata-row"},m_={key:0,class:"metadata-row"},p_={class:"continuation-content"},f_={class:"continuation-text border rounded p-3 bg-white"},v_={class:"mb-0"},h_={__name:"CompactionEventGroup",props:{messages:{type:Array,required:!0,validator:n=>n.length===4||n.length===5}},setup(n){const e=n,t=v(()=>`accordion-compaction-${e.messages[0]?.timestamp||Date.now()}`),o=v(()=>`heading-${t.value}`),i=v(()=>`collapse-${t.value}`),a=j(null);let r=null;be(()=>{a.value&&(r=new kt(a.value,{toggle:!1}))}),fi(()=>{r&&r.dispose()});function m(){r&&r.toggle()}const p=v(()=>e.messages.length===5&&e.messages[2]?.type==="system"&&e.messages[2]?.metadata?.subtype==="init"),f=v(()=>p.value?e.messages[3]:e.messages[2]),c=v(()=>f.value?.metadata?.init_data?.compact_metadata||{}),E=v(()=>c.value.pre_tokens||0),g=v(()=>p.value?e.messages[4]:e.messages[3]),w=v(()=>g.value?.content||""),y=v(()=>{const u=e.messages[0]?.timestamp;return u?Rt(u):""});function b(u){return u?`${u.toLocaleString()} tokens`:"0 tokens"}return(u,h)=>(l(),d("div",{class:"message-row message-row-compaction",key:t.value},[h[7]||(h[7]=s("div",{class:"message-speaker"},[s("span",{class:"speaker-label"},"system")],-1)),s("div",Xh,[s("div",{class:"accordion compaction-accordion",id:t.value},[s("div",e_,[s("h2",{class:"accordion-header",id:o.value},[s("button",{class:"accordion-button collapsed",type:"button","aria-expanded":!1,"aria-controls":i.value,onClick:m},[s("div",n_,[h[0]||(h[0]=s("span",{class:"me-2"},"ðŸ—œï¸",-1)),h[1]||(h[1]=s("strong",{class:"me-2"},"Context Compaction Event",-1)),s("span",o_,$(b(E.value)),1),s("small",i_,$(y.value),1)])],8,s_)],8,t_),s("div",{ref_key:"collapseElement",ref:a,id:i.value,class:"accordion-collapse collapse","aria-labelledby":o.value},[s("div",r_,[s("div",l_,[h[5]||(h[5]=s("h6",{class:"alert-heading mb-2"},[s("span",{class:"me-2"},"â„¹ï¸"),Z(" Compaction Details ")],-1)),s("div",c_,[s("div",u_,[h[2]||(h[2]=s("strong",null,"Trigger:",-1)),s("span",null,$(c.value.trigger||"auto"),1)]),s("div",d_,[h[3]||(h[3]=s("strong",null,"Pre-compaction tokens:",-1)),s("span",null,$(b(E.value)),1)]),c.value.post_tokens?(l(),d("div",m_,[h[4]||(h[4]=s("strong",null,"Post-compaction tokens:",-1)),s("span",null,$(b(c.value.post_tokens)),1)])):M("",!0)])]),s("div",p_,[h[6]||(h[6]=s("h6",{class:"text-muted mb-2"},[s("span",{class:"me-2"},"â†©ï¸"),Z(" Continuation Message ")],-1)),s("div",f_,[s("pre",v_,$(w.value),1)])])])],8,a_)])],8,Zh)])]))}},__=ne(h_,[["__scopeId","data-v-e0b95ba8"]]),g_={key:0,class:"text-muted text-center py-5"},b_={__name:"MessageList",setup(n){const e=Me(),t=he(),o=j(null),i=v(()=>{const c=e.currentMessages,E=[];let g=0;for(;g<c.length;){const w=c[g];if(r(w,c,g)){const y=c[g+2],u=y?.type==="system"&&y?.metadata?.subtype==="init"?5:4,h=c.slice(g,g+u);E.push({type:"compaction",messages:h}),g+=u;continue}p(w)&&E.push({type:"message",message:w,attachedTools:[]}),g++}return a(E)});function a(c){const E=new Map,g=new Set;for(let y=0;y<c.length;y++){const b=c[y];if(b.type==="compaction")continue;const u=b.message,h=u.content&&u.content.trim().length>0&&u.content!=="Assistant response",_=u.type==="assistant"&&u.metadata?.has_tool_uses&&u.metadata?.tool_uses?.length>0;if(u.type==="assistant"&&_&&!h){let k=-1,T=!1;for(let H=y-1;H>=0;H--){const V=c[H];if(!g.has(H)){if(V.type==="message"&&V.message.type!=="assistant"){T=!0;break}if(V.type==="message"&&V.message.type==="assistant"){const A=V.message;if(A.content&&A.content.trim().length>0&&A.content!=="Assistant response"){k=H;break}else{k=H;break}}}}T&&k===-1||(T&&k>=0?(E.has(k)||E.set(k,[]),E.get(k).push(...u.metadata.tool_uses),g.add(y)):!T&&k>=0&&(E.has(k)||E.set(k,[]),E.get(k).push(...u.metadata.tool_uses),g.add(y)))}}const w=[];for(let y=0;y<c.length;y++){if(g.has(y))continue;const b=c[y];E.has(y)&&(b.attachedTools=[...b.attachedTools||[],...E.get(y)]),w.push(b)}return w}function r(c,E,g){if(g+3>=E.length)return!1;const w=E[g],y=E[g+1];let b=E[g+2],u=E[g+3],h=E[g+4];const _=w.type==="system"&&w.metadata?.subtype==="status"&&w.metadata?.init_data?.status==="compacting",k=y.type==="system"&&y.metadata?.subtype==="status"&&(y.metadata?.init_data?.status===null||y.metadata?.init_data?.status===void 0);if(b?.type==="system"&&b?.metadata?.subtype==="init"){if(g+4>=E.length)return!1;const H=!0,V=u?.type==="system"&&u?.metadata?.subtype==="compact_boundary",A=h?.type==="user"&&h?.content?.startsWith("This session is being continued from a previous conversation");return w.type==="system"&&w.metadata?.subtype==="status"&&(console.log("[Compaction Debug] Checking 5-message pattern (with init) at index",g),console.log("  Msg1 (compacting):",_),console.log("  Msg2 (null status):",k),console.log("  Msg3 (init):",H),console.log("  Msg4 (boundary):",V),console.log("  Msg5 (continuation):",A)),_&&k&&H&&V&&A}else{const H=b?.type==="system"&&b?.metadata?.subtype==="compact_boundary",V=u?.type==="user"&&u?.content?.startsWith("This session is being continued from a previous conversation");return w.type==="system"&&w.metadata?.subtype==="status"&&(console.log("[Compaction Debug] Checking 4-message pattern (no init) at index",g),console.log("  Msg1 (compacting):",_),console.log("  Msg2 (null status):",k),console.log("  Msg3 (boundary):",H),console.log("  Msg4 (continuation):",V)),_&&k&&H&&V}}async function m(){t.autoScrollEnabled&&(await ss(),o.value&&(o.value.scrollTop=o.value.scrollHeight))}pe(()=>i.value.length,m),pe(()=>e.currentToolCalls.length,m),pe(()=>e.currentToolCalls.map(c=>`${c.id}-${c.status}`).join(","),m),be(()=>{setTimeout(()=>{m()},100)});function p(c){const E=c.subtype||c.metadata?.subtype;if(c.type==="system"&&E==="init"||c.type==="result"||c.type==="permission_request"||c.type==="permission_response")return!1;if(c.type==="user"&&c.metadata?.has_tool_results){const g=c.content||"";if(g.match(/^Tool results?: \d+ results?$/i)||g.trim()==="")return!1}if(c.type==="user"){const g=c.content||"";if(g.includes("<command-message>")&&g.includes("skill is running")||g.startsWith("Base directory for this skill:"))return!1}if(c.type==="user"){const g=c.content||"";if(g.includes("<command-message>")&&g.includes("<command-name>")&&g.includes("<command-args>")||g.includes("ARGUMENTS:")&&(g.includes("<command-name>")||g.match(/\nARGUMENTS:/)))return!1}return!0}function f(c){return{type:c.type||"unknown",content:c.content||"",timestamp:c.timestamp||Date.now()/1e3,metadata:{has_tool_uses:!1,has_tool_results:!1,has_thinking:!1,has_permission_requests:!1,has_permission_responses:!1,tool_uses:[],tool_results:[],thinking_content:"",thinking_blocks:[],...c.metadata}}}return(c,E)=>(l(),d("div",{class:"messages-area flex-grow-1 overflow-auto",ref_key:"messagesArea",ref:o},[i.value.length===0?(l(),d("div",g_," No messages yet. Start a conversation! ")):M("",!0),(l(!0),d(re,null,ue(i.value,(g,w)=>(l(),d(re,{key:`item-${w}`},[g.type==="message"?(l(),we(em,{key:0,message:f(g.message),attachedTools:g.attachedTools||[]},null,8,["message","attachedTools"])):g.type==="compaction"?(l(),we(__,{key:1,messages:g.messages},null,8,["messages"])):M("",!0)],64))),128))],512))}},y_=ne(b_,[["__scopeId","data-v-6bae0fb1"]]),w_={class:"border-top bg-light"},$_={key:0,class:"alert alert-danger mb-0 py-2 px-3 small d-flex align-items-center gap-2",role:"alert"},E_={class:"d-flex gap-2 align-items-end px-2 py-1"},S_=["placeholder","disabled"],C_=["disabled"],k_={__name:"InputArea",setup(n){const e=de(),t=et(),o=j(null),i=j(window.innerWidth),a=v({get:()=>e.currentInput,set:u=>{e.currentInput=u}}),r=v(()=>e.currentSession?.is_processing||!1),m=v(()=>t.sessionConnected),p=v(()=>e.currentSession?.state==="starting"),f=v(()=>i.value<768),c=v(()=>p.value?"Session is starting...":m.value?"Type your message to Claude Code...":"Waiting for connection...");function E(){i.value=window.innerWidth}be(()=>{window.addEventListener("resize",E)}),Ce(()=>{window.removeEventListener("resize",E)});function g(u){if(u.key==="Enter"&&!u.shiftKey){if(f.value)return;u.preventDefault(),y()}}function w(){const u=o.value;if(!u)return;u.style.height="auto";const h=Math.min(u.scrollHeight,parseInt(getComputedStyle(u).maxHeight));u.style.height=h+"px"}function y(){a.value.trim()&&(t.sendMessage(a.value),a.value="",o.value&&(o.value.style.height="auto"))}function b(){t.interruptSession()}return(u,h)=>(l(),d("div",w_,[m.value?M("",!0):(l(),d("div",$_,[...h[1]||(h[1]=[s("span",{class:"flex-shrink-0"},"â—",-1),s("strong",null,"Disconnected",-1),s("span",{class:"text-muted"},"â€”",-1),s("span",null,"Cannot send messages while reconnecting...",-1)])])),s("div",E_,[ge(s("textarea",{id:"message-input",ref_key:"messageTextarea",ref:o,"onUpdate:modelValue":h[0]||(h[0]=_=>a.value=_),class:"form-control",placeholder:c.value,disabled:p.value||!m.value,rows:"1",onInput:w,onKeydown:g},null,40,S_),[[We,a.value]]),r.value?(l(),d("button",{key:0,class:"btn btn-warning",title:"Stop current processing",onClick:b}," Stop ")):(l(),d("button",{key:1,class:"btn btn-primary",disabled:!a.value.trim()||!m.value||p.value,onClick:y}," Send ",8,C_))])]))}},T_=ne(k_,[["__scopeId","data-v-ef1e5094"]]),x_={class:"d-flex flex-column flex-grow-1 overflow-hidden position-relative"},A_={key:0,class:"position-absolute top-0 start-0 w-100 h-100 bg-white bg-opacity-75 d-flex flex-column justify-content-center align-items-center",style:{"z-index":"1000"}},O_={class:"text-secondary"},M_={class:"d-flex flex-column flex-grow-1 overflow-hidden"},D_={__name:"SessionView",props:{sessionId:{type:String,required:!0}},setup(n){const e=n,t=de(),o=he(),i=v(()=>t.currentSession),a=v(()=>o.isLoading),r=v(()=>o.loadingMessage);return be(async()=>{if(e.sessionId!==t.currentSessionId){o.showLoading("Loading session...");try{await t.selectSession(e.sessionId)}finally{o.hideLoading()}}}),pe(()=>e.sessionId,async(m,p)=>{if(m!==p&&m!==t.currentSessionId){o.showLoading("Loading session...");try{await t.selectSession(m)}finally{o.hideLoading()}}}),Ce(()=>{}),(m,p)=>(l(),d("div",x_,[a.value?(l(),d("div",A_,[p[0]||(p[0]=s("div",{class:"spinner-border text-primary mb-3",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1)),s("p",O_,$(r.value),1)])):M("",!0),i.value?(l(),we(Li,{key:1,"session-id":e.sessionId},null,8,["session-id"])):M("",!0),s("div",M_,[fe(y_)]),fe(T_),i.value?(l(),we(Wi,{key:2,"session-id":e.sessionId},null,8,["session-id"])):M("",!0),i.value?(l(),we(Gi,{key:3,"session-id":e.sessionId},null,8,["session-id"])):M("",!0)]))}},vs=xt("legion",()=>{const n=j(new Map),e=j(new Map),t=j(null),o=v(()=>n.value.get(t.value)||[]),i=v(()=>e.value.get(t.value)||[]);function a(y){t.value=y}async function r(y,b=100,u=0){try{const h=await ce.get(`/api/legions/${y}/timeline?limit=${b}&offset=${u}`),_=h.comms||[],k=h.total_count||_.length,T=h.has_more||!1;return _.sort((H,V)=>new Date(H.timestamp)-new Date(V.timestamp)),console.log(`Loaded ${_.length} of ${k} comms for legion ${y}`),n.value.set(y,_),n.value=new Map(n.value),{comms:_,totalCount:k,hasMore:T}}catch(h){throw console.error("Failed to load timeline:",h),h}}function m(y,b){n.value.has(y)||n.value.set(y,[]);const u=n.value.get(y);if(u.some(_=>_.comm_id===b.comm_id)){console.log(`Duplicate comm ${b.comm_id} prevented in timeline`);return}u.push(b),n.value=new Map(n.value)}async function p(y,b){try{const h=(await ce.post(`/api/legions/${y}/comms`,b)).comm;return console.log(`Sent comm ${h.comm_id} to legion ${y}`),h}catch(u){throw console.error("Failed to send comm:",u),u}}async function f(y){return console.log(`Minions for legion ${y} are already available in session store`),[]}async function c(y,b){try{const h=(await ce.post(`/api/legions/${y}/minions`,b)).minion;return await f(y),console.log(`Created minion ${h.minion_id} in legion ${y}`),h}catch(u){throw console.error("Failed to create minion:",u),u}}async function E(y){try{const b=await ce.post(`/api/legions/${y}/halt-all`);return console.log(`Halted ${b.halted_count} of ${b.total_minions} minions in legion ${y}`),b.failed_minions&&b.failed_minions.length>0&&console.warn("Failed to halt some minions:",b.failed_minions),b}catch(b){throw console.error("Failed to halt all minions:",b),b}}async function g(y){try{const b=await ce.post(`/api/legions/${y}/resume-all`);return console.log(`Resumed ${b.resumed_count} of ${b.total_minions} minions in legion ${y}`),b.failed_minions&&b.failed_minions.length>0&&console.warn("Failed to resume some minions:",b.failed_minions),b}catch(b){throw console.error("Failed to resume all minions:",b),b}}function w(y){n.value.delete(y),e.value.delete(y),n.value=new Map(n.value),e.value=new Map(e.value)}return{commsByLegion:n,minionsByLegion:e,currentLegionId:t,currentComms:o,currentMinions:i,setCurrentLegion:a,loadTimeline:r,addComm:m,sendComm:p,loadMinions:f,createMinion:c,haltAll:E,resumeAll:g,clearLegionData:w}}),N_=Object.freeze(Object.defineProperty({__proto__:null,useLegionStore:vs},Symbol.toStringTag,{value:"Module"})),L_={class:"timeline-header border-bottom p-3"},I_={class:"project-name"},j_=["title"],P_={__name:"TimelineHeader",props:{legionId:{type:String,required:!0}},setup(n){const e=n,t=Le(),o=v(()=>t.projects.get(e.legionId)),i=v(()=>o.value?.name||"Legion");return(a,r)=>(l(),d("div",L_,[s("div",null,[s("div",I_,$(i.value),1),s("div",{class:"view-name",title:n.legionId},"Timeline",8,j_)])]))}},R_=ne(P_,[["__scopeId","data-v-44f386f5"]]),W_={class:"timeline-status-bar border-top p-2 bg-light"},H_={class:"d-flex justify-content-end"},V_={__name:"TimelineStatusBar",props:{legionId:{type:String,required:!0}},setup(n){const e=he();function t(){e.setAutoScroll(!e.autoScrollEnabled)}return(o,i)=>(l(),d("div",W_,[s("div",H_,[s("button",{class:X(["btn btn-sm",ts(e).autoScrollEnabled?"btn-primary":"btn-outline-secondary"]),onClick:t}," â¬‡ï¸ "+$(ts(e).autoScrollEnabled?"ON":"OFF"),3)])]))}},F_=ne(V_,[["__scopeId","data-v-891c73db"]]),B_={class:"comm-composer border-top p-3"},q_={key:0,class:"d-flex gap-2 mb-2"},U_={class:"flex-grow-1"},z_=["disabled"],K_={label:"Minions"},G_=["value"],Y_={style:{"min-width":"150px"}},J_=["disabled"],Q_={class:"d-flex gap-2 align-items-end position-relative"},X_={class:"flex-grow-1 position-relative"},Z_=["disabled"],eg=["onClick","onMouseenter"],tg=["disabled"],sg={key:0},ng={key:1},og={__name:"CommComposer",props:{legionId:{type:String,required:!0},hideRecipientSelector:{type:Boolean,default:!1}},setup(n){const e=n,t=vs(),o=de(),i=Le(),a=j(""),r=j("task"),m=j(""),p=j(!1),f=j(window.innerWidth),c=j(!1),E=j([]),g=j(0),w=j(-1),y=j(null),b=j(null),u=v(()=>f.value<768),h=v(()=>{const U=i.projects.get(e.legionId);return!U||!U.session_ids?[]:U.session_ids.map(I=>o.sessions.get(I)).filter(I=>I)}),_=v(()=>a.value&&m.value.trim().length>0);function k(U){return{created:"â—‹",starting:"â—",active:"â—",paused:"â¸",terminating:"â—",terminated:"âœ—",error:"âš "}[U.state]||"â—‹"}function T(U){return U.role?`${U.name} (${U.role})`:U.name}function H(){const U=y.value;if(!U)return;U.style.height="auto";const I=Math.min(U.scrollHeight,parseInt(getComputedStyle(U).maxHeight));U.style.height=I+"px"}function V(){const U=y.value;if(!U)return;H();const I=m.value,P=U.selectionStart,F=I.substring(0,P),x=F.lastIndexOf("#");if(x===-1){c.value=!1;return}const O=F.substring(x+1).toLowerCase();if(O.includes(" ")){c.value=!1;return}const z=h.value.filter(L=>L.name.toLowerCase().includes(O)).map(L=>({type:"minion",name:L.name,role:L.role,id:L.session_id,state:L.state}));if(z.length===0){c.value=!1;return}E.value=z,g.value=0,w.value=x,c.value=!0}function A(){if(!b.value)return;const U=b.value,I=U.children[g.value];if(!I)return;const P=I.offsetTop,F=I.offsetHeight,x=U.scrollTop,O=U.clientHeight;P<x?U.scrollTop=P:P+F>x+O&&(U.scrollTop=P+F-O)}function W(U){if(!c.value){if(U.key==="Enter"&&!U.shiftKey){if(u.value)return;_.value&&(U.preventDefault(),C())}return}if(U.key==="ArrowDown")U.preventDefault(),g.value=(g.value+1)%E.value.length,A();else if(U.key==="ArrowUp")U.preventDefault(),g.value=g.value===0?E.value.length-1:g.value-1,A();else if(U.key==="Enter"){U.preventDefault();const I=E.value[g.value];I&&S(I)}else U.key==="Escape"&&(c.value=!1)}function S(U){const I=y.value;if(!I)return;const P=m.value,F=I.selectionStart,x=P.substring(0,w.value)+"#"+U.name+" "+P.substring(F);m.value=x;const O=w.value+U.name.length+2;setTimeout(()=>{I.setSelectionRange(O,O),I.focus()},0),c.value=!1}async function C(){if(!(!_.value||p.value)){p.value=!0;try{const[U,I]=a.value.split(":"),P={comm_type:r.value,content:m.value.trim()};U==="minion"&&(P.to_minion_id=I),await t.sendComm(e.legionId,P),m.value="",H()}catch(U){console.error("Failed to send comm:",U),alert(`Failed to send comm: ${U.message}`)}finally{p.value=!1}}}function q(){f.value=window.innerWidth}return be(()=>{window.addEventListener("resize",q)}),Ce(()=>{window.removeEventListener("resize",q)}),pe(c,U=>{if(U){const I=P=>{P.target.closest(".comm-composer")||(c.value=!1,document.removeEventListener("click",I))};setTimeout(()=>document.addEventListener("click",I),0)}}),(U,I)=>(l(),d("div",B_,[n.hideRecipientSelector?M("",!0):(l(),d("div",q_,[s("div",U_,[ge(s("select",{"onUpdate:modelValue":I[0]||(I[0]=P=>a.value=P),class:"form-select form-select-sm",disabled:p.value},[I[3]||(I[3]=s("option",{value:""},"-- Select Recipient --",-1)),s("optgroup",K_,[(l(!0),d(re,null,ue(h.value,P=>(l(),d("option",{key:P.session_id,value:`minion:${P.session_id}`},$(k(P))+" "+$(T(P)),9,G_))),128))])],8,z_),[[fn,a.value]])]),s("div",Y_,[ge(s("select",{"onUpdate:modelValue":I[1]||(I[1]=P=>r.value=P),class:"form-select form-select-sm",disabled:p.value},[...I[4]||(I[4]=[s("option",{value:"task"},"Task",-1),s("option",{value:"question"},"Question",-1),s("option",{value:"info"},"Info",-1),s("option",{value:"report"},"Report",-1)])],8,J_),[[fn,r.value]])])])),s("div",Q_,[s("div",X_,[ge(s("textarea",{ref_key:"contentTextarea",ref:y,"onUpdate:modelValue":I[2]||(I[2]=P=>m.value=P),class:"form-control form-control-sm",rows:"1",placeholder:"Type message... Use # to mention minions",disabled:p.value,onInput:V,onKeydown:W},null,40,Z_),[[We,m.value]]),c.value?(l(),d("div",{key:0,ref_key:"autocompleteDropdown",ref:b,class:"autocomplete-dropdown position-absolute bg-white border rounded shadow-sm"},[(l(!0),d(re,null,ue(E.value,(P,F)=>(l(),d("div",{key:P.id,class:X(["autocomplete-item px-2 py-1",{"bg-light":F===g.value}]),onClick:x=>S(P),onMouseenter:x=>g.value=F},$(P.type==="minion"?k(P):"#ï¸âƒ£")+" "+$(P.name)+$(P.role?` (${P.role})`:""),43,eg))),128))],512)):M("",!0)]),s("div",null,[s("button",{class:"btn btn-primary btn-sm",disabled:!_.value||p.value,onClick:C},[p.value?(l(),d("span",sg,[...I[5]||(I[5]=[s("span",{class:"spinner-border spinner-border-sm me-1"},null,-1),Z(" Sending... ",-1)])])):(l(),d("span",ng,"Send"))],8,tg)])])]))}},ig=ne(og,[["__scopeId","data-v-e52b8e8f"]]),ag={class:"message-content-column-full"},rg=["aria-expanded"],lg={class:"comm-sender-recipient"},cg={class:"comm-badge-summary"},ug=["title"],dg={class:"comm-summary-text text-muted ms-2"},mg=["aria-label"],pg={key:0,class:"comm-content-body"},fg=["innerHTML"],vg="ffffffff-ffff-ffff-ffff-ffffffffffff",hg={__name:"CommCard",props:{comm:{type:Object,required:!0},senderName:{type:String,required:!0},recipientName:{type:String,required:!0}},setup(n){const e=n;rt.setOptions({breaks:!0,gfm:!0});const t=j(!1);function o(){t.value=!t.value}const i=v(()=>e.comm.from_minion_id===vg),a=v(()=>{const f=new Date(e.comm.timestamp*1e3);return`${e.senderName} â†’ ${e.recipientName}
${f.toLocaleString()}`}),r=v(()=>({task:"bg-primary",question:"bg-info",info:"bg-secondary",report:"bg-success",system:"bg-dark"})[e.comm.comm_type]||"bg-secondary"),m=v(()=>{if(e.comm.summary)return e.comm.summary;const f=e.comm.content||"";return f.length>100?f.substring(0,100)+"...":f}),p=v(()=>{const f=e.comm.content||"";let c=rt.parse(f);return c=c.replace(/\n</g,"<"),c=c.replace(/\n+$/,""),rs.sanitize(c)});return(f,c)=>(l(),d("div",{class:X(["message-row message-row-comm",{"system-comm":i.value}])},[s("div",ag,[s("div",{class:"comm-header-accordion",onClick:o,role:"button","aria-expanded":t.value},[s("div",lg,[s("strong",{class:X({"system-sender":i.value})},$(n.senderName),3),n.recipientName?(l(),d(re,{key:0},[c[0]||(c[0]=s("span",{class:"text-muted mx-1"},"â†’",-1)),s("strong",null,$(n.recipientName),1)],64)):M("",!0)]),s("div",cg,[s("span",{class:X(["badge",r.value]),title:a.value},$(n.comm.comm_type),11,ug),s("span",dg,$(m.value),1)]),s("div",{class:"expand-icon","aria-label":t.value?"Collapse":"Expand"},$(t.value?"â–¾":"â–¸"),9,mg)],8,rg),t.value?(l(),d("div",pg,[s("div",{class:"message-text",innerHTML:p.value},null,8,fg)])):M("",!0)])],2))}},_g=ne(hg,[["__scopeId","data-v-28513f64"]]),gg={class:"timeline-view d-flex flex-column h-100"},bg={key:0,class:"text-center text-muted"},yg={key:1,class:"text-center text-danger"},wg={key:2,class:"text-center text-muted"},$g={key:3,class:"comm-list"},Eg={__name:"TimelineView",props:{legionId:{type:String,required:!0}},setup(n){const e=n,t=vs();Le();const o=de(),i=et(),a=he(),r=j(!0),m=j(null),p=j(null),f=v(()=>t.currentComms);function c(u){return u.from_user?"You":u.from_minion_id?u.from_minion_id==="ffffffff-ffff-ffff-ffff-ffffffffffff"?"SYSTEM":o.sessions.get(u.from_minion_id)?.name||"Unknown":"Unknown"}function E(u){return u.to_user?"You":u.to_minion_id?o.sessions.get(u.to_minion_id)?.name||"Unknown":"All"}async function g(){a.autoScrollEnabled&&(await ss(),p.value&&(p.value.scrollTop=p.value.scrollHeight))}async function w(){r.value=!0,m.value=null;try{t.setCurrentLegion(e.legionId),await Promise.all([t.loadTimeline(e.legionId),t.loadMinions(e.legionId)]),await ss(),await g(),setTimeout(()=>{g()},100)}catch(u){console.error("Failed to load timeline:",u),u.response?m.value=`${u.message} (${u.response.status})`:m.value=u.message||"Unknown error"}finally{r.value=!1}}function y(){i.connectLegion(e.legionId)}function b(){i.disconnectLegion()}return pe(()=>f.value.length,()=>{g()}),be(()=>{o.currentSessionId=null,w(),y(),setTimeout(()=>{g()},100)}),Ce(()=>{b()}),(u,h)=>(l(),d("div",gg,[fe(R_,{"legion-id":n.legionId},null,8,["legion-id"]),s("div",{ref_key:"messagesArea",ref:p,class:"timeline-messages flex-grow-1 overflow-auto"},[r.value?(l(),d("div",bg,[...h[0]||(h[0]=[s("div",{class:"spinner-border spinner-border-sm me-2",role:"status"},null,-1),Z(" Loading timeline... ",-1)])])):m.value?(l(),d("div",yg," Failed to load timeline: "+$(m.value),1)):f.value.length===0?(l(),d("div",wg," No messages yet. Minions will appear here once they start communicating. ")):(l(),d("div",$g,[(l(!0),d(re,null,ue(f.value,_=>(l(),we(_g,{key:_.comm_id,comm:_,"sender-name":c(_),"recipient-name":E(_)},null,8,["comm","sender-name","recipient-name"]))),128))]))],512),fe(ig,{"legion-id":n.legionId},null,8,["legion-id"]),fe(F_,{"legion-id":n.legionId},null,8,["legion-id"])]))}},Sg=ne(Eg,[["__scopeId","data-v-b6752179"]]),Cg={class:"minion-info flex-grow-1"},kg={class:"minion-name"},Tg={key:0,class:"me-1"},xg={key:1,class:"badge bg-secondary ms-2"},Ag={key:0,class:"latest-activity text-muted"},Og={key:0,class:"activity-prefix"},Mg=["title"],Dg={key:1,class:"activity-time ms-1"},Ng={key:1,class:"latest-activity text-muted"},Lg={class:"activity-prefix"},Ig=["title"],jg={key:2,class:"latest-activity text-muted fst-italic small"},Pg={class:"node-row"},Rg={class:"node-left"},Wg={key:0,class:"me-2"},Hg={key:1,class:"badge bg-secondary ms-2"},Vg={class:"node-right"},Fg={key:0,class:"latest-message-preview"},Bg={key:0,class:"message-prefix"},qg=["title"],Ug={key:1,class:"message-time ms-1"},zg={key:1,class:"last-comm-preview"},Kg={class:"comm-direction"},Gg=["title"],Yg={key:2,class:"text-muted fst-italic small"},Jg={class:"node-actions"},Qg={key:2,class:"minion-children"},Xg={key:1,class:"text-danger small ms-4"},Zg={__name:"MinionTreeNode",props:{minionData:{type:Object,required:!0},level:{type:Number,default:0},layout:{type:String,default:"two-column",validator:n=>["two-column","sidebar"].includes(n)}},emits:["minion-click"],setup(n,{emit:e}){const t=n,o=e,i=de(),a=Me(),r=he(),m=v(()=>!t.minionData||!t.minionData.id?null:i.getSession(t.minionData.id)),p=v(()=>{if(!t.minionData||!t.minionData.id)return null;const S=a.messagesBySession.get(t.minionData.id);if(!S||S.length===0)return null;for(let C=S.length-1;C>=0;C--){const q=S[C];if(q.type!=="result"&&!(q.type==="user"&&q.content&&q.content.startsWith("Tool results:"))&&!(q.type==="system"&&q.content==="System message")&&!(q.type==="assistant"&&q.content==="Assistant response")&&(q.type==="user"||q.type==="assistant"||q.type==="system"))return{content:q.content,type:q.type,timestamp:q.timestamp}}return null}),f=v(()=>{if(!t.minionData)return null;const S={...t.minionData};return m.value&&(S.state=m.value.state,S.is_processing=m.value.is_processing,m.value.name&&(S.name=m.value.name),m.value.latest_message&&(S.latest_message=m.value.latest_message,S.latest_message_type=m.value.latest_message_type,S.latest_message_time=m.value.latest_message_time)),p.value&&(S.latest_message=p.value.content,S.latest_message_type=p.value.type,S.latest_message_time=p.value.timestamp),S}),c=v(()=>t.level*24),E=v(()=>!t.minionData||!t.minionData.id?!1:i.currentSessionId===t.minionData.id),g=v(()=>t.minionData&&t.minionData.children&&t.minionData.children.length>0),w=v(()=>t.minionData&&t.minionData.is_overseer&&g.value),y=v(()=>{const S=f.value;return S?S.state==="paused"&&S.is_processing?"pending-prompt":S.is_processing?"processing":S.state||"created":"created"}),b=v(()=>{const S=y.value;return{created:"status-dot-grey",starting:"status-dot-green status-blinking",active:"status-dot-green",running:"status-dot-green",processing:"status-dot-purple status-blinking",paused:"status-dot-grey","pending-prompt":"status-dot-yellow status-blinking",terminated:"status-dot-grey",error:"status-dot-red",failed:"status-dot-red"}[S]||"status-dot-grey"}),u=v(()=>{const S=y.value;return{backgroundColor:{created:"#d3d3d3",starting:"#90ee90",active:"#90ee90",running:"#90ee90",processing:"#dda0dd",paused:"#d3d3d3","pending-prompt":"#ffc107",terminated:"#d3d3d3",error:"#ffb3b3",failed:"#ffb3b3"}[S]||"#d3d3d3"}}),h=v(()=>{const S=f.value;if(!S||!S.latest_message_type)return"";const C=S.latest_message_type;return C==="user"?"User -->:":C==="system"?"System:":""}),_=v(()=>{const S=f.value;if(!S||!S.latest_message)return"";const C=S.latest_message,q=150;return C.length>q?C.slice(0,q)+"...":C}),k=v(()=>{const S=f.value;if(!S||!S.latest_message_time)return"";try{const C=Date.now();let q;if(typeof S.latest_message_time=="number"?q=S.latest_message_time<3250368e4?S.latest_message_time*1e3:S.latest_message_time:q=new Date(S.latest_message_time).getTime(),isNaN(q)||q<9466848e5||q>C+6e4)return console.warn("Invalid timestamp for relative time calculation:",S.latest_message_time,"parsed to:",q),"";const U=C-q;if(U<0)return"just now";const I=Math.floor(U/6e4),P=Math.floor(I/60),F=Math.floor(P/24);return F>0?`${F}d ago`:P>0?`${P}h ago`:I>0?`${I}m ago`:"just now"}catch(C){return console.error("Error calculating relative time:",C,S.latest_message_time),""}});function T(S){return S.to_user?"User":S.to_minion_name?S.to_minion_name:"unknown"}function H(S){const C=S.summary||S.content||"";return C.length>150?C.substring(0,150)+"...":C}function V(){o("minion-click",t.minionData.id)}function A(){const S=i.sessions.get(t.minionData.id);S&&r.showModal("edit-session",{session:S})}function W(){const S=i.sessions.get(t.minionData.id);S&&r.showModal("manage-session",{session:S})}return(S,C)=>{const q=ao("MinionTreeNode",!0);return n.minionData?(l(),d("div",{key:0,class:"minion-tree-node",style:bt({marginLeft:`${c.value}px`})},[n.layout==="sidebar"?(l(),d("div",{key:0,class:X(["minion-card minion-card-clickable border-start border-2 mb-2 d-flex align-items-center p-2",{active:E.value}]),onClick:V},[s("div",{class:X(["status-dot me-2",b.value]),style:bt(u.value)},null,6),s("div",Cg,[s("div",kg,[w.value?(l(),d("span",Tg,"ðŸ‘‘")):M("",!0),s("strong",null,$(f.value?.name||n.minionData.name),1),w.value?(l(),d("span",xg,$(n.minionData.children.length)+" "+$(n.minionData.children.length===1?"child":"children"),1)):M("",!0)]),f.value?.latest_message?(l(),d("div",Ag,[h.value?(l(),d("span",Og,$(h.value),1)):M("",!0),s("span",{class:"activity-content",title:f.value.latest_message},$(_.value),9,Mg),k.value?(l(),d("span",Dg,"("+$(k.value)+")",1)):M("",!0)])):n.minionData?.last_comm?(l(),d("div",Ng,[s("span",Lg,[C[1]||(C[1]=Z("â†’ ",-1)),s("strong",null,$(T(n.minionData.last_comm)),1),C[2]||(C[2]=Z(": ",-1))]),s("span",{class:"activity-content",title:n.minionData.last_comm.content||""},$(H(n.minionData.last_comm)),9,Ig)])):(l(),d("div",jg," No activity yet "))]),s("button",{class:"btn btn-sm btn-outline-secondary me-1",title:"Edit minion",onClick:_e(A,["stop"])}," âœï¸ "),s("button",{class:"btn btn-sm btn-outline-secondary",title:"Manage minion",onClick:_e(W,["stop"])}," âš™ï¸ ")],2)):(l(),d("div",{key:1,class:X(["minion-card minion-card-clickable border-start border-2 mb-2",{active:E.value}]),onClick:V},[s("div",Pg,[s("div",Rg,[s("div",{class:X(["status-dot me-2",b.value]),style:bt(u.value)},null,6),w.value?(l(),d("span",Wg,"ðŸ‘‘")):M("",!0),s("strong",null,$(f.value?.name||n.minionData.name),1),w.value?(l(),d("span",Hg,$(n.minionData.children.length)+" "+$(n.minionData.children.length===1?"child":"children"),1)):M("",!0)]),s("div",Vg,[f.value?.latest_message?(l(),d("div",Fg,[h.value?(l(),d("span",Bg,$(h.value),1)):M("",!0),s("span",{class:"message-content",title:f.value.latest_message},$(_.value),9,qg),k.value?(l(),d("span",Ug,"("+$(k.value)+")",1)):M("",!0)])):n.minionData?.last_comm?(l(),d("div",zg,[s("span",Kg,[C[3]||(C[3]=Z("â†’ ",-1)),s("strong",null,$(T(n.minionData.last_comm)),1),C[4]||(C[4]=Z(":",-1))]),s("span",{class:"comm-content",title:n.minionData.last_comm.content||""},$(H(n.minionData.last_comm)),9,Gg)])):(l(),d("div",Yg," No activity yet "))]),s("div",Jg,[s("button",{class:"btn btn-sm btn-outline-secondary me-1",title:"Edit minion",onClick:_e(A,["stop"])}," âœï¸ "),s("button",{class:"btn btn-sm btn-outline-secondary",title:"Manage minion",onClick:_e(W,["stop"])}," âš™ï¸ ")])])],2)),g.value?(l(),d("div",Qg,[(l(!0),d(re,null,ue(n.minionData.children,U=>(l(),we(q,{key:U.id,"minion-data":U,level:n.level+1,layout:n.layout,onMinionClick:C[0]||(C[0]=I=>S.$emit("minion-click",I))},null,8,["minion-data","level","layout"]))),128))])):M("",!0)],4)):(l(),d("div",Xg," âš  Minion data is missing "))}}},pi=ne(Zg,[["__scopeId","data-v-5dae8a96"]]),eb={class:"project-overview d-flex flex-column h-100"},tb={class:"project-overview-header border-bottom p-3"},sb={class:"d-flex align-items-center justify-content-between"},nb={class:"mb-1"},ob={key:0,class:"me-2"},ib={class:"text-muted font-monospace"},ab={class:"d-flex gap-2"},rb=["title"],lb={class:"project-overview-content flex-grow-1 overflow-auto p-3"},cb={key:0,class:"text-center py-5"},ub={key:1,class:"alert alert-danger"},db={key:2,class:"text-center py-5"},mb={key:3},pb={class:"row g-3 mb-4"},fb={class:"col-md-4"},vb={class:"card h-100"},hb={class:"card-body"},_b={class:"card-title mb-0"},gb={class:"text-muted"},bb={class:"col-md-4"},yb={class:"card h-100"},wb={class:"card-body"},$b={class:"card-title mb-0"},Eb={class:"text-muted"},Sb={key:0,class:"card mb-4"},Cb={class:"card mb-4"},kb={class:"card-header d-flex align-items-center justify-content-between"},Tb={class:"mb-0"},xb={class:"badge bg-secondary"},Ab={class:"card-body"},Ob={key:0,class:"text-center py-4"},Mb={key:1,class:"text-center text-muted py-4"},Db={key:2,class:"hierarchy-tree"},Nb={class:"user-root-node mb-3 border rounded bg-white"},Lb={class:"node-row"},Ib={class:"node-left"},jb={class:"badge bg-primary ms-2"},Pb={class:"node-right"},Rb={key:0,class:"last-comm-preview"},Wb={class:"comm-direction"},Hb=["title"],Vb={key:1,class:"text-muted fst-italic"},Fb={class:"root-minions ms-4"},Bb={class:"card"},qb={class:"card-body"},Ub={class:"row mb-0"},zb={class:"col-sm-8 font-monospace text-break"},Kb={class:"col-sm-8 font-monospace text-break"},Gb={class:"col-sm-8"},Yb={class:"project-overview-statusbar border-top p-2 bg-light d-flex align-items-center justify-content-between"},Jb={class:"text-muted"},Qb={__name:"ProjectOverview",props:{projectId:{type:String,required:!0}},setup(n){const e=n,t=Pt(),o=Le(),i=de(),a=he(),r=vs(),m=et(),p=j(!1),f=j(null),c=j(null),E=j(!1);let g=null;const w=v(()=>o.getProject(e.projectId)),y=v(()=>w.value?.session_ids?w.value.session_ids.map(P=>i.getSession(P)).filter(P=>P!=null):[]),b=v(()=>y.value.length>0),u=v(()=>y.value.length),h=v(()=>y.value.filter(P=>P.state==="ACTIVE").length),_=v(()=>{const P=y.value.some(O=>O.state==="ACTIVE"),F=y.value.some(O=>O.is_processing);return y.value.some(O=>O.state==="ERROR")?"Error":F?"Working":P?"Active":u.value>0?"Idle":"Empty"}),k=v(()=>{switch(_.value){case"Error":return"text-danger";case"Working":return"text-warning";case"Active":return"text-success";case"Idle":return"text-muted";default:return"text-secondary"}}),T=v(()=>{switch(_.value){case"Error":return"One or more sessions have errors";case"Working":return"Processing in progress";case"Active":return"Sessions are running";case"Idle":return"No active processing";default:return"No sessions created"}});async function H(){E.value=!0;try{const P=await ce.get(`/api/legions/${e.projectId}/hierarchy`);c.value=P}catch(P){console.error("Failed to load minion hierarchy:",P),c.value=null}finally{E.value=!1}}function V(P,F){if(P&&P.id===F)return P;if(P&&P.children)for(const x of P.children){const O=V(x,F);if(O)return O}return null}function A(P){return P.to_user?"User":P.to_minion_name?P.to_minion_name:"unknown"}function W(P){const F=P.summary||P.content||"";return F.length>150?F.substring(0,150)+"...":F}function S(P){if(c.value){if(P.from_minion_id){const F=V(c.value,P.from_minion_id);F&&F.type==="minion"&&(F.last_comm=P)}P.from_user&&c.value.type==="user"&&(c.value.last_comm=P)}}function C(P){t.push(`/session/${P}`)}function q(){t.push(`/timeline/${e.projectId}`)}function U(){a.showModal("edit-project",{project:w.value})}function I(){a.showModal("create-minion",{project:w.value})}return be(()=>{o.selectProject(e.projectId),i.currentSessionId=null,H(),r.setCurrentLegion(e.projectId),m.connectLegion(e.projectId),g=pe(()=>i.sessions,P=>{if(c.value){for(const[F,x]of P)if(x.project_id===e.projectId){const O=V(c.value,F);O&&O.type==="minion"&&(O.state!==x.state&&(O.state=x.state),O.is_processing!==x.is_processing&&(O.is_processing=x.is_processing),O.latest_message!==x.latest_message&&(O.latest_message=x.latest_message,O.latest_message_type=x.latest_message_type,O.latest_message_time=x.latest_message_time))}}},{deep:!0}),pe(()=>r.commsByLegion.get(e.projectId),P=>{if(P&&P.length>0){const F=P[P.length-1];S(F)}},{deep:!0}),pe(()=>o.projects.get(e.projectId)?.session_ids?.length||0,(P,F)=>{P!==F&&H()})}),pe(()=>e.projectId,P=>{o.selectProject(P),i.currentSessionId=null,H(),r.setCurrentLegion(P),m.connectLegion(P)}),Ce(()=>{g&&g()}),(P,F)=>(l(),d("div",eb,[s("div",tb,[s("div",sb,[s("div",null,[s("h4",nb,[b.value?(l(),d("span",ob,"ðŸ›")):M("",!0),Z(" "+$(w.value?.name||"Project Overview"),1)]),s("small",ib,$(w.value?.working_directory),1)]),s("div",ab,[s("button",{class:"btn btn-sm btn-outline-secondary",title:"Edit project",onClick:U}," âœï¸ Edit "),s("button",{class:"btn btn-sm btn-outline-primary",title:b.value?"Create minion":"Add session",onClick:I}," âž• "+$(b.value?"Add Minion":"Add Session"),9,rb)])])]),s("div",lb,[p.value?(l(),d("div",cb,[...F[0]||(F[0]=[s("div",{class:"spinner-border",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),s("p",{class:"text-muted mt-2"},"Loading project data...",-1)])])):f.value?(l(),d("div",ub,$(f.value),1)):w.value?(l(),d("div",mb,[s("div",pb,[s("div",fb,[s("div",vb,[s("div",hb,[F[2]||(F[2]=s("h6",{class:"card-subtitle mb-2 text-muted"},"Sessions",-1)),s("h3",_b,$(u.value),1),s("small",gb,$(h.value)+" active",1)])])]),s("div",bb,[s("div",yb,[s("div",wb,[F[3]||(F[3]=s("h6",{class:"card-subtitle mb-2 text-muted"},"Status",-1)),s("h3",$b,[s("span",{class:X(k.value)},$(_.value),3)]),s("small",Eb,$(T.value),1)])])])]),b.value?(l(),d("div",Sb,[F[4]||(F[4]=s("div",{class:"card-header"},[s("h5",{class:"mb-0"},"ðŸ› Legion Controls")],-1)),s("div",{class:"card-body"},[s("div",{class:"d-flex gap-2 flex-wrap"},[s("button",{class:"btn btn-outline-primary",onClick:q}," ðŸ“Š View Timeline ")])])])):M("",!0),s("div",Cb,[s("div",kb,[s("h5",Tb,"ðŸŒ³ "+$(b.value?"Minion Hierarchy":"Sessions"),1),s("span",xb,$(y.value.length),1)]),s("div",Ab,[E.value?(l(),d("div",Ob,[...F[5]||(F[5]=[s("div",{class:"spinner-border spinner-border-sm",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),s("p",{class:"text-muted mt-2 mb-0"},"Loading hierarchy...",-1)])])):!c.value||!c.value.children||c.value.children.length===0?(l(),d("div",Mb,' No sessions yet. Click "Add Session" to create one. ')):(l(),d("div",Db,[s("div",Nb,[s("div",Lb,[s("div",Ib,[F[6]||(F[6]=s("span",{class:"me-2",style:{"font-size":"1.2rem"}},"ðŸ‘¤",-1)),s("strong",null,$(c.value.name),1),s("span",jb,$(c.value.children.length)+" "+$(c.value.children.length===1?"minion":"minions"),1)]),s("div",Pb,[c.value.last_comm?(l(),d("div",Rb,[s("span",Wb,[F[7]||(F[7]=Z(" â†’ ",-1)),s("strong",null,$(A(c.value.last_comm)),1),F[8]||(F[8]=Z(": ",-1))]),s("span",{class:"comm-content",title:c.value.last_comm.content||""},$(W(c.value.last_comm)),9,Hb)])):(l(),d("div",Vb," No communications yet "))])])]),s("div",Fb,[(l(!0),d(re,null,ue(c.value.children,x=>(l(),we(pi,{key:x.id,"minion-data":x,level:1,layout:"two-column",onMinionClick:C},null,8,["minion-data"]))),128))])]))])]),s("div",Bb,[F[12]||(F[12]=s("div",{class:"card-header"},[s("h5",{class:"mb-0"},"Configuration")],-1)),s("div",qb,[s("dl",Ub,[F[9]||(F[9]=s("dt",{class:"col-sm-4"},"Working Directory",-1)),s("dd",zb,$(w.value.working_directory),1),F[10]||(F[10]=s("dt",{class:"col-sm-4"},"Project ID",-1)),s("dd",Kb,$(w.value.project_id),1),F[11]||(F[11]=s("dt",{class:"col-sm-4"},"Legion Mode",-1)),s("dd",Gb,$(b.value?"Yes (has minions)":"No"),1)])])])])):(l(),d("div",db,[...F[1]||(F[1]=[s("h5",{class:"text-muted"},"Project not found",-1),s("p",{class:"text-secondary"},"The requested project does not exist.",-1)])]))]),s("div",Yb,[F[13]||(F[13]=s("small",{class:"text-muted"}," Project Overview ",-1)),s("small",Jb,$(u.value)+" session"+$(u.value!==1?"s":""),1)])]))}},Xb=ne(Qb,[["__scopeId","data-v-168bf04c"]]),Zb=[{path:"/",name:"home",component:$i},{path:"/project/:projectId",name:"project",component:Xb,props:!0},{path:"/session/:sessionId",name:"session",component:D_,props:!0},{path:"/timeline/:legionId",name:"timeline",component:Sg,props:!0}],ey=vi({history:hi(),routes:Zb}),ty={class:"connection-indicators"},sy=["title"],ny=["title"],oy=["title"],iy={__name:"ConnectionIndicator",setup(n){const e=et();function t(i){const a={ui:{connected:e.uiConnected,retryCount:e.uiRetryCount},session:{connected:e.sessionConnected,retryCount:e.sessionRetryCount},legion:{connected:e.legionConnected,retryCount:e.legionRetryCount}},{connected:r,retryCount:m}=a[i];return m>0&&!r?"indicator-connecting":r?"indicator-connected":"indicator-disconnected"}function o(i){const a={ui:"UI WebSocket",session:"Session WebSocket",legion:"Legion WebSocket"},r={ui:"Global UI state updates",session:"Session message streaming",legion:"Multi-agent communications"},m={ui:{connected:e.uiConnected,retryCount:e.uiRetryCount},session:{connected:e.sessionConnected,retryCount:e.sessionRetryCount},legion:{connected:e.legionConnected,retryCount:e.legionRetryCount}},{connected:p,retryCount:f}=m[i];let c="Disconnected";return p?c="Connected":f>0&&(c=`Reconnecting (attempt ${f})`),`${a[i]}
${r[i]}
Status: ${c}`}return(i,a)=>(l(),d("div",ty,[s("div",{class:X(["indicator",t("ui")]),title:o("ui")}," ðŸŒ ",10,sy),s("div",{class:X(["indicator",t("session")]),title:o("session")}," ðŸ’¬ ",10,ny),s("div",{class:X(["indicator",t("legion")]),title:o("legion")}," ðŸ‘¥ ",10,oy)]))}},ay=ne(iy,[["__scopeId","data-v-d35b07c8"]]),ry={class:"bg-white border-bottom shadow-sm d-flex justify-content-between align-items-center px-3 py-2"},ly={class:"d-flex align-items-center gap-2"},cy={__name:"AppHeader",setup(n){const e=he();function t(){e.toggleSidebar()}return(o,i)=>(l(),d("header",ry,[s("div",{class:"d-flex align-items-center gap-2"},[s("button",{id:"sidebar-toggle-btn",class:"btn btn-sm btn-outline-secondary",title:"Toggle sidebar",onClick:t},[...i[0]||(i[0]=[s("span",null,"â˜°",-1)])]),i[1]||(i[1]=s("h1",{class:"mb-0 fs-4"},"Claude Code WebUI",-1))]),s("div",ly,[fe(ay)])]))}},uy={class:"progress project-status-line",style:{height:"4px","border-radius":"0"}},dy={key:0,class:"progress-bar bg-secondary",style:{width:"100%"}},my=["title"],py={__name:"ProjectStatusLine",props:{project:{type:Object,required:!0},sessions:{type:Array,default:()=>[]}},setup(n){const e=n,t=v(()=>!e.sessions||e.sessions.length===0?"100%":`${100/e.sessions.length}%`);function o(m){return m.state==="paused"&&m.is_processing?"pending-prompt":m.is_processing?"processing":m.state}function i(m){const p=o(m);return{created:"#d3d3d3",starting:"#90ee90",active:"#90ee90",running:"#90ee90",processing:"#dda0dd",paused:"#d3d3d3","pending-prompt":"#ffc107",terminated:"#d3d3d3",error:"#ffb3b3",failed:"#ffb3b3"}[p]||"#d3d3d3"}function a(m){const p=o(m);return p==="starting"||p==="processing"||p==="pending-prompt"}function r(m){const p=o(m),f=p.charAt(0).toUpperCase()+p.slice(1),c=m.name||"Unnamed Session",E=m.role?` (${m.role})`:"";return`${c}${E}: ${f}`}return(m,p)=>(l(),d("div",uy,[!n.sessions||n.sessions.length===0?(l(),d("div",dy)):(l(!0),d(re,{key:1},ue(n.sessions,f=>(l(),d("div",{key:f.session_id,class:X(["progress-bar",{"progress-bar-striped progress-bar-animated":a(f)}]),style:bt({width:t.value,backgroundColor:i(f),cursor:"help"}),title:r(f)},null,14,my))),128))]))}},fy=ne(py,[["__scopeId","data-v-391d77c1"]]),vy=["data-project-id"],hy=["id"],_y=["aria-expanded","aria-controls","aria-label","onKeydown"],gy=["aria-label","onKeydown"],by={class:"d-flex align-items-center mb-1",style:{gap:"0.5rem"}},yy={class:"fw-semibold",style:{"flex-shrink":"0"}},wy={key:0,class:"legion-icon",style:{"font-size":"1rem","margin-right":"0.25rem"}},$y={class:"d-flex gap-1 ms-auto",style:{"flex-shrink":"0"}},Ey=["title"],Sy=["title"],Cy=["id","aria-labelledby"],ky={class:"accordion-body p-0"},Ty={class:"list-group list-group-flush"},xy={class:"minion-hierarchy-container"},Ay={key:0,class:"text-center py-2"},Oy={key:2,class:"text-muted text-center py-2 small"},My={__name:"ProjectItem",props:{project:{type:Object,required:!0}},setup(n){const e=n,t=Pt(),o=Le(),i=de(),a=he(),r=j(e.project.is_expanded||!1),m=j(null),p=j(!1);let f=null;const c=v(()=>o.formatPath(e.project.working_directory)),E=v(()=>!e.project?.session_ids||e.project.session_ids.length===0?[]:e.project.session_ids.map(I=>i.getSession(I)).filter(I=>I!=null)),g=v(()=>E.value.length>0),w=v(()=>{const I=t.currentRoute.value;return I.name==="timeline"&&I.params.legionId===e.project.project_id}),y=v(()=>{const I=t.currentRoute.value;return I.name==="project"&&I.params.projectId===e.project.project_id});function b(I){const P=window.bootstrap;if(!P)return;const F=document.getElementById(`collapse-${e.project.project_id}`);if(!F)return;P.Collapse.getOrCreateInstance(F).toggle(),r.value=!r.value}function u(){o.selectProject(e.project.project_id),t.push(`/project/${e.project.project_id}`)}function h(){r.value||(o.toggleExpansion(e.project.project_id),r.value=!0)}function _(){if(r.value){o.toggleExpansion(e.project.project_id),r.value=!1;const I=i.currentSessionId;I&&i.getSession(I)&&e.project.session_ids?.includes(I)&&t.push("/"),o.currentProjectId===e.project.project_id&&t.push("/")}}function k(){a.showModal("edit-project",{project:e.project})}function T(){a.showModal("create-minion",{project:e.project})}function H(){t.push(`/timeline/${e.project.project_id}`)}async function V(){p.value=!0;try{const I=await ce.get(`/api/legions/${e.project.project_id}/hierarchy`);m.value=I}catch(I){console.error("Failed to load minion hierarchy:",I),m.value=null}finally{p.value=!1}}function A(I){t.push(`/session/${I}`)}function W(I,P){if(I&&I.id===P)return I;if(I&&I.children)for(const F of I.children){const x=W(F,P);if(x)return x}return null}pe(r,I=>{I&&V()}),be(()=>{f=pe(()=>i.sessions,I=>{if(!(!m.value||!r.value)){for(const[P,F]of I)if(F.project_id===e.project.project_id){const x=W(m.value,P);x&&x.type==="minion"&&(x.state!==F.state&&(x.state=F.state),x.is_processing!==F.is_processing&&(x.is_processing=F.is_processing),x.latest_message!==F.latest_message&&(x.latest_message=F.latest_message,x.latest_message_type=F.latest_message_type,x.latest_message_time=F.latest_message_time))}}},{deep:!0}),pe(()=>i.sessions.size,(I,P)=>{if(r.value&&(I>P&&Array.from(i.sessions.values()).some(O=>O.project_id===e.project.project_id&&(!m.value||!W(m.value,O.session_id)))&&(console.log("New minion detected, reloading hierarchy"),V()),I<P&&m.value)){const F=i.sessions,x=O=>O.type==="minion"&&!F.has(O.id)?!0:O.children?O.children.some(z=>x(z)):!1;x(m.value)&&(console.log("Minion deletion detected, reloading hierarchy"),V())}}),r.value&&V()}),Ce(()=>{f&&f()});function S(I){I.dataTransfer.effectAllowed="move",I.dataTransfer.setData("application/project-id",e.project.project_id),I.dataTransfer.setData("text/plain",e.project.project_id),I.target.classList.add("dragging")}function C(I){I.target.classList.remove("dragging")}function q(I){I.preventDefault(),I.dataTransfer.dropEffect="move";const P=I.currentTarget.getBoundingClientRect(),F=P.top+P.height/2;I.clientY<F?(I.currentTarget.classList.add("drop-above"),I.currentTarget.classList.remove("drop-below")):(I.currentTarget.classList.add("drop-below"),I.currentTarget.classList.remove("drop-above"))}function U(I){I.preventDefault(),I.currentTarget.classList.remove("drop-above","drop-below");const P=I.dataTransfer.getData("application/project-id")||I.dataTransfer.getData("text/plain");if(!P||P===e.project.project_id)return;const F=I.currentTarget.getBoundingClientRect(),x=F.top+F.height/2,O=I.clientY<x,z=o.orderedProjects,L=z.findIndex(ae=>ae.project_id===e.project.project_id),D=z.findIndex(ae=>ae.project_id===P);if(L===-1||D===-1)return;const G=[...z],[ie]=G.splice(D,1);let J=O?L:L+1;D<L&&J--,G.splice(J,0,ie);const Q=G.map(ae=>ae.project_id);o.reorderProjects(Q)}return(I,P)=>(l(),d("div",{class:"accordion-item border rounded mb-2","data-project-id":n.project.project_id,draggable:"true",onDragstart:S,onDragend:C,onDragover:q,onDrop:U},[s("h2",{class:"accordion-header",id:`heading-${n.project.project_id}`},[s("div",{class:X(["accordion-button bg-white p-2 project-header-split",{collapsed:!r.value,"project-selected":y.value}])},[s("button",{class:"chevron-toggle btn btn-link p-0 me-2",type:"button","aria-expanded":r.value,"aria-controls":`collapse-${n.project.project_id}`,"aria-label":r.value?"Collapse session list":"Expand session list",onClick:_e(b,["stop"]),onKeydown:[qe(_e(b,["prevent"]),["enter"]),qe(_e(b,["prevent"]),["space"])]},[(l(),d("svg",{class:X(["chevron-icon",{expanded:r.value}]),width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor"},[...P[0]||(P[0]=[s("path",{d:"M4.5 2L8.5 6L4.5 10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",fill:"none"},null,-1)])],2))],40,_y),s("div",{class:"flex-grow-1 d-flex flex-column project-name-area",style:{"min-width":"0",cursor:"pointer"},role:"button",tabindex:"0","aria-label":`View ${n.project.name} overview`,onClick:u,onKeydown:[qe(_e(u,["prevent"]),["enter"]),qe(_e(u,["prevent"]),["space"])]},[s("div",by,[s("div",yy,[g.value?(l(),d("span",wy,"ðŸ›")):M("",!0),Z(" "+$(n.project.name),1)]),s("div",$y,[s("button",{class:"btn btn-sm btn-outline-secondary",title:"Edit or delete project",type:"button",onClick:_e(k,["stop"])}," âœï¸ "),s("button",{class:"btn btn-sm btn-outline-primary",title:g.value?"Create minion":"Add session or minion",type:"button",onClick:_e(T,["stop"])}," âž• ",8,Ey)])]),s("small",{class:"text-muted font-monospace",title:n.project.working_directory,style:{display:"block","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","min-width":"0"}},$(c.value),9,Sy)],40,gy)],2)],8,hy),fe(fy,{project:n.project,sessions:E.value},null,8,["project","sessions"]),s("div",{id:`collapse-${n.project.project_id}`,class:X(["accordion-collapse collapse",{show:r.value}]),"aria-labelledby":`heading-${n.project.project_id}`,onShown:h,onHidden:_},[s("div",ky,[s("div",Ty,[g.value?(l(),d("div",{key:0,class:X(["list-group-item list-group-item-action timeline-item d-flex align-items-center p-2",{active:w.value}]),style:{cursor:"pointer"},onClick:H},[...P[1]||(P[1]=[s("div",{class:"flex-grow-1"},[s("span",{style:{"font-size":"1rem","margin-right":"0.5rem"}},"ðŸ“Š"),s("span",{class:"fw-semibold"},"Timeline"),s("small",{class:"text-muted ms-2"},"(Comms)")],-1)])],2)):M("",!0),s("div",xy,[p.value?(l(),d("div",Ay,[...P[2]||(P[2]=[s("div",{class:"spinner-border spinner-border-sm",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1)])])):m.value&&m.value.children&&m.value.children.length>0?(l(!0),d(re,{key:1},ue(m.value.children,F=>(l(),we(pi,{key:F.id,"minion-data":F,level:0,layout:"sidebar",onMinionClick:A},null,8,["minion-data"]))),128)):(l(),d("div",Oy," No sessions "))])])])],42,Cy)],40,vy))}},Dy=ne(My,[["__scopeId","data-v-a15b34e8"]]),Ny={class:"project-list"},Ly={key:0,class:"text-muted text-center py-3"},Iy={__name:"ProjectList",setup(n){const e=Le(),t=v(()=>e.orderedProjects);return(o,i)=>(l(),d("div",Ny,[t.value.length===0?(l(),d("div",Ly,' No projects yet. Click "New" to create one. ')):M("",!0),(l(!0),d(re,null,ue(t.value,a=>(l(),we(Dy,{key:a.project_id,project:a},null,8,["project"]))),128))]))}},jy={class:"flex-grow-1 overflow-auto p-3"},Py={id:"sessions-container"},Ry={__name:"Sidebar",setup(n){const e=he(),t=v(()=>e.sidebarCollapsed),o=v(()=>e.isMobile),i=v(()=>{if(o.value)return{};const c=`${e.sidebarWidth}px`;return{width:c,minWidth:"200px",maxWidth:"30vw","--sidebar-width":c}});function a(){e.showModal("create-project")}const r=j(!1);function m(c){r.value=!0,document.addEventListener("mousemove",p),document.addEventListener("mouseup",f)}function p(c){r.value&&e.setSidebarWidth(c.clientX)}function f(){r.value=!1,document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",f)}return(c,E)=>(l(),d("aside",{id:"sidebar",class:X(["col-auto bg-light border-end d-flex flex-column overflow-auto",{collapsed:t.value,"mobile-open":!t.value&&o.value,"desktop-collapsed":t.value&&!o.value}]),style:bt(i.value)},[s("div",jy,[s("div",{class:"d-flex justify-content-between align-items-center mb-3"},[E[0]||(E[0]=s("h6",{class:"text-muted mb-0"},"Projects",-1)),s("button",{id:"create-project-btn",class:"btn btn-sm btn-outline-primary",title:"New Project",onClick:a}," ðŸ“ New ")]),s("div",Py,[fe(Iy)])]),s("div",{class:"sidebar-resize-handle",onMousedown:m},null,32)],6))}},Wy=ne(Ry,[["__scopeId","data-v-d792f0f0"]]),Hy={class:"modal-dialog modal-lg"},Vy={class:"modal-content"},Fy={class:"modal-body"},By={class:"mb-3"},qy={class:"input-group"},Uy=["disabled"],zy={key:0,class:"text-center py-4"},Ky={key:1,class:"alert alert-danger",role:"alert"},Gy={key:2,class:"folder-list"},Yy=["onClick","onDblclick"],Jy={class:"d-flex align-items-center flex-grow-1"},Qy=["onClick"],Xy={key:1,class:"text-center text-muted py-3"},Zy={class:"modal-footer"},ew=["disabled"],tw={__name:"FolderBrowserModal",setup(n){const e=he(),t=j(""),o=j(""),i=j([]),a=j(!1),r=j(""),m=j(null);let p=null,f=null;const c=v(()=>{if(!t.value)return null;const k=t.value.split(/[\\/]/).filter(Boolean);return k.length<=1?null:(k.pop(),k.length>0?"/"+k.join("/"):"/")});function E(k){if(!k)return"";const T=k.split(/[\\/]/).filter(Boolean);return T.length<=2?k:".../"+T.slice(-2).join("/")}async function g(){a.value=!0,r.value="",i.value=[],o.value="";try{const k=t.value?{path:t.value}:{},T=await ce.get("/api/filesystem/browse",{params:k});T.current_path&&(t.value=T.current_path),i.value=T.directories||[]}catch(k){console.error("Failed to load directory:",k),r.value=k.message||"Failed to load directory"}finally{a.value=!1}}function w(k){o.value=k.path}function y(k){t.value=k.path,o.value="",g()}function b(){c.value&&(t.value=c.value,o.value="",g())}function u(){const k=o.value||t.value;k&&f&&f(k),p&&p.hide()}function h(){g()}function _(){i.value=[],o.value="",r.value="",f=null,e.hideModal()}return pe(()=>e.currentModal,k=>{if(k?.name==="folder-browser"&&p){const T=k.data||{};t.value=T.defaultPath||T.currentPath||"",f=T.onSelect||null,p.show()}}),be(()=>{m.value&&Ae(async()=>{const{default:k}=await import("./modal-D6mKceGM.js").then(T=>T.m);return{default:k}},__vite__mapDeps([0,1])).then(({default:k})=>{p=new k(m.value),m.value.addEventListener("shown.bs.modal",h),m.value.addEventListener("hidden.bs.modal",_)})}),Ce(()=>{m.value&&(m.value.removeEventListener("shown.bs.modal",h),m.value.removeEventListener("hidden.bs.modal",_)),p&&p.dispose()}),(k,T)=>(l(),d("div",{class:"modal fade folder-browser-modal",id:"folderBrowserModal",tabindex:"-1","aria-labelledby":"folderBrowserModalLabel","aria-hidden":"true",ref_key:"modalElement",ref:m},[s("div",Hy,[s("div",Vy,[T[6]||(T[6]=s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"folderBrowserModalLabel"},"Browse Folders"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),s("div",Fy,[s("div",By,[T[1]||(T[1]=s("label",{class:"form-label"},"Current Path:",-1)),s("div",qy,[ge(s("input",{type:"text",class:"form-control","onUpdate:modelValue":T[0]||(T[0]=H=>t.value=H),onKeyup:qe(g,["enter"]),placeholder:"Enter or select a directory path"},null,544),[[We,t.value]]),s("button",{class:"btn btn-outline-secondary",onClick:g,disabled:a.value}," ðŸ”„ Refresh ",8,Uy)])]),a.value?(l(),d("div",zy,[...T[2]||(T[2]=[s("div",{class:"spinner-border",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1)])])):r.value?(l(),d("div",Ky,$(r.value),1)):(l(),d("div",Gy,[c.value?(l(),d("div",{key:0,class:"folder-item d-flex align-items-center p-2 border-bottom",onClick:b,role:"button"},[...T[3]||(T[3]=[s("span",{class:"me-2 text-secondary"},"â¬†ï¸",-1),s("span",{class:"text-secondary"},"..",-1)])])):M("",!0),(l(!0),d(re,null,ue(i.value,H=>(l(),d("div",{key:H.path,class:X(["folder-item d-flex align-items-center justify-content-between p-2 border-bottom",{selected:H.path===o.value}]),onClick:V=>w(H),onDblclick:V=>y(H),role:"button"},[s("div",Jy,[T[4]||(T[4]=s("span",{class:"me-2"},"ðŸ“",-1)),s("span",null,$(H.name),1)]),s("button",{class:"btn btn-sm btn-outline-primary",onClick:_e(V=>y(H),["stop"])}," Open ",8,Qy)],42,Yy))),128)),i.value.length===0?(l(),d("div",Xy," No subdirectories found ")):M("",!0)]))]),s("div",Zy,[T[5]||(T[5]=s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),s("button",{type:"button",class:"btn btn-primary",onClick:u,disabled:!o.value},' Select "'+$(E(o.value||t.value))+'" ',9,ew)])])])],512))}},sw=ne(tw,[["__scopeId","data-v-0d61ed46"]]),nw={class:"modal-dialog"},ow={class:"modal-content"},iw={class:"modal-body"},aw={class:"mb-3"},rw={key:0,class:"invalid-feedback"},lw={class:"mb-3"},cw={class:"input-group"},uw={key:0,class:"invalid-feedback"},dw={class:"mb-3 form-check"},mw={key:0,class:"mb-3 ms-4"},pw={key:1,class:"alert alert-danger",role:"alert"},fw={class:"modal-footer"},vw=["disabled"],hw={key:0,class:"spinner-border spinner-border-sm me-2"},_w={__name:"ProjectCreateModal",setup(n){const e=Le(),t=de(),o=he(),i=j({name:"",workingDirectory:"",createSession:!0,sessionName:"main"}),a=j({name:"",workingDirectory:""}),r=j(!1),m=j(""),p=j(null);let f=null;function c(){o.showModal("folder-browser",{currentPath:i.value.workingDirectory||"",onSelect:u=>{i.value.workingDirectory=u,a.value.workingDirectory=""}})}function E(){a.value={};let u=!0;return i.value.name.trim()||(a.value.name="Project name is required",u=!1),i.value.workingDirectory.trim()||(a.value.workingDirectory="Working directory is required",u=!1),u}async function g(){if(E()){r.value=!0,m.value="";try{const u=await e.createProject(i.value.name,i.value.workingDirectory);i.value.createSession&&await t.createSession(u.project_id,{name:i.value.sessionName||"main",permission_mode:"default",tools:[],model:"sonnet"}),f&&f.hide(),w()}catch(u){console.error("Failed to create project:",u),m.value=u.message||"Failed to create project. Please try again."}finally{r.value=!1}}}function w(){i.value={name:"",workingDirectory:"",createSession:!0,sessionName:"main"},a.value={},m.value=""}function y(){const u=document.getElementById("projectName");u&&u.focus()}function b(){w(),o.hideModal()}return pe(()=>o.currentModal,u=>{u?.name==="create-project"&&f&&f.show()}),be(()=>{p.value&&Ae(async()=>{const{default:u}=await import("./modal-D6mKceGM.js").then(h=>h.m);return{default:u}},__vite__mapDeps([0,1])).then(({default:u})=>{f=new u(p.value),p.value.addEventListener("shown.bs.modal",y),p.value.addEventListener("hidden.bs.modal",b)})}),Ce(()=>{p.value&&(p.value.removeEventListener("shown.bs.modal",y),p.value.removeEventListener("hidden.bs.modal",b)),f&&f.dispose()}),(u,h)=>(l(),d("div",{class:"modal fade",id:"createProjectModal",tabindex:"-1","aria-labelledby":"createProjectModalLabel","aria-hidden":"true",ref_key:"modalElement",ref:p},[s("div",nw,[s("div",ow,[h[11]||(h[11]=s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"createProjectModalLabel"},"Create New Project"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),s("div",iw,[s("form",{onSubmit:_e(g,["prevent"])},[s("div",aw,[h[4]||(h[4]=s("label",{for:"projectName",class:"form-label"},"Project Name",-1)),ge(s("input",{type:"text",class:X(["form-control",{"is-invalid":a.value.name}]),id:"projectName","onUpdate:modelValue":h[0]||(h[0]=_=>i.value.name=_),placeholder:"My Project",required:""},null,2),[[We,i.value.name]]),a.value.name?(l(),d("div",rw,$(a.value.name),1)):M("",!0)]),s("div",lw,[h[5]||(h[5]=s("label",{for:"workingDirectory",class:"form-label"},"Working Directory",-1)),s("div",cw,[ge(s("input",{type:"text",class:X(["form-control",{"is-invalid":a.value.workingDirectory}]),id:"workingDirectory","onUpdate:modelValue":h[1]||(h[1]=_=>i.value.workingDirectory=_),placeholder:"/path/to/project",required:""},null,2),[[We,i.value.workingDirectory]]),s("button",{class:"btn btn-outline-secondary",type:"button",onClick:c}," Browse... "),a.value.workingDirectory?(l(),d("div",uw,$(a.value.workingDirectory),1)):M("",!0)]),h[6]||(h[6]=s("div",{class:"form-text"}," The project's working directory (cannot be changed after creation) ",-1))]),s("div",dw,[ge(s("input",{type:"checkbox",class:"form-check-input",id:"createSession","onUpdate:modelValue":h[2]||(h[2]=_=>i.value.createSession=_)},null,512),[[_i,i.value.createSession]]),h[7]||(h[7]=s("label",{class:"form-check-label",for:"createSession"}," Create initial session ",-1)),h[8]||(h[8]=s("div",{class:"form-text"}," You can add minions later from the project sidebar ",-1))]),i.value.createSession?(l(),d("div",mw,[h[9]||(h[9]=s("label",{for:"sessionName",class:"form-label"}," Initial Session Name ",-1)),ge(s("input",{type:"text",class:"form-control",id:"sessionName","onUpdate:modelValue":h[3]||(h[3]=_=>i.value.sessionName=_),placeholder:"main"},null,512),[[We,i.value.sessionName]])])):M("",!0),m.value?(l(),d("div",pw,$(m.value),1)):M("",!0)],32)]),s("div",fw,[h[10]||(h[10]=s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),s("button",{type:"button",class:"btn btn-primary",onClick:g,disabled:r.value},[r.value?(l(),d("span",hw)):M("",!0),Z(" "+$(r.value?"Creating...":"Create Project"),1)],8,vw)])])])],512))}},gw=ne(_w,[["__scopeId","data-v-ea55fdae"]]),bw={class:"modal-dialog"},yw={class:"modal-content"},ww={class:"modal-body"},$w={class:"mb-3"},Ew={key:0,class:"invalid-feedback"},Sw={class:"mb-3"},Cw=["value"],kw={key:0,class:"alert alert-danger",role:"alert"},Tw={class:"danger-zone"},xw={class:"text-muted small"},Aw=["disabled"],Ow={key:0,class:"alert alert-warning mt-3",role:"alert"},Mw={class:"mb-2"},Dw={class:"d-flex gap-2"},Nw=["disabled"],Lw={key:0,class:"spinner-border spinner-border-sm me-2"},Iw=["disabled"],jw={class:"modal-footer"},Pw=["disabled"],Rw={key:0,class:"spinner-border spinner-border-sm me-2"},Ww={__name:"ProjectEditModal",setup(n){const e=Le(),t=he(),o=j(null),i=j({name:""}),a=j({name:""}),r=j(!1),m=j(!1),p=j(""),f=j(!1),c=j(null);let E=null;const g=v(()=>o.value?.session_ids?.length||0);function w(){a.value={};let k=!0;return i.value.name.trim()||(a.value.name="Project name is required",k=!1),k}async function y(){if(!(!w()||!o.value)){r.value=!0,p.value="";try{await e.updateProject(o.value.project_id,{name:i.value.name}),E&&E.hide()}catch(k){console.error("Failed to update project:",k),p.value=k.message||"Failed to update project. Please try again."}finally{r.value=!1}}}async function b(){if(o.value){m.value=!0,p.value="";try{await e.deleteProject(o.value.project_id),E&&E.hide()}catch(k){console.error("Failed to delete project:",k),p.value=k.message||"Failed to delete project. Please try again."}finally{m.value=!1}}}function u(){i.value={name:""},a.value={},p.value="",f.value=!1}function h(){const k=document.getElementById("editProjectName");k&&(k.focus(),k.select())}function _(){u(),o.value=null,t.hideModal()}return pe(()=>t.currentModal,k=>{if(k?.name==="edit-project"&&E){const T=k.data||{};o.value=T.project,o.value&&(i.value.name=o.value.name),E.show()}}),be(()=>{c.value&&Ae(async()=>{const{default:k}=await import("./modal-D6mKceGM.js").then(T=>T.m);return{default:k}},__vite__mapDeps([0,1])).then(({default:k})=>{E=new k(c.value),c.value.addEventListener("shown.bs.modal",h),c.value.addEventListener("hidden.bs.modal",_)})}),Ce(()=>{c.value&&(c.value.removeEventListener("shown.bs.modal",h),c.value.removeEventListener("hidden.bs.modal",_)),E&&E.dispose()}),(k,T)=>(l(),d("div",{class:"modal fade",id:"editProjectModal",tabindex:"-1","aria-labelledby":"editProjectModalLabel","aria-hidden":"true",ref_key:"modalElement",ref:c},[s("div",bw,[s("div",yw,[T[10]||(T[10]=s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"editProjectModalLabel"},"Edit Project"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),s("div",ww,[s("form",{onSubmit:_e(y,["prevent"])},[s("div",$w,[T[3]||(T[3]=s("label",{for:"editProjectName",class:"form-label"},"Project Name",-1)),ge(s("input",{type:"text",class:X(["form-control",{"is-invalid":a.value.name}]),id:"editProjectName","onUpdate:modelValue":T[0]||(T[0]=H=>i.value.name=H),placeholder:"My Project",required:""},null,2),[[We,i.value.name]]),a.value.name?(l(),d("div",Ew,$(a.value.name),1)):M("",!0)]),s("div",Sw,[T[4]||(T[4]=s("label",{class:"form-label"},"Working Directory",-1)),s("input",{type:"text",class:"form-control",value:o.value?.working_directory,disabled:"",readonly:""},null,8,Cw),T[5]||(T[5]=s("div",{class:"form-text text-muted"}," Working directory cannot be changed after creation ",-1))]),p.value?(l(),d("div",kw,$(p.value),1)):M("",!0)],32),T[8]||(T[8]=s("hr",null,null,-1)),s("div",Tw,[T[6]||(T[6]=s("h6",{class:"text-danger"},"Danger Zone",-1)),s("p",xw," Deleting this project will also delete all "+$(g.value)+" session(s) and their data. This action cannot be undone. ",1),s("button",{type:"button",class:"btn btn-outline-danger",onClick:T[1]||(T[1]=H=>f.value=!0),disabled:m.value}," ðŸ—‘ï¸ Delete Project ",8,Aw)]),f.value?(l(),d("div",Ow,[T[7]||(T[7]=s("strong",null,"Are you sure?",-1)),s("p",Mw,' This will permanently delete the project "'+$(o.value?.name)+'" and all '+$(g.value)+" session(s). ",1),s("div",Dw,[s("button",{type:"button",class:"btn btn-danger btn-sm",onClick:b,disabled:m.value},[m.value?(l(),d("span",Lw)):M("",!0),Z(" "+$(m.value?"Deleting...":"Yes, Delete Permanently"),1)],8,Nw),s("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:T[2]||(T[2]=H=>f.value=!1),disabled:m.value}," Cancel ",8,Iw)])])):M("",!0)]),s("div",jw,[T[9]||(T[9]=s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),s("button",{type:"button",class:"btn btn-primary",onClick:y,disabled:r.value},[r.value?(l(),d("span",Rw)):M("",!0),Z(" "+$(r.value?"Saving...":"Save Changes"),1)],8,Pw)])])])],512))}},Hw=ne(Ww,[["__scopeId","data-v-52679516"]]),Vw={class:"general-tab"},Fw={key:0,class:"mb-3"},Bw={for:"template-select",class:"form-label"},qw=["value"],Uw=["value"],zw={key:0,class:"form-text"},Kw={class:"mb-3"},Gw={for:"config-name",class:"form-label"},Yw=["value","placeholder","pattern","title"],Jw={key:0,class:"invalid-feedback"},Qw={key:1,class:"form-text"},Xw={key:1,class:"mb-3"},Zw=["value"],e1={class:"mb-3"},t1=["value"],s1={class:"form-text"},n1={key:0,class:"text-warning"},o1={key:1},i1={class:"mb-3"},a1={for:"config-permission-mode",class:"form-label"},r1={key:0,class:"field-indicator autofilled",title:"Auto-filled from template"},l1={key:1,class:"field-indicator modified",title:"Modified from template"},c1=["value","disabled"],u1={key:0,value:"bypassPermissions"},d1={class:"form-text"},m1={key:0,class:"text-warning"},p1={key:1},f1={class:"mb-3"},v1={for:"config-role",class:"form-label"},h1={key:0,class:"field-indicator autofilled",title:"Auto-filled from template"},_1={key:1,class:"field-indicator modified",title:"Modified from template"},g1=["value","placeholder"],b1={class:"form-text"},y1={key:2,class:"mb-3"},w1={class:"input-group"},$1=["value","placeholder","disabled","readonly"],E1={class:"form-text"},S1={key:3,class:"mb-3"},C1={class:"form-control-plaintext"},k1={key:4,class:"mb-3 form-check"},T1=["checked"],x1={__name:"GeneralTab",props:{mode:{type:String,required:!0},formData:{type:Object,required:!0},errors:{type:Object,required:!0},templates:{type:Array,default:()=>[]},selectedTemplateId:{type:String,default:null},session:{type:Object,default:null},fieldStates:{type:Object,default:()=>({default_role:"normal",permission_mode:"normal"})}},emits:["update:form-data","update:selected-template-id","open-folder-browser","open-template-manager"],setup(n){const e=n,t=v(()=>e.mode==="create-session"||e.mode==="edit-session"),o=v(()=>e.mode==="create-template"||e.mode==="edit-template"),i=v(()=>e.mode==="create-session"),a=v(()=>e.mode==="edit-session"),r=v(()=>e.session?.state==="active"||e.session?.state==="starting"),m=v(()=>{if(!e.session)return!1;const b=e.session.model||"sonnet";return e.formData.model!==b}),p=v(()=>e.session?.initial_permission_mode==="bypassPermissions"),f=v(()=>e.selectedTemplateId?e.templates.find(b=>b.template_id===e.selectedTemplateId):null),c={sonnet:{description:"Smart model for coding and complex agents - best balance of speed & capability"},opus:{description:"Most capable model for complex reasoning, advanced analysis, and sophisticated tasks"},haiku:{description:"Optimized for speed and cost-efficiency on straightforward tasks"},opusplan:{description:"Uses Opus for planning phase, Sonnet for execution - best of both worlds"}},E=v(()=>c[e.formData.model]||null),g=v(()=>({"field-autofilled":e.fieldStates.default_role==="autofilled","field-modified":e.fieldStates.default_role==="modified"})),w=v(()=>({"field-autofilled":e.fieldStates.permission_mode==="autofilled","field-modified":e.fieldStates.permission_mode==="modified"}));function y(b){return{created:"bg-secondary",starting:"bg-info",active:"bg-success",paused:"bg-warning",terminating:"bg-warning",terminated:"bg-secondary",error:"bg-danger"}[b]||"bg-secondary"}return(b,u)=>(l(),d("div",Vw,[i.value?(l(),d("div",Fw,[s("label",Bw,[u[10]||(u[10]=Z(" Template ",-1)),s("button",{type:"button",onClick:u[0]||(u[0]=h=>b.$emit("open-template-manager")),class:"btn btn-link btn-sm p-0 ms-2"}," Manage Templates ")]),s("select",{id:"template-select",value:n.selectedTemplateId,onChange:u[1]||(u[1]=h=>b.$emit("update:selected-template-id",h.target.value||null)),class:"form-select"},[u[11]||(u[11]=s("option",{value:null},"[None - Manual Configuration]",-1)),(l(!0),d(re,null,ue(n.templates,h=>(l(),d("option",{key:h.template_id,value:h.template_id},$(h.name),9,Uw))),128))],40,qw),f.value?(l(),d("div",zw,$(f.value.description),1)):M("",!0)])):M("",!0),s("div",Kw,[s("label",Gw,[Z($(o.value?"Template Name":"Session Name")+" ",1),u[12]||(u[12]=s("span",{class:"text-danger"},"*",-1))]),s("input",{id:"config-name",type:"text",class:X(["form-control",{"is-invalid":n.errors.name}]),value:n.formData.name,onInput:u[2]||(u[2]=h=>b.$emit("update:form-data","name",h.target.value)),placeholder:o.value?"e.g., Code Expert":"main",pattern:t.value?"[^\\s]+":void 0,title:t.value?"Session name must be a single word with no spaces":void 0,required:""},null,42,Yw),n.errors.name?(l(),d("div",Jw,$(n.errors.name),1)):M("",!0),t.value?(l(),d("div",Qw,"Must be a single word (no spaces) for #nametag matching")):M("",!0)]),o.value?(l(),d("div",Xw,[u[13]||(u[13]=s("label",{for:"config-description",class:"form-label"},"Description",-1)),s("textarea",{id:"config-description",class:"form-control",value:n.formData.description,onInput:u[3]||(u[3]=h=>b.$emit("update:form-data","description",h.target.value)),rows:"2",placeholder:"Brief description of this template's purpose"},null,40,Zw)])):M("",!0),s("div",e1,[u[16]||(u[16]=s("label",{for:"config-model",class:"form-label"},"Model",-1)),s("select",{id:"config-model",class:"form-select",value:n.formData.model,onChange:u[4]||(u[4]=h=>b.$emit("update:form-data","model",h.target.value))},[...u[14]||(u[14]=[s("option",{value:"sonnet"},"Sonnet 4.5 (Recommended) - Coding & complex agents",-1),s("option",{value:"opus"},"Opus 4.5 - Complex reasoning tasks",-1),s("option",{value:"haiku"},"Haiku 4.5 - Fastest for simple tasks",-1),s("option",{value:"opusplan"},"OpusPlan - Opus planning + Sonnet execution",-1)])],40,t1),s("div",s1,[a.value&&r.value&&m.value?(l(),d("span",n1,[...u[15]||(u[15]=[Z(" Model change requires a ",-1),s("strong",null,"reset",-1),Z(" (not restart) to take effect. ",-1)])])):E.value?(l(),d("span",o1,$(E.value.description),1)):M("",!0)])]),s("div",i1,[s("label",a1,[u[17]||(u[17]=Z(" Permission Mode ",-1)),n.fieldStates.permission_mode==="autofilled"?(l(),d("span",r1," < ")):M("",!0),n.fieldStates.permission_mode==="modified"?(l(),d("span",l1," * ")):M("",!0)]),s("select",{id:"config-permission-mode",class:X(["form-select",w.value]),value:n.formData.permission_mode,onChange:u[5]||(u[5]=h=>b.$emit("update:form-data","permission_mode",h.target.value)),disabled:a.value&&!r.value},[u[18]||(u[18]=s("option",{value:"default"},"Default (Prompt for tools not in settings)",-1)),u[19]||(u[19]=s("option",{value:"acceptEdits"},"Accept Edits (Auto-approve Edit/Write)",-1)),u[20]||(u[20]=s("option",{value:"plan"},"Plan Mode (Auto-resets after ExitPlanMode)",-1)),!a.value||p.value?(l(),d("option",u1," Bypass Permissions (No prompts - use with caution) ")):M("",!0)],42,c1),s("div",d1,[a.value&&!r.value?(l(),d("span",m1," Session must be active to change permission mode. Start the session first. ")):(l(),d("span",p1,"Controls which tool actions require permission prompts"))])]),s("div",f1,[s("label",v1,[Z($(o.value?"Default Role":"Role")+" ",1),n.fieldStates.default_role==="autofilled"?(l(),d("span",h1," < ")):M("",!0),n.fieldStates.default_role==="modified"?(l(),d("span",_1," * ")):M("",!0)]),s("input",{id:"config-role",type:"text",class:X(["form-control",g.value]),value:n.formData.default_role,onInput:u[6]||(u[6]=h=>b.$emit("update:form-data","default_role",h.target.value)),placeholder:o.value?"e.g., Code review and refactoring specialist":"Optional role description"},null,42,g1),s("div",b1,$(o.value?"Default role for minions using this template":"Optional role description for the session"),1)]),t.value?(l(),d("div",y1,[u[21]||(u[21]=s("label",{for:"config-working-dir",class:"form-label"},"Working Directory",-1)),s("div",w1,[s("input",{id:"config-working-dir",type:"text",class:"form-control",value:n.formData.working_directory,onInput:u[7]||(u[7]=h=>b.$emit("update:form-data","working_directory",h.target.value)),placeholder:a.value?"":"Leave empty to inherit from project",disabled:a.value,readonly:a.value},null,40,$1),a.value?M("",!0):(l(),d("button",{key:0,type:"button",class:"btn btn-outline-secondary",onClick:u[8]||(u[8]=h=>b.$emit("open-folder-browser"))}," Browse "))]),s("div",E1,$(a.value?"Working directory is inherited from project":"Custom working directory for git worktrees or multi-repo workflows"),1)])):M("",!0),a.value&&n.session?(l(),d("div",S1,[u[22]||(u[22]=s("label",{class:"form-label"},"Current State",-1)),s("div",C1,[s("span",{class:X(["badge",y(n.session.state)])},$(n.session.state),3)])])):M("",!0),i.value?(l(),d("div",k1,[s("input",{type:"checkbox",class:"form-check-input",id:"config-start-immediately",checked:n.formData.startImmediately,onChange:u[9]||(u[9]=h=>b.$emit("update:form-data","startImmediately",h.target.checked))},null,40,T1),u[23]||(u[23]=s("label",{class:"form-check-label",for:"config-start-immediately"}," Start session immediately after creation ",-1))])):M("",!0)]))}},A1=ne(x1,[["__scopeId","data-v-b9edc342"]]),O1={class:"permissions-tab"},M1={class:"mb-3"},D1={for:"config-allowed-tools",class:"form-label"},N1={key:0,class:"field-indicator autofilled",title:"Auto-filled from template"},L1={key:1,class:"field-indicator modified",title:"Modified from template"},I1={key:0,class:"tools-list mb-2"},j1=["onClick"],P1={class:"input-group input-group-sm"},R1=["onKeydown"],W1=["disabled"],H1={class:"mt-2"},V1=["onClick"],F1={class:"form-text"},B1={key:0,class:"text-warning"},q1={key:1},U1={class:"mb-3"},z1={class:"capabilities-editor"},K1={key:0,class:"capabilities-list mb-2"},G1=["onClick"],Y1={class:"input-group input-group-sm"},J1=["onKeydown"],Q1=["disabled"],X1={key:0,class:"mb-3"},Z1={class:"settings-sources-editor"},e$={class:"form-check"},t$=["checked"],s$={class:"form-check"},n$=["checked"],o$={class:"form-check"},i$=["checked"],a$={class:"form-text"},r$={key:0,class:"text-warning"},l$={key:1},c$={key:1,class:"mb-3"},u$={class:"mb-3"},d$={key:0,class:"mt-2"},m$=["value"],p$=["value"],f$={__name:"PermissionsTab",props:{mode:{type:String,required:!0},formData:{type:Object,required:!0},errors:{type:Object,required:!0},session:{type:Object,default:null},fieldStates:{type:Object,default:()=>({allowed_tools:"normal"})}},emits:["update:form-data","preview-permissions"],setup(n,{emit:e}){const t=n,o=e,i=j(""),a=j(""),r=j(!1),m=["Bash","Read","Edit","Write","Glob","Grep","WebFetch","WebSearch","Task","TodoWrite"],p=v(()=>t.mode==="create-template"||t.mode==="edit-template"),f=v(()=>t.mode==="create-session"||t.mode==="edit-session"),c=v(()=>t.mode==="edit-session"),E=v(()=>t.session?.state==="active"||t.session?.state==="starting"),g=v(()=>{if(!t.session)return!1;const S=t.session.allowed_tools?.join(", ")||"";return t.formData.allowed_tools!==S}),w=v(()=>t.formData.setting_sources||["user","project","local"]),y=v(()=>{if(!t.session)return!1;const S=t.session.setting_sources||["user","project","local"],C=t.formData.setting_sources||["user","project","local"];return JSON.stringify(S.sort())!==JSON.stringify(C.sort())}),b=v(()=>!t.formData.allowed_tools||!t.formData.allowed_tools.trim()?[]:t.formData.allowed_tools.split(",").map(S=>S.trim()).filter(S=>S.length>0)),u=v(()=>!t.formData.capabilities||!t.formData.capabilities.trim()?[]:t.formData.capabilities.split(",").map(S=>S.trim()).filter(S=>S.length>0)),h=v(()=>({"field-autofilled":t.fieldStates.allowed_tools==="autofilled","field-modified":t.fieldStates.allowed_tools==="modified"})),_=v(()=>({"editor-autofilled":t.fieldStates.allowed_tools==="autofilled","editor-modified":t.fieldStates.allowed_tools==="modified"}));function k(){const S=i.value.trim();if(S){if(!b.value.includes(S)){const C=[...b.value,S];o("update:form-data","allowed_tools",C.join(", "))}i.value=""}}function T(S){const C=[...b.value];C.splice(S,1),o("update:form-data","allowed_tools",C.join(", "))}function H(S){if(b.value.includes(S)){const C=b.value.indexOf(S);T(C)}else{const C=[...b.value,S];o("update:form-data","allowed_tools",C.join(", "))}}function V(){const S=a.value.trim().toLowerCase();if(S){if(!u.value.includes(S)){const C=[...u.value,S];o("update:form-data","capabilities",C.join(", "))}a.value=""}}function A(S){const C=[...u.value];C.splice(S,1),o("update:form-data","capabilities",C.join(", "))}function W(S){const C=[...w.value],q=C.indexOf(S);q>=0?C.splice(q,1):C.push(S),o("update:form-data","setting_sources",C)}return(S,C)=>(l(),d("div",O1,[s("div",M1,[s("label",D1,[C[9]||(C[9]=Z(" Allowed Tools ",-1)),n.fieldStates.allowed_tools==="autofilled"?(l(),d("span",N1," < ")):M("",!0),n.fieldStates.allowed_tools==="modified"?(l(),d("span",L1," * ")):M("",!0)]),s("div",{class:X(["allowed-tools-editor",_.value])},[b.value.length>0?(l(),d("div",I1,[(l(!0),d(re,null,ue(b.value,(q,U)=>(l(),d("span",{key:U,class:"badge bg-primary me-1 mb-1 tool-badge"},[Z($(q)+" ",1),s("button",{type:"button",class:"btn-close btn-close-white ms-1",onClick:I=>T(U),"aria-label":"Remove tool"},null,8,j1)]))),128))])):M("",!0),s("div",P1,[ge(s("input",{type:"text",class:"form-control","onUpdate:modelValue":C[0]||(C[0]=q=>i.value=q),onKeydown:qe(_e(k,["prevent"]),["enter"]),placeholder:"Add tool (e.g., Bash, Read, Edit)"},null,40,R1),[[We,i.value]]),s("button",{type:"button",class:"btn btn-outline-primary",onClick:k,disabled:!i.value.trim()}," Add ",8,W1)]),s("div",H1,[C[10]||(C[10]=s("span",{class:"form-text me-2"},"Quick add:",-1)),(l(),d(re,null,ue(m,q=>s("button",{key:q,type:"button",class:X(["btn btn-outline-secondary btn-sm me-1 mb-1",{"btn-secondary text-white":b.value.includes(q)}]),onClick:U=>H(q)},$(q),11,V1)),64))])],2),s("div",F1,[c.value&&E.value&&g.value?(l(),d("span",B1,[...C[11]||(C[11]=[Z(" Allowed tools change requires a ",-1),s("strong",null,"reset",-1),Z(" (not restart) to take effect. ",-1)])])):(l(),d("span",q1,$(p.value?"Default tools allowed for sessions using this template":"Leave empty to allow all tools"),1))])]),s("div",U1,[C[12]||(C[12]=s("label",{for:"config-capabilities",class:"form-label"},"Capabilities",-1)),s("div",z1,[u.value.length>0?(l(),d("div",K1,[(l(!0),d(re,null,ue(u.value,(q,U)=>(l(),d("span",{key:U,class:"badge bg-info me-1 mb-1 capability-badge"},[Z($(q)+" ",1),s("button",{type:"button",class:"btn-close btn-close-white ms-1",onClick:I=>A(U),"aria-label":"Remove capability"},null,8,G1)]))),128))])):M("",!0),s("div",Y1,[ge(s("input",{type:"text",class:"form-control","onUpdate:modelValue":C[1]||(C[1]=q=>a.value=q),onKeydown:qe(_e(V,["prevent"]),["enter"]),placeholder:"Add capability (e.g., python, testing)"},null,40,J1),[[We,a.value]]),s("button",{type:"button",class:"btn btn-outline-info",onClick:V,disabled:!a.value.trim()}," Add ",8,Q1)])]),C[13]||(C[13]=s("div",{class:"form-text"},"Comma-separated list of capability keywords for discovery",-1))]),f.value?(l(),d("div",X1,[C[18]||(C[18]=s("label",{class:"form-label"},"Settings Sources",-1)),s("div",Z1,[s("div",e$,[s("input",{type:"checkbox",class:"form-check-input",id:"setting-source-user",checked:w.value.includes("user"),onChange:C[2]||(C[2]=q=>W("user"))},null,40,t$),C[14]||(C[14]=s("label",{class:"form-check-label",for:"setting-source-user"},[Z(" User "),s("code",{class:"small"},"~/.claude/settings.json")],-1))]),s("div",s$,[s("input",{type:"checkbox",class:"form-check-input",id:"setting-source-project",checked:w.value.includes("project"),onChange:C[3]||(C[3]=q=>W("project"))},null,40,n$),C[15]||(C[15]=s("label",{class:"form-check-label",for:"setting-source-project"},[Z(" Project "),s("code",{class:"small"},".claude/settings.json")],-1))]),s("div",o$,[s("input",{type:"checkbox",class:"form-check-input",id:"setting-source-local",checked:w.value.includes("local"),onChange:C[4]||(C[4]=q=>W("local"))},null,40,i$),C[16]||(C[16]=s("label",{class:"form-check-label",for:"setting-source-local"},[Z(" Local "),s("code",{class:"small"},".claude/settings.local.json")],-1))])]),s("div",a$,[c.value&&E.value&&y.value?(l(),d("span",r$,[...C[17]||(C[17]=[Z(" Settings sources change requires a ",-1),s("strong",null,"restart",-1),Z(" to take effect. ",-1)])])):(l(),d("span",l$," Select which settings files to load permissions from "))])])):M("",!0),f.value?(l(),d("div",c$,[s("button",{type:"button",class:"btn btn-outline-secondary btn-sm",onClick:C[5]||(C[5]=q=>S.$emit("preview-permissions"))}," Preview Effective Permissions ")])):M("",!0),s("div",u$,[s("a",{class:"text-muted small",role:"button",onClick:C[6]||(C[6]=q=>r.value=!r.value)},$(r.value?"Hide":"Show")+" raw input ",1),r.value?(l(),d("div",d$,[C[19]||(C[19]=s("label",{class:"form-label small text-muted"},"Allowed Tools (comma-separated)",-1)),s("input",{type:"text",class:X(["form-control form-control-sm",h.value]),value:n.formData.allowed_tools,onInput:C[7]||(C[7]=q=>S.$emit("update:form-data","allowed_tools",q.target.value)),placeholder:"bash, read, edit, write, glob, grep"},null,42,m$),C[20]||(C[20]=s("label",{class:"form-label small text-muted mt-2"},"Capabilities (comma-separated)",-1)),s("input",{type:"text",class:"form-control form-control-sm",value:n.formData.capabilities,onInput:C[8]||(C[8]=q=>S.$emit("update:form-data","capabilities",q.target.value)),placeholder:"python, testing, debugging"},null,40,p$)])):M("",!0)])]))}},v$=ne(f$,[["__scopeId","data-v-e58aa2be"]]),h$={class:"advanced-tab"},_$={key:0,class:"alert alert-warning mb-3",role:"alert"},g$={class:"mb-3"},b$={for:"config-system-prompt",class:"form-label"},y$={key:0,class:"field-indicator autofilled",title:"Auto-filled from template"},w$={key:1,class:"field-indicator modified",title:"Modified from template"},$$=["value","rows","maxlength","placeholder"],E$={class:"form-text d-flex justify-content-between"},S$={key:0,class:"invalid-feedback"},C$={class:"mb-3 form-check"},k$=["checked"],T$={key:0,class:"form-text text-warning"},x$={key:1,class:"mb-3 form-check"},A$=["checked"],O$={__name:"AdvancedTab",props:{mode:{type:String,required:!0},formData:{type:Object,required:!0},errors:{type:Object,required:!0},session:{type:Object,default:null},fieldStates:{type:Object,default:()=>({initialization_context:"normal"})}},emits:["update:form-data"],setup(n,{emit:e}){const t=n,o=e,i=v(()=>t.mode==="create-session"||t.mode==="edit-session"),a=v(()=>t.mode==="create-template"||t.mode==="edit-template"),r=v(()=>t.mode==="edit-session"),m=v(()=>t.session?.state==="active"||t.session?.state==="starting"),p=v(()=>{if(!t.session)return!1;const _=(t.formData.initialization_context||"")!==(t.session.system_prompt||""),k=(t.formData.override_system_prompt||!1)!==(t.session.override_system_prompt||!1),T=(t.formData.sandbox_enabled||!1)!==(t.session.sandbox_enabled||!1);return _||k||T}),f=v(()=>a.value?6e3:2e3),c=v(()=>a.value?t.formData.system_prompt:t.formData.initialization_context),E=v(()=>c.value?.length||0),g=v(()=>E.value>f.value),w=v(()=>{const _=f.value*.9;return E.value>_&&E.value<=f.value}),y=v(()=>a.value?"Optional default system prompt for sessions using this template":"Instructions and context for the session..."),b=v(()=>t.formData.override_system_prompt?a.value?"This prompt will replace Claude Code's preset":"This context will replace Claude Code's preset and legion guide":a.value?"This prompt will be appended to Claude Code's preset":"This context will be appended to legion guide and Claude Code's preset"),u=v(()=>{const _={};return g.value&&(_["is-invalid"]=!0),t.fieldStates.initialization_context==="autofilled"&&(_["field-autofilled"]=!0),t.fieldStates.initialization_context==="modified"&&(_["field-modified"]=!0),_});function h(_){const k=_.target.value,T=a.value?"system_prompt":"initialization_context";o("update:form-data",T,k)}return(_,k)=>(l(),d("div",h$,[r.value&&m.value&&p.value?(l(),d("div",_$,[...k[2]||(k[2]=[s("small",null,[Z("Changes to these settings require a "),s("strong",null,"reset"),Z(" (not restart) to take effect.")],-1)])])):M("",!0),s("div",g$,[s("label",b$,[Z($(a.value?"Default System Prompt":"Initialization Context")+" ",1),n.fieldStates.initialization_context==="autofilled"?(l(),d("span",y$," < ")):M("",!0),n.fieldStates.initialization_context==="modified"?(l(),d("span",w$," * ")):M("",!0)]),s("textarea",{id:"config-system-prompt",class:X(["form-control",u.value]),value:c.value,onInput:h,rows:a.value?4:5,maxlength:f.value,placeholder:y.value},null,42,$$),s("div",E$,[s("span",null,$(b.value),1),s("span",{class:X({"text-danger":g.value,"text-warning":w.value})},$(E.value)+" / "+$(f.value)+" chars ",3)]),g.value?(l(),d("div",S$,$(a.value?"System prompt":"Initialization context")+" exceeds "+$(f.value)+" character limit ",1)):M("",!0)]),s("div",C$,[s("input",{type:"checkbox",class:"form-check-input",id:"config-override-prompt",checked:n.formData.override_system_prompt,onChange:k[0]||(k[0]=T=>_.$emit("update:form-data","override_system_prompt",T.target.checked))},null,40,k$),k[3]||(k[3]=s("label",{class:"form-check-label",for:"config-override-prompt"}," Override Claude Code preset (use custom prompt only) ",-1)),n.formData.override_system_prompt?(l(),d("div",T$,[s("small",null,"Override mode may cause unexpected behaviors. Only custom instructions will be used (no Claude Code preset"+$(a.value?"":" or legion guide")+").",1)])):M("",!0)]),i.value?(l(),d("div",x$,[s("input",{type:"checkbox",class:"form-check-input",id:"config-sandbox",checked:n.formData.sandbox_enabled,onChange:k[1]||(k[1]=T=>_.$emit("update:form-data","sandbox_enabled",T.target.checked))},null,40,A$),k[4]||(k[4]=s("label",{class:"form-check-label",for:"config-sandbox"}," Enable Sandbox Mode ",-1)),s("div",{class:X(["form-text",n.formData.sandbox_enabled?"text-info":"text-muted"])},[s("small",null,$(n.formData.sandbox_enabled?"Sandbox enabled: Session will have OS-level isolation restricting file system and network access.":"Sandbox mode restricts file system and network access for added security."),1)],2)])):M("",!0)]))}},M$=ne(O$,[["__scopeId","data-v-1909e7ae"]]),D$={class:"modal-dialog modal-lg"},N$={class:"modal-content"},L$={class:"modal-body"},I$={key:0,class:"text-center py-4"},j$={key:1,class:"alert alert-danger"},P$={key:2},R$={class:"mb-3"},W$={class:"small text-muted mb-2"},H$={key:0},V$={key:0,class:"alert alert-info"},F$={key:1},B$={class:"table table-sm table-striped"},q$={key:2,class:"mt-3"},U$={class:"modal-footer"},z$=["disabled"],K$={__name:"PermissionPreviewModal",props:{workingDirectory:{type:String,required:!0},settingSources:{type:Array,default:()=>["user","project","local"]},sessionAllowedTools:{type:Array,default:()=>[]}},emits:["close"],setup(n,{expose:e,emit:t}){const o=n,i=t,a=j(null);let r=null;const m=j(!1),p=j(""),f=j([]);pe(a,b=>{b&&(r=new ut(b),b.addEventListener("hidden.bs.modal",()=>{i("close")}))});function c(){r&&(r.show(),g())}function E(){r&&r.hide()}async function g(){m.value=!0,p.value="",f.value=[];try{const b=await ce.post("/api/permissions/preview",{working_directory:o.workingDirectory,setting_sources:o.settingSources,session_allowed_tools:o.sessionAllowedTools});f.value=b.permissions||[]}catch(b){console.error("Failed to load permissions:",b),p.value=b.response?.data?.detail||b.message||"Failed to load permissions"}finally{m.value=!1}}function w(){g()}function y(b){switch(b){case"user":return"bg-info";case"project":return"bg-primary";case"local":return"bg-secondary";case"session":return"bg-success";default:return"bg-dark"}}return e({show:c,hide:E}),(b,u)=>(l(),d("div",{ref_key:"modalRef",ref:a,class:"modal fade",tabindex:"-1","aria-labelledby":"permissionPreviewModalLabel","aria-hidden":"true"},[s("div",D$,[s("div",N$,[u[7]||(u[7]=s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"permissionPreviewModalLabel"}," Effective Permissions Preview "),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),s("div",L$,[m.value?(l(),d("div",I$,[...u[0]||(u[0]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),s("p",{class:"mt-2 text-muted"},"Loading permissions...",-1)])])):p.value?(l(),d("div",j$,$(p.value),1)):(l(),d("div",P$,[s("div",R$,[u[2]||(u[2]=s("h6",null,"Settings Sources",-1)),s("div",W$,[u[1]||(u[1]=Z(" Loading permissions from: ",-1)),(l(!0),d(re,null,ue(n.settingSources,(h,_)=>(l(),d("span",{key:h},[s("code",null,$(h),1),_<n.settingSources.length-1?(l(),d("span",H$,", ")):M("",!0)]))),128))])]),f.value.length===0?(l(),d("div",V$," No pre-approved permissions found in the selected settings sources. All tool usages will prompt for approval. ")):(l(),d("div",F$,[s("h6",null,"Pre-approved Permissions ("+$(f.value.length)+")",1),s("table",B$,[u[3]||(u[3]=s("thead",null,[s("tr",null,[s("th",null,"Permission"),s("th",null,"Source(s)")])],-1)),s("tbody",null,[(l(!0),d(re,null,ue(f.value,h=>(l(),d("tr",{key:h.permission},[s("td",null,[s("code",null,$(h.permission),1)]),s("td",null,[(l(!0),d(re,null,ue(h.sources,(_,k)=>(l(),d("span",{key:_,class:X(["badge me-1",y(_)])},$(_),3))),128))])]))),128))])])])),n.sessionAllowedTools.length>0?(l(),d("div",q$,[u[4]||(u[4]=s("h6",null,"Session Allowed Tools",-1)),u[5]||(u[5]=s("p",{class:"small text-muted"}," These tools are explicitly allowed for this session: ",-1)),s("div",null,[(l(!0),d(re,null,ue(n.sessionAllowedTools,h=>(l(),d("span",{key:h,class:"badge bg-success me-1 mb-1"},$(h),1))),128))])])):M("",!0)]))]),s("div",U$,[u[6]||(u[6]=s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),s("button",{type:"button",class:"btn btn-outline-primary",onClick:w,disabled:m.value}," Refresh ",8,z$)])])])],512))}},G$=ne(K$,[["__scopeId","data-v-988ff7c4"]]),Y$={class:"modal-dialog modal-lg modal-dialog-centered"},J$={class:"modal-content"},Q$={class:"modal-header"},X$={id:"configurationModalLabel",class:"modal-title"},Z$={class:"modal-body"},eE={key:0,class:"template-list-view"},tE={key:0,class:"alert alert-info"},sE={class:"card-body"},nE={class:"d-flex justify-content-between align-items-start"},oE={class:"flex-grow-1"},iE={class:"card-title mb-1"},aE={key:0,class:"card-text text-muted small mb-2"},rE={class:"template-meta"},lE={class:"badge bg-secondary me-2"},cE={class:"text-muted small"},uE={class:"btn-group btn-group-sm ms-3"},dE=["onClick"],mE=["onClick"],pE={key:1},fE={class:"nav nav-tabs nav-tabs-responsive mb-3",role:"tablist"},vE={class:"nav-item",role:"presentation"},hE={key:0,class:"error-indicator",title:"This tab has validation errors"},_E={class:"nav-item",role:"presentation"},gE={key:0,class:"error-indicator",title:"This tab has validation errors"},bE={class:"nav-item",role:"presentation"},yE={key:0,class:"error-indicator",title:"This tab has validation errors"},wE={class:"tab-content"},$E={key:2,class:"alert alert-danger mt-3"},EE={class:"modal-footer"},SE={type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},CE=["disabled"],kE={key:0,class:"spinner-border spinner-border-sm me-2"},TE={__name:"ConfigurationModal",setup(n){const e=Pt(),t=Le(),o=de(),i=he(),a=j(null);let r=null;const m=j(null),p=j("create-session"),f=j("general"),c=j(null),E=j(null),g=j(null),w=j([]),y=j(null),b=j(null),u=j({default_role:null,initialization_context:null,permission_mode:null,allowed_tools:null}),h=bs({default_role:"normal",initialization_context:"normal",permission_mode:"normal",allowed_tools:"normal"}),_=bs({name:"",model:"sonnet",permission_mode:"default",working_directory:"",description:"",default_role:"",startImmediately:!0,allowed_tools:"",capabilities:"",setting_sources:["user","project","local"],system_prompt:"",override_system_prompt:!1,initialization_context:"",sandbox_enabled:!1}),k=bs({name:"",system_prompt:"",initialization_context:""}),T=v(()=>({general:!!k.name,permissions:!1,advanced:!!k.system_prompt||!!k.initialization_context})),H=j(!1),V=j(""),A=v(()=>p.value==="create-session"||p.value==="edit-session"),W=v(()=>p.value==="edit-session"||p.value==="edit-template"),S=v(()=>{switch(p.value){case"create-session":return"Create Session";case"edit-session":return"Edit Session";case"create-template":return"Create Template";case"edit-template":return"Edit Template";case"template-list":return"Manage Templates";default:return"Configuration"}}),C=v(()=>H.value?W.value?"Saving...":"Creating...":W.value?"Save Changes":A.value?"Create Session":"Save Template"),q=v(()=>!(!_.name.trim()||_.system_prompt.length>6e3||_.initialization_context.length>2e3||A.value&&_.name.includes(" "))),U=v(()=>E.value?.working_directory?E.value.working_directory:_.working_directory?_.working_directory:t.projects.get(c.value)?.working_directory||""),I=v(()=>!_.allowed_tools||!_.allowed_tools.trim()?[]:_.allowed_tools.split(",").map(B=>B.trim()).filter(B=>B.length>0));function P(){m.value&&m.value.show()}function F(B,oe){_[B]=oe,B==="name"&&(k.name=""),B==="system_prompt"&&(k.system_prompt=""),B==="initialization_context"&&(k.initialization_context="")}function x(B){y.value=B,z()}async function O(){try{const B=await ce.get("/api/templates");w.value=B||[]}catch(B){console.error("Failed to load templates:",B),w.value=[]}}function z(){if(!y.value){_.default_role="",_.initialization_context="",_.permission_mode="default",_.allowed_tools="",h.default_role="normal",h.initialization_context="normal",h.permission_mode="normal",h.allowed_tools="normal",u.value={default_role:null,initialization_context:null,permission_mode:null,allowed_tools:null};return}const B=w.value.find(oe=>oe.template_id===y.value);if(B)if(h.default_role="normal",h.initialization_context="normal",h.permission_mode="normal",h.allowed_tools="normal",B.default_role?(_.default_role=B.default_role,u.value.default_role=B.default_role,h.default_role="autofilled"):(_.default_role="",u.value.default_role=null),B.default_system_prompt?(_.initialization_context=B.default_system_prompt,u.value.initialization_context=B.default_system_prompt,h.initialization_context="autofilled"):(_.initialization_context="",u.value.initialization_context=null),B.permission_mode?(_.permission_mode=B.permission_mode,u.value.permission_mode=B.permission_mode,h.permission_mode="autofilled"):(_.permission_mode="default",u.value.permission_mode=null),B.allowed_tools&&B.allowed_tools.length>0){const oe=B.allowed_tools.join(", ");_.allowed_tools=oe,u.value.allowed_tools=oe,h.allowed_tools="autofilled"}else _.allowed_tools="",u.value.allowed_tools=null}function L(){const oe=(c.value?t.projects.get(c.value):null)?.working_directory||"";i.showModal("folder-browser",{defaultPath:oe,currentPath:_.working_directory||"",onSelect:le=>{_.working_directory=le}})}function D(){p.value==="create-session"&&(b.value={mode:"create-session",projectId:c.value,formData:{..._},selectedTemplateId:y.value}),p.value="template-list",ee()}function G(){p.value="create-template",ee(),f.value="general"}function ie(B){p.value="edit-template",g.value=B,ee(),ve(B),f.value="general"}async function J(B){if(confirm(`Delete template "${B.name}"?

This action cannot be undone.`))try{await ce.delete(`/api/templates/${B.template_id}`),await O()}catch(oe){console.error("Failed to delete template:",oe),V.value=oe.response?.data?.detail||"Failed to delete template"}}function Q(){let B=!0;return k.name="",k.system_prompt="",k.initialization_context="",_.name.trim()||(k.name="Name is required",B=!1),A.value&&_.name.includes(" ")&&(k.name="Session name must be a single word (no spaces)",B=!1),_.system_prompt.length>6e3&&(k.system_prompt="System prompt exceeds 6000 character limit",B=!1),_.initialization_context.length>2e3&&(k.initialization_context="Initialization context exceeds 2000 character limit",B=!1),B}async function ae(){if(!Q()){k.name?f.value="general":(k.system_prompt||k.initialization_context)&&(f.value="advanced");return}H.value=!0,V.value="";try{switch(p.value){case"create-session":await me(),r&&r.hide();break;case"edit-session":await R(),r&&r.hide();break;case"create-template":await N();break;case"edit-template":await Y();break}}catch(B){console.error("Submit failed:",B),V.value=B.response?.data?.detail||B.message||"Operation failed. Please try again."}finally{H.value=!1}}async function me(){if(!c.value)throw new Error("Project ID is missing");const B=_.allowed_tools.split(",").map(Re=>Re.trim()).filter(Re=>Re.length>0),oe=_.capabilities.split(",").map(Re=>Re.trim()).filter(Re=>Re.length>0),le={name:_.name.trim(),model:_.model||null,role:_.default_role.trim()||null,initialization_context:_.initialization_context.trim()||null,override_system_prompt:_.override_system_prompt,capabilities:oe.length>0?oe:null,permission_mode:_.permission_mode,allowed_tools:B.length>0?B:null,working_directory:_.working_directory.trim()||null,sandbox_enabled:_.sandbox_enabled,setting_sources:_.setting_sources},Pe=await ce.post(`/api/legions/${c.value}/minions`,le);if(Pe.success&&Pe.minion_id)await t.fetchProjects(),await o.fetchSessions(),_.startImmediately&&await o.startSession(Pe.minion_id),e.push(`/session/${Pe.minion_id}`);else throw new Error("Failed to create session")}async function R(){if(!E.value)throw new Error("Session data is missing");const B=E.value.session_id,oe=E.value.state==="active"||E.value.state==="starting",le=_.allowed_tools.split(",").map(ye=>ye.trim()).filter(ye=>ye.length>0),Pe=_.capabilities.split(",").map(ye=>ye.trim()).filter(ye=>ye.length>0),Re={name:_.name.trim(),model:_.model,role:_.default_role.trim()||null,system_prompt:_.initialization_context.trim()||null,override_system_prompt:_.override_system_prompt,allowed_tools:le.length>0?le:null,capabilities:Pe.length>0?Pe:null,sandbox_enabled:_.sandbox_enabled,setting_sources:_.setting_sources};await o.patchSession(B,Re),oe&&_.permission_mode!==E.value.current_permission_mode&&await o.setPermissionMode(B,_.permission_mode)}async function N(){const B=_.allowed_tools.split(",").map(le=>le.trim()).filter(le=>le.length>0),oe={name:_.name.trim(),description:_.description.trim()||null,permission_mode:_.permission_mode,allowed_tools:B.length>0?B:null,default_role:_.default_role.trim()||null,default_system_prompt:_.initialization_context.trim()||null};await ce.post("/api/templates",oe),await O(),p.value="template-list",ee()}async function Y(){if(!g.value)throw new Error("Template data is missing");const B=_.allowed_tools.split(",").map(le=>le.trim()).filter(le=>le.length>0),oe={name:_.name.trim(),description:_.description.trim()||null,permission_mode:_.permission_mode,allowed_tools:B.length>0?B:null,default_role:_.default_role.trim()||null,default_system_prompt:_.initialization_context.trim()||null};await ce.put(`/api/templates/${g.value.template_id}`,oe),await O(),p.value="template-list",g.value=null,ee()}function ee(){_.name="",_.model="sonnet",_.permission_mode="default",_.working_directory="",_.description="",_.default_role="",_.startImmediately=!0,_.allowed_tools="",_.capabilities="",_.setting_sources=["user","project","local"],_.system_prompt="",_.override_system_prompt=!1,_.initialization_context="",_.sandbox_enabled=!1,k.name="",k.system_prompt="",k.initialization_context="",h.default_role="normal",h.initialization_context="normal",h.permission_mode="normal",h.allowed_tools="normal",u.value={default_role:null,initialization_context:null,permission_mode:null,allowed_tools:null},y.value=null,V.value="",f.value="general"}function se(B){_.name=B.name||"",_.model=B.model||"sonnet",_.permission_mode=B.current_permission_mode||"default",_.working_directory=B.working_directory||"",_.default_role=B.role||"",_.initialization_context=B.system_prompt||"",_.override_system_prompt=B.override_system_prompt||!1,_.system_prompt="",_.allowed_tools=B.allowed_tools?.join(", ")||"",_.capabilities=B.capabilities?.join(", ")||"",_.sandbox_enabled=B.sandbox_enabled||!1,_.setting_sources=B.setting_sources||["user","project","local"]}function ve(B){_.name=B.name||"",_.description=B.description||"",_.permission_mode=B.permission_mode||"default",_.default_role=B.default_role||"",_.initialization_context=B.default_system_prompt||"",_.allowed_tools=B.allowed_tools?.join(", ")||""}function je(){ss(()=>{const B=document.getElementById("config-name");B&&(B.focus(),W.value&&B.select())})}function Ye(){ee(),p.value="create-session",c.value=null,E.value=null,g.value=null,i.hideModal()}return pe(()=>i.currentModal,async(B,oe)=>{if(!(!B||!r)){if(B.name==="configuration"){const le=B.data||{};p.value=le.mode||"create-session",c.value=le.project?.project_id||le.projectId||null,E.value=le.session||null,g.value=le.template||null,ee(),p.value==="create-session"&&await O(),p.value==="edit-session"&&E.value?se(E.value):p.value==="edit-template"&&g.value&&ve(g.value),r.show()}else if(B.name==="create-minion"||B.name==="create-session"){const le=B.data||{};p.value="create-session",c.value=le.project?.project_id||null,E.value=null,g.value=null,ee(),await O(),r.show()}else if(B.name==="edit-session"){const le=B.data||{};p.value="edit-session",E.value=le.session||null,c.value=E.value?.project_id||null,g.value=null,ee(),E.value&&se(E.value),r.show()}else B.name==="template-management"&&(p.value="template-list",ee(),await O(),r.show());oe?.name==="configuration"&&oe.data?.mode?.includes("template")&&B?.name==="configuration"&&p.value==="create-session"&&await O()}}),pe(()=>_.default_role,B=>{u.value.default_role!==null&&(h.default_role=B===u.value.default_role?"autofilled":"modified")}),pe(()=>_.initialization_context,B=>{u.value.initialization_context!==null&&(h.initialization_context=B===u.value.initialization_context?"autofilled":"modified")}),pe(()=>_.permission_mode,B=>{u.value.permission_mode!==null&&(h.permission_mode=B===u.value.permission_mode?"autofilled":"modified")}),pe(()=>_.allowed_tools,B=>{u.value.allowed_tools!==null&&(h.allowed_tools=B===u.value.allowed_tools?"autofilled":"modified")}),be(()=>{a.value&&Ae(()=>import("./modal-D6mKceGM.js").then(B=>B.m),__vite__mapDeps([0,1])).then(B=>{const oe=B.default;r=new oe(a.value),a.value.addEventListener("shown.bs.modal",je),a.value.addEventListener("hidden.bs.modal",Ye)})}),Ce(()=>{a.value&&(a.value.removeEventListener("shown.bs.modal",je),a.value.removeEventListener("hidden.bs.modal",Ye)),r&&r.dispose()}),(B,oe)=>(l(),d(re,null,[s("div",{ref_key:"modalElement",ref:a,class:"modal fade",tabindex:"-1","aria-labelledby":"configurationModalLabel","aria-hidden":"true"},[s("div",Y$,[s("div",J$,[s("div",Q$,[s("h5",X$,[p.value==="create-template"||p.value==="edit-template"?(l(),d("button",{key:0,type:"button",class:"btn btn-link p-0 me-2",onClick:D,title:"Back to template list"}," â† ")):M("",!0),Z(" "+$(S.value),1)]),oe[3]||(oe[3]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),s("div",Z$,[p.value==="template-list"?(l(),d("div",eE,[s("div",{class:"d-flex justify-content-between align-items-center mb-3"},[oe[4]||(oe[4]=s("h6",{class:"mb-0"},"Templates",-1)),s("button",{onClick:G,class:"btn btn-primary btn-sm"}," + Create New ")]),w.value.length===0?(l(),d("div",tE," No templates found. Create your first template! ")):M("",!0),(l(!0),d(re,null,ue(w.value,le=>(l(),d("div",{key:le.template_id,class:"card mb-2"},[s("div",sE,[s("div",nE,[s("div",oE,[s("h6",iE,$(le.name),1),le.description?(l(),d("p",aE,$(le.description),1)):M("",!0),s("div",rE,[s("span",lE,$(le.permission_mode),1),s("span",cE,$(le.allowed_tools?.length||0)+" tools",1)])]),s("div",uE,[s("button",{onClick:Pe=>ie(le),class:"btn btn-outline-primary",title:"Edit"}," Edit ",8,dE),s("button",{onClick:Pe=>J(le),class:"btn btn-outline-danger",title:"Delete"}," Delete ",8,mE)])])])]))),128))])):(l(),d("div",pE,[s("ul",fE,[s("li",vE,[s("button",{class:X(["nav-link",{active:f.value==="general","has-error":T.value.general}]),type:"button",onClick:oe[0]||(oe[0]=le=>f.value="general")},[oe[5]||(oe[5]=Z(" General ",-1)),T.value.general?(l(),d("span",hE)):M("",!0)],2)]),s("li",_E,[s("button",{class:X(["nav-link",{active:f.value==="permissions","has-error":T.value.permissions}]),type:"button",onClick:oe[1]||(oe[1]=le=>f.value="permissions")},[oe[6]||(oe[6]=Z(" Permissions ",-1)),T.value.permissions?(l(),d("span",gE)):M("",!0)],2)]),s("li",bE,[s("button",{class:X(["nav-link",{active:f.value==="advanced","has-error":T.value.advanced}]),type:"button",onClick:oe[2]||(oe[2]=le=>f.value="advanced")},[oe[7]||(oe[7]=Z(" Advanced ",-1)),T.value.advanced?(l(),d("span",yE)):M("",!0)],2)])]),s("div",wE,[ge(fe(A1,{mode:p.value,"form-data":_,errors:k,templates:w.value,"selected-template-id":y.value,session:E.value,"field-states":h,"onUpdate:formData":F,"onUpdate:selectedTemplateId":x,onOpenFolderBrowser:L,onOpenTemplateManager:D},null,8,["mode","form-data","errors","templates","selected-template-id","session","field-states"]),[[gs,f.value==="general"]]),ge(fe(v$,{mode:p.value,"form-data":_,errors:k,session:E.value,"field-states":h,"onUpdate:formData":F,onPreviewPermissions:P},null,8,["mode","form-data","errors","session","field-states"]),[[gs,f.value==="permissions"]]),ge(fe(M$,{mode:p.value,"form-data":_,errors:k,session:E.value,"field-states":h,"onUpdate:formData":F},null,8,["mode","form-data","errors","session","field-states"]),[[gs,f.value==="advanced"]])])])),V.value?(l(),d("div",$E,$(V.value),1)):M("",!0)]),s("div",EE,[s("button",SE,$(p.value==="template-list"?"Close":"Cancel"),1),p.value!=="template-list"?(l(),d("button",{key:0,type:"button",class:"btn btn-primary",disabled:H.value||!q.value,onClick:ae},[H.value?(l(),d("span",kE)):M("",!0),Z(" "+$(C.value),1)],8,CE)):M("",!0)])])])],512),fe(G$,{ref_key:"permissionPreviewModal",ref:m,"working-directory":U.value,"setting-sources":_.setting_sources,"session-allowed-tools":I.value},null,8,["working-directory","setting-sources","session-allowed-tools"])],64))}},xE=ne(TE,[["__scopeId","data-v-bb54bc71"]]),AE={class:"modal-dialog modal-dialog-centered"},OE={class:"modal-content"},ME={class:"modal-header"},DE={class:"modal-title",id:"manageSessionModalLabel"},NE={class:"modal-body"},LE={key:0,class:"text-center py-4"},IE={class:"text-muted"},jE={key:1},PE={key:2},RE={class:"text-muted"},WE={key:0,class:"text-center py-2"},HE={key:1,class:"alert alert-warning mt-3"},VE={class:"mb-0 mt-2"},FE={key:0,class:"text-muted"},BE={key:3},qE={key:0,class:"alert alert-danger alert-dismissible fade show",role:"alert"},UE={class:"d-grid gap-2"},zE=["disabled"],KE=["disabled"],GE=["disabled"],YE=["disabled"],JE={class:"modal-footer"},QE={key:1,type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},XE={__name:"SessionManageModal",setup(n){const e=Pt(),t=de(),o=he(),i=et();Me();const a=j(null),r=j(!1),m=j(""),p=j(""),f=j(null),c=j(null);let E=null;const g=j([]),w=j(!1),y=v(()=>f.value==="reset"?"Reset Session":f.value==="delete"?"Delete Session":"Manage Session");function b(){f.value="reset"}async function u(){if(f.value="delete",g.value=[],!!a.value){w.value=!0;try{const S=await ce.get(`/api/sessions/${a.value.session_id}/descendants`);g.value=S.descendants||[]}catch(S){console.error("Failed to fetch descendants:",S),g.value=[]}finally{w.value=!1}}}function h(){f.value=null}async function _(){f.value==="reset"?await H():f.value==="delete"&&await V()}async function k(){if(a.value){r.value=!0,m.value="Restarting session...";try{const S=a.value.session_id,C=t.currentSessionId===S,q=await ce.post(`/api/sessions/${S}/restart`);if(q.success)console.log("Session restarted successfully"),C&&(await i.disconnectSession(),t.currentSessionId=null,await t.selectSession(S)),E&&E.hide();else{const U=q.error||q.detail||"Failed to restart session";console.error("Failed to restart session:",U),p.value=`Failed to restart session: ${U}`}}catch(S){console.error("Error restarting session:",S);const C=S.data?.detail||S.message||"Unknown error";p.value=`Error restarting session: ${C}`}finally{r.value=!1}}}async function T(){if(a.value)try{E&&E.hide(),console.log("Ending session",a.value.session_id);const S=a.value.session_id;await ce.post(`/api/sessions/${S}/terminate`),t.currentSessionId===S&&(await i.disconnectSession(),t.currentSessionId=null,e.push("/"))}catch(S){console.error("Error ending session:",S),t.currentSessionId===a.value?.session_id&&(await i.disconnectSession(),t.currentSessionId=null,e.push("/"))}}async function H(){if(a.value){r.value=!0,m.value="Resetting session...";try{const S=a.value.session_id,C=t.currentSessionId===S,q=await ce.post(`/api/sessions/${S}/reset`);if(q.success)console.log("Session reset successfully"),C&&(await i.disconnectSession(),t.currentSessionId=null,await t.selectSession(S)),E&&E.hide();else{const U=q.error||q.detail||"Failed to reset session";console.error("Failed to reset session:",U),p.value=`Failed to reset session: ${U}`,f.value=null}}catch(S){console.error("Error resetting session:",S);const C=S.data?.detail||S.message||"Unknown error";p.value=`Error resetting session: ${C}`,f.value=null}finally{r.value=!1}}}async function V(){if(a.value){r.value=!0,m.value="Deleting session...";try{const S=a.value.session_id;await t.deleteSession(S),e.currentRoute.value.params.sessionId===S&&e.push("/"),E&&E.hide()}catch(S){console.error("Error deleting session:",S);const C=S.data?.detail||S.message||"Unknown error";p.value=`Error deleting session: ${C}`,f.value=null}finally{r.value=!1}}}function A(){f.value=null,r.value=!1,m.value="",p.value="",g.value=[],w.value=!1}function W(){A(),a.value=null,o.hideModal()}return pe(()=>o.currentModal,S=>{if(S?.name==="manage-session"&&E){const C=S.data||{};a.value=C.session,A(),E.show()}}),be(()=>{c.value&&Ae(async()=>{const{default:S}=await import("./modal-D6mKceGM.js").then(C=>C.m);return{default:S}},__vite__mapDeps([0,1])).then(({default:S})=>{E=new S(c.value),c.value.addEventListener("hidden.bs.modal",W)})}),Ce(()=>{c.value&&c.value.removeEventListener("hidden.bs.modal",W),E&&E.dispose()}),(S,C)=>(l(),d("div",{class:"modal fade",id:"manageSessionModal",tabindex:"-1","aria-labelledby":"manageSessionModalLabel","aria-hidden":"true",ref_key:"modalElement",ref:c},[s("div",AE,[s("div",OE,[s("div",ME,[s("h5",DE,$(f.value?y.value:"Manage Session"),1),C[1]||(C[1]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),s("div",NE,[r.value?(l(),d("div",LE,[C[2]||(C[2]=s("div",{class:"spinner-border text-primary mb-3",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1)),s("p",IE,$(m.value),1)])):f.value==="reset"?(l(),d("div",jE,[...C[3]||(C[3]=[s("div",{class:"alert alert-danger mb-3"},[s("strong",null,"âš ï¸ Warning: This action cannot be undone")],-1),s("p",{class:"text-muted"},"This will permanently delete all messages and conversation history for this session.",-1),s("p",{class:"text-muted"},"The session settings and configuration will be preserved, but you will start with a completely fresh conversation.",-1)])])):f.value==="delete"?(l(),d("div",PE,[C[9]||(C[9]=s("div",{class:"alert alert-danger mb-3"},[s("strong",null,"âš ï¸ Warning: This action cannot be undone")],-1)),s("p",RE,[C[4]||(C[4]=Z("This will permanently delete session ",-1)),s("strong",null,$(a.value?.name),1),C[5]||(C[5]=Z(".",-1))]),C[10]||(C[10]=s("p",{class:"text-muted"},"All messages, conversation history, settings, and configuration will be completely destroyed. This is more destructive than Reset Session.",-1)),w.value?(l(),d("div",WE,[...C[6]||(C[6]=[s("div",{class:"spinner-border spinner-border-sm text-secondary",role:"status"},[s("span",{class:"visually-hidden"},"Checking for child sessions...")],-1),s("span",{class:"ms-2 text-muted small"},"Checking for child sessions...",-1)])])):g.value.length>0?(l(),d("div",HE,[C[7]||(C[7]=s("strong",null,"Cascading Deletion:",-1)),C[8]||(C[8]=Z(" This session has ",-1)),s("strong",null,$(g.value.length),1),Z(" child session"+$(g.value.length===1?"":"s")+" that will also be deleted: ",1),s("ul",VE,[(l(!0),d(re,null,ue(g.value,q=>(l(),d("li",{key:q.session_id,class:"small"},[s("strong",null,$(q.name||q.session_id),1),q.role?(l(),d("span",FE," ("+$(q.role)+")",1)):M("",!0)]))),128))])])):M("",!0)])):(l(),d("div",BE,[p.value?(l(),d("div",qE,[C[11]||(C[11]=s("strong",null,"Error:",-1)),Z(" "+$(p.value)+" ",1),s("button",{type:"button",class:"btn-close",onClick:C[0]||(C[0]=q=>p.value="")})])):M("",!0),C[18]||(C[18]=s("p",{class:"text-muted"},"Choose how to manage this session:",-1)),s("div",UE,[s("button",{class:"btn btn-outline-primary text-start",onClick:k,disabled:r.value},[...C[12]||(C[12]=[s("strong",null,"ðŸ”„ Restart Agent",-1),s("div",{class:"small text-muted"},"Disconnect and resume session (keeps all messages)",-1)])],8,zE),s("button",{class:"btn btn-outline-secondary text-start",onClick:T,disabled:r.value},[...C[13]||(C[13]=[s("strong",null,"ðŸšª End Session",-1),s("div",{class:"small text-muted"},"Close agent and return to session list",-1)])],8,KE),C[16]||(C[16]=s("hr",{class:"my-2"},null,-1)),C[17]||(C[17]=s("div",{class:"danger-zone-header"},[s("h6",{class:"text-danger mb-2"},"âš ï¸ Danger Zone")],-1)),s("button",{class:"btn btn-outline-warning text-start",onClick:b,disabled:r.value},[...C[14]||(C[14]=[s("strong",null,"ðŸ§¹ Reset Session",-1),s("div",{class:"small text-muted"},"Clear all messages and start fresh (keeps settings)",-1)])],8,GE),s("button",{class:"btn btn-outline-danger text-start",onClick:u,disabled:r.value},[...C[15]||(C[15]=[s("strong",null,"ðŸ—‘ï¸ Delete Session",-1),s("div",{class:"small text-muted"},"Permanently delete this session and all its data",-1)])],8,YE)]),C[19]||(C[19]=s("div",{class:"alert alert-warning mt-3 mb-0"},[s("small",null,[s("strong",null,"Note:"),Z(" Restart is the recommended option for unsticking the agent.")])],-1))]))]),s("div",JE,[f.value&&!r.value?(l(),d(re,{key:0},[s("button",{type:"button",class:"btn btn-secondary",onClick:h},"Cancel"),s("button",{type:"button",class:X(["btn",f.value==="delete"?"btn-danger":"btn-warning"]),onClick:_},$(f.value==="delete"?"Delete Session":"Confirm Reset"),3)],64)):r.value?M("",!0):(l(),d("button",QE,"Cancel"))])])])],512))}},ZE=ne(XE,[["__scopeId","data-v-6b832853"]]),eS={class:"modal-dialog modal-dialog-centered modal-lg"},tS={class:"modal-content"},sS={class:"modal-body"},nS={key:0,class:"text-center text-muted py-4"},oS={key:1},iS={class:"mb-3"},aS={class:"font-monospace small"},rS={class:"mb-3"},lS=["value"],cS={class:"mb-3"},uS={class:"mb-3"},dS={class:"mb-3"},mS={key:0},pS={class:"d-flex flex-wrap gap-1"},fS={key:1,class:"text-muted small"},vS={key:0,class:"mb-3"},hS={class:"d-flex flex-wrap gap-1"},_S={key:1,class:"mb-3"},gS={class:"bg-light p-2 rounded small",style:{"max-height":"200px","overflow-y":"auto"}},bS={class:"mb-3"},yS={class:"text-muted"},wS={key:0,class:"bg-light p-2 rounded small",style:{"max-height":"300px","overflow-y":"auto"}},$S={__name:"SessionInfoModal",setup(n){const e=de(),t=Me(),o=he(),i=j(null),a=j(!1),r=j(null);let m=null;const p={sonnet:"Sonnet 4.5",opus:"Opus 4.5",haiku:"Haiku 4.5",opusplan:"OpusPlan (Opus + Sonnet)"},f=v(()=>{if(!i.value)return null;const b=e.initData.get(i.value);return b||(t.messagesBySession.get(i.value)||[]).find(_=>_.type==="system"&&(_.subtype==="init"||_.metadata?.subtype==="init")&&_.metadata?.init_data)?.metadata?.init_data||null});function c(b){return b?p[b]||b:"Default (Sonnet 4.5)"}function E(b){return typeof b=="string"?b:typeof b=="object"&&b.type==="preset"?`Preset: ${b.preset}`:JSON.stringify(b,null,2)}function g(b){b.target.select()}function w(){i.value=null,a.value=!1}function y(){w(),o.hideModal()}return pe(()=>o.currentModal,b=>{if(b?.name==="session-info"&&m){const u=b.data||{};i.value=u.sessionId,a.value=!1,m.show()}}),be(()=>{r.value&&Ae(async()=>{const{default:b}=await import("./modal-D6mKceGM.js").then(u=>u.m);return{default:b}},__vite__mapDeps([0,1])).then(({default:b})=>{m=new b(r.value),r.value.addEventListener("hidden.bs.modal",y)})}),Ce(()=>{r.value&&r.value.removeEventListener("hidden.bs.modal",y),m&&m.dispose()}),(b,u)=>(l(),d("div",{class:"modal fade",id:"sessionInfoModal",tabindex:"-1","aria-labelledby":"sessionInfoModalLabel","aria-hidden":"true",ref_key:"modalElement",ref:r},[s("div",eS,[s("div",tS,[u[9]||(u[9]=s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"sessionInfoModalLabel"},"Session Configuration"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),s("div",sS,[f.value?(l(),d("div",oS,[s("div",iS,[u[1]||(u[1]=s("h6",{class:"text-muted"},"Session ID",-1)),s("div",aS,$(i.value),1)]),s("div",rS,[u[2]||(u[2]=s("h6",{class:"text-muted"},"Working Directory",-1)),s("input",{type:"text",class:"form-control form-control-sm font-monospace path-input",value:f.value.cwd||"Not specified",readonly:"",onClick:g},null,8,lS)]),s("div",cS,[u[3]||(u[3]=s("h6",{class:"text-muted"},"Model",-1)),s("div",null,$(c(f.value.model)),1)]),s("div",uS,[u[4]||(u[4]=s("h6",{class:"text-muted"},"Permission Mode",-1)),s("div",null,$(f.value.permissionMode||"default"),1)]),s("div",dS,[u[5]||(u[5]=s("h6",{class:"text-muted"},"Pre-Authorized Tools",-1)),(f.value.allowed_tools||f.value.tools)&&(f.value.allowed_tools||f.value.tools).length>0?(l(),d("div",mS,[s("div",pS,[(l(!0),d(re,null,ue(f.value.allowed_tools||f.value.tools,h=>(l(),d("span",{key:h,class:"badge bg-secondary"},$(h),1))),128))])])):(l(),d("div",fS,"No pre-authorized tools (will prompt for permissions)"))]),f.value.commands&&f.value.commands.length>0?(l(),d("div",vS,[u[6]||(u[6]=s("h6",{class:"text-muted"},"Commands",-1)),s("div",hS,[(l(!0),d(re,null,ue(f.value.commands,h=>(l(),d("span",{key:h,class:"badge bg-info"},$(h),1))),128))])])):M("",!0),f.value.systemPrompt?(l(),d("div",_S,[u[7]||(u[7]=s("h6",{class:"text-muted"},"System Prompt",-1)),s("pre",gS,$(E(f.value.systemPrompt)),1)])):M("",!0),s("div",bS,[s("h6",yS,[u[8]||(u[8]=Z(" Raw Configuration ",-1)),s("button",{class:"btn btn-sm btn-outline-secondary ms-2",onClick:u[0]||(u[0]=h=>a.value=!a.value)},$(a.value?"Hide":"Show"),1)]),a.value?(l(),d("pre",wS,$(JSON.stringify(f.value,null,2)),1)):M("",!0)])])):(l(),d("div",nS," No session configuration data available "))]),u[10]||(u[10]=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])],512))}},ES=ne($S,[["__scopeId","data-v-b28b39b3"]]),SS={class:"modal-dialog modal-dialog-centered modal-lg"},CS={class:"modal-content"},kS={class:"modal-body"},TS={key:0,class:"text-center text-muted py-4"},xS={key:1},AS={class:"mb-3"},OS={class:"mb-3"},MS={class:"font-monospace small"},DS={class:"mb-3"},NS={class:"mb-3"},LS={class:"mb-3"},IS={key:0},jS={class:"d-flex flex-wrap gap-1"},PS={key:1,class:"text-muted small"},RS={class:"mb-3"},WS={key:0,class:"bg-light p-2 rounded small",style:{"max-height":"200px","overflow-y":"auto","white-space":"pre-wrap"}},HS={key:1,class:"text-muted small"},VS={class:"mb-3"},FS={key:0,class:"badge bg-info"},BS={key:1,class:"badge bg-secondary"},qS={class:"mb-3"},US={key:0,class:"font-monospace small"},zS={key:1,class:"text-muted small"},KS={key:0,class:"mb-3"},GS={key:0},YS={class:"list-unstyled mb-0"},JS={key:1,class:"text-muted small"},QS={class:"mb-3"},XS={class:"small"},ZS={class:"mb-3"},eC={class:"small"},tC={__name:"MinionViewModal",setup(n){const e=he(),t=j(null),o=j(null);let i=null;function a(f){return{created:"bg-secondary",starting:"bg-info",active:"bg-success",paused:"bg-warning",terminating:"bg-warning",terminated:"bg-secondary",error:"bg-danger"}[f]||"bg-secondary"}function r(f){if(!f)return"N/A";try{const c=new Date(f);return isNaN(c.getTime())?"Invalid date":c.toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch(c){return console.error("Error formatting timestamp:",c),"Invalid date"}}function m(){t.value=null}function p(){m(),e.hideModal()}return pe(()=>e.currentModal,f=>{if(f?.name==="minion-view"&&i){const c=f.data||{};t.value=c.session,i.show()}}),be(()=>{o.value&&Ae(async()=>{const{default:f}=await import("./modal-D6mKceGM.js").then(c=>c.m);return{default:f}},__vite__mapDeps([0,1])).then(({default:f})=>{i=new f(o.value),o.value.addEventListener("hidden.bs.modal",p)})}),Ce(()=>{o.value&&o.value.removeEventListener("hidden.bs.modal",p),i&&i.dispose()}),(f,c)=>(l(),d("div",{class:"modal fade",id:"minionViewModal",tabindex:"-1","aria-labelledby":"minionViewModalLabel","aria-hidden":"true",ref_key:"modalElement",ref:o},[s("div",SS,[s("div",CS,[c[11]||(c[11]=s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"minionViewModalLabel"},"Minion Details"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),s("div",kS,[t.value?(l(),d("div",xS,[s("div",AS,[c[0]||(c[0]=s("h6",{class:"text-muted"},"Name",-1)),s("div",null,$(t.value.name||"Unnamed Minion"),1)]),s("div",OS,[c[1]||(c[1]=s("h6",{class:"text-muted"},"Session ID",-1)),s("div",MS,$(t.value.session_id),1)]),s("div",DS,[c[2]||(c[2]=s("h6",{class:"text-muted"},"Role",-1)),s("div",null,$(t.value.role||"Not specified"),1)]),s("div",NS,[c[3]||(c[3]=s("h6",{class:"text-muted"},"Current State",-1)),s("div",null,[s("span",{class:X(["badge",a(t.value.state)])},$(t.value.state),3)])]),s("div",LS,[c[4]||(c[4]=s("h6",{class:"text-muted"},"Capabilities",-1)),t.value.capabilities&&t.value.capabilities.length>0?(l(),d("div",IS,[s("div",jS,[(l(!0),d(re,null,ue(t.value.capabilities,E=>(l(),d("span",{key:E,class:"badge bg-secondary"},$(E),1))),128))])])):(l(),d("div",PS,"None"))]),s("div",RS,[c[5]||(c[5]=s("h6",{class:"text-muted"},"Initialization Context",-1)),t.value.initialization_context?(l(),d("div",WS,$(t.value.initialization_context),1)):(l(),d("div",HS,"Not specified"))]),s("div",VS,[c[6]||(c[6]=s("h6",{class:"text-muted"},"Overseer",-1)),s("div",null,[t.value.is_overseer?(l(),d("span",FS,"Yes")):(l(),d("span",BS,"No"))])]),s("div",qS,[c[7]||(c[7]=s("h6",{class:"text-muted"},"Parent Overseer",-1)),t.value.parent_overseer_id?(l(),d("div",US,$(t.value.parent_overseer_id),1)):(l(),d("div",zS," Root overseer (user-created) "))]),t.value.is_overseer?(l(),d("div",KS,[c[8]||(c[8]=s("h6",{class:"text-muted"},"Child Minions",-1)),t.value.child_minion_ids&&t.value.child_minion_ids.length>0?(l(),d("div",GS,[s("ul",YS,[(l(!0),d(re,null,ue(t.value.child_minion_ids,E=>(l(),d("li",{key:E,class:"font-monospace small"},$(E),1))),128))])])):(l(),d("div",JS,"No children"))])):M("",!0),s("div",QS,[c[9]||(c[9]=s("h6",{class:"text-muted"},"Created",-1)),s("div",XS,$(r(t.value.created_at)),1)]),s("div",ZS,[c[10]||(c[10]=s("h6",{class:"text-muted"},"Last Active",-1)),s("div",eC,$(r(t.value.updated_at)),1)])])):(l(),d("div",TS," No minion data available "))]),c[12]||(c[12]=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])],512))}},sC=ne(tC,[["__scopeId","data-v-d996dc6f"]]),nC={class:"container-fluid vh-100 d-flex flex-column p-0"},oC={class:"d-flex flex-grow-1 overflow-hidden position-relative"},iC={class:"flex-grow-1 d-flex flex-column overflow-hidden"},aC={__name:"App",setup(n){const e=he(),t=et(),o=de(),i=Le(),a=Pt(),r=v(()=>e.sidebarCollapsed),m=v(()=>e.isMobile);be(async()=>{typeof marked<"u"&&marked.setOptions({breaks:!0,gfm:!0}),t.connectUI(),await Promise.all([i.fetchProjects(),o.fetchSessions()]);const c=window.location.hash;if(c.startsWith("#/session/")){const E=c.replace("#/session/","");o.sessions.has(E)&&await o.selectSession(E)}else if(c.startsWith("#/timeline/")){const E=c.replace("#/timeline/","");a.push(`/timeline/${E}`)}window.addEventListener("popstate",p),window.addEventListener("resize",e.handleResize)}),Ce(()=>{window.removeEventListener("popstate",p),window.removeEventListener("resize",e.handleResize),t.disconnectUI()});function p(){const c=window.location.hash;if(c.startsWith("#/session/")){const E=c.replace("#/session/","");o.sessions.has(E)&&o.selectSession(E)}}function f(){e.toggleSidebar()}return(c,E)=>{const g=ao("router-view");return l(),d("div",nC,[fe(cy),s("div",{id:"sidebar-backdrop",class:X({show:!r.value&&m.value}),onClick:f},null,2),s("div",oC,[fe(Wy),s("main",iC,[fe(g)])]),fe(sw),fe(gw),fe(Hw),fe(xE),fe(ZE),fe(ES),fe(sC)])}}},rn=gi(aC);rn.use(bi());rn.use(ey);rn.mount("#app");
