const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/modal-BK1Vt_in.js","assets/diff-vendor-DG4m3V_x.js"])))=>i.map(i=>d[i]);
import{c as m,a as n,o as u,d as wt,r as j,b,t as $,n as pt,e as Z,f as se,u as Zt,w as de,g as vs,F as ie,h as le,i as D,j as _e,k as so,l as ve,v as Le,m as Re,p as pe,q as ue,s as he,x as pi,y as es,z as $e,A as dn,B as no,C as Lt,D as fi,E as vi,G as hi,H as hs,I as mn,J as _i,K as gi}from"./vue-vendor-tGvtV_pt.js";import{m as tt,p as is}from"./markdown-vendor-BRsjnVvP.js";import{c as bi}from"./diff-vendor-DG4m3V_x.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();const yi={class:"flex-grow-1 d-flex flex-column justify-content-center align-items-center text-center p-5"},$i={__name:"NoSessionSelected",setup(s){return(e,t)=>(u(),m("div",yi,[...t[0]||(t[0]=[n("h2",{class:"text-muted"},"No Session Selected",-1),n("p",{class:"text-secondary"}," Create a new session or select an existing one to start chatting with Claude Code. ",-1)])]))}},wi="modulepreload",Ei=function(s){return"/"+s},pn={},Se=function(e,t,o){let i=Promise.resolve();if(t&&t.length>0){let f=function(h){return Promise.all(h.map(l=>Promise.resolve(l).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),c=r?.nonce||r?.getAttribute("nonce");i=f(t.map(h=>{if(h=Ei(h),h in pn)return;pn[h]=!0;const l=h.endsWith(".css"),w=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${w}`))return;const _=document.createElement("link");if(_.rel=l?"stylesheet":wi,l||(_.as="script"),_.crossOrigin="",_.href=h,c&&_.setAttribute("nonce",c),document.head.appendChild(_),l)return new Promise((v,g)=>{_.addEventListener("load",v),_.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(r){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=r,window.dispatchEvent(c),!c.defaultPrevented)throw r}return i.then(r=>{for(const c of r||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})};class _s extends Error{constructor(e,t,o){super(e),this.name="APIError",this.status=t,this.data=o}}async function Nt(s,e={}){try{const t=await fetch(s,{headers:{"Content-Type":"application/json",...e.headers},...e});if(!t.ok){let i;try{i=await t.json()}catch{i={detail:t.statusText}}throw new _s(i.detail||`HTTP ${t.status}: ${t.statusText}`,t.status,i)}const o=t.headers.get("content-type");return o&&o.includes("application/json")?await t.json():await t.text()}catch(t){throw t instanceof _s?t:(console.error("API request failed:",t),new _s(`Network error: ${t.message}`,0,null))}}async function Ci(s,e={}){let t=s;if(e.params){const o=new URLSearchParams;for(const[c,f]of Object.entries(e.params))f!=null&&o.append(c,f);const i=o.toString();i&&(t=`${s}?${i}`);const{params:a,...r}=e;return Nt(t,{...r,method:"GET"})}return Nt(t,{...e,method:"GET"})}async function Si(s,e,t={}){return Nt(s,{...t,method:"POST",body:JSON.stringify(e)})}async function ki(s,e,t={}){return Nt(s,{...t,method:"PUT",body:JSON.stringify(e)})}async function Ti(s,e={}){return Nt(s,{...e,method:"DELETE"})}const ne={get:Ci,post:Si,put:ki,delete:Ti},oe=wt("session",()=>{const s=j(new Map),e=j(null),t=j(new Map),o=j(new Map),i=j(new Set),a=j(!1);let r=null;const c=b(()=>s.value.get(e.value)),f=b(()=>Array.from(s.value.values()).sort((I,B)=>I.order-B.order)),h=I=>b(()=>f.value.filter(B=>B.project_id===I)),l=b({get:()=>t.value.get(e.value)||"",set:I=>{e.value&&t.value.set(e.value,I)}});async function w(){try{const I=await ne.get("/api/sessions");return s.value.clear(),I.sessions.forEach(B=>{s.value.set(B.session_id,B)}),console.log(`Loaded ${s.value.size} sessions`),I.sessions}catch(I){throw console.error("Failed to fetch sessions:",I),I}}async function _(I,B){try{const L=(await ne.post("/api/sessions",{project_id:I,...B})).session_id,H=(await ne.get(`/api/sessions/${L}`)).session;return s.value.set(L,H),s.value=new Map(s.value),console.log(`Created session ${L}`),H}catch(A){throw console.error("Failed to create session:",A),A}}async function v(I){if(e.value===I&&!a.value)return;r&&(console.log(`Aborting pending selection to switch to ${I}`),r.abort(),r=null);const B=new AbortController;r=B,a.value=!0;try{if(e.value=I,B.signal.aborted){console.log(`Selection of ${I} aborted early`);return}let A=s.value.get(I);if(!A)try{const H=await ne.get(`/api/sessions/${I}`);if(B.signal.aborted){console.log(`Selection of ${I} aborted after fetch`);return}A=H.session,s.value.set(I,A),s.value=new Map(s.value),console.log(`Fetched session ${I} for deeplink`)}catch(H){console.error(`Failed to fetch session ${I}:`,H);return}if(A&&(A.state==="created"||A.state==="terminated"))try{if(await k(I),B.signal.aborted){console.log(`Selection of ${I} aborted after start`);return}console.log(`Auto-started session ${I} (was in ${A.state} state)`);const H=6e4,C=200,E=5e3;let N=0,x=0;for(;N<H;){if(B.signal.aborted){console.log(`Selection of ${I} aborted during state wait`);return}const P=s.value.get(I);if(P&&P.state==="active"){console.log(`Session ${I} is now active after ${N}ms`);break}if(N-x>=E){const F=s.value.get(I)?.state||"unknown";console.log(`Waiting for session ${I} to become active (current: ${F}, ${N/1e3}s elapsed)`),x=N}await new Promise(F=>setTimeout(F,C)),N+=C}const S=s.value.get(I);S&&S.state!=="active"&&console.warn(`Session ${I} did not become active within ${H/1e3}s (state: ${S.state}), continuing anyway`)}catch(H){console.error(`Failed to auto-start session ${I}:`,H)}if(B.signal.aborted){console.log(`Selection of ${I} aborted before message load`);return}if(await(await Se(()=>Promise.resolve().then(()=>Ki),void 0)).useMessageStore().loadMessages(I),B.signal.aborted){console.log(`Selection of ${I} aborted after message load`);return}await(await Se(()=>Promise.resolve().then(()=>fa),void 0)).useWebSocketStore().connectSession(I),B.signal.aborted||console.log(`Selected session ${I}`)}finally{r===B&&(r=null),a.value=!1}}function g(I,B){const A=s.value.get(I);A?Object.assign(A,B):(s.value.set(I,B),console.log(`Added new session ${I} via WebSocket update`)),s.value=new Map(s.value)}async function p(I){i.value.add(I);try{const A=(await ne.delete(`/api/sessions/${I}`)).deleted_session_ids||[I];for(const L of A)s.value.delete(L),t.value.delete(L),o.value.delete(L);return s.value=new Map(s.value),A.includes(e.value)&&(e.value=null),console.log(`Deleted ${A.length} session(s): ${A.join(", ")}`),A}catch(B){throw console.error("Failed to delete session:",B),B}finally{i.value.delete(I)}}async function d(I,B){try{await ne.put(`/api/sessions/${I}/name`,{name:B}),g(I,{name:B}),console.log(`Updated session ${I} name to "${B}"`)}catch(A){throw console.error("Failed to update session name:",A),A}}async function y(I,B){try{await ne.post(`/api/sessions/${I}/permission-mode`,{mode:B}),g(I,{current_permission_mode:B});const A=o.value.get(I);A&&(A.permissionMode=B,o.value.set(I,A)),console.log(`Set permission mode for session ${I} to ${B}`)}catch(A){throw console.error("Failed to set permission mode:",A),A}}async function k(I){try{await ne.post(`/api/sessions/${I}/start`),console.log(`Started session ${I}`)}catch(B){throw console.error("Failed to start session:",B),B}}async function T(I){try{await ne.post(`/api/sessions/${I}/pause`),console.log(`Paused session ${I}`)}catch(B){throw console.error("Failed to pause session:",B),B}}async function O(I){try{await ne.post(`/api/sessions/${I}/terminate`),console.log(`Terminated session ${I}`)}catch(B){throw console.error("Failed to terminate session:",B),B}}function q(I){return s.value.get(I)}function G(I,B){o.value.set(I,B),B.permissionMode&&g(I,{current_permission_mode:B.permissionMode})}return{sessions:s,currentSessionId:e,inputCache:t,initData:o,deletingSessions:i,currentSession:c,orderedSessions:f,sessionsInProject:h,currentInput:l,fetchSessions:w,createSession:_,selectSession:v,updateSession:g,deleteSession:p,updateSessionName:d,setPermissionMode:y,startSession:k,pauseSession:T,terminateSession:O,getSession:q,storeInitData:G}}),fn=Object.freeze(Object.defineProperty({__proto__:null,useSessionStore:oe},Symbol.toStringTag,{value:"Module"})),me=wt("ui",()=>{const s=j(window.innerWidth<768),e=j(300),t=j(window.innerWidth),o=b(()=>t.value<768),i=j(!0),a=j(null),r=j(null),c=b(()=>a.value?{name:a.value,data:r.value}:null),f=j(!1),h=j("Loading...");function l(){s.value=!s.value}function w(T){s.value=T}function _(T){e.value=Math.max(200,Math.min(T,window.innerWidth*.3))}function v(T){i.value=T}function g(T,O=null){a.value=null,r.value=null,setTimeout(()=>{a.value=T,r.value=O},0)}function p(){a.value=null,r.value=null}function d(T="Loading..."){f.value=!0,h.value=T}function y(){f.value=!1}function k(){const T=t.value;t.value=window.innerWidth,t.value<768&&T>=768?s.value=!0:t.value>=768&&T<768&&(s.value=!1)}return{sidebarCollapsed:s,sidebarWidth:e,isMobile:o,autoScrollEnabled:i,activeModal:a,modalData:r,currentModal:c,isLoading:f,loadingMessage:h,toggleSidebar:l,setSidebarCollapsed:w,setSidebarWidth:_,setAutoScroll:v,showModal:g,hideModal:p,showLoading:d,hideLoading:y,handleResize:k}}),Me=wt("project",()=>{const s=j(new Map),e=j(null),t=b(()=>s.value.get(e.value)),o=b(()=>Array.from(s.value.values()).sort((d,y)=>d.order-y.order));async function i(){try{const d=await ne.get("/api/projects");return s.value.clear(),d.projects.forEach(y=>{s.value.set(y.project_id,y)}),console.log(`Loaded ${s.value.size} projects`),d.projects}catch(d){throw console.error("Failed to fetch projects:",d),d}}async function a(d,y){try{const T=(await ne.post("/api/projects",{name:d,working_directory:y})).project;return s.value.set(T.project_id,T),s.value=new Map(s.value),console.log(`Created project ${T.project_id}`),T}catch(k){throw console.error("Failed to create project:",k),k}}async function r(d,y){try{await ne.put(`/api/projects/${d}`,y),c(d,y),console.log(`Updated project ${d}`,y)}catch(k){throw console.error("Failed to update project:",k),k}}function c(d,y){const k=s.value.get(d);k&&(Object.assign(k,y),s.value=new Map(s.value))}async function f(d){try{await ne.delete(`/api/projects/${d}`),s.value.delete(d),s.value=new Map(s.value),e.value===d&&(e.value=null),console.log(`Deleted project ${d}`)}catch(y){throw console.error("Failed to delete project:",y),y}}async function h(d){try{const y=await ne.put(`/api/projects/${d}/toggle-expansion`),k=s.value.get(d);return k&&(k.is_expanded=y.is_expanded,s.value=new Map(s.value)),y.is_expanded}catch(y){throw console.error("Failed to toggle expansion:",y),y}}async function l(d){try{await ne.put("/api/projects/reorder",{project_ids:d}),d.forEach((y,k)=>{const T=s.value.get(y);T&&(T.order=k)}),s.value=new Map(s.value),console.log("Reordered projects",d)}catch(y){throw console.error("Failed to reorder projects:",y),y}}async function w(d,y){try{await ne.put(`/api/projects/${d}/sessions/reorder`,{session_ids:y});const k=s.value.get(d);k&&(k.session_ids=y,s.value=new Map(s.value)),console.log(`Reordered sessions in project ${d}`,y)}catch(k){throw console.error("Failed to reorder sessions:",k),k}}function _(d){return s.value.get(d)}function v(d){e.value=d}function g(){e.value=null}function p(d){if(!d)return"";const y=d.split(/[/\\]/).filter(k=>k);return y.length===0?"/":y.length===1?`/${y[0]}`:y.length===2?`/${y.join("/")}`:`.../${y.slice(-2).join("/")}`}return{projects:s,currentProjectId:e,currentProject:t,orderedProjects:o,fetchProjects:i,createProject:a,updateProject:r,updateProjectLocal:c,deleteProject:f,toggleExpansion:h,reorderProjects:l,reorderSessionsInProject:w,getProject:_,selectProject:v,clearProjectSelection:g,formatPath:p}}),ee=(s,e)=>{const t=s.__vccOpts||s;for(const[o,i]of e)t[o]=i;return t},xi={class:"session-header border-bottom p-3"},Ai={class:"project-name"},Mi=["title"],Oi={__name:"SessionHeader",props:{sessionId:{type:String,required:!0}},setup(s){const e=s,t=oe(),o=Me(),i=b(()=>t.sessions.get(e.sessionId)),a=b(()=>i.value?.name||e.sessionId),r=b(()=>{for(const f of o.projects.values())if(f.session_ids?.includes(e.sessionId))return f;return null}),c=b(()=>r.value?.name||"Unknown Project");return(f,h)=>(u(),m("div",xi,[n("div",null,[n("div",Ai,$(c.value),1),n("div",{class:"session-name",title:s.sessionId},$(a.value),9,Mi)])]))}},Di=ee(Oi,[["__scopeId","data-v-89e9c269"]]),Ni={class:"progress session-state-status-line",style:{height:"4px","border-radius":"0"}},Li=["title"],Ii={key:1,class:"progress-bar bg-secondary",style:{width:"100%"},title:"No session selected"},ji={__name:"SessionStateStatusLine",props:{sessionId:{type:String,required:!0}},setup(s){const e=s,t=oe(),o=b(()=>t.sessions.get(e.sessionId)),i=b(()=>o.value?o.value.state==="paused"&&o.value.is_processing?"pending-prompt":o.value.is_processing?"processing":o.value.state:"unknown"),a=b(()=>{const f=i.value;return{created:"#d3d3d3",starting:"#90ee90",active:"#90ee90",running:"#90ee90",processing:"#dda0dd",paused:"#d3d3d3","pending-prompt":"#ffc107",terminated:"#d3d3d3",error:"#ffb3b3",failed:"#ffb3b3",unknown:"#d3d3d3"}[f]||"#d3d3d3"}),r=b(()=>{const f=i.value;return f==="starting"||f==="processing"||f==="pending-prompt"}),c=b(()=>{if(!o.value)return"No session selected";const f=i.value,h=f.charAt(0).toUpperCase()+f.slice(1).replace("-"," "),l=o.value.name||"Unnamed Session",w=o.value.role?` (${o.value.role})`:"";return`${l}${w}: ${h}`});return(f,h)=>(u(),m("div",Ni,[o.value?(u(),m("div",{key:0,class:Z(["progress-bar",{"progress-bar-striped progress-bar-animated":r.value}]),style:pt({width:"100%",backgroundColor:a.value}),title:c.value},null,14,Li)):(u(),m("div",Ii))]))}},Pi=ee(ji,[["__scopeId","data-v-63d222fe"]]),Ri={class:"session-status-bar border-top p-2 bg-light"},Wi={class:"d-flex justify-content-between align-items-center gap-2"},Hi={class:"d-flex gap-2"},Vi=["disabled"],Fi={class:"mode-label"},Bi=["disabled"],Ui=["disabled"],qi={__name:"SessionStatusBar",props:{sessionId:{type:String,required:!0}},setup(s){const e=s,t=oe(),o=me(),i=b(()=>t.sessions.get(e.sessionId)),a=b(()=>i.value?.current_permission_mode||"default"),r={default:"ðŸ”’",acceptEdits:"âœï¸",plan:"ðŸ“‹",bypassPermissions:"â˜¢ï¸"},c=b(()=>r[a.value]||"ðŸ”’"),f=b(()=>a.value),h=["default","acceptEdits","plan"],l=async()=>{if(!i.value)return;if(a.value==="bypassPermissions"){try{await t.setPermissionMode(e.sessionId,"default")}catch(y){console.error("Failed to cycle permission mode:",y)}return}const p=(h.indexOf(a.value)+1)%h.length,d=h[p];try{await t.setPermissionMode(e.sessionId,d)}catch(y){console.error("Failed to cycle permission mode:",y)}},w=()=>{o.showModal("session-info",{sessionId:e.sessionId})},_=()=>{o.showModal("manage-session",{session:i.value})},v=()=>{o.setAutoScroll(!o.autoScrollEnabled)};return(g,p)=>(u(),m("div",Ri,[n("div",Wi,[n("div",Hi,[n("button",{class:"btn btn-sm btn-outline-secondary",onClick:l,disabled:!i.value},[se($(c.value)+" ",1),n("span",Fi,$(f.value),1)],8,Vi),n("button",{class:"btn btn-sm btn-outline-secondary",onClick:w,disabled:!i.value},[...p[0]||(p[0]=[se(" â„¹ï¸ ",-1),n("span",{class:"button-label"},"Info",-1)])],8,Bi),n("button",{class:"btn btn-sm btn-outline-secondary",onClick:_,disabled:!i.value},[...p[1]||(p[1]=[se(" âš™ï¸ ",-1),n("span",{class:"button-label"},"Manage",-1)])],8,Ui)]),n("div",null,[n("button",{class:Z(["btn btn-sm",Zt(o).autoScrollEnabled?"btn-primary":"btn-outline-secondary"]),onClick:v}," â¬‡ï¸ "+$(Zt(o).autoScrollEnabled?"ON":"OFF"),3)])])]))}},zi=ee(qi,[["__scopeId","data-v-fdcd3535"]]),Te=wt("message",()=>{const s=j(new Map),e=j(new Map),t=j(new Map),o=j(new Map),i=j(new Map),a=j(new Map),r=j(new Map),c=j(new Map),f=b(()=>{const x=oe();return s.value.get(x.currentSessionId)||[]}),h=b(()=>{const x=oe();return e.value.get(x.currentSessionId)||[]});async function l(x,S=null,P=0){try{const F=S||1e4,Y=await ne.get(`/api/sessions/${x}/messages?limit=${F}&offset=${P}`),J=Y.messages||[],re=Y.total_count||J.length,ae=Y.has_more||!1;if(console.log(`Loaded ${J.length} of ${re} messages for session ${x}`),s.value.set(x,J),J.length>0){const R=J[J.length-1];R.timestamp&&(r.value.set(x,R.timestamp),console.log(`Tracked last received timestamp for session ${x}: ${R.timestamp}`))}const te=new Set;J.forEach(R=>{R.type==="assistant"&&R.metadata?.tool_uses&&R.metadata.tool_uses.forEach(W=>{te.add(W.id)}),R.type==="user"&&R.metadata?.tool_results&&R.metadata.tool_results.forEach(W=>{te.delete(W.tool_use_id);const M=a.value.get(x);M&&M.delete(W.tool_use_id)}),R.type==="system"&&R.metadata?.subtype==="client_launched"&&(te.forEach(W=>{B(x,W,"Session was restarted")}),te.clear()),R.type==="system"&&R.metadata?.subtype==="interrupt"&&(te.forEach(W=>{B(x,W,"Session was interrupted")}),te.clear()),R.metadata?.has_tool_uses&&R.metadata.tool_uses&&R.metadata.tool_uses.forEach(W=>{p(x,W)}),R.metadata?.has_tool_results&&R.metadata.tool_results&&R.metadata.tool_results.forEach(W=>{k(x,W)}),(R.type==="permission_request"||R.metadata?.has_permission_requests)&&d(x,R),R.type==="system"&&(R.subtype==="init"||R.metadata?.subtype==="init")&&R.metadata?.init_data&&oe().storeInitData(x,R.metadata.init_data)});const U=oe().sessions.get(x);return U&&!["active","paused","starting"].includes(U.state)&&(te.forEach(R=>{B(x,R,"Session was terminated")}),te.clear()),i.value.set(x,te),s.value=new Map(s.value),ae&&console.warn(`Warning: Only loaded ${J.length} of ${re} messages. Some messages may be missing.`),{messages:J,totalCount:re,hasMore:ae}}catch(F){throw console.error("Failed to load messages:",F),F}}function w(x,S){const P=i.value.get(x)||new Set;S.type==="assistant"&&S.metadata?.tool_uses&&S.metadata.tool_uses.forEach(F=>{P.add(F.id)}),S.type==="user"&&S.metadata?.tool_results&&S.metadata.tool_results.forEach(F=>{P.delete(F.tool_use_id);const Y=a.value.get(x);Y&&Y.delete(F.tool_use_id)}),S.type==="system"&&S.metadata?.subtype==="client_launched"&&(P.forEach(F=>{B(x,F,"Session was restarted")}),P.clear()),S.type==="system"&&S.metadata?.subtype==="interrupt"&&(P.forEach(F=>{B(x,F,"Session was interrupted")}),P.clear()),i.value.set(x,P)}function _(x,S){s.value.has(x)||s.value.set(x,[]);const P=s.value.get(x);if(S.id){const F=P.findIndex(Y=>Y.id===S.id);if(F!==-1){console.log(`Skipping duplicate message ${S.id} (already exists at index ${F})`);return}}P.push(S),S.timestamp&&r.value.set(x,S.timestamp),q(x,S),w(x,S),s.value=new Map(s.value)}function v(x,S){e.value.has(x)||e.value.set(x,[]),e.value.get(x).push(S),e.value=new Map(e.value)}function g(x,S,P){const F=e.value.get(x);if(F){const Y=F.find(J=>J.id===S);Y&&(Object.assign(Y,P),e.value=new Map(e.value))}}function p(x,S){const P=O(S.name,S.input);t.value.set(P,S.id);const F={id:S.id,name:S.name,input:S.input,signature:P,status:"pending",permissionRequestId:null,permissionDecision:null,result:null,explanation:null,timestamp:new Date().toISOString(),isExpanded:!0};return v(x,F),console.log(`Created tool call ${F.id} for ${F.name}`),F}function d(x,S){console.log("handlePermissionRequest received:",S);const P=S.metadata?.tool_name||S.tool_name,F=S.metadata?.input_params||S.input_params,Y=S.metadata?.request_id||S.request_id,J=S.metadata?.suggestions||S.suggestions||[];console.log("Extracted data:",{toolName:P,inputParams:F,requestId:Y,suggestions:J});const re=O(P,F),ae=t.value.get(re);ae?(o.value.set(Y,ae),g(x,ae,{status:"permission_required",permissionRequestId:Y,suggestions:J}),console.log(`Permission required for tool ${ae}`,{suggestions:J})):console.warn("No tool use ID found for permission request signature:",re,{toolName:P,inputParams:F,availableSignatures:Array.from(t.value.keys())})}function y(x,S){const P=o.value.get(S.request_id);if(P){const F={permissionDecision:S.decision,appliedUpdates:S.applied_updates||[]};S.decision==="allow"?F.status="executing":(F.status="completed",F.result={error:!0,message:S.reasoning||"Permission denied"},F.isExpanded=!1),g(x,P,F),console.log(`Permission ${S.decision} for tool ${P}`)}}function k(x,S){const P=S.tool_use_id;g(x,P,{status:S.is_error?"error":"completed",result:{error:S.is_error,content:S.content},isExpanded:!1}),console.log(`Tool ${P} ${S.is_error?"failed":"completed"}`)}function T(x,S){const P=e.value.get(x);if(P){const F=P.find(Y=>Y.id===S);F&&(F.isExpanded=!F.isExpanded,e.value=new Map(e.value))}}function O(x,S){if(!x)return"unknown:{}";if(!S||typeof S!="object")return`${x}:{}`;const P=JSON.stringify(S,Object.keys(S).sort());return`${x}:${P}`}function q(x,S){const P=S.metadata?.display||S.display;if(!P)return;c.value.has(x)||c.value.set(x,new Map);const F=c.value.get(x);if(P.tool_states)for(const[Y,J]of Object.entries(P.tool_states)){F.set(Y,J);const re=e.value.get(x);if(re){const ae=re.find(te=>te.id===Y);if(ae){const te={pending:"pending",permission_required:"permission_required",executing:"executing",completed:"completed",failed:"error",orphaned:"completed"};ae.status=te[J.state]||J.state,ae.backendState=J}}}if(P.orphaned_tools&&P.orphaned_tools.length>0){const Y=a.value.get(x)||new Map;for(const J of P.orphaned_tools)Y.has(J)||Y.set(J,{reason:"denied",message:"Session was interrupted"});a.value.set(x,Y)}if(P.linked_permissions)for(const[Y,J]of Object.entries(P.linked_permissions))o.value.set(Y,J);P.tool_states&&Object.keys(P.tool_states).length>0&&(e.value=new Map(e.value)),console.log(`Applied backend display metadata for session ${x}:`,{toolStates:Object.keys(P.tool_states||{}).length,orphanedTools:(P.orphaned_tools||[]).length,linkedPermissions:Object.keys(P.linked_permissions||{}).length})}function G(x,S){return c.value.get(x)?.get(S)}function I(x){const S=c.value.get(x);return S&&S.size>0}function B(x,S,P){const F=a.value.get(x)||new Map;F.set(S,{reason:"denied",message:P}),a.value.set(x,F);const Y=e.value.get(x);if(Y){const J=Y.find(re=>re.id===S);J&&J.isExpanded&&(J.isExpanded=!1,e.value=new Map(e.value))}console.log(`Marked tool use ${S} as orphaned: ${P}`)}function A(x,S){const P=G(x,S);return P&&P.state==="orphaned"?!0:a.value.get(x)?.has(S)||!1}function L(x,S){const P=G(x,S);return P&&P.state==="orphaned"?{reason:"denied",message:"Session was interrupted",backendState:P}:a.value.get(x)?.get(S)}function z(x,S){const P=i.value.get(x);P&&P.size>0&&(P.forEach(F=>B(x,F,S)),P.clear())}function H(x){s.value.delete(x),e.value.delete(x),s.value=new Map(s.value),e.value=new Map(e.value)}function C(x){return r.value.get(x)}async function E(x){const S=r.value.get(x);if(!S)return console.log(`No sync needed for session ${x} (no previous messages)`),{syncedCount:0,hasMore:!1};try{console.log(`Syncing messages for session ${x} since ${S}`);const P=await ne.get(`/api/sessions/${x}/messages?limit=1000&offset=0`),F=P.messages||[],Y=P.has_more||!1,J=W=>W?typeof W=="number"?W*1e3:new Date(W).getTime():0,re=J(S),ae=F.filter(W=>W.timestamp?J(W.timestamp)>re:!1);if(ae.length===0)return console.log(`No missed messages for session ${x}`),{syncedCount:0,hasMore:!1};console.log(`Synced ${ae.length} missed messages for session ${x}`);const te=s.value.get(x)||[],ce=new Set(te.map(W=>W.id).filter(Boolean)),U=ae.filter(W=>!W.id||!ce.has(W.id));if(console.log(`After deduplication: ${U.length} unique new messages`),U.length>0){const W=U.sort((fe,Tt)=>{const xt=J(fe.timestamp),at=J(Tt.timestamp);return xt-at}),M=s.value.get(x)||[],K=M.length>0?J(M[M.length-1].timestamp):0,X=J(W[0].timestamp),Ne=J(W[W.length-1].timestamp);if(console.log("Timestamp comparison:",{existingCount:M.length,lastExisting:K,lastExistingDate:M.length>0?M[M.length-1].timestamp:"none",firstNew:X,firstNewDate:W[0].timestamp,lastNew:Ne,lastNewDate:W[W.length-1].timestamp,shouldAppend:X>K}),X>K){const fe=[...M,...W];s.value.set(x,fe),console.log(`âœ… Appended ${W.length} new messages (no full sort needed)`)}else{const fe=[...M,...W].sort((Tt,xt)=>{const at=J(Tt.timestamp),Vt=J(xt.timestamp);return at-Vt});s.value.set(x,fe),console.log(`âš ï¸ Merged and sorted ${W.length} new messages (interleaved with existing)`)}}else console.log(`No new messages to merge, keeping existing ${te.length} messages unchanged`);U.forEach(W=>{w(x,W),W.metadata?.has_tool_uses&&W.metadata.tool_uses&&W.metadata.tool_uses.forEach(M=>{p(x,M)}),W.metadata?.has_tool_results&&W.metadata.tool_results&&W.metadata.tool_results.forEach(M=>{k(x,M)}),(W.type==="permission_request"||W.metadata?.has_permission_requests)&&d(x,W),W.type==="system"&&(W.subtype==="init"||W.metadata?.subtype==="init")&&W.metadata?.init_data&&oe().storeInitData(x,W.metadata.init_data)});const R=s.value.get(x);if(R&&R.length>0){const W=R[R.length-1];W.timestamp&&r.value.set(x,W.timestamp)}return s.value=new Map(s.value),{syncedCount:U.length,hasMore:Y}}catch(P){return console.error(`Failed to sync messages for session ${x}:`,P),{syncedCount:0,hasMore:!1,error:P.message}}}const N=oe();return de(()=>Array.from(N.sessions.values()).map(S=>({id:S.session_id,state:S.state})),(x,S)=>{S&&x.forEach((P,F)=>{const Y=S[F];if(!Y||Y.id!==P.id)return;const J=["active","paused","starting"].includes(Y.state),re=!["active","paused","starting"].includes(P.state);J&&re&&z(P.id,"Session was terminated")})},{deep:!0}),{messagesBySession:s,toolCallsBySession:e,activeToolUses:vs(i),orphanedToolUses:vs(a),currentMessages:f,currentToolCalls:h,loadMessages:l,addMessage:_,addToolCall:v,updateToolCall:g,handleToolUse:p,handlePermissionRequest:d,handlePermissionResponse:y,handleToolResult:k,toggleToolExpansion:T,clearMessages:H,markToolUseOrphaned:B,isToolUseOrphaned:A,getOrphanedInfo:L,clearOrphanedToolUses:z,getLastReceivedTimestamp:C,syncMessages:E,getBackendToolState:G,hasBackendDisplayMetadata:I,backendToolStates:vs(c)}}),Ki=Object.freeze(Object.defineProperty({__proto__:null,useMessageStore:Te},Symbol.toStringTag,{value:"Module"}));function Gi(s){if(!s)return new Date;if(typeof s=="string"){const e=new Date(s);return isNaN(e.getTime())?new Date:e}return typeof s=="number"?s<1e10?new Date(s*1e3):new Date(s):new Date}function It(s){return Gi(s).toLocaleTimeString()}const Yi={class:"message-row message-row-user"},Ji=["title"],Xi={class:"message-content-column"},Qi=["innerHTML"],Zi={key:0,class:"tool-results mt-2"},ea={class:"tool-results-header text-muted small mb-2"},ta={class:"d-flex align-items-start gap-2"},sa={class:"flex-grow-1"},na={class:"text-muted"},oa={key:0,class:"text-danger small"},ia={__name:"UserMessage",props:{message:{type:Object,required:!0}},setup(s){const e=s;tt.setOptions({breaks:!0,gfm:!0});const t=b(()=>It(e.message.timestamp)),o=b(()=>`user
${t.value}`),i=b(()=>{const f=e.message.content||"";let h=tt.parse(f);return h=h.replace(/\n</g,"<"),h=h.replace(/\n+$/,""),is.sanitize(h)}),a=b(()=>e.message.metadata?.has_tool_results&&e.message.metadata?.tool_results?.length>0),r=b(()=>e.message.metadata?.tool_results||[]);function c(f,h){return f?f.length<=h?f:f.substring(0,h)+"...":""}return(f,h)=>(u(),m("div",Yi,[n("div",{class:"message-speaker",title:o.value},[...h[0]||(h[0]=[n("span",{class:"speaker-label"},"user",-1)])],8,Ji),n("div",Xi,[n("div",{class:"message-text",innerHTML:i.value},null,8,Qi),a.value?(u(),m("div",Zi,[n("div",ea," ðŸ”§ Tool Results ("+$(r.value.length)+") ",1),(u(!0),m(ie,null,le(r.value,(l,w)=>(u(),m("div",{key:w,class:Z(["tool-result-summary p-2 mb-2 rounded",l.is_error?"bg-danger bg-opacity-10":"bg-success bg-opacity-10"])},[n("div",ta,[n("span",null,$(l.is_error?"âŒ":"âœ…"),1),n("div",sa,[n("small",na,"Tool: "+$(l.tool_use_id),1),l.is_error?(u(),m("div",oa,$(c(l.content,200)),1)):D("",!0)])])],2))),128))])):D("",!0)])]))}},aa=ee(ia,[["__scopeId","data-v-7665755b"]]),ra={class:"thinking-block"},la=["aria-label"],ca={class:"text-muted ms-auto"},ua={key:0,class:"thinking-content mt-2 p-3 bg-light rounded border"},da=["innerHTML"],ma={__name:"ThinkingBlock",props:{thinking:{type:String,required:!0}},setup(s){const e=s,t=j(!1),o=b(()=>e.thinking?.length||0),i=b(()=>{const r=e.thinking||"",c=tt.parse(r);return is.sanitize(c)});function a(){t.value=!t.value}return(r,c)=>(u(),m("div",ra,[n("div",{class:"thinking-header d-flex align-items-center gap-2 p-2 bg-info bg-opacity-10 rounded cursor-pointer",onClick:a},[n("span",{"aria-label":t.value?"Collapse":"Expand"},$(t.value?"â–¾":"â–¸"),9,la),c[0]||(c[0]=n("span",{class:"thinking-label"}," ðŸ’¡ Thinking ",-1)),n("small",ca,$(o.value)+" characters",1)]),t.value?(u(),m("div",ua,[n("div",{class:"thinking-text",innerHTML:i.value},null,8,da)])):D("",!0)]))}},pa=ee(ma,[["__scopeId","data-v-fda2352c"]]),Ke=wt("websocket",()=>{const s=j(null),e=j(!1),t=j(0),o=10,i=j(null),a=j(!1),r=j(0),c=5,f=j(null);let h=null;const l=j(0),w=j(null),_=j(new Map),v=j(null),g=j(!1),p=j(0),d=5,y=j(null),k=1e4,T=1e3,O=j(Date.now()),q=j(Date.now()),G=j(Date.now());let I=null,B=null,A=null;const L=b(()=>e.value&&(a.value||!f.value)?"connected":e.value?"partial":"disconnected");function z(U){return`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}${U}`}function H(U){const R={ui:{timer:()=>I,setTimer:W=>{I=W},lastPing:O,connected:e,name:"UI"},session:{timer:()=>B,setTimer:W=>{B=W},lastPing:q,connected:a,name:"Session"},legion:{timer:()=>A,setTimer:W=>{A=W},lastPing:G,connected:g,name:"Legion"}}[U];R.timer()&&clearInterval(R.timer()),R.setTimer(setInterval(()=>{if(!R.connected.value)return;const W=Date.now()-R.lastPing.value;if(W>k){console.warn(`âš ï¸ ${R.name} WebSocket heartbeat timeout (${W}ms since last ping) - forcing close to trigger reconnection`),R.connected.value=!1;const K={ui:s,session:i,legion:v}[U];K.value&&K.value.readyState===WebSocket.OPEN&&K.value.close()}},T)),console.log(`âœ… Started heartbeat monitor for ${R.name} WebSocket`)}function C(U){const R={ui:{get:()=>I,set:W=>{I=W}},session:{get:()=>B,set:W=>{B=W}},legion:{get:()=>A,set:W=>{A=W}}}[U];R.get()&&(clearInterval(R.get()),R.set(null),console.log(`ðŸ›‘ Stopped heartbeat monitor for ${U} WebSocket`))}function E(){if(s.value)return;const U=z("/ws/ui");console.log(`Connecting to UI WebSocket: ${U}`),s.value=new WebSocket(U),s.value.onopen=()=>{e.value=!0,t.value=0,O.value=Date.now(),H("ui"),console.log("UI WebSocket connected")},s.value.onmessage=R=>{const W=JSON.parse(R.data);J(W)},s.value.onclose=()=>{if(C("ui"),e.value=!1,s.value=null,console.log("UI WebSocket closed"),t.value<o){t.value++;const R=Math.min(2e3*t.value,3e4);console.log(`Reconnecting UI WebSocket in ${R}ms (attempt ${t.value})`),setTimeout(E,R)}},s.value.onerror=R=>{console.error("UI WebSocket error:",R)}}function N(){s.value&&(s.value.close(),s.value=null,e.value=!1)}async function x(U){l.value++;const R=l.value;if(console.log(`[Gen ${R}] Starting connection to session ${U}`),h&&(clearTimeout(h),h=null),await S(),l.value!==R){console.log(`[Gen ${R}] Connection cancelled (current generation: ${l.value})`);return}f.value=U,w.value=R;const W=z(`/ws/session/${U}`);console.log(`[Gen ${R}] Connecting to Session WebSocket: ${W}`),i.value=new WebSocket(W),i.value.onopen=async()=>{if(w.value!==R){console.log(`[Gen ${R}] Ignoring onopen (stale connection, current: ${w.value})`),i.value.close();return}a.value=!0,r.value=0,q.value=Date.now(),H("session"),console.log(`[Gen ${R}] Session WebSocket connected for ${U}`);const M=_.value.get(U);if(_.value.set(U,!0),M){console.log(`[Gen ${R}] Reconnection detected, syncing missed messages...`);try{const X=await Te().syncMessages(U);X.syncedCount>0?console.log(`[Gen ${R}] âœ… Synced ${X.syncedCount} missed messages`):X.error?console.warn(`[Gen ${R}] âš ï¸ Message sync failed: ${X.error}`):console.log(`[Gen ${R}] No missed messages to sync`),X.hasMore&&console.warn(`[Gen ${R}] âš ï¸ More than 1000 missed messages, showing recent 1000 only`)}catch(K){console.error(`[Gen ${R}] Error during message sync:`,K)}}else console.log(`[Gen ${R}] Initial connection, no sync needed`)},i.value.onmessage=M=>{if(w.value!==R){console.log(`[Gen ${R}] Ignoring message (stale connection, current: ${w.value})`);return}const K=JSON.parse(M.data);re(K,U)},i.value.onclose=()=>{C("session"),a.value=!1,i.value=null,console.log(`[Gen ${R}] Session WebSocket closed for ${U}`);const M=oe();if(M.currentSessionId===U&&w.value===R&&r.value<c){r.value++;const K=Math.min(2e3*r.value,3e4);console.log(`[Gen ${R}] Reconnecting Session WebSocket in ${K}ms (attempt ${r.value})`),h=setTimeout(()=>{w.value===R&&M.currentSessionId===U?(h=null,x(U)):console.log(`[Gen ${R}] Skipping reconnect (generation or session changed)`)},K)}},i.value.onerror=M=>{console.error(`[Gen ${R}] Session WebSocket error:`,M)}}function S(){return new Promise(U=>{if(h&&(clearTimeout(h),h=null,console.log("Cancelled pending session reconnect timer")),i.value){const R=f.value,W=()=>{i.value=null,a.value=!1,f.value=null,w.value=null,r.value=0,R&&_.value.delete(R),U()};if(i.value.readyState===WebSocket.CLOSED)W();else{const M=setTimeout(()=>{console.warn("Session WebSocket close timeout - forcing cleanup"),W()},2e3);i.value.addEventListener("close",()=>{clearTimeout(M),W()},{once:!0}),i.value.close()}}else f.value=null,w.value=null,U()})}function P(U){i.value&&a.value?(i.value.send(JSON.stringify({type:"send_message",content:U})),console.log("Sent message to session")):console.error("Cannot send message: Session WebSocket not connected")}function F(U,R,W=!1,M=null){if(i.value&&a.value){const K={type:"permission_response",request_id:U,decision:R,apply_suggestions:W,timestamp:new Date().toISOString()};M&&(K.clarification_message=M),i.value.send(JSON.stringify(K)),console.log(`Sent permission ${R} for request ${U}`,{applySuggestions:W,clarification:M})}}function Y(){i.value&&a.value&&(i.value.send(JSON.stringify({type:"interrupt_session"})),console.log("Sent interrupt to session"))}function J(U){const R=oe(),W=Me();switch(U.type){case"sessions_list":U.sessions&&Array.isArray(U.sessions)&&U.sessions.forEach(M=>{R.updateSession(M.session_id,M)});break;case"state_change":U.data&&U.data.session_id&&U.data.session&&R.updateSession(U.data.session_id,U.data.session);break;case"project_updated":if(U.data&&U.data.project){const M=U.data.project;W.updateProjectLocal(M.project_id,M),R.fetchSessions()}break;case"project_deleted":U.data&&U.data.project_id&&W.projects.delete(U.data.project_id);break;case"connection_established":console.log("UI WebSocket: Connection established");break;case"ping":O.value=Date.now(),s.value?.readyState===WebSocket.OPEN&&s.value.send(JSON.stringify({type:"pong",timestamp:new Date().toISOString()}));break;default:console.warn("Unknown UI WebSocket message type:",U.type)}}function re(U,R){const W=oe();if(W.currentSessionId!==R){console.warn(`Ignoring message for session ${R} (current: ${W.currentSessionId})`);return}const M=Te();switch(U.type){case"message":const K=U.data;if(!K||!K.type){console.warn("Received message event with invalid data:",U);break}if(K.type==="permission_request"){M.handlePermissionRequest(R,K);break}if(K.type==="permission_response"){M.handlePermissionResponse(R,K);break}K.metadata?.has_tool_uses&&K.metadata.tool_uses.forEach(X=>{M.handleToolUse(R,X)}),K.metadata?.has_tool_results&&K.metadata.tool_results.forEach(X=>{M.handleToolResult(R,X)}),K.type==="system"&&(K.subtype==="init"||K.metadata?.subtype==="init")&&K.metadata?.init_data&&W.storeInitData(R,K.metadata.init_data),M.addMessage(R,K);break;case"permission_request":M.handlePermissionRequest(R,U);break;case"permission_response":M.handlePermissionResponse(R,U);break;case"tool_result":M.handleToolResult(R,U);break;case"state_change":W.updateSession(R,U.updates);break;case"connection_established":console.log(`Session WebSocket: Connection established for ${R}`);break;case"ping":q.value=Date.now(),i.value?.readyState===WebSocket.OPEN&&i.value.send(JSON.stringify({type:"pong",timestamp:new Date().toISOString()}));break;default:console.warn("Unknown Session WebSocket message type:",U.type)}}function ae(U){te(),y.value=U;const R=z(`/ws/legion/${U}`);console.log(`Connecting to Legion WebSocket: ${R}`),v.value=new WebSocket(R),v.value.onopen=()=>{g.value=!0,p.value=0,G.value=Date.now(),H("legion"),console.log(`Legion WebSocket connected for ${U}`)},v.value.onmessage=W=>{const M=JSON.parse(W.data);ce(M,U)},v.value.onclose=()=>{if(C("legion"),g.value=!1,v.value=null,console.log(`Legion WebSocket closed for ${U}`),y.value===U&&p.value<d){p.value++;const W=Math.min(2e3*p.value,3e4);setTimeout(()=>ae(U),W)}},v.value.onerror=W=>{console.error("Legion WebSocket error:",W)}}function te(){v.value&&(v.value.close(),v.value=null,g.value=!1,y.value=null)}function ce(U,R){Se(async()=>{const{useLegionStore:W}=await Promise.resolve().then(()=>i_);return{useLegionStore:W}},void 0).then(({useLegionStore:W})=>{const M=W();switch(U.type){case"comm":U.comm&&(M.addComm(R,U.comm),console.log("Legion WebSocket: Received new comm",U.comm));break;case"minion_created":U.data&&(console.log("Legion WebSocket: Minion created, reloading sessions",U.data),Se(async()=>{const{useSessionStore:K}=await Promise.resolve().then(()=>fn);return{useSessionStore:K}},void 0).then(({useSessionStore:K})=>{K().loadSessions()}));break;case"minion_updated":U.data&&(console.log("Legion WebSocket: Minion updated, reloading sessions",U.data),Se(async()=>{const{useSessionStore:K}=await Promise.resolve().then(()=>fn);return{useSessionStore:K}},void 0).then(({useSessionStore:K})=>{K().loadSessions()}));break;case"connection_established":console.log(`Legion WebSocket: Connection established for ${R}`);break;case"ping":G.value=Date.now(),v.value?.readyState===WebSocket.OPEN&&v.value.send(JSON.stringify({type:"pong",timestamp:new Date().toISOString()}));break;default:console.warn("Unknown Legion WebSocket message type:",U.type)}})}return{uiConnected:e,uiRetryCount:t,sessionConnected:a,sessionRetryCount:r,legionConnected:g,legionRetryCount:p,overallStatus:L,connectUI:E,disconnectUI:N,connectSession:x,disconnectSession:S,sendMessage:P,sendPermissionResponse:F,interruptSession:Y,connectLegion:ae,disconnectLegion:te}}),fa=Object.freeze(Object.defineProperty({__proto__:null,useWebSocketStore:Ke},Symbol.toStringTag,{value:"Module"})),va={class:"base-tool-handler"},ha={class:"tool-section"},_a={class:"tool-parameters"},ga={class:"tool-code"},ba={key:0,class:"tool-section"},ya={class:"tool-section-label"},$a={class:"tool-code"},wa={__name:"BaseToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=b(()=>e.toolCall.input?JSON.stringify(e.toolCall.input,null,2):"{}"),o=b(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),i=b(()=>e.toolCall.result?.error||e.toolCall.status==="error"),a=b(()=>{if(!o.value)return"";const r=e.toolCall.result;return r.content!==void 0?typeof r.content=="string"?r.content:JSON.stringify(r.content,null,2):r.message?r.message:JSON.stringify(r,null,2)});return(r,c)=>(u(),m("div",va,[n("div",ha,[c[0]||(c[0]=n("div",{class:"tool-section-label"},"Parameters:",-1)),n("div",_a,[n("pre",ga,$(t.value),1)])]),o.value?(u(),m("div",ba,[n("div",ya,$(i.value?"Error:":"Result:"),1),n("div",{class:Z(["tool-result",{"tool-result-error":i.value}])},[n("pre",$a,$(a.value),1)],2)])):D("",!0)]))}},Ea=ee(wa,[["__scopeId","data-v-1e69f57d"]]),Ca={class:"read-tool-handler"},Sa={class:"tool-section"},ka={class:"read-file-info"},Ta={class:"file-path"},xa={key:0,class:"read-range"},Aa={key:0,class:"tool-section"},Ma={key:0,class:"tool-result tool-result-error"},Oa={class:"tool-code"},Da={key:1,class:"file-content-preview"},Na={class:"content-header"},La={class:"line-count-badge"},Ia={key:0,class:"preview-note"},ja={class:"tool-code content-display"},Pa={key:0,class:"more-indicator"},gs=100,Ra={__name:"ReadToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=b(()=>e.toolCall.input?.file_path||"Unknown"),o=b(()=>{const v=e.toolCall.input?.offset,g=e.toolCall.input?.limit;return v!==void 0||g!==void 0}),i=b(()=>{const v=e.toolCall.input?.offset;return v!==void 0?v+1:1}),a=b(()=>{const v=e.toolCall.input?.offset||0,g=e.toolCall.input?.limit;return g!==void 0?v+g:"âˆž"}),r=b(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),c=b(()=>e.toolCall.result?.error||e.toolCall.status==="error"),f=b(()=>{if(!r.value)return"";const v=e.toolCall.result;return v.content!==void 0?typeof v.content=="string"?v.content:JSON.stringify(v.content,null,2):v.message?v.message:JSON.stringify(v,null,2)}),h=b(()=>c.value||!f.value?[]:f.value.split(`
`)),l=b(()=>h.value.length),w=b(()=>l.value>gs),_=b(()=>c.value?"":h.value.slice(0,gs).join(`
`));return(v,g)=>(u(),m("div",Ca,[n("div",Sa,[n("div",ka,[g[0]||(g[0]=n("span",{class:"file-icon"},"ðŸ“„",-1)),g[1]||(g[1]=n("strong",null,"Reading:",-1)),n("code",Ta,$(t.value),1),o.value?(u(),m("span",xa,"Lines "+$(i.value)+"-"+$(a.value),1)):D("",!0)])]),r.value?(u(),m("div",Aa,[c.value?(u(),m("div",Ma,[n("pre",Oa,$(f.value),1)])):(u(),m("div",Da,[n("div",Na,[g[2]||(g[2]=n("span",{class:"content-label"},"Content Preview:",-1)),n("span",La,$(l.value)+" lines",1),w.value?(u(),m("span",Ia,"(showing first "+$(gs)+")")):D("",!0)]),n("pre",ja,$(_.value),1),w.value?(u(),m("div",Pa,"...")):D("",!0)]))])):D("",!0)]))}},Wa=ee(Ra,[["__scopeId","data-v-1f2b0569"]]),Ha={class:"write-tool-handler"},Va={class:"tool-section"},Fa={class:"write-file-info mb-2"},Ba={class:"file-path"},Ua={class:"write-content-preview"},qa={class:"content-header"},za={class:"line-count-badge"},Ka={key:0,class:"preview-note"},Ga={class:"tool-code content-display"},Ya={key:0,class:"more-indicator"},Ja={key:0,class:"tool-section"},Xa={key:0,class:"tool-result tool-result-error"},Qa={class:"tool-code"},Za={key:1,class:"tool-result tool-result-success"},er={class:"success-message"},bs=100,tr={__name:"WriteToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=b(()=>e.toolCall.input?.file_path||"Unknown"),o=b(()=>e.toolCall.input?.content||""),i=b(()=>o.value.split(`
`)),a=b(()=>i.value.length),r=b(()=>a.value>bs),c=b(()=>i.value.slice(0,bs).join(`
`)),f=b(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),h=b(()=>e.toolCall.result?.error||e.toolCall.status==="error"),l=b(()=>{if(!f.value)return"";const w=e.toolCall.result;return w.content!==void 0?typeof w.content=="string"?w.content:JSON.stringify(w.content,null,2):w.message?w.message:JSON.stringify(w,null,2)});return(w,_)=>(u(),m("div",Ha,[n("div",Va,[n("div",Fa,[_[0]||(_[0]=n("span",{class:"file-icon"},"ðŸ“",-1)),_[1]||(_[1]=n("strong",null,"Writing:",-1)),n("code",Ba,$(t.value),1)]),n("div",Ua,[n("div",qa,[_[2]||(_[2]=n("span",{class:"content-label"},"Content:",-1)),n("span",za,$(a.value)+" lines",1),r.value?(u(),m("span",Ka,"(showing first "+$(bs)+")")):D("",!0)]),n("pre",Ga,$(c.value),1),r.value?(u(),m("div",Ya,"...")):D("",!0)])]),f.value?(u(),m("div",Ja,[h.value?(u(),m("div",Xa,[_[3]||(_[3]=n("strong",null,"Error:",-1)),n("pre",Qa,$(l.value),1)])):(u(),m("div",Za,[n("div",er,[_[4]||(_[4]=n("span",{class:"success-icon"},"âœ…",-1)),n("strong",null,"File created successfully ("+$(a.value)+" lines written)",1)])]))])):D("",!0)]))}},sr=ee(tr,[["__scopeId","data-v-ddc24a0f"]]),nr={class:"bash-tool-handler"},or={class:"tool-section"},ir={class:"bash-header"},ar={class:"bash-header-content"},rr={key:0,class:"bash-description"},lr={key:1,class:"bash-flags"},cr={class:"bash-command-section"},ur={class:"bash-command-content"},dr={key:0,class:"tool-section"},mr={key:0,class:"bash-output"},pr={key:1,class:"bash-output-empty"},fr={__name:"BashToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=b(()=>e.toolCall.input?.command||""),o=b(()=>e.toolCall.input?.description||""),i=b(()=>e.toolCall.input?.timeout),a=b(()=>e.toolCall.input?.run_in_background||!1),r=b(()=>i.value||a.value),c=b(()=>{const _=[];return i.value&&_.push(`timeout: ${i.value}ms`),a.value&&_.push("background"),_.join(", ")}),f=b(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),h=b(()=>e.toolCall.result?.error||e.toolCall.status==="error"),l=b(()=>h.value?"tool-result-error":"tool-result-success"),w=b(()=>{if(!f.value)return"";const _=e.toolCall.result;return _.content!==void 0?typeof _.content=="string"?_.content:JSON.stringify(_.content,null,2):_.message?_.message:JSON.stringify(_,null,2)});return(_,v)=>(u(),m("div",nr,[n("div",or,[n("div",ir,[v[1]||(v[1]=n("span",{class:"bash-icon"},"ðŸ’»",-1)),n("div",ar,[o.value?(u(),m("div",rr,[v[0]||(v[0]=n("strong",null,"Description:",-1)),se(" "+$(o.value),1)])):D("",!0),r.value?(u(),m("div",lr,$(c.value),1)):D("",!0)])]),n("div",cr,[v[2]||(v[2]=n("div",{class:"bash-command-label"},[n("strong",null,"Command:")],-1)),n("div",ur,$(t.value),1)])]),f.value?(u(),m("div",dr,[n("div",{class:Z(["tool-result",l.value])},[v[3]||(v[3]=n("strong",null,"Output:",-1)),w.value?(u(),m("pre",mr,$(w.value),1)):(u(),m("div",pr,"No output"))],2)])):D("",!0)]))}},vr=ee(fr,[["__scopeId","data-v-ab50fe73"]]),hr={class:"todo-tool-handler"},_r={class:"tool-section"},gr={class:"todo-header"},br={class:"todo-summary"},yr={key:0,class:"todo-count todo-count-completed"},$r={key:1,class:"todo-count todo-count-in-progress"},wr={key:2,class:"todo-count todo-count-pending"},Er={class:"todo-checklist"},Cr={class:"todo-checkbox"},Sr={class:"todo-content"},kr={key:0,class:"tool-section"},Tr={key:0,class:"tool-result tool-result-error"},xr={class:"tool-code"},Ar={key:1,class:"tool-result tool-result-success"},Mr={class:"success-message"},Or={__name:"TodoToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=b(()=>e.toolCall.input?.todos||[]),o=b(()=>t.value.filter(l=>l.status==="completed").length),i=b(()=>t.value.filter(l=>l.status==="in_progress").length),a=b(()=>t.value.filter(l=>l.status==="pending").length);function r(l){return{pending:"â˜",in_progress:"â—",completed:"â˜‘"}[l]||"â˜"}const c=b(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),f=b(()=>e.toolCall.result?.error||e.toolCall.status==="error"),h=b(()=>{if(!c.value)return"";const l=e.toolCall.result;return l.content!==void 0?typeof l.content=="string"?l.content:JSON.stringify(l.content,null,2):l.message?l.message:JSON.stringify(l,null,2)});return(l,w)=>(u(),m("div",hr,[n("div",_r,[n("div",gr,[w[0]||(w[0]=n("span",{class:"todo-icon"},"ðŸ“‹",-1)),w[1]||(w[1]=n("strong",null,"Task List:",-1)),n("div",br,[o.value>0?(u(),m("span",yr,$(o.value)+" completed ",1)):D("",!0),i.value>0?(u(),m("span",$r,$(i.value)+" in progress ",1)):D("",!0),a.value>0?(u(),m("span",wr,$(a.value)+" pending ",1)):D("",!0)])]),n("div",Er,[(u(!0),m(ie,null,le(t.value,(_,v)=>(u(),m("div",{key:v,class:Z(["todo-item",`todo-${_.status}`])},[n("span",Cr,$(r(_.status)),1),n("span",Sr,$(_.content),1)],2))),128))])]),c.value?(u(),m("div",kr,[f.value?(u(),m("div",Tr,[w[2]||(w[2]=n("strong",null,"Error:",-1)),n("pre",xr,$(h.value),1)])):(u(),m("div",Ar,[n("div",Mr,[w[3]||(w[3]=n("span",{class:"success-icon"},"âœ…",-1)),n("strong",null,"Task list updated ("+$(t.value.length)+" tasks)",1)])]))])):D("",!0)]))}},Dr=ee(Or,[["__scopeId","data-v-bbe55ee7"]]),Nr={class:"edit-tool-handler"},Lr={class:"tool-section"},Ir={class:"edit-file-info"},jr={class:"file-path"},Pr={key:0,class:"replace-all-badge"},Rr={class:"edit-diff-container"},Wr={class:"diff-header"},Hr={class:"diff-stats"},Vr={class:"stat-removed"},Fr={class:"stat-added"},Br={class:"unified-diff"},Ur={class:"diff-scroll-container"},qr={class:"diff-marker"},zr={class:"diff-content"},Kr={key:0,class:"tool-section"},Gr={key:0,class:"tool-result tool-result-error"},Yr={class:"tool-code"},Jr={key:1,class:"tool-result tool-result-success"},Xr={class:"success-message"},Qr={key:0,class:"success-detail"},Zr={__name:"EditToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=b(()=>e.toolCall.input?.file_path||"Unknown"),o=b(()=>e.toolCall.input?.old_string||""),i=b(()=>e.toolCall.input?.new_string||""),a=b(()=>e.toolCall.input?.replace_all||!1),r=b(()=>{const v=bi(t.value,o.value,i.value,"","",{context:3}).split(`
`),g=[];for(let p=4;p<v.length;p++){const d=v[p];d&&(d.startsWith("-")?g.push({type:"removed",content:d.substring(1)}):d.startsWith("+")?g.push({type:"added",content:d.substring(1)}):d.startsWith(" ")?g.push({type:"context",content:d.substring(1)}):d.startsWith("@@")&&g.push({type:"hunk",content:d}))}return g}),c=b(()=>r.value.filter(_=>_.type==="removed").length),f=b(()=>r.value.filter(_=>_.type==="added").length),h=b(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),l=b(()=>e.toolCall.result?.error||e.toolCall.status==="error"),w=b(()=>{if(!h.value)return"";const _=e.toolCall.result;return _.content!==void 0?typeof _.content=="string"?_.content:JSON.stringify(_.content,null,2):_.message?_.message:JSON.stringify(_,null,2)});return(_,v)=>(u(),m("div",Nr,[n("div",Lr,[n("div",Ir,[v[0]||(v[0]=n("span",{class:"file-icon"},"âœï¸",-1)),v[1]||(v[1]=n("strong",null,"Editing:",-1)),n("code",jr,$(t.value),1),a.value?(u(),m("span",Pr,"Replace All")):D("",!0)]),n("div",Rr,[n("div",Wr,[v[2]||(v[2]=n("span",{class:"diff-label"},"Changes:",-1)),n("span",Hr,[n("span",Vr,"-"+$(c.value),1),n("span",Fr,"+"+$(f.value),1)])]),n("div",Br,[n("div",Ur,[(u(!0),m(ie,null,le(r.value,(g,p)=>(u(),m("div",{key:p,class:Z(["diff-line",{"diff-line-removed":g.type==="removed","diff-line-added":g.type==="added","diff-line-context":g.type==="context","diff-line-hunk":g.type==="hunk"}])},[n("span",qr,$(g.type==="removed"?"-":g.type==="added"?"+":g.type==="hunk"?"@":" "),1),n("span",zr,$(g.content),1)],2))),128))])])])]),h.value?(u(),m("div",Kr,[l.value?(u(),m("div",Gr,[v[3]||(v[3]=n("strong",null,"Error:",-1)),n("pre",Yr,$(w.value),1)])):(u(),m("div",Jr,[n("div",Xr,[v[4]||(v[4]=n("span",{class:"success-icon"},"âœ…",-1)),v[5]||(v[5]=n("strong",null,"File edited successfully",-1)),a.value?(u(),m("span",Qr,"(all occurrences replaced)")):D("",!0)])]))])):D("",!0)]))}},el=ee(Zr,[["__scopeId","data-v-dd74055e"]]),tl={class:"search-tool-handler"},sl={class:"tool-section"},nl={class:"search-info"},ol={class:"search-icon"},il={class:"search-pattern"},al={key:0,class:"search-path"},rl={key:1,class:"search-filters"},ll={key:0,class:"filter-badge"},cl={key:1,class:"filter-badge"},ul={key:2,class:"filter-badge"},dl={key:0,class:"tool-section"},ml={key:0,class:"tool-result tool-result-error"},pl={class:"tool-code"},fl={key:1,class:"search-results"},vl={class:"results-header"},hl={class:"results-label"},_l={class:"results-count-badge"},gl={class:"results-content"},bl={class:"tool-code"},yl={__name:"SearchToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=b(()=>e.toolCall.name==="Grep"),o=b(()=>e.toolCall.input?.pattern||"Unknown"),i=b(()=>e.toolCall.input?.path||null),a=b(()=>e.toolCall.input?.type||null),r=b(()=>e.toolCall.input?.glob||null),c=b(()=>e.toolCall.input?.["-i"]||!1),f=b(()=>a.value||r.value||c.value),h=b(()=>t.value?"ðŸ”":"ðŸ“"),l=b(()=>t.value?"Searching content":"Finding files"),w=b(()=>t.value?"Matches":"Files found"),_=b(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),v=b(()=>e.toolCall.result?.error||e.toolCall.status==="error"),g=b(()=>{if(!_.value)return"";const d=e.toolCall.result;return d.content!==void 0?typeof d.content=="string"?d.content:JSON.stringify(d.content,null,2):d.message?d.message:JSON.stringify(d,null,2)}),p=b(()=>!_.value||v.value||!g.value?0:g.value.split(`
`).filter(y=>y.trim()).length);return(d,y)=>(u(),m("div",tl,[n("div",sl,[n("div",nl,[n("span",ol,$(h.value),1),n("strong",null,$(l.value)+":",1),n("code",il,$(o.value),1),i.value?(u(),m("span",al,"in "+$(i.value),1)):D("",!0),f.value?(u(),m("span",rl,[a.value?(u(),m("span",ll,"type: "+$(a.value),1)):D("",!0),r.value?(u(),m("span",cl,"glob: "+$(r.value),1)):D("",!0),c.value?(u(),m("span",ul,"case-insensitive")):D("",!0)])):D("",!0)])]),_.value?(u(),m("div",dl,[v.value?(u(),m("div",ml,[y[0]||(y[0]=n("strong",null,"Error:",-1)),n("pre",pl,$(g.value),1)])):(u(),m("div",fl,[n("div",vl,[n("span",hl,$(w.value)+":",1),n("span",_l,$(p.value)+" "+$(p.value===1?"match":"matches"),1)]),n("div",gl,[n("pre",bl,$(g.value),1)])]))])):D("",!0)]))}},vn=ee(yl,[["__scopeId","data-v-0d272c39"]]),$l={class:"web-tool-handler"},wl={class:"tool-section"},El={class:"web-info"},Cl={class:"web-icon"},Sl=["href"],kl={key:1,class:"web-query"},Tl={key:0,class:"web-prompt-container"},xl={class:"prompt-content"},Al={key:1,class:"web-domains"},Ml={class:"domains-label"},Ol={key:0,class:"tool-section"},Dl={key:0,class:"tool-result tool-result-error"},Nl={class:"tool-code"},Ll={key:1,class:"web-results"},Il={class:"results-header"},jl={class:"results-label"},Pl={class:"results-content"},Rl={class:"tool-code"},Wl={__name:"WebToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=b(()=>e.toolCall.name==="WebFetch"),o=b(()=>e.toolCall.input?.url||null),i=b(()=>e.toolCall.input?.query||null),a=b(()=>e.toolCall.input?.prompt||null),r=b(()=>e.toolCall.input?.allowed_domains||[]),c=b(()=>e.toolCall.input?.blocked_domains||[]),f=b(()=>r.value.length>0?r.value:c.value.length>0?c.value:[]),h=b(()=>r.value.length>0?"Allowed domains":c.value.length>0?"Blocked domains":"Domains"),l=b(()=>t.value?"ðŸŒ":"ðŸ”Ž"),w=b(()=>t.value?"Fetching URL":"Searching web"),_=b(()=>t.value?"Fetched content":"Search results"),v=b(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),g=b(()=>e.toolCall.result?.error||e.toolCall.status==="error"),p=b(()=>{if(!v.value)return"";const d=e.toolCall.result;return d.content!==void 0?typeof d.content=="string"?d.content:JSON.stringify(d.content,null,2):d.message?d.message:JSON.stringify(d,null,2)});return(d,y)=>(u(),m("div",$l,[n("div",wl,[n("div",El,[n("span",Cl,$(l.value),1),n("strong",null,$(w.value)+":",1),o.value?(u(),m("a",{key:0,href:o.value,target:"_blank",class:"web-url"},$(o.value),9,Sl)):i.value?(u(),m("code",kl,$(i.value),1)):D("",!0)]),a.value?(u(),m("div",Tl,[y[0]||(y[0]=n("div",{class:"prompt-label"},"Prompt:",-1)),n("div",xl,$(a.value),1)])):D("",!0),f.value.length>0?(u(),m("div",Al,[n("span",Ml,$(h.value)+":",1),(u(!0),m(ie,null,le(f.value,k=>(u(),m("span",{key:k,class:"domain-badge"},$(k),1))),128))])):D("",!0)]),v.value?(u(),m("div",Ol,[g.value?(u(),m("div",Dl,[y[1]||(y[1]=n("strong",null,"Error:",-1)),n("pre",Nl,$(p.value),1)])):(u(),m("div",Ll,[n("div",Il,[n("span",jl,$(_.value)+":",1)]),n("div",Pl,[n("pre",Rl,$(p.value),1)])]))])):D("",!0)]))}},hn=ee(Wl,[["__scopeId","data-v-62b55b55"]]),Hl={class:"task-tool-handler"},Vl={class:"tool-section"},Fl={class:"task-header"},Bl={key:0,class:"agent-type-badge"},Ul={key:0,class:"task-description"},ql={class:"description-content"},zl={key:1,class:"task-prompt-container"},Kl={class:"prompt-header"},Gl={class:"prompt-length"},Yl={class:"prompt-code"},Jl={key:0,class:"tool-section"},Xl={key:0,class:"tool-result tool-result-error"},Ql={class:"tool-code"},Zl={key:1,class:"agent-output"},ec={class:"output-header"},tc={key:0,class:"output-count-badge"},sc={class:"output-content"},nc={class:"tool-code"},oc={__name:"TaskToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=b(()=>e.toolCall.input?.description||null),o=b(()=>e.toolCall.input?.prompt||null),i=b(()=>e.toolCall.input?.subagent_type||null),a=b(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),r=b(()=>e.toolCall.result?.error||e.toolCall.status==="error"),c=b(()=>{if(!a.value)return"";const h=e.toolCall.result;return h.content!==void 0?typeof h.content=="string"?h.content:JSON.stringify(h.content,null,2):h.message?h.message:JSON.stringify(h,null,2)}),f=b(()=>c.value?c.value.split(`
`).length:0);return(h,l)=>(u(),m("div",Hl,[n("div",Vl,[n("div",Fl,[l[0]||(l[0]=n("span",{class:"task-icon"},"ðŸ¤–",-1)),l[1]||(l[1]=n("strong",null,"Agent Task:",-1)),i.value?(u(),m("span",Bl,$(i.value),1)):D("",!0)]),t.value?(u(),m("div",Ul,[l[2]||(l[2]=n("div",{class:"description-label"},"Description:",-1)),n("div",ql,$(t.value),1)])):D("",!0),o.value?(u(),m("div",zl,[n("div",Kl,[l[3]||(l[3]=n("span",{class:"prompt-label"},"Task Prompt:",-1)),n("span",Gl,$(o.value.length)+" characters",1)]),n("pre",Yl,$(o.value),1)])):D("",!0)]),a.value?(u(),m("div",Jl,[r.value?(u(),m("div",Xl,[l[4]||(l[4]=n("strong",null,"Error:",-1)),n("pre",Ql,$(c.value),1)])):(u(),m("div",Zl,[n("div",ec,[l[5]||(l[5]=n("span",{class:"output-label"},"Agent Output:",-1)),f.value>0?(u(),m("span",tc,$(f.value)+" lines",1)):D("",!0)]),n("div",sc,[n("pre",nc,$(c.value),1)])]))])):D("",!0)]))}},ic=ee(oc,[["__scopeId","data-v-c520c244"]]),ac={class:"notebook-edit-tool-handler"},rc={class:"tool-section"},lc={class:"notebook-info"},cc={class:"file-path"},uc={class:"cell-info mt-2"},dc={class:"info-row"},mc={class:"info-row"},pc={key:0,class:"info-row"},fc={class:"badge bg-info"},vc={key:0,class:"source-preview mt-3"},hc={class:"preview-header"},_c={class:"preview-stats"},gc={class:"source-code"},bc={key:0,class:"tool-section"},yc={key:0},$c={key:1,class:"text-danger"},wc={__name:"NotebookEditToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=b(()=>e.toolCall.input?.notebook_path||"Unknown"),o=b(()=>e.toolCall.input?.cell_id),i=b(()=>e.toolCall.input?.cell_type||"code"),a=b(()=>e.toolCall.input?.edit_mode||"replace"),r=b(()=>e.toolCall.input?.new_source||""),c=b(()=>r.value.split(`
`).length),f=b(()=>i.value==="code"?"bg-primary":"bg-secondary"),h=b(()=>e.toolCall.result?.success===!1?"tool-result-error":"tool-result-success"),l=b(()=>{if(e.toolCall.result?.message)return e.toolCall.result.message;const w=a.value;return w==="insert"?"Cell inserted successfully":w==="delete"?"Cell deleted successfully":"Cell updated successfully"});return(w,_)=>(u(),m("div",ac,[n("div",rc,[n("div",lc,[_[0]||(_[0]=n("span",{class:"notebook-icon"},"ðŸ““",-1)),_[1]||(_[1]=n("strong",null,"Notebook:",-1)),n("code",cc,$(t.value),1)]),n("div",uc,[n("div",dc,[_[2]||(_[2]=n("strong",null,"Cell ID:",-1)),n("code",null,$(o.value||"N/A"),1)]),n("div",mc,[_[3]||(_[3]=n("strong",null,"Cell Type:",-1)),n("span",{class:Z(["badge",f.value])},$(i.value),3)]),a.value?(u(),m("div",pc,[_[4]||(_[4]=n("strong",null,"Edit Mode:",-1)),n("span",fc,$(a.value),1)])):D("",!0)]),r.value?(u(),m("div",vc,[n("div",hc,[_[5]||(_[5]=n("span",{class:"preview-label"},"New Source:",-1)),n("span",_c,$(c.value)+" lines",1)]),n("pre",gc,[n("code",null,$(r.value),1)])])):D("",!0)]),s.toolCall.result?(u(),m("div",bc,[_[6]||(_[6]=n("div",{class:"result-header mb-2"},[n("strong",null,"Result:")],-1)),n("div",{class:Z(["tool-result",h.value])},[s.toolCall.result.success!==!1?(u(),m("div",yc," âœ… "+$(l.value),1)):(u(),m("div",$c," â— "+$(s.toolCall.result.error||"Operation failed"),1))],2)])):D("",!0)]))}},Ec=ee(wc,[["__scopeId","data-v-c81a9bcf"]]),Cc={class:"shell-tool-handler"},Sc={class:"tool-section"},kc={class:"shell-info"},Tc={class:"shell-icon"},xc={key:0,class:"shell-id"},Ac={key:0,class:"filter-info mt-2"},Mc={class:"filter-pattern"},Oc={key:0,class:"tool-section"},Dc={class:"result-header mb-2"},Nc={key:0,class:"mb-2"},Lc={class:"shell-output"},Ic={key:1,class:"mb-2"},jc={class:"shell-output shell-output-error"},Pc={key:0},Rc={key:1,class:"text-danger"},Wc={__name:"ShellToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=b(()=>e.toolCall.name==="BashOutput"?"ðŸ“¤":e.toolCall.name==="KillShell"?"ðŸ›‘":"ðŸš"),o=b(()=>e.toolCall.name==="BashOutput"?"Reading Shell Output":e.toolCall.name==="KillShell"?"Terminating Shell":"Shell Operation"),i=b(()=>e.toolCall.name==="BashOutput"?"Output":e.toolCall.name==="KillShell"?"Status":"Result"),a=b(()=>e.toolCall.input?.bash_id||e.toolCall.input?.shell_id),r=b(()=>e.toolCall.input?.filter);function c(v,g){if(!v)return null;const p=new RegExp(`<${g}>([\\s\\S]*?)<\\/${g}>`,"i"),d=v.match(p);return d?d[1].trim():null}const f=b(()=>{const v=e.toolCall.result;if(!v)return null;let g=v;if(v.content&&(g=v.content),typeof g=="string")return{status:c(g,"status"),stdout:c(g,"stdout"),stderr:c(g,"stderr"),exit_code:c(g,"exit_code")};if(Array.isArray(g)){const p=g.find(d=>d.type==="text")?.text||"";return{status:c(p,"status"),stdout:c(p,"stdout"),stderr:c(p,"stderr"),exit_code:c(p,"exit_code")}}return{status:v.status||g.status,stdout:v.stdout||v.output||g.stdout||g.output,stderr:v.stderr||g.stderr,exit_code:v.exit_code||g.exit_code}}),h=b(()=>f.value?.status),l=b(()=>{const v=h.value;return v==="running"?"bg-success":v==="completed"?"bg-secondary":v==="killed"||v==="terminated"?"bg-danger":"bg-info"}),w=b(()=>e.toolCall.result?.success===!1?"tool-result-error":"tool-result-success"),_=b(()=>{if(e.toolCall.result?.message)return e.toolCall.result.message;if(e.toolCall.name==="KillShell")return"Shell terminated successfully";if(e.toolCall.name==="BashOutput"){const v=f.value;if(v?.status==="running"&&!v.stdout&&!v.stderr)return"No new output since last check";if(v?.status==="failed")return`Shell failed (exit code ${v.exit_code||"unknown"})`}return"Operation completed"});return(v,g)=>(u(),m("div",Cc,[n("div",Sc,[n("div",kc,[n("span",Tc,$(t.value),1),n("strong",null,$(o.value)+":",1),a.value?(u(),m("code",xc,"Shell "+$(a.value),1)):D("",!0)]),s.toolCall.name==="BashOutput"&&r.value?(u(),m("div",Ac,[g[0]||(g[0]=n("strong",null,"Filter:",-1)),n("code",Mc,$(r.value),1)])):D("",!0)]),s.toolCall.result?(u(),m("div",Oc,[n("div",Dc,[n("strong",null,$(i.value)+":",1),h.value?(u(),m("span",{key:0,class:Z(["badge",l.value])},$(h.value),3)):D("",!0)]),f.value?.stdout?(u(),m("div",Nc,[g[1]||(g[1]=n("div",{class:"output-label"},"Output:",-1)),n("div",Lc,[n("pre",null,[n("code",null,$(f.value.stdout),1)])])])):D("",!0),f.value?.stderr?(u(),m("div",Ic,[g[2]||(g[2]=n("div",{class:"output-label text-danger"}," â— Errors: ",-1)),n("div",jc,[n("pre",null,[n("code",null,$(f.value.stderr),1)])])])):D("",!0),!f.value?.stdout&&!f.value?.stderr?(u(),m("div",{key:2,class:Z(["tool-result",w.value])},[s.toolCall.result.success!==!1?(u(),m("div",Pc," âœ… "+$(_.value),1)):(u(),m("div",Rc," â— "+$(s.toolCall.result.error||"Operation failed"),1))],2)):D("",!0)])):D("",!0)]))}},_n=ee(Wc,[["__scopeId","data-v-86def281"]]),Hc={class:"skill-tool-handler"},Vc={key:0,class:"tool-section"},Fc={class:"d-flex align-items-center gap-2"},Bc={class:"text-muted small"},Uc={key:0,class:"skill-content-body"},qc={class:"skill-content-text"},zc={key:1,class:"tool-section mt-3"},Kc={class:"tool-result tool-result-error"},Gc={class:"tool-code"},Yc={__name:"SkillToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=Te(),o=oe(),i=j(!1);function a(){i.value=!i.value}const r=b(()=>{const _=o.currentSessionId;if(!_)return{running:null,content:null};const v=t.messagesBySession.get(_)||[],g=v.findIndex(y=>y.type==="user"&&y.metadata?.has_tool_results&&y.metadata?.tool_results?.some(k=>k.tool_use_id===e.toolCall.id));if(g===-1)return{running:null,content:null};let p=null,d=null;for(let y=g+1;y<Math.min(g+3,v.length);y++){const k=v[y];if(k.type!=="user")continue;const T=k.content||"";T.includes("<command-message>")&&T.includes("skill is running")?p=k:T.startsWith("Base directory for this skill:")&&(d=k)}return{running:p,content:d}}),c=b(()=>{const _=r.value.content;if(!_)return"";const v=_.content||"",g=/Base directory(?:\s+for\s+this\s+skill)?:.*?\n/i;return v.replace(g,"").trim()}),f=b(()=>c.value.length>0),h=b(()=>c.value?c.value.split(`
`).length:0),l=b(()=>e.toolCall.result?.error||e.toolCall.status==="error"),w=b(()=>{if(!l.value)return"";const _=e.toolCall.result;return _?.message?_.message:_?.error?_.error:"An error occurred"});return(_,v)=>(u(),m("div",Hc,[f.value?(u(),m("div",Vc,[n("div",{class:"skill-content-header",onClick:a},[n("div",Fc,[n("i",{class:Z(["bi",i.value?"bi-chevron-down":"bi-chevron-right"])},null,2),v[0]||(v[0]=n("strong",null,"Skill Content",-1)),n("span",Bc,"("+$(h.value)+" lines)",1)])]),i.value?(u(),m("div",Uc,[n("pre",qc,$(c.value),1)])):D("",!0)])):D("",!0),l.value?(u(),m("div",zc,[v[1]||(v[1]=n("div",{class:"tool-section-label text-danger"}," â— Error: ",-1)),n("div",Kc,[n("pre",Gc,$(w.value),1)])])):D("",!0)]))}},Jc=ee(Yc,[["__scopeId","data-v-0a48ca0f"]]),Xc={class:"slashcommand-tool-handler"},Qc={key:0,class:"tool-section"},Zc={class:"d-flex align-items-center gap-2"},eu=["aria-label"],tu={class:"text-muted small"},su={key:0,class:"command-content-body"},nu={class:"command-content-text"},ou={key:1,class:"tool-section mt-3"},iu={class:"tool-result tool-result-error"},au={class:"tool-code"},ru={__name:"SlashCommandToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=Te(),o=oe(),i=j(!1);function a(){i.value=!i.value}const r=b(()=>{const _=o.currentSessionId;if(!_)return{running:null,content:null};const v=t.messagesBySession.get(_)||[],g=v.findIndex(y=>y.type==="user"&&y.metadata?.has_tool_results&&y.metadata?.tool_results?.some(k=>k.tool_use_id===e.toolCall.id));if(g===-1)return{running:null,content:null};let p=null,d=null;for(let y=g+1;y<Math.min(g+3,v.length);y++){const k=v[y];if(k.type!=="user")continue;const T=k.content||"";T.includes("<command-message>")&&T.includes("<command-name>")&&T.includes("<command-args>")?p=k:T.includes("ARGUMENTS:")&&(d=k)}return{running:p,content:d}}),c=b(()=>{const _=r.value.content;if(!_)return"";const v=_.content||"",g=/\nARGUMENTS:.*$/s;return v.replace(g,"").replace(/<command-message>.*?<\/command-message>/s,"").replace(/<command-name>.*?<\/command-name>/s,"").replace(/<command-args>.*?<\/command-args>/s,"").trim()}),f=b(()=>c.value.length>0),h=b(()=>c.value?c.value.split(`
`).length:0),l=b(()=>e.toolCall.result?.error||e.toolCall.status==="error"),w=b(()=>{if(!l.value)return"";const _=e.toolCall.result;return _?.message?_.message:_?.error?_.error:"An error occurred"});return(_,v)=>(u(),m("div",Xc,[f.value?(u(),m("div",Qc,[n("div",{class:"command-content-header",onClick:a},[n("div",Zc,[n("span",{"aria-label":i.value?"Collapse":"Expand"},$(i.value?"â–¾":"â–¸"),9,eu),v[0]||(v[0]=n("strong",null,"Command Content",-1)),n("span",tu,"("+$(h.value)+" lines)",1)])]),i.value?(u(),m("div",su,[n("pre",nu,$(c.value),1)])):D("",!0)])):D("",!0),l.value?(u(),m("div",ou,[v[1]||(v[1]=n("div",{class:"tool-section-label text-danger"}," â— Error: ",-1)),n("div",iu,[n("pre",au,$(w.value),1)])])):D("",!0)]))}},lu=ee(ru,[["__scopeId","data-v-15991acf"]]),cu={class:"exit-plan-mode-tool-handler"},uu={class:"tool-section"},du={key:0,class:"plan-content mt-2"},mu={class:"plan-text"},pu={key:0,class:"tool-section"},fu={key:0},vu={key:1,class:"text-danger"},hu={__name:"ExitPlanModeToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=b(()=>e.toolCall.input?.plan),o=b(()=>e.toolCall.result?.success===!1?"tool-result-error":"tool-result-success");return(i,a)=>(u(),m("div",cu,[n("div",uu,[a[1]||(a[1]=n("div",{class:"plan-info"},[n("span",{class:"plan-icon"},"ðŸ“‹"),n("strong",null,"Exiting Plan Mode")],-1)),t.value?(u(),m("div",du,[a[0]||(a[0]=n("div",{class:"plan-header"},[n("strong",null,"Proposed Plan:")],-1)),n("div",mu,$(t.value),1)])):D("",!0)]),s.toolCall.result?(u(),m("div",pu,[a[2]||(a[2]=n("div",{class:"result-header mb-2"},[n("strong",null,"Result:")],-1)),n("div",{class:Z(["tool-result",o.value])},[s.toolCall.result.success!==!1?(u(),m("div",fu," âœ… Permission mode reverted to default ")):(u(),m("div",vu," â— "+$(s.toolCall.result.error||"Failed to exit plan mode"),1))],2)])):D("",!0)]))}},_u=ee(hu,[["__scopeId","data-v-e2e3c781"]]),gu={class:"d-flex align-items-center gap-2 flex-grow-1 min-width-0"},bu={class:"tool-status-icon"},yu=["title"],$u={class:"d-flex align-items-center gap-2"},wu={class:"text-muted"},Eu=["aria-label"],Cu={key:0,class:"card-body"},Su={key:0,class:"alert alert-warning mb-3"},ku={class:"d-flex align-items-center"},Tu={class:"mb-0 small"},xu={key:1,class:"permission-prompt mt-3"},Au={class:"alert alert-warning mb-3"},Mu={class:"mb-0"},Ou={class:"tool-name"},Du={key:0,class:"suggestions-section mb-3"},Nu={class:"alert alert-info mb-0"},Lu={class:"suggestion-details p-2 bg-white rounded"},Iu={class:"permission-buttons d-flex gap-2 mb-3"},ju=["disabled"],Pu=["disabled"],Ru=["disabled"],Wu={class:"guidance-section mt-3"},Hu=["disabled"],Vu=["disabled"],Fu={key:2,class:"mt-3"},Bu={class:"alert alert-warning mb-0"},Uu={class:"d-flex align-items-center"},qu={class:"mb-0 small"},zu={key:3,class:"tool-section"},Ku={class:"alert alert-danger mb-0"},Gu={key:0},Yu={__name:"ToolCallCard",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=Te(),o=oe(),i=Ke(),a=j(!1),r=j(null),c=j(""),f=b(()=>t.isToolUseOrphaned(o.currentSessionId,e.toolCall.id)),h=b(()=>t.getOrphanedInfo(o.currentSessionId,e.toolCall.id)),l=b(()=>t.getBackendToolState(o.currentSessionId,e.toolCall.id)),w=b(()=>{if(l.value){const C=l.value.state;return{pending:"pending",permission_required:"permission_required",executing:"executing",completed:"completed",failed:"error",orphaned:"completed"}[C]||C}return e.toolCall.status}),_={Read:Wa,Write:sr,Bash:vr,TodoWrite:Dr,Edit:el,Grep:vn,Glob:vn,WebFetch:hn,WebSearch:hn,Task:ic,NotebookEdit:Ec,BashOutput:_n,KillShell:_n,SlashCommand:lu,Skill:Jc,ExitPlanMode:_u},v=b(()=>{const C=e.toolCall.name;return _[C]?_[C]:Ea}),g=b(()=>{const C=[];if(f.value)return C.push("border-warning"),C.join(" ");switch(w.value){case"pending":C.push("border-secondary");break;case"permission_required":C.push("border-warning");break;case"executing":C.push("border-primary");break;case"completed":y.value||e.toolCall.permissionDecision==="deny"?C.push("border-danger"):C.push("border-success");break;case"error":C.push("border-danger");break}return C.join(" ")}),p=b(()=>{if(f.value)return"â¹ï¸";switch(w.value){case"pending":return"ðŸ”„";case"permission_required":return"â“";case"executing":return"âš¡";case"completed":return e.toolCall.permissionDecision==="deny"?"âŒ":y.value?"â—":"âœ…";case"error":return"â—";default:return"ðŸ”§"}}),d=b(()=>It(e.toolCall.timestamp)),y=b(()=>e.toolCall.result?.error||e.toolCall.status==="error"),k=b(()=>e.toolCall.suggestions&&e.toolCall.suggestions.length>0);function T(C){if(!C)return"";const E=C.replace(/\\/g,"/").split("/");return E[E.length-1]}function O(C){if(!C)return"";const E=C.match(/cd\s+"[^"]+"\s+&&\s+(.+)$/);return E?E[1]:C}function q(C,E=200){return C?C.length<=E?C:C.substring(0,E)+"...":""}function G(C){if(!C)return null;if(C.content){const E=C.content.match(/exit code (\d+)/i);if(E)return parseInt(E[1])}return C.error?1:0}function I(C,E){const N=C?C.split(`
`).length:0;return{added:E?E.split(`
`).length:0,removed:N}}const B=b(()=>{const C=e.toolCall.name,E=e.toolCall.input||{},N=e.toolCall.result,x=w.value;switch(C){case"Bash":case"Shell":case"Command":{const S=O(E.command),P=q(S,200);if(x==="completed"&&N){const F=G(N);return`Bash: ${P} (exit ${F})`}return`Bash: ${P}`}case"SlashCommand":{const S=q(E.command,200);return x==="completed"&&N?`SlashCommand: ${S}`:`SlashCommand: ${S}`}case"Edit":{const S=T(E.file_path);if(x==="completed"&&N&&!N.error){const{added:P,removed:F}=I(E.old_string,E.new_string);return P===F?`Edit: ${S} (${P} lines changed)`:`Edit: ${S} (${P} lines added, ${F} removed)`}return`Edit: ${S}`}case"Read":{const S=T(E.file_path);if(E.offset!==void 0||E.limit!==void 0){const F=(E.offset||0)+1,Y=E.limit?(E.offset||0)+E.limit:"âˆž";return`Read: ${S} (lines ${F}-${Y})`}return`Read: ${S} (full file)`}case"Write":{const S=T(E.file_path);if(x==="completed"&&N&&!N.error&&E.content){const P=E.content.split(`
`).length;return`Write: ${S} (${P} lines written)`}return`Write: ${S}`}case"Skill":{const S=E.skill||"Unknown";return x==="completed"&&N?N.error?`Skill: ${S} (error)`:`Skill: ${S} (completed)`:`Skill: ${S}`}case"Task":{const S=E.subagent_type||"general",P=E.description||"Task";return x==="completed"&&N?N.error?`Task: (${S}) ${P} (error)`:`Task: (${S}) ${P} (completed)`:`Task: (${S}) ${P}`}case"TodoWrite":{if(E.todos&&Array.isArray(E.todos)){const S=E.todos.filter(Y=>Y.status==="completed").length,P=E.todos.length,F=E.todos.find(Y=>Y.status==="in_progress");return F?`Todo: Working on "${F.content}"`:`Todo: ${S}/${P} Tasks Completed`}return"Todo: Updated"}case"Grep":case"Glob":{const S=E.pattern||"",P=C==="Grep"?"Grep":"Glob";if(x==="completed"&&N&&!N.error){let F=0;return N.content&&(F=N.content.split(`
`).filter(J=>J.trim()).length),`${P}: "${S}" (${F} results)`}return`${P}: "${S}"`}case"WebFetch":case"WebSearch":{const S=E.url||E.query||"";if(C==="WebSearch"){const F=E.query||"",Y=F.length>50?F.substring(0,50)+"...":F;return x==="completed"&&N?N.error?`Web: ${Y} (error)`:`Web: ${Y} (success)`:`Web: ${Y}`}let P="";try{S&&(P=new URL(S.startsWith("http")?S:`https://${S}`).hostname)}catch{P=S.length>50?S.substring(0,50)+"...":S}return x==="completed"&&N?N.error?`Web: ${P} (error)`:`Web: ${P} (success)`:`Web: ${P||S}`}case"NotebookEdit":{const S=T(E.notebook_path),P=E.cell_number!==void 0?E.cell_number:"?",F=E.edit_mode||"replace";return`NotebookEdit: ${S} cell #${P} (${F})`}case"ExitPlanMode":return"ExitPlanMode: Plan submitted";case"BashOutput":return`BashOutput: Read output from ${E.bash_id||"unknown"}`;case"KillShell":return`KillShell: Terminate ${E.shell_id||"unknown"}`;default:return`${C}: executed`}}),A=b(()=>{const C=e.toolCall.name,E=e.toolCall.input||{};return["Bash","Shell","Command","SlashCommand"].includes(C)?E.command||C:["Edit","Read","Write","NotebookEdit"].includes(C)&&(E.file_path||E.notebook_path)||C});function L(){const C=o.currentSessionId;C&&t.toggleToolExpansion(C,e.toolCall.id)}function z(C){return C.type==="setMode"?`Set permission mode to "${C.mode}"`:C.type==="allow"?`Allow tool: ${C.tool}`:JSON.stringify(C)}async function H(C,E,N=null){if(!a.value){a.value=!0,C==="allow"?r.value=E?"approve-apply":"approve":N?r.value="deny-guidance":r.value="deny";try{const x=o.currentSessionId;if(x){const S=E&&e.toolCall.suggestions?e.toolCall.suggestions:[];t.handlePermissionResponse(x,{request_id:e.toolCall.permissionRequestId,decision:C,reasoning:C==="allow"?"User allowed permission":"User denied permission",applied_updates:S})}await i.sendPermissionResponse(e.toolCall.permissionRequestId,C,E,N)}catch(x){console.error("Failed to send permission response:",x)}finally{a.value=!1,r.value=null}}}return(C,E)=>(u(),m("div",{class:Z(["tool-call-card card",g.value])},[n("div",{class:"card-header d-flex align-items-center justify-content-between cursor-pointer",onClick:L},[n("div",gu,[n("span",bu,$(p.value),1),n("span",{class:"tool-name",title:A.value},$(B.value),9,yu)]),n("div",$u,[n("small",wu,$(d.value),1),n("span",{"aria-label":s.toolCall.isExpanded?"Collapse":"Expand"},$(s.toolCall.isExpanded?"â–¾":"â–¸"),9,Eu)])]),s.toolCall.isExpanded?(u(),m("div",Cu,[f.value?(u(),m("div",Su,[n("div",ku,[E[6]||(E[6]=n("span",{class:"me-2",style:{"font-size":"1.2rem"}},"â¹ï¸",-1)),n("div",null,[E[5]||(E[5]=n("strong",null,"Tool Execution Cancelled",-1)),n("p",Tu,$(h.value?.message||"Session was terminated"),1)])])])):D("",!0),(u(),_e(so(v.value),{toolCall:s.toolCall},null,8,["toolCall"])),w.value==="permission_required"&&!f.value?(u(),m("div",xu,[n("div",Au,[E[9]||(E[9]=n("p",{class:"mb-2"},[n("strong",null,"ðŸ” Permission Required")],-1)),n("p",Mu,[E[7]||(E[7]=se("Claude wants to use the ",-1)),n("code",Ou,$(s.toolCall.name),1),E[8]||(E[8]=se(" tool.",-1))])]),k.value?(u(),m("div",Du,[n("div",Nu,[E[10]||(E[10]=n("h6",{class:"mb-2"}," ðŸ’¾ Suggested Permission Update ",-1)),E[11]||(E[11]=n("p",{class:"mb-2 small"},"Claude suggests updating your permissions:",-1)),n("div",Lu,[(u(!0),m(ie,null,le(s.toolCall.suggestions,(N,x)=>(u(),m("div",{key:x,class:"suggestion-item"},[n("code",null,$(z(N)),1)]))),128))]),E[12]||(E[12]=n("small",{class:"text-muted mt-2 d-block"}," This will prevent future permission prompts for this action. ",-1))])])):D("",!0),n("div",Iu,[k.value?(u(),m("button",{key:0,class:"btn btn-success",onClick:E[0]||(E[0]=N=>H("allow",!0)),disabled:a.value},$(a.value&&r.value==="approve-apply"?"â³ Submitting...":"âœ… Approve & Apply"),9,ju)):D("",!0),n("button",{class:Z(["btn",k.value?"btn-outline-success":"btn-success"]),onClick:E[1]||(E[1]=N=>H("allow",!1)),disabled:a.value},$(a.value&&r.value==="approve"?"â³ Submitting...":k.value?"âœ… Approve Only":"âœ… Approve"),11,Pu),n("button",{class:"btn btn-danger",onClick:E[2]||(E[2]=N=>H("deny",!1)),disabled:a.value}," ðŸš« "+$(a.value&&r.value==="deny"?"Submitting...":"Deny"),9,Ru)]),n("div",Wu,[E[13]||(E[13]=n("label",{class:"form-label fw-bold"}," Provide Guidance (Optional) ",-1)),E[14]||(E[14]=n("p",{class:"text-muted small mb-2"}," Provide guidance to help Claude retry with better context. If provided, Claude will continue with your guidance instead of stopping. ",-1)),ve(n("textarea",{"onUpdate:modelValue":E[3]||(E[3]=N=>c.value=N),class:"form-control mb-2",rows:"3",placeholder:"e.g., 'Try using a different approach...' or 'Make sure to check the file exists first...'",disabled:a.value},null,8,Hu),[[Le,c.value]]),c.value.trim()?(u(),m("button",{key:0,class:"btn btn-warning btn-sm",onClick:E[4]||(E[4]=N=>H("deny",!1,c.value)),disabled:a.value},$(a.value&&r.value==="deny-guidance"?"â³ Submitting...":"ðŸ”€ Provide Guidance & Continue"),9,Vu)):D("",!0)])])):D("",!0),w.value==="permission_required"&&f.value?(u(),m("div",Fu,[n("div",Bu,[n("div",Uu,[E[16]||(E[16]=n("span",{class:"me-2",style:{"font-size":"1.2rem"}},"ðŸš§",-1)),n("div",null,[E[15]||(E[15]=n("strong",null,"Permission Request Cancelled",-1)),n("p",qu,$(h.value?.message||"Session was terminated before permission could be granted"),1)])])])])):D("",!0),s.toolCall.permissionDecision==="deny"?(u(),m("div",zu,[n("div",Ku,[E[17]||(E[17]=se(" ðŸš« Permission denied ",-1)),s.toolCall.result?.message?(u(),m("span",Gu," - "+$(s.toolCall.result.message),1)):D("",!0)])])):D("",!0)])):D("",!0)],2))}},gn=ee(Yu,[["__scopeId","data-v-e339198b"]]),Ju={class:"tool-footer-container"},Xu=["aria-label","onKeydown"],Qu={class:"footer-left"},Zu={class:"footer-text"},ed={class:"footer-middle"},td={class:"footer-text"},sd={class:"footer-right"},nd={class:"expand-icon"},od={key:0,class:"tool-footer-expanded"},id={key:1,class:"active-tools-area"},ad={__name:"ToolFooter",props:{tools:{type:Array,required:!0,default:()=>[]}},setup(s){const e=s,t=Te(),o=oe(),i=j(!1);function a(v){return v.map((g,p)=>({tool:g,originalIndex:p})).sort((g,p)=>{if(g.tool.timestamp&&p.tool.timestamp){const d=new Date(g.tool.timestamp).getTime(),y=new Date(p.tool.timestamp).getTime();if(d!==y)return d-y}return g.originalIndex-p.originalIndex}).map(({tool:g})=>g)}const r=b(()=>{const v=e.tools.filter(g=>g.status==="executing"||g.status==="permission_required");return a(v)}),c=b(()=>{const v=e.tools.filter(g=>g.status!=="executing"&&g.status!=="permission_required");return a(v)}),f=b(()=>{const v=new Map;e.tools.forEach(k=>{const T=v.get(k.name)||0;v.set(k.name,T+1)});const g=Array.from(v.entries()).sort((k,T)=>T[1]-k[1]),p=g.slice(0,5),d=g.length-p.length,y=p.map(([k,T])=>`${k} (${T})`).join(", ");return d>0?`${y}, +${d} more`:y}),h=b(()=>{const v=e.tools.length;let g=0,p=0,d=0;e.tools.forEach(O=>{const q=o.currentSessionId;(q?t.isToolUseOrphaned(q,O.id):!1)?d++:O.status==="completed"&&!O.result?.error&&O.permissionDecision!=="deny"?g++:(O.status==="error"||O.result?.error||O.permissionDecision==="deny")&&p++});let y=[];g>0&&y.push(`${g} âœ…`),p>0&&y.push(`${p} âŒ`),d>0&&y.push(`${d} â¹ï¸`);const k=v===1?"tool":"tools",T=y.length>0?": "+y.join(" "):"";return`${v} ${k}${T}`}),l=b(()=>i.value?"â–²":"â–¼"),w=b(()=>{const v=o.currentSessionId,g=e.tools.some(k=>k.status==="error"||k.result?.error||k.permissionDecision==="deny"),p=e.tools.some(k=>v?t.isToolUseOrphaned(v,k.id):!1),d=r.value.length>0,y=e.tools.every(k=>!(v?t.isToolUseOrphaned(v,k.id):!1)&&k.status==="completed"&&!k.result?.error&&k.permissionDecision!=="deny");return g?"footer-status-error":p?"footer-status-orphaned":d?"footer-status-in-progress":y?"footer-status-success":""});function _(){i.value=!i.value}return(v,g)=>(u(),m("div",Ju,[n("div",{class:Z(["tool-footer-summary",w.value]),onClick:_,role:"button","aria-label":i.value?"Collapse tools":"Expand tools",tabindex:"0",onKeydown:[Re(_,["enter"]),Re(pe(_,["prevent"]),["space"])]},[n("div",Qu,[n("span",Zu,"Used: "+$(f.value),1)]),n("div",ed,[g[0]||(g[0]=n("span",{class:"footer-separator"},"|",-1)),n("span",td,$(h.value),1)]),n("div",sd,[n("span",nd,$(l.value),1)])],42,Xu),i.value?(u(),m("div",od,[(u(!0),m(ie,null,le(c.value,p=>(u(),_e(gn,{key:p.id,toolCall:p},null,8,["toolCall"]))),128))])):D("",!0),r.value.length>0?(u(),m("div",id,[(u(!0),m(ie,null,le(r.value,p=>(u(),_e(gn,{key:p.id,toolCall:p},null,8,["toolCall"]))),128))])):D("",!0)]))}},rd=ee(ad,[["__scopeId","data-v-7bae7ae1"]]),ld={class:"message-row message-row-assistant"},cd=["title"],ud={class:"message-content-column"},dd={key:0,class:"thinking-block mb-2"},md=["innerHTML"],pd={__name:"AssistantMessage",props:{message:{type:Object,required:!0},attachedTools:{type:Array,default:()=>[]}},setup(s){const e=s,t=Te(),o=oe();tt.setOptions({breaks:!0,gfm:!0});const i=b(()=>It(e.message.timestamp)),a=b(()=>e.message.metadata?.model||null),r=b(()=>{const g=i.value;return`assistant${a.value?`
Model: ${a.value}`:""}
${g}`}),c=b(()=>{const g=e.message.content||"";return g.trim().length>0&&g!=="Assistant response"}),f=b(()=>{const g=e.message.content||"";let p=tt.parse(g);return p=p.replace(/\n</g,"<"),p=p.replace(/\n+$/,""),is.sanitize(p)}),h=b(()=>e.message.metadata?.has_thinking&&e.message.metadata?.thinking_content),l=b(()=>e.message.metadata?.thinking_content||""),w=b(()=>{const g=e.message.metadata?.has_tool_uses&&e.message.metadata?.tool_uses?.length>0,p=e.attachedTools&&e.attachedTools.length>0;return g||p}),_=b(()=>{const g=e.message.metadata?.tool_uses||[],p=e.attachedTools||[],d=[...g],y=new Set(g.map(k=>k.id));for(const k of p)y.has(k.id)||d.push(k);return d}),v=b(()=>{const g=o.currentSessionId;if(!g)return[];const p=t.toolCallsBySession.get(g)||[];return _.value.map(d=>{const y=p.find(k=>k.id===d.id);return y||{id:d.id,name:d.name,input:d.input,status:"pending",result:null,timestamp:d.timestamp||e.message.timestamp,isExpanded:!0}})});return(g,p)=>(u(),m("div",ld,[n("div",{class:"message-speaker",title:r.value},[...p[0]||(p[0]=[n("span",{class:"speaker-label"},"assistant",-1)])],8,cd),n("div",ud,[h.value?(u(),m("div",dd,[ue(pa,{thinking:l.value},null,8,["thinking"])])):D("",!0),c.value?(u(),m("div",{key:1,class:"message-text",innerHTML:f.value},null,8,md)):D("",!0),w.value?(u(),_e(rd,{key:2,tools:v.value},null,8,["tools"])):D("",!0)])]))}},fd=ee(pd,[["__scopeId","data-v-2e32f6ef"]]),vd={key:0,class:"message-row message-row-compaction"},hd=["title"],_d={class:"message-content-column"},gd={class:"compaction-status-content"},bd={class:"text-muted ms-auto"},yd={key:1,class:"message-row message-row-system"},$d=["title"],wd={class:"message-content-column"},Ed={class:"system-text"},Cd={__name:"SystemMessage",props:{message:{type:Object,required:!0}},setup(s){const e=s,t=b(()=>It(e.message.timestamp)),o=b(()=>`system
${t.value}`),i=b(()=>e.message.metadata?.subtype==="status"&&e.message.metadata?.init_data?.status==="compacting");return(a,r)=>i.value?(u(),m("div",vd,[n("div",{class:"message-speaker",title:o.value},[...r[0]||(r[0]=[n("span",{class:"speaker-label"},"system",-1)])],8,hd),n("div",_d,[n("div",gd,[r[1]||(r[1]=n("span",{class:"me-2"},"ðŸ—œï¸",-1)),r[2]||(r[2]=n("strong",{class:"me-2"},"Context compaction in progress...",-1)),n("small",bd,$(t.value),1)])])])):(u(),m("div",yd,[n("div",{class:"message-speaker",title:o.value},[...r[3]||(r[3]=[n("span",{class:"speaker-label"},"system",-1)])],8,$d),n("div",wd,[n("span",Ed,$(s.message.content),1)])]))}},bn=ee(Cd,[["__scopeId","data-v-a078178f"]]),Sd={__name:"MessageItem",props:{message:{type:Object,required:!0},attachedTools:{type:Array,default:()=>[]}},setup(s){const e=s,t=b(()=>{switch(e.message.type){case"user":return aa;case"assistant":return fd;case"system":return bn;default:return bn}});return(o,i)=>(u(),_e(so(t.value),{message:s.message,attachedTools:s.attachedTools},null,8,["message","attachedTools"]))}},kd=ee(Sd,[["__scopeId","data-v-11dff525"]]);var ge="top",we="bottom",Ee="right",be="left",as="auto",Et=[ge,we,Ee,be],st="start",ft="end",oo="clippingParents",Bs="viewport",ct="popper",io="reference",js=Et.reduce(function(s,e){return s.concat([e+"-"+st,e+"-"+ft])},[]),Us=[].concat(Et,[as]).reduce(function(s,e){return s.concat([e,e+"-"+st,e+"-"+ft])},[]),ao="beforeRead",ro="read",lo="afterRead",co="beforeMain",uo="main",mo="afterMain",po="beforeWrite",fo="write",vo="afterWrite",ho=[ao,ro,lo,co,uo,mo,po,fo,vo];function Pe(s){return s?(s.nodeName||"").toLowerCase():null}function Ce(s){if(s==null)return window;if(s.toString()!=="[object Window]"){var e=s.ownerDocument;return e&&e.defaultView||window}return s}function nt(s){var e=Ce(s).Element;return s instanceof e||s instanceof Element}function ke(s){var e=Ce(s).HTMLElement;return s instanceof e||s instanceof HTMLElement}function qs(s){if(typeof ShadowRoot>"u")return!1;var e=Ce(s).ShadowRoot;return s instanceof e||s instanceof ShadowRoot}function Td(s){var e=s.state;Object.keys(e.elements).forEach(function(t){var o=e.styles[t]||{},i=e.attributes[t]||{},a=e.elements[t];!ke(a)||!Pe(a)||(Object.assign(a.style,o),Object.keys(i).forEach(function(r){var c=i[r];c===!1?a.removeAttribute(r):a.setAttribute(r,c===!0?"":c)}))})}function xd(s){var e=s.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(o){var i=e.elements[o],a=e.attributes[o]||{},r=Object.keys(e.styles.hasOwnProperty(o)?e.styles[o]:t[o]),c=r.reduce(function(f,h){return f[h]="",f},{});!ke(i)||!Pe(i)||(Object.assign(i.style,c),Object.keys(a).forEach(function(f){i.removeAttribute(f)}))})}}const _o={name:"applyStyles",enabled:!0,phase:"write",fn:Td,effect:xd,requires:["computeStyles"]};function Ie(s){return s.split("-")[0]}var et=Math.max,ts=Math.min,vt=Math.round;function Ps(){var s=navigator.userAgentData;return s!=null&&s.brands&&Array.isArray(s.brands)?s.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function go(){return!/^((?!chrome|android).)*safari/i.test(Ps())}function ht(s,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var o=s.getBoundingClientRect(),i=1,a=1;e&&ke(s)&&(i=s.offsetWidth>0&&vt(o.width)/s.offsetWidth||1,a=s.offsetHeight>0&&vt(o.height)/s.offsetHeight||1);var r=nt(s)?Ce(s):window,c=r.visualViewport,f=!go()&&t,h=(o.left+(f&&c?c.offsetLeft:0))/i,l=(o.top+(f&&c?c.offsetTop:0))/a,w=o.width/i,_=o.height/a;return{width:w,height:_,top:l,right:h+w,bottom:l+_,left:h,x:h,y:l}}function zs(s){var e=ht(s),t=s.offsetWidth,o=s.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-o)<=1&&(o=e.height),{x:s.offsetLeft,y:s.offsetTop,width:t,height:o}}function bo(s,e){var t=e.getRootNode&&e.getRootNode();if(s.contains(e))return!0;if(t&&qs(t)){var o=e;do{if(o&&s.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function Ve(s){return Ce(s).getComputedStyle(s)}function Ad(s){return["table","td","th"].indexOf(Pe(s))>=0}function Ge(s){return((nt(s)?s.ownerDocument:s.document)||window.document).documentElement}function rs(s){return Pe(s)==="html"?s:s.assignedSlot||s.parentNode||(qs(s)?s.host:null)||Ge(s)}function yn(s){return!ke(s)||Ve(s).position==="fixed"?null:s.offsetParent}function Md(s){var e=/firefox/i.test(Ps()),t=/Trident/i.test(Ps());if(t&&ke(s)){var o=Ve(s);if(o.position==="fixed")return null}var i=rs(s);for(qs(i)&&(i=i.host);ke(i)&&["html","body"].indexOf(Pe(i))<0;){var a=Ve(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function jt(s){for(var e=Ce(s),t=yn(s);t&&Ad(t)&&Ve(t).position==="static";)t=yn(t);return t&&(Pe(t)==="html"||Pe(t)==="body"&&Ve(t).position==="static")?e:t||Md(s)||e}function Ks(s){return["top","bottom"].indexOf(s)>=0?"x":"y"}function Ot(s,e,t){return et(s,ts(e,t))}function Od(s,e,t){var o=Ot(s,e,t);return o>t?t:o}function yo(){return{top:0,right:0,bottom:0,left:0}}function $o(s){return Object.assign({},yo(),s)}function wo(s,e){return e.reduce(function(t,o){return t[o]=s,t},{})}var Dd=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,$o(typeof e!="number"?e:wo(e,Et))};function Nd(s){var e,t=s.state,o=s.name,i=s.options,a=t.elements.arrow,r=t.modifiersData.popperOffsets,c=Ie(t.placement),f=Ks(c),h=[be,Ee].indexOf(c)>=0,l=h?"height":"width";if(!(!a||!r)){var w=Dd(i.padding,t),_=zs(a),v=f==="y"?ge:be,g=f==="y"?we:Ee,p=t.rects.reference[l]+t.rects.reference[f]-r[f]-t.rects.popper[l],d=r[f]-t.rects.reference[f],y=jt(a),k=y?f==="y"?y.clientHeight||0:y.clientWidth||0:0,T=p/2-d/2,O=w[v],q=k-_[l]-w[g],G=k/2-_[l]/2+T,I=Ot(O,G,q),B=f;t.modifiersData[o]=(e={},e[B]=I,e.centerOffset=I-G,e)}}function Ld(s){var e=s.state,t=s.options,o=t.element,i=o===void 0?"[data-popper-arrow]":o;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||bo(e.elements.popper,i)&&(e.elements.arrow=i))}const Eo={name:"arrow",enabled:!0,phase:"main",fn:Nd,effect:Ld,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function _t(s){return s.split("-")[1]}var Id={top:"auto",right:"auto",bottom:"auto",left:"auto"};function jd(s,e){var t=s.x,o=s.y,i=e.devicePixelRatio||1;return{x:vt(t*i)/i||0,y:vt(o*i)/i||0}}function $n(s){var e,t=s.popper,o=s.popperRect,i=s.placement,a=s.variation,r=s.offsets,c=s.position,f=s.gpuAcceleration,h=s.adaptive,l=s.roundOffsets,w=s.isFixed,_=r.x,v=_===void 0?0:_,g=r.y,p=g===void 0?0:g,d=typeof l=="function"?l({x:v,y:p}):{x:v,y:p};v=d.x,p=d.y;var y=r.hasOwnProperty("x"),k=r.hasOwnProperty("y"),T=be,O=ge,q=window;if(h){var G=jt(t),I="clientHeight",B="clientWidth";if(G===Ce(t)&&(G=Ge(t),Ve(G).position!=="static"&&c==="absolute"&&(I="scrollHeight",B="scrollWidth")),G=G,i===ge||(i===be||i===Ee)&&a===ft){O=we;var A=w&&G===q&&q.visualViewport?q.visualViewport.height:G[I];p-=A-o.height,p*=f?1:-1}if(i===be||(i===ge||i===we)&&a===ft){T=Ee;var L=w&&G===q&&q.visualViewport?q.visualViewport.width:G[B];v-=L-o.width,v*=f?1:-1}}var z=Object.assign({position:c},h&&Id),H=l===!0?jd({x:v,y:p},Ce(t)):{x:v,y:p};if(v=H.x,p=H.y,f){var C;return Object.assign({},z,(C={},C[O]=k?"0":"",C[T]=y?"0":"",C.transform=(q.devicePixelRatio||1)<=1?"translate("+v+"px, "+p+"px)":"translate3d("+v+"px, "+p+"px, 0)",C))}return Object.assign({},z,(e={},e[O]=k?p+"px":"",e[T]=y?v+"px":"",e.transform="",e))}function Pd(s){var e=s.state,t=s.options,o=t.gpuAcceleration,i=o===void 0?!0:o,a=t.adaptive,r=a===void 0?!0:a,c=t.roundOffsets,f=c===void 0?!0:c,h={placement:Ie(e.placement),variation:_t(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,$n(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:r,roundOffsets:f})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,$n(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Co={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Pd,data:{}};var Bt={passive:!0};function Rd(s){var e=s.state,t=s.instance,o=s.options,i=o.scroll,a=i===void 0?!0:i,r=o.resize,c=r===void 0?!0:r,f=Ce(e.elements.popper),h=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&h.forEach(function(l){l.addEventListener("scroll",t.update,Bt)}),c&&f.addEventListener("resize",t.update,Bt),function(){a&&h.forEach(function(l){l.removeEventListener("scroll",t.update,Bt)}),c&&f.removeEventListener("resize",t.update,Bt)}}const So={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Rd,data:{}};var Wd={left:"right",right:"left",bottom:"top",top:"bottom"};function Jt(s){return s.replace(/left|right|bottom|top/g,function(e){return Wd[e]})}var Hd={start:"end",end:"start"};function wn(s){return s.replace(/start|end/g,function(e){return Hd[e]})}function Gs(s){var e=Ce(s),t=e.pageXOffset,o=e.pageYOffset;return{scrollLeft:t,scrollTop:o}}function Ys(s){return ht(Ge(s)).left+Gs(s).scrollLeft}function Vd(s,e){var t=Ce(s),o=Ge(s),i=t.visualViewport,a=o.clientWidth,r=o.clientHeight,c=0,f=0;if(i){a=i.width,r=i.height;var h=go();(h||!h&&e==="fixed")&&(c=i.offsetLeft,f=i.offsetTop)}return{width:a,height:r,x:c+Ys(s),y:f}}function Fd(s){var e,t=Ge(s),o=Gs(s),i=(e=s.ownerDocument)==null?void 0:e.body,a=et(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),r=et(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),c=-o.scrollLeft+Ys(s),f=-o.scrollTop;return Ve(i||t).direction==="rtl"&&(c+=et(t.clientWidth,i?i.clientWidth:0)-a),{width:a,height:r,x:c,y:f}}function Js(s){var e=Ve(s),t=e.overflow,o=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+o)}function ko(s){return["html","body","#document"].indexOf(Pe(s))>=0?s.ownerDocument.body:ke(s)&&Js(s)?s:ko(rs(s))}function Dt(s,e){var t;e===void 0&&(e=[]);var o=ko(s),i=o===((t=s.ownerDocument)==null?void 0:t.body),a=Ce(o),r=i?[a].concat(a.visualViewport||[],Js(o)?o:[]):o,c=e.concat(r);return i?c:c.concat(Dt(rs(r)))}function Rs(s){return Object.assign({},s,{left:s.x,top:s.y,right:s.x+s.width,bottom:s.y+s.height})}function Bd(s,e){var t=ht(s,!1,e==="fixed");return t.top=t.top+s.clientTop,t.left=t.left+s.clientLeft,t.bottom=t.top+s.clientHeight,t.right=t.left+s.clientWidth,t.width=s.clientWidth,t.height=s.clientHeight,t.x=t.left,t.y=t.top,t}function En(s,e,t){return e===Bs?Rs(Vd(s,t)):nt(e)?Bd(e,t):Rs(Fd(Ge(s)))}function Ud(s){var e=Dt(rs(s)),t=["absolute","fixed"].indexOf(Ve(s).position)>=0,o=t&&ke(s)?jt(s):s;return nt(o)?e.filter(function(i){return nt(i)&&bo(i,o)&&Pe(i)!=="body"}):[]}function qd(s,e,t,o){var i=e==="clippingParents"?Ud(s):[].concat(e),a=[].concat(i,[t]),r=a[0],c=a.reduce(function(f,h){var l=En(s,h,o);return f.top=et(l.top,f.top),f.right=ts(l.right,f.right),f.bottom=ts(l.bottom,f.bottom),f.left=et(l.left,f.left),f},En(s,r,o));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function To(s){var e=s.reference,t=s.element,o=s.placement,i=o?Ie(o):null,a=o?_t(o):null,r=e.x+e.width/2-t.width/2,c=e.y+e.height/2-t.height/2,f;switch(i){case ge:f={x:r,y:e.y-t.height};break;case we:f={x:r,y:e.y+e.height};break;case Ee:f={x:e.x+e.width,y:c};break;case be:f={x:e.x-t.width,y:c};break;default:f={x:e.x,y:e.y}}var h=i?Ks(i):null;if(h!=null){var l=h==="y"?"height":"width";switch(a){case st:f[h]=f[h]-(e[l]/2-t[l]/2);break;case ft:f[h]=f[h]+(e[l]/2-t[l]/2);break}}return f}function gt(s,e){e===void 0&&(e={});var t=e,o=t.placement,i=o===void 0?s.placement:o,a=t.strategy,r=a===void 0?s.strategy:a,c=t.boundary,f=c===void 0?oo:c,h=t.rootBoundary,l=h===void 0?Bs:h,w=t.elementContext,_=w===void 0?ct:w,v=t.altBoundary,g=v===void 0?!1:v,p=t.padding,d=p===void 0?0:p,y=$o(typeof d!="number"?d:wo(d,Et)),k=_===ct?io:ct,T=s.rects.popper,O=s.elements[g?k:_],q=qd(nt(O)?O:O.contextElement||Ge(s.elements.popper),f,l,r),G=ht(s.elements.reference),I=To({reference:G,element:T,placement:i}),B=Rs(Object.assign({},T,I)),A=_===ct?B:G,L={top:q.top-A.top+y.top,bottom:A.bottom-q.bottom+y.bottom,left:q.left-A.left+y.left,right:A.right-q.right+y.right},z=s.modifiersData.offset;if(_===ct&&z){var H=z[i];Object.keys(L).forEach(function(C){var E=[Ee,we].indexOf(C)>=0?1:-1,N=[ge,we].indexOf(C)>=0?"y":"x";L[C]+=H[N]*E})}return L}function zd(s,e){e===void 0&&(e={});var t=e,o=t.placement,i=t.boundary,a=t.rootBoundary,r=t.padding,c=t.flipVariations,f=t.allowedAutoPlacements,h=f===void 0?Us:f,l=_t(o),w=l?c?js:js.filter(function(g){return _t(g)===l}):Et,_=w.filter(function(g){return h.indexOf(g)>=0});_.length===0&&(_=w);var v=_.reduce(function(g,p){return g[p]=gt(s,{placement:p,boundary:i,rootBoundary:a,padding:r})[Ie(p)],g},{});return Object.keys(v).sort(function(g,p){return v[g]-v[p]})}function Kd(s){if(Ie(s)===as)return[];var e=Jt(s);return[wn(s),e,wn(e)]}function Gd(s){var e=s.state,t=s.options,o=s.name;if(!e.modifiersData[o]._skip){for(var i=t.mainAxis,a=i===void 0?!0:i,r=t.altAxis,c=r===void 0?!0:r,f=t.fallbackPlacements,h=t.padding,l=t.boundary,w=t.rootBoundary,_=t.altBoundary,v=t.flipVariations,g=v===void 0?!0:v,p=t.allowedAutoPlacements,d=e.options.placement,y=Ie(d),k=y===d,T=f||(k||!g?[Jt(d)]:Kd(d)),O=[d].concat(T).reduce(function(te,ce){return te.concat(Ie(ce)===as?zd(e,{placement:ce,boundary:l,rootBoundary:w,padding:h,flipVariations:g,allowedAutoPlacements:p}):ce)},[]),q=e.rects.reference,G=e.rects.popper,I=new Map,B=!0,A=O[0],L=0;L<O.length;L++){var z=O[L],H=Ie(z),C=_t(z)===st,E=[ge,we].indexOf(H)>=0,N=E?"width":"height",x=gt(e,{placement:z,boundary:l,rootBoundary:w,altBoundary:_,padding:h}),S=E?C?Ee:be:C?we:ge;q[N]>G[N]&&(S=Jt(S));var P=Jt(S),F=[];if(a&&F.push(x[H]<=0),c&&F.push(x[S]<=0,x[P]<=0),F.every(function(te){return te})){A=z,B=!1;break}I.set(z,F)}if(B)for(var Y=g?3:1,J=function(ce){var U=O.find(function(R){var W=I.get(R);if(W)return W.slice(0,ce).every(function(M){return M})});if(U)return A=U,"break"},re=Y;re>0;re--){var ae=J(re);if(ae==="break")break}e.placement!==A&&(e.modifiersData[o]._skip=!0,e.placement=A,e.reset=!0)}}const xo={name:"flip",enabled:!0,phase:"main",fn:Gd,requiresIfExists:["offset"],data:{_skip:!1}};function Cn(s,e,t){return t===void 0&&(t={x:0,y:0}),{top:s.top-e.height-t.y,right:s.right-e.width+t.x,bottom:s.bottom-e.height+t.y,left:s.left-e.width-t.x}}function Sn(s){return[ge,Ee,we,be].some(function(e){return s[e]>=0})}function Yd(s){var e=s.state,t=s.name,o=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,r=gt(e,{elementContext:"reference"}),c=gt(e,{altBoundary:!0}),f=Cn(r,o),h=Cn(c,i,a),l=Sn(f),w=Sn(h);e.modifiersData[t]={referenceClippingOffsets:f,popperEscapeOffsets:h,isReferenceHidden:l,hasPopperEscaped:w},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":w})}const Ao={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Yd};function Jd(s,e,t){var o=Ie(s),i=[be,ge].indexOf(o)>=0?-1:1,a=typeof t=="function"?t(Object.assign({},e,{placement:s})):t,r=a[0],c=a[1];return r=r||0,c=(c||0)*i,[be,Ee].indexOf(o)>=0?{x:c,y:r}:{x:r,y:c}}function Xd(s){var e=s.state,t=s.options,o=s.name,i=t.offset,a=i===void 0?[0,0]:i,r=Us.reduce(function(l,w){return l[w]=Jd(w,e.rects,a),l},{}),c=r[e.placement],f=c.x,h=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=f,e.modifiersData.popperOffsets.y+=h),e.modifiersData[o]=r}const Mo={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Xd};function Qd(s){var e=s.state,t=s.name;e.modifiersData[t]=To({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const Oo={name:"popperOffsets",enabled:!0,phase:"read",fn:Qd,data:{}};function Zd(s){return s==="x"?"y":"x"}function em(s){var e=s.state,t=s.options,o=s.name,i=t.mainAxis,a=i===void 0?!0:i,r=t.altAxis,c=r===void 0?!1:r,f=t.boundary,h=t.rootBoundary,l=t.altBoundary,w=t.padding,_=t.tether,v=_===void 0?!0:_,g=t.tetherOffset,p=g===void 0?0:g,d=gt(e,{boundary:f,rootBoundary:h,padding:w,altBoundary:l}),y=Ie(e.placement),k=_t(e.placement),T=!k,O=Ks(y),q=Zd(O),G=e.modifiersData.popperOffsets,I=e.rects.reference,B=e.rects.popper,A=typeof p=="function"?p(Object.assign({},e.rects,{placement:e.placement})):p,L=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),z=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,H={x:0,y:0};if(G){if(a){var C,E=O==="y"?ge:be,N=O==="y"?we:Ee,x=O==="y"?"height":"width",S=G[O],P=S+d[E],F=S-d[N],Y=v?-B[x]/2:0,J=k===st?I[x]:B[x],re=k===st?-B[x]:-I[x],ae=e.elements.arrow,te=v&&ae?zs(ae):{width:0,height:0},ce=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:yo(),U=ce[E],R=ce[N],W=Ot(0,I[x],te[x]),M=T?I[x]/2-Y-W-U-L.mainAxis:J-W-U-L.mainAxis,K=T?-I[x]/2+Y+W+R+L.mainAxis:re+W+R+L.mainAxis,X=e.elements.arrow&&jt(e.elements.arrow),Ne=X?O==="y"?X.clientTop||0:X.clientLeft||0:0,fe=(C=z?.[O])!=null?C:0,Tt=S+M-fe-Ne,xt=S+K-fe,at=Ot(v?ts(P,Tt):P,S,v?et(F,xt):F);G[O]=at,H[O]=at-S}if(c){var Vt,di=O==="x"?ge:be,mi=O==="x"?we:Ee,Xe=G[q],Ft=q==="y"?"height":"width",on=Xe+d[di],an=Xe-d[mi],fs=[ge,be].indexOf(y)!==-1,rn=(Vt=z?.[q])!=null?Vt:0,ln=fs?on:Xe-I[Ft]-B[Ft]-rn+L.altAxis,cn=fs?Xe+I[Ft]+B[Ft]-rn-L.altAxis:an,un=v&&fs?Od(ln,Xe,cn):Ot(v?ln:on,Xe,v?cn:an);G[q]=un,H[q]=un-Xe}e.modifiersData[o]=H}}const Do={name:"preventOverflow",enabled:!0,phase:"main",fn:em,requiresIfExists:["offset"]};function tm(s){return{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}}function sm(s){return s===Ce(s)||!ke(s)?Gs(s):tm(s)}function nm(s){var e=s.getBoundingClientRect(),t=vt(e.width)/s.offsetWidth||1,o=vt(e.height)/s.offsetHeight||1;return t!==1||o!==1}function om(s,e,t){t===void 0&&(t=!1);var o=ke(e),i=ke(e)&&nm(e),a=Ge(e),r=ht(s,i,t),c={scrollLeft:0,scrollTop:0},f={x:0,y:0};return(o||!o&&!t)&&((Pe(e)!=="body"||Js(a))&&(c=sm(e)),ke(e)?(f=ht(e,!0),f.x+=e.clientLeft,f.y+=e.clientTop):a&&(f.x=Ys(a))),{x:r.left+c.scrollLeft-f.x,y:r.top+c.scrollTop-f.y,width:r.width,height:r.height}}function im(s){var e=new Map,t=new Set,o=[];s.forEach(function(a){e.set(a.name,a)});function i(a){t.add(a.name);var r=[].concat(a.requires||[],a.requiresIfExists||[]);r.forEach(function(c){if(!t.has(c)){var f=e.get(c);f&&i(f)}}),o.push(a)}return s.forEach(function(a){t.has(a.name)||i(a)}),o}function am(s){var e=im(s);return ho.reduce(function(t,o){return t.concat(e.filter(function(i){return i.phase===o}))},[])}function rm(s){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(s())})})),e}}function lm(s){var e=s.reduce(function(t,o){var i=t[o.name];return t[o.name]=i?Object.assign({},i,o,{options:Object.assign({},i.options,o.options),data:Object.assign({},i.data,o.data)}):o,t},{});return Object.keys(e).map(function(t){return e[t]})}var kn={placement:"bottom",modifiers:[],strategy:"absolute"};function Tn(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return!e.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function No(s){s===void 0&&(s={});var e=s,t=e.defaultModifiers,o=t===void 0?[]:t,i=e.defaultOptions,a=i===void 0?kn:i;return function(c,f,h){h===void 0&&(h=a);var l={placement:"bottom",orderedModifiers:[],options:Object.assign({},kn,a),modifiersData:{},elements:{reference:c,popper:f},attributes:{},styles:{}},w=[],_=!1,v={state:l,setOptions:function(y){var k=typeof y=="function"?y(l.options):y;p(),l.options=Object.assign({},a,l.options,k),l.scrollParents={reference:nt(c)?Dt(c):c.contextElement?Dt(c.contextElement):[],popper:Dt(f)};var T=am(lm([].concat(o,l.options.modifiers)));return l.orderedModifiers=T.filter(function(O){return O.enabled}),g(),v.update()},forceUpdate:function(){if(!_){var y=l.elements,k=y.reference,T=y.popper;if(Tn(k,T)){l.rects={reference:om(k,jt(T),l.options.strategy==="fixed"),popper:zs(T)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach(function(L){return l.modifiersData[L.name]=Object.assign({},L.data)});for(var O=0;O<l.orderedModifiers.length;O++){if(l.reset===!0){l.reset=!1,O=-1;continue}var q=l.orderedModifiers[O],G=q.fn,I=q.options,B=I===void 0?{}:I,A=q.name;typeof G=="function"&&(l=G({state:l,options:B,name:A,instance:v})||l)}}}},update:rm(function(){return new Promise(function(d){v.forceUpdate(),d(l)})}),destroy:function(){p(),_=!0}};if(!Tn(c,f))return v;v.setOptions(h).then(function(d){!_&&h.onFirstUpdate&&h.onFirstUpdate(d)});function g(){l.orderedModifiers.forEach(function(d){var y=d.name,k=d.options,T=k===void 0?{}:k,O=d.effect;if(typeof O=="function"){var q=O({state:l,name:y,instance:v,options:T}),G=function(){};w.push(q||G)}})}function p(){w.forEach(function(d){return d()}),w=[]}return v}}var cm=[So,Oo,Co,_o,Mo,xo,Do,Eo,Ao],Xs=No({defaultModifiers:cm});const Lo=Object.freeze(Object.defineProperty({__proto__:null,afterMain:mo,afterRead:lo,afterWrite:vo,applyStyles:_o,arrow:Eo,auto:as,basePlacements:Et,beforeMain:co,beforeRead:ao,beforeWrite:po,bottom:we,clippingParents:oo,computeStyles:Co,createPopper:Xs,detectOverflow:gt,end:ft,eventListeners:So,flip:xo,hide:Ao,left:be,main:uo,modifierPhases:ho,offset:Mo,placements:Us,popper:ct,popperGenerator:No,popperOffsets:Oo,preventOverflow:Do,read:ro,reference:io,right:Ee,start:st,top:ge,variationPlacements:js,viewport:Bs,write:fo},Symbol.toStringTag,{value:"Module"}));const Be=new Map,ys={set(s,e,t){Be.has(s)||Be.set(s,new Map);const o=Be.get(s);if(!o.has(e)&&o.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(o.keys())[0]}.`);return}o.set(e,t)},get(s,e){return Be.has(s)&&Be.get(s).get(e)||null},remove(s,e){if(!Be.has(s))return;const t=Be.get(s);t.delete(e),t.size===0&&Be.delete(s)}},um=1e6,dm=1e3,Ws="transitionend",Io=s=>(s&&window.CSS&&window.CSS.escape&&(s=s.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),s),mm=s=>s==null?`${s}`:Object.prototype.toString.call(s).match(/\s([a-z]+)/i)[1].toLowerCase(),pm=s=>{do s+=Math.floor(Math.random()*um);while(document.getElementById(s));return s},fm=s=>{if(!s)return 0;let{transitionDuration:e,transitionDelay:t}=window.getComputedStyle(s);const o=Number.parseFloat(e),i=Number.parseFloat(t);return!o&&!i?0:(e=e.split(",")[0],t=t.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(t))*dm)},jo=s=>{s.dispatchEvent(new Event(Ws))},We=s=>!s||typeof s!="object"?!1:(typeof s.jquery<"u"&&(s=s[0]),typeof s.nodeType<"u"),Ue=s=>We(s)?s.jquery?s[0]:s:typeof s=="string"&&s.length>0?document.querySelector(Io(s)):null,Ct=s=>{if(!We(s)||s.getClientRects().length===0)return!1;const e=getComputedStyle(s).getPropertyValue("visibility")==="visible",t=s.closest("details:not([open])");if(!t)return e;if(t!==s){const o=s.closest("summary");if(o&&o.parentNode!==t||o===null)return!1}return e},qe=s=>!s||s.nodeType!==Node.ELEMENT_NODE||s.classList.contains("disabled")?!0:typeof s.disabled<"u"?s.disabled:s.hasAttribute("disabled")&&s.getAttribute("disabled")!=="false",Po=s=>{if(!document.documentElement.attachShadow)return null;if(typeof s.getRootNode=="function"){const e=s.getRootNode();return e instanceof ShadowRoot?e:null}return s instanceof ShadowRoot?s:s.parentNode?Po(s.parentNode):null},ss=()=>{},Pt=s=>{s.offsetHeight},Ro=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,$s=[],vm=s=>{document.readyState==="loading"?($s.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of $s)e()}),$s.push(s)):s()},xe=()=>document.documentElement.dir==="rtl",Oe=s=>{vm(()=>{const e=Ro();if(e){const t=s.NAME,o=e.fn[t];e.fn[t]=s.jQueryInterface,e.fn[t].Constructor=s,e.fn[t].noConflict=()=>(e.fn[t]=o,s.jQueryInterface)}})},ye=(s,e=[],t=s)=>typeof s=="function"?s.call(...e):t,Wo=(s,e,t=!0)=>{if(!t){ye(s);return}const i=fm(e)+5;let a=!1;const r=({target:c})=>{c===e&&(a=!0,e.removeEventListener(Ws,r),ye(s))};e.addEventListener(Ws,r),setTimeout(()=>{a||jo(e)},i)},Qs=(s,e,t,o)=>{const i=s.length;let a=s.indexOf(e);return a===-1?!t&&o?s[i-1]:s[0]:(a+=t?1:-1,o&&(a=(a+i)%i),s[Math.max(0,Math.min(a,i-1))])},hm=/[^.]*(?=\..*)\.|.*/,_m=/\..*/,gm=/::\d+$/,ws={};let xn=1;const Ho={mouseenter:"mouseover",mouseleave:"mouseout"},bm=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Vo(s,e){return e&&`${e}::${xn++}`||s.uidEvent||xn++}function Fo(s){const e=Vo(s);return s.uidEvent=e,ws[e]=ws[e]||{},ws[e]}function ym(s,e){return function t(o){return Zs(o,{delegateTarget:s}),t.oneOff&&V.off(s,o.type,e),e.apply(s,[o])}}function $m(s,e,t){return function o(i){const a=s.querySelectorAll(e);for(let{target:r}=i;r&&r!==this;r=r.parentNode)for(const c of a)if(c===r)return Zs(i,{delegateTarget:r}),o.oneOff&&V.off(s,i.type,e,t),t.apply(r,[i])}}function Bo(s,e,t=null){return Object.values(s).find(o=>o.callable===e&&o.delegationSelector===t)}function Uo(s,e,t){const o=typeof e=="string",i=o?t:e||t;let a=qo(s);return bm.has(a)||(a=s),[o,i,a]}function An(s,e,t,o,i){if(typeof e!="string"||!s)return;let[a,r,c]=Uo(e,t,o);e in Ho&&(r=(g=>function(p){if(!p.relatedTarget||p.relatedTarget!==p.delegateTarget&&!p.delegateTarget.contains(p.relatedTarget))return g.call(this,p)})(r));const f=Fo(s),h=f[c]||(f[c]={}),l=Bo(h,r,a?t:null);if(l){l.oneOff=l.oneOff&&i;return}const w=Vo(r,e.replace(hm,"")),_=a?$m(s,t,r):ym(s,r);_.delegationSelector=a?t:null,_.callable=r,_.oneOff=i,_.uidEvent=w,h[w]=_,s.addEventListener(c,_,a)}function Hs(s,e,t,o,i){const a=Bo(e[t],o,i);a&&(s.removeEventListener(t,a,!!i),delete e[t][a.uidEvent])}function wm(s,e,t,o){const i=e[t]||{};for(const[a,r]of Object.entries(i))a.includes(o)&&Hs(s,e,t,r.callable,r.delegationSelector)}function qo(s){return s=s.replace(_m,""),Ho[s]||s}const V={on(s,e,t,o){An(s,e,t,o,!1)},one(s,e,t,o){An(s,e,t,o,!0)},off(s,e,t,o){if(typeof e!="string"||!s)return;const[i,a,r]=Uo(e,t,o),c=r!==e,f=Fo(s),h=f[r]||{},l=e.startsWith(".");if(typeof a<"u"){if(!Object.keys(h).length)return;Hs(s,f,r,a,i?t:null);return}if(l)for(const w of Object.keys(f))wm(s,f,w,e.slice(1));for(const[w,_]of Object.entries(h)){const v=w.replace(gm,"");(!c||e.includes(v))&&Hs(s,f,r,_.callable,_.delegationSelector)}},trigger(s,e,t){if(typeof e!="string"||!s)return null;const o=Ro(),i=qo(e),a=e!==i;let r=null,c=!0,f=!0,h=!1;a&&o&&(r=o.Event(e,t),o(s).trigger(r),c=!r.isPropagationStopped(),f=!r.isImmediatePropagationStopped(),h=r.isDefaultPrevented());const l=Zs(new Event(e,{bubbles:c,cancelable:!0}),t);return h&&l.preventDefault(),f&&s.dispatchEvent(l),l.defaultPrevented&&r&&r.preventDefault(),l}};function Zs(s,e={}){for(const[t,o]of Object.entries(e))try{s[t]=o}catch{Object.defineProperty(s,t,{configurable:!0,get(){return o}})}return s}function Mn(s){if(s==="true")return!0;if(s==="false")return!1;if(s===Number(s).toString())return Number(s);if(s===""||s==="null")return null;if(typeof s!="string")return s;try{return JSON.parse(decodeURIComponent(s))}catch{return s}}function Es(s){return s.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const He={setDataAttribute(s,e,t){s.setAttribute(`data-bs-${Es(e)}`,t)},removeDataAttribute(s,e){s.removeAttribute(`data-bs-${Es(e)}`)},getDataAttributes(s){if(!s)return{};const e={},t=Object.keys(s.dataset).filter(o=>o.startsWith("bs")&&!o.startsWith("bsConfig"));for(const o of t){let i=o.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1),e[i]=Mn(s.dataset[o])}return e},getDataAttribute(s,e){return Mn(s.getAttribute(`data-bs-${Es(e)}`))}};class Rt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const o=We(t)?He.getDataAttribute(t,"config"):{};return{...this.constructor.Default,...typeof o=="object"?o:{},...We(t)?He.getDataAttributes(t):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[o,i]of Object.entries(t)){const a=e[o],r=We(a)?"element":mm(a);if(!new RegExp(i).test(r))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${o}" provided type "${r}" but expected type "${i}".`)}}}const Em="5.3.8";class De extends Rt{constructor(e,t){super(),e=Ue(e),e&&(this._element=e,this._config=this._getConfig(t),ys.set(this._element,this.constructor.DATA_KEY,this))}dispose(){ys.remove(this._element,this.constructor.DATA_KEY),V.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,o=!0){Wo(e,t,o)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return ys.get(Ue(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,typeof t=="object"?t:null)}static get VERSION(){return Em}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Cs=s=>{let e=s.getAttribute("data-bs-target");if(!e||e==="#"){let t=s.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),e=t&&t!=="#"?t.trim():null}return e?e.split(",").map(t=>Io(t)).join(","):null},Q={find(s,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,s))},findOne(s,e=document.documentElement){return Element.prototype.querySelector.call(e,s)},children(s,e){return[].concat(...s.children).filter(t=>t.matches(e))},parents(s,e){const t=[];let o=s.parentNode.closest(e);for(;o;)t.push(o),o=o.parentNode.closest(e);return t},prev(s,e){let t=s.previousElementSibling;for(;t;){if(t.matches(e))return[t];t=t.previousElementSibling}return[]},next(s,e){let t=s.nextElementSibling;for(;t;){if(t.matches(e))return[t];t=t.nextElementSibling}return[]},focusableChildren(s){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(e,s).filter(t=>!qe(t)&&Ct(t))},getSelectorFromElement(s){const e=Cs(s);return e&&Q.findOne(e)?e:null},getElementFromSelector(s){const e=Cs(s);return e?Q.findOne(e):null},getMultipleElementsFromSelector(s){const e=Cs(s);return e?Q.find(e):[]}},ls=(s,e="hide")=>{const t=`click.dismiss${s.EVENT_KEY}`,o=s.NAME;V.on(document,t,`[data-bs-dismiss="${o}"]`,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),qe(this))return;const a=Q.getElementFromSelector(this)||this.closest(`.${o}`);s.getOrCreateInstance(a)[e]()})},Cm="alert",Sm="bs.alert",zo=`.${Sm}`,km=`close${zo}`,Tm=`closed${zo}`,xm="fade",Am="show";class cs extends De{static get NAME(){return Cm}close(){if(V.trigger(this._element,km).defaultPrevented)return;this._element.classList.remove(Am);const t=this._element.classList.contains(xm);this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),V.trigger(this._element,Tm),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=cs.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}ls(cs,"close");Oe(cs);const Mm="button",Om="bs.button",Dm=`.${Om}`,Nm=".data-api",Lm="active",On='[data-bs-toggle="button"]',Im=`click${Dm}${Nm}`;class us extends De{static get NAME(){return Mm}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Lm))}static jQueryInterface(e){return this.each(function(){const t=us.getOrCreateInstance(this);e==="toggle"&&t[e]()})}}V.on(document,Im,On,s=>{s.preventDefault();const e=s.target.closest(On);us.getOrCreateInstance(e).toggle()});Oe(us);const jm="swipe",St=".bs.swipe",Pm=`touchstart${St}`,Rm=`touchmove${St}`,Wm=`touchend${St}`,Hm=`pointerdown${St}`,Vm=`pointerup${St}`,Fm="touch",Bm="pen",Um="pointer-event",qm=40,zm={endCallback:null,leftCallback:null,rightCallback:null},Km={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ns extends Rt{constructor(e,t){super(),this._element=e,!(!e||!ns.isSupported())&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return zm}static get DefaultType(){return Km}static get NAME(){return jm}dispose(){V.off(this._element,St)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),ye(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=qm)return;const t=e/this._deltaX;this._deltaX=0,t&&ye(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(V.on(this._element,Hm,e=>this._start(e)),V.on(this._element,Vm,e=>this._end(e)),this._element.classList.add(Um)):(V.on(this._element,Pm,e=>this._start(e)),V.on(this._element,Rm,e=>this._move(e)),V.on(this._element,Wm,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===Bm||e.pointerType===Fm)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Gm="carousel",Ym="bs.carousel",Ye=`.${Ym}`,Ko=".data-api",Jm="ArrowLeft",Xm="ArrowRight",Qm=500,At="next",rt="prev",ut="left",Xt="right",Zm=`slide${Ye}`,Ss=`slid${Ye}`,ep=`keydown${Ye}`,tp=`mouseenter${Ye}`,sp=`mouseleave${Ye}`,np=`dragstart${Ye}`,op=`load${Ye}${Ko}`,ip=`click${Ye}${Ko}`,Go="carousel",Ut="active",ap="slide",rp="carousel-item-end",lp="carousel-item-start",cp="carousel-item-next",up="carousel-item-prev",Yo=".active",Jo=".carousel-item",dp=Yo+Jo,mp=".carousel-item img",pp=".carousel-indicators",fp="[data-bs-slide], [data-bs-slide-to]",vp='[data-bs-ride="carousel"]',hp={[Jm]:Xt,[Xm]:ut},_p={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},gp={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Wt extends De{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Q.findOne(pp,this._element),this._addEventListeners(),this._config.ride===Go&&this.cycle()}static get Default(){return _p}static get DefaultType(){return gp}static get NAME(){return Gm}next(){this._slide(At)}nextWhenVisible(){!document.hidden&&Ct(this._element)&&this.next()}prev(){this._slide(rt)}pause(){this._isSliding&&jo(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){V.one(this._element,Ss,()=>this.cycle());return}this.cycle()}}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding){V.one(this._element,Ss,()=>this.to(e));return}const o=this._getItemIndex(this._getActive());if(o===e)return;const i=e>o?At:rt;this._slide(i,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&V.on(this._element,ep,e=>this._keydown(e)),this._config.pause==="hover"&&(V.on(this._element,tp,()=>this.pause()),V.on(this._element,sp,()=>this._maybeEnableCycle())),this._config.touch&&ns.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const o of Q.find(mp,this._element))V.on(o,np,i=>i.preventDefault());const t={leftCallback:()=>this._slide(this._directionToOrder(ut)),rightCallback:()=>this._slide(this._directionToOrder(Xt)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Qm+this._config.interval))}};this._swipeHelper=new ns(this._element,t)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=hp[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=Q.findOne(Yo,this._indicatorsElement);t.classList.remove(Ut),t.removeAttribute("aria-current");const o=Q.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);o&&(o.classList.add(Ut),o.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const o=this._getActive(),i=e===At,a=t||Qs(this._getItems(),o,i,this._config.wrap);if(a===o)return;const r=this._getItemIndex(a),c=v=>V.trigger(this._element,v,{relatedTarget:a,direction:this._orderToDirection(e),from:this._getItemIndex(o),to:r});if(c(Zm).defaultPrevented||!o||!a)return;const h=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(r),this._activeElement=a;const l=i?lp:rp,w=i?cp:up;a.classList.add(w),Pt(a),o.classList.add(l),a.classList.add(l);const _=()=>{a.classList.remove(l,w),a.classList.add(Ut),o.classList.remove(Ut,w,l),this._isSliding=!1,c(Ss)};this._queueCallback(_,o,this._isAnimated()),h&&this.cycle()}_isAnimated(){return this._element.classList.contains(ap)}_getActive(){return Q.findOne(dp,this._element)}_getItems(){return Q.find(Jo,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return xe()?e===ut?rt:At:e===ut?At:rt}_orderToDirection(e){return xe()?e===rt?ut:Xt:e===rt?Xt:ut}static jQueryInterface(e){return this.each(function(){const t=Wt.getOrCreateInstance(this,e);if(typeof e=="number"){t.to(e);return}if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}V.on(document,ip,fp,function(s){const e=Q.getElementFromSelector(this);if(!e||!e.classList.contains(Go))return;s.preventDefault();const t=Wt.getOrCreateInstance(e),o=this.getAttribute("data-bs-slide-to");if(o){t.to(o),t._maybeEnableCycle();return}if(He.getDataAttribute(this,"slide")==="next"){t.next(),t._maybeEnableCycle();return}t.prev(),t._maybeEnableCycle()});V.on(window,op,()=>{const s=Q.find(vp);for(const e of s)Wt.getOrCreateInstance(e)});Oe(Wt);const bp="collapse",yp="bs.collapse",Ht=`.${yp}`,$p=".data-api",wp=`show${Ht}`,Ep=`shown${Ht}`,Cp=`hide${Ht}`,Sp=`hidden${Ht}`,kp=`click${Ht}${$p}`,ks="show",mt="collapse",qt="collapsing",Tp="collapsed",xp=`:scope .${mt} .${mt}`,Ap="collapse-horizontal",Mp="width",Op="height",Dp=".collapse.show, .collapse.collapsing",Vs='[data-bs-toggle="collapse"]',Np={parent:null,toggle:!0},Lp={parent:"(null|element)",toggle:"boolean"};class bt extends De{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const o=Q.find(Vs);for(const i of o){const a=Q.getSelectorFromElement(i),r=Q.find(a).filter(c=>c===this._element);a!==null&&r.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Np}static get DefaultType(){return Lp}static get NAME(){return bp}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(Dp).filter(c=>c!==this._element).map(c=>bt.getOrCreateInstance(c,{toggle:!1}))),e.length&&e[0]._isTransitioning||V.trigger(this._element,wp).defaultPrevented)return;for(const c of e)c.hide();const o=this._getDimension();this._element.classList.remove(mt),this._element.classList.add(qt),this._element.style[o]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(qt),this._element.classList.add(mt,ks),this._element.style[o]="",V.trigger(this._element,Ep)},r=`scroll${o[0].toUpperCase()+o.slice(1)}`;this._queueCallback(i,this._element,!0),this._element.style[o]=`${this._element[r]}px`}hide(){if(this._isTransitioning||!this._isShown()||V.trigger(this._element,Cp).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,Pt(this._element),this._element.classList.add(qt),this._element.classList.remove(mt,ks);for(const i of this._triggerArray){const a=Q.getElementFromSelector(i);a&&!this._isShown(a)&&this._addAriaAndCollapsedClass([i],!1)}this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(qt),this._element.classList.add(mt),V.trigger(this._element,Sp)};this._element.style[t]="",this._queueCallback(o,this._element,!0)}_isShown(e=this._element){return e.classList.contains(ks)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Ue(e.parent),e}_getDimension(){return this._element.classList.contains(Ap)?Mp:Op}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Vs);for(const t of e){const o=Q.getElementFromSelector(t);o&&this._addAriaAndCollapsedClass([t],this._isShown(o))}}_getFirstLevelChildren(e){const t=Q.find(xp,this._config.parent);return Q.find(e,this._config.parent).filter(o=>!t.includes(o))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const o of e)o.classList.toggle(Tp,!t),o.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return typeof e=="string"&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const o=bt.getOrCreateInstance(this,t);if(typeof e=="string"){if(typeof o[e]>"u")throw new TypeError(`No method named "${e}"`);o[e]()}})}}V.on(document,kp,Vs,function(s){(s.target.tagName==="A"||s.delegateTarget&&s.delegateTarget.tagName==="A")&&s.preventDefault();for(const e of Q.getMultipleElementsFromSelector(this))bt.getOrCreateInstance(e,{toggle:!1}).toggle()});Oe(bt);const Dn="dropdown",Ip="bs.dropdown",ot=`.${Ip}`,en=".data-api",jp="Escape",Nn="Tab",Pp="ArrowUp",Ln="ArrowDown",Rp=2,Wp=`hide${ot}`,Hp=`hidden${ot}`,Vp=`show${ot}`,Fp=`shown${ot}`,Xo=`click${ot}${en}`,Qo=`keydown${ot}${en}`,Bp=`keyup${ot}${en}`,dt="show",Up="dropup",qp="dropend",zp="dropstart",Kp="dropup-center",Gp="dropdown-center",Qe='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Yp=`${Qe}.${dt}`,Qt=".dropdown-menu",Jp=".navbar",Xp=".navbar-nav",Qp=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Zp=xe()?"top-end":"top-start",ef=xe()?"top-start":"top-end",tf=xe()?"bottom-end":"bottom-start",sf=xe()?"bottom-start":"bottom-end",nf=xe()?"left-start":"right-start",of=xe()?"right-start":"left-start",af="top",rf="bottom",lf={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},cf={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class je extends De{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=Q.next(this._element,Qt)[0]||Q.prev(this._element,Qt)[0]||Q.findOne(Qt,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return lf}static get DefaultType(){return cf}static get NAME(){return Dn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(qe(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!V.trigger(this._element,Vp,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Xp))for(const o of[].concat(...document.body.children))V.on(o,"mouseover",ss);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(dt),this._element.classList.add(dt),V.trigger(this._element,Fp,e)}}hide(){if(qe(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!V.trigger(this._element,Wp,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))V.off(o,"mouseover",ss);this._popper&&this._popper.destroy(),this._menu.classList.remove(dt),this._element.classList.remove(dt),this._element.setAttribute("aria-expanded","false"),He.removeDataAttribute(this._menu,"popper"),V.trigger(this._element,Hp,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!We(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${Dn.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof Lo>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let e=this._element;this._config.reference==="parent"?e=this._parent:We(this._config.reference)?e=Ue(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=Xs(e,this._menu,t)}_isShown(){return this._menu.classList.contains(dt)}_getPlacement(){const e=this._parent;if(e.classList.contains(qp))return nf;if(e.classList.contains(zp))return of;if(e.classList.contains(Kp))return af;if(e.classList.contains(Gp))return rf;const t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(Up)?t?ef:Zp:t?sf:tf}_detectNavbar(){return this._element.closest(Jp)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(He.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...ye(this._config.popperConfig,[void 0,e])}}_selectMenuItem({key:e,target:t}){const o=Q.find(Qp,this._menu).filter(i=>Ct(i));o.length&&Qs(o,t,e===Ln,!o.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=je.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(e.button===Rp||e.type==="keyup"&&e.key!==Nn)return;const t=Q.find(Yp);for(const o of t){const i=je.getInstance(o);if(!i||i._config.autoClose===!1)continue;const a=e.composedPath(),r=a.includes(i._menu);if(a.includes(i._element)||i._config.autoClose==="inside"&&!r||i._config.autoClose==="outside"&&r||i._menu.contains(e.target)&&(e.type==="keyup"&&e.key===Nn||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const c={relatedTarget:i._element};e.type==="click"&&(c.clickEvent=e),i._completeHide(c)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),o=e.key===jp,i=[Pp,Ln].includes(e.key);if(!i&&!o||t&&!o)return;e.preventDefault();const a=this.matches(Qe)?this:Q.prev(this,Qe)[0]||Q.next(this,Qe)[0]||Q.findOne(Qe,e.delegateTarget.parentNode),r=je.getOrCreateInstance(a);if(i){e.stopPropagation(),r.show(),r._selectMenuItem(e);return}r._isShown()&&(e.stopPropagation(),r.hide(),a.focus())}}V.on(document,Qo,Qe,je.dataApiKeydownHandler);V.on(document,Qo,Qt,je.dataApiKeydownHandler);V.on(document,Xo,je.clearMenus);V.on(document,Bp,je.clearMenus);V.on(document,Xo,Qe,function(s){s.preventDefault(),je.getOrCreateInstance(this).toggle()});Oe(je);const Zo="backdrop",uf="fade",In="show",jn=`mousedown.bs.${Zo}`,df={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},mf={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class ei extends Rt{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return df}static get DefaultType(){return mf}static get NAME(){return Zo}show(e){if(!this._config.isVisible){ye(e);return}this._append();const t=this._getElement();this._config.isAnimated&&Pt(t),t.classList.add(In),this._emulateAnimation(()=>{ye(e)})}hide(e){if(!this._config.isVisible){ye(e);return}this._getElement().classList.remove(In),this._emulateAnimation(()=>{this.dispose(),ye(e)})}dispose(){this._isAppended&&(V.off(this._element,jn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(uf),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Ue(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),V.on(e,jn,()=>{ye(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){Wo(e,this._getElement(),this._config.isAnimated)}}const pf="focustrap",ff="bs.focustrap",os=`.${ff}`,vf=`focusin${os}`,hf=`keydown.tab${os}`,_f="Tab",gf="forward",Pn="backward",bf={autofocus:!0,trapElement:null},yf={autofocus:"boolean",trapElement:"element"};class ti extends Rt{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return bf}static get DefaultType(){return yf}static get NAME(){return pf}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),V.off(document,os),V.on(document,vf,e=>this._handleFocusin(e)),V.on(document,hf,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,V.off(document,os))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const o=Q.focusableChildren(t);o.length===0?t.focus():this._lastTabNavDirection===Pn?o[o.length-1].focus():o[0].focus()}_handleKeydown(e){e.key===_f&&(this._lastTabNavDirection=e.shiftKey?Pn:gf)}}const Rn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Wn=".sticky-top",zt="padding-right",Hn="margin-right";class Fs{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,zt,t=>t+e),this._setElementAttributes(Rn,zt,t=>t+e),this._setElementAttributes(Wn,Hn,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,zt),this._resetElementAttributes(Rn,zt),this._resetElementAttributes(Wn,Hn)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,o){const i=this.getWidth(),a=r=>{if(r!==this._element&&window.innerWidth>r.clientWidth+i)return;this._saveInitialAttribute(r,t);const c=window.getComputedStyle(r).getPropertyValue(t);r.style.setProperty(t,`${o(Number.parseFloat(c))}px`)};this._applyManipulationCallback(e,a)}_saveInitialAttribute(e,t){const o=e.style.getPropertyValue(t);o&&He.setDataAttribute(e,t,o)}_resetElementAttributes(e,t){const o=i=>{const a=He.getDataAttribute(i,t);if(a===null){i.style.removeProperty(t);return}He.removeDataAttribute(i,t),i.style.setProperty(t,a)};this._applyManipulationCallback(e,o)}_applyManipulationCallback(e,t){if(We(e)){t(e);return}for(const o of Q.find(e,this._element))t(o)}}const $f="modal",wf="bs.modal",Ae=`.${wf}`,Ef=".data-api",Cf="Escape",Sf=`hide${Ae}`,kf=`hidePrevented${Ae}`,si=`hidden${Ae}`,ni=`show${Ae}`,Tf=`shown${Ae}`,xf=`resize${Ae}`,Af=`click.dismiss${Ae}`,Mf=`mousedown.dismiss${Ae}`,Of=`keydown.dismiss${Ae}`,Df=`click${Ae}${Ef}`,Vn="modal-open",Nf="fade",Fn="show",Ts="modal-static",Lf=".modal.show",If=".modal-dialog",jf=".modal-body",Pf='[data-bs-toggle="modal"]',Rf={backdrop:!0,focus:!0,keyboard:!0},Wf={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class yt extends De{constructor(e,t){super(e,t),this._dialog=Q.findOne(If,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Fs,this._addEventListeners()}static get Default(){return Rf}static get DefaultType(){return Wf}static get NAME(){return $f}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||V.trigger(this._element,ni,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Vn),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||V.trigger(this._element,Sf).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Fn),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){V.off(window,Ae),V.off(this._dialog,Ae),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new ei({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ti({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=Q.findOne(jf,this._dialog);t&&(t.scrollTop=0),Pt(this._element),this._element.classList.add(Fn);const o=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,V.trigger(this._element,Tf,{relatedTarget:e})};this._queueCallback(o,this._dialog,this._isAnimated())}_addEventListeners(){V.on(this._element,Of,e=>{if(e.key===Cf){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),V.on(window,xf,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),V.on(this._element,Mf,e=>{V.one(this._element,Af,t=>{if(!(this._element!==e.target||this._element!==t.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Vn),this._resetAdjustments(),this._scrollBar.reset(),V.trigger(this._element,si)})}_isAnimated(){return this._element.classList.contains(Nf)}_triggerBackdropTransition(){if(V.trigger(this._element,kf).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,o=this._element.style.overflowY;o==="hidden"||this._element.classList.contains(Ts)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(Ts),this._queueCallback(()=>{this._element.classList.remove(Ts),this._queueCallback(()=>{this._element.style.overflowY=o},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),o=t>0;if(o&&!e){const i=xe()?"paddingLeft":"paddingRight";this._element.style[i]=`${t}px`}if(!o&&e){const i=xe()?"paddingRight":"paddingLeft";this._element.style[i]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const o=yt.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof o[e]>"u")throw new TypeError(`No method named "${e}"`);o[e](t)}})}}V.on(document,Df,Pf,function(s){const e=Q.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&s.preventDefault(),V.one(e,ni,i=>{i.defaultPrevented||V.one(e,si,()=>{Ct(this)&&this.focus()})});const t=Q.findOne(Lf);t&&yt.getInstance(t).hide(),yt.getOrCreateInstance(e).toggle(this)});ls(yt);Oe(yt);const Hf="offcanvas",Vf="bs.offcanvas",Fe=`.${Vf}`,oi=".data-api",Ff=`load${Fe}${oi}`,Bf="Escape",Bn="show",Un="showing",qn="hiding",Uf="offcanvas-backdrop",ii=".offcanvas.show",qf=`show${Fe}`,zf=`shown${Fe}`,Kf=`hide${Fe}`,zn=`hidePrevented${Fe}`,ai=`hidden${Fe}`,Gf=`resize${Fe}`,Yf=`click${Fe}${oi}`,Jf=`keydown.dismiss${Fe}`,Xf='[data-bs-toggle="offcanvas"]',Qf={backdrop:!0,keyboard:!0,scroll:!1},Zf={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ze extends De{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Qf}static get DefaultType(){return Zf}static get NAME(){return Hf}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||V.trigger(this._element,qf,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Fs().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Un);const o=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Bn),this._element.classList.remove(Un),V.trigger(this._element,zf,{relatedTarget:e})};this._queueCallback(o,this._element,!0)}hide(){if(!this._isShown||V.trigger(this._element,Kf).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(qn),this._backdrop.hide();const t=()=>{this._element.classList.remove(Bn,qn),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Fs().reset(),V.trigger(this._element,ai)};this._queueCallback(t,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){V.trigger(this._element,zn);return}this.hide()},t=!!this._config.backdrop;return new ei({className:Uf,isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?e:null})}_initializeFocusTrap(){return new ti({trapElement:this._element})}_addEventListeners(){V.on(this._element,Jf,e=>{if(e.key===Bf){if(this._config.keyboard){this.hide();return}V.trigger(this._element,zn)}})}static jQueryInterface(e){return this.each(function(){const t=ze.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}V.on(document,Yf,Xf,function(s){const e=Q.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),qe(this))return;V.one(e,ai,()=>{Ct(this)&&this.focus()});const t=Q.findOne(ii);t&&t!==e&&ze.getInstance(t).hide(),ze.getOrCreateInstance(e).toggle(this)});V.on(window,Ff,()=>{for(const s of Q.find(ii))ze.getOrCreateInstance(s).show()});V.on(window,Gf,()=>{for(const s of Q.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(s).position!=="fixed"&&ze.getOrCreateInstance(s).hide()});ls(ze);Oe(ze);const ev=/^aria-[\w-]*$/i,ri={"*":["class","dir","id","lang","role",ev],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},tv=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),sv=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,nv=(s,e)=>{const t=s.nodeName.toLowerCase();return e.includes(t)?tv.has(t)?!!sv.test(s.nodeValue):!0:e.filter(o=>o instanceof RegExp).some(o=>o.test(t))};function ov(s,e,t){if(!s.length)return s;if(t&&typeof t=="function")return t(s);const i=new window.DOMParser().parseFromString(s,"text/html"),a=[].concat(...i.body.querySelectorAll("*"));for(const r of a){const c=r.nodeName.toLowerCase();if(!Object.keys(e).includes(c)){r.remove();continue}const f=[].concat(...r.attributes),h=[].concat(e["*"]||[],e[c]||[]);for(const l of f)nv(l,h)||r.removeAttribute(l.nodeName)}return i.body.innerHTML}const iv="TemplateFactory",av={allowList:ri,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},rv={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},lv={entry:"(string|element|function|null)",selector:"(string|element)"};class cv extends Rt{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return av}static get DefaultType(){return rv}static get NAME(){return iv}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[i,a]of Object.entries(this._config.content))this._setContent(e,a,i);const t=e.children[0],o=this._resolvePossibleFunction(this._config.extraClass);return o&&t.classList.add(...o.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,o]of Object.entries(e))super._typeCheckConfig({selector:t,entry:o},lv)}_setContent(e,t,o){const i=Q.findOne(o,e);if(i){if(t=this._resolvePossibleFunction(t),!t){i.remove();return}if(We(t)){this._putElementInTemplate(Ue(t),i);return}if(this._config.html){i.innerHTML=this._maybeSanitize(t);return}i.textContent=t}}_maybeSanitize(e){return this._config.sanitize?ov(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return ye(e,[void 0,this])}_putElementInTemplate(e,t){if(this._config.html){t.innerHTML="",t.append(e);return}t.textContent=e.textContent}}const uv="tooltip",dv=new Set(["sanitize","allowList","sanitizeFn"]),xs="fade",mv="modal",Kt="show",pv=".tooltip-inner",Kn=`.${mv}`,Gn="hide.bs.modal",Mt="hover",As="focus",Ms="click",fv="manual",vv="hide",hv="hidden",_v="show",gv="shown",bv="inserted",yv="click",$v="focusin",wv="focusout",Ev="mouseenter",Cv="mouseleave",Sv={AUTO:"auto",TOP:"top",RIGHT:xe()?"left":"right",BOTTOM:"bottom",LEFT:xe()?"right":"left"},kv={allowList:ri,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Tv={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class kt extends De{constructor(e,t){if(typeof Lo>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return kv}static get DefaultType(){return Tv}static get NAME(){return uv}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),V.off(this._element.closest(Kn),Gn,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=V.trigger(this._element,this.constructor.eventName(_v)),o=(Po(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!o)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:a}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(a.append(i),V.trigger(this._element,this.constructor.eventName(bv))),this._popper=this._createPopper(i),i.classList.add(Kt),"ontouchstart"in document.documentElement)for(const c of[].concat(...document.body.children))V.on(c,"mouseover",ss);const r=()=>{V.trigger(this._element,this.constructor.eventName(gv)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(r,this.tip,this._isAnimated())}hide(){if(!this._isShown()||V.trigger(this._element,this.constructor.eventName(vv)).defaultPrevented)return;if(this._getTipElement().classList.remove(Kt),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))V.off(i,"mouseover",ss);this._activeTrigger[Ms]=!1,this._activeTrigger[As]=!1,this._activeTrigger[Mt]=!1,this._isHovered=null;const o=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),V.trigger(this._element,this.constructor.eventName(hv)))};this._queueCallback(o,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(xs,Kt),t.classList.add(`bs-${this.constructor.NAME}-auto`);const o=pm(this.constructor.NAME).toString();return t.setAttribute("id",o),this._isAnimated()&&t.classList.add(xs),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new cv({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[pv]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(xs)}_isShown(){return this.tip&&this.tip.classList.contains(Kt)}_createPopper(e){const t=ye(this._config.placement,[this,e,this._element]),o=Sv[t.toUpperCase()];return Xs(this._element,e,this._getPopperConfig(o))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_resolvePossibleFunction(e){return ye(e,[this._element,this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:o=>{this._getTipElement().setAttribute("data-popper-placement",o.state.placement)}}]};return{...t,...ye(this._config.popperConfig,[void 0,t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if(t==="click")V.on(this._element,this.constructor.eventName(yv),this._config.selector,o=>{const i=this._initializeOnDelegatedTarget(o);i._activeTrigger[Ms]=!(i._isShown()&&i._activeTrigger[Ms]),i.toggle()});else if(t!==fv){const o=t===Mt?this.constructor.eventName(Ev):this.constructor.eventName($v),i=t===Mt?this.constructor.eventName(Cv):this.constructor.eventName(wv);V.on(this._element,o,this._config.selector,a=>{const r=this._initializeOnDelegatedTarget(a);r._activeTrigger[a.type==="focusin"?As:Mt]=!0,r._enter()}),V.on(this._element,i,this._config.selector,a=>{const r=this._initializeOnDelegatedTarget(a);r._activeTrigger[a.type==="focusout"?As:Mt]=r._element.contains(a.relatedTarget),r._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},V.on(this._element.closest(Kn),Gn,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=He.getDataAttributes(this._element);for(const o of Object.keys(t))dv.has(o)&&delete t[o];return e={...t,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Ue(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,o]of Object.entries(this._config))this.constructor.Default[t]!==o&&(e[t]=o);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=kt.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}Oe(kt);const xv="popover",Av=".popover-header",Mv=".popover-body",Ov={...kt.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Dv={...kt.DefaultType,content:"(null|string|element|function)"};class tn extends kt{static get Default(){return Ov}static get DefaultType(){return Dv}static get NAME(){return xv}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Av]:this._getTitle(),[Mv]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=tn.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}Oe(tn);const Nv="scrollspy",Lv="bs.scrollspy",sn=`.${Lv}`,Iv=".data-api",jv=`activate${sn}`,Yn=`click${sn}`,Pv=`load${sn}${Iv}`,Rv="dropdown-item",lt="active",Wv='[data-bs-spy="scroll"]',Os="[href]",Hv=".nav, .list-group",Jn=".nav-link",Vv=".nav-item",Fv=".list-group-item",Bv=`${Jn}, ${Vv} > ${Jn}, ${Fv}`,Uv=".dropdown",qv=".dropdown-toggle",zv={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Kv={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ds extends De{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return zv}static get DefaultType(){return Kv}static get NAME(){return Nv}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Ue(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(t=>Number.parseFloat(t))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(V.off(this._config.target,Yn),V.on(this._config.target,Yn,Os,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const o=this._rootElement||window,i=t.offsetTop-this._element.offsetTop;if(o.scrollTo){o.scrollTo({top:i,behavior:"smooth"});return}o.scrollTop=i}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(t=>this._observerCallback(t),e)}_observerCallback(e){const t=r=>this._targetLinks.get(`#${r.target.id}`),o=r=>{this._previousScrollData.visibleEntryTop=r.target.offsetTop,this._process(t(r))},i=(this._rootElement||document.documentElement).scrollTop,a=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const r of e){if(!r.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(r));continue}const c=r.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(a&&c){if(o(r),!i)return;continue}!a&&!c&&o(r)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=Q.find(Os,this._config.target);for(const t of e){if(!t.hash||qe(t))continue;const o=Q.findOne(decodeURI(t.hash),this._element);Ct(o)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,o))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(lt),this._activateParents(e),V.trigger(this._element,jv,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(Rv)){Q.findOne(qv,e.closest(Uv)).classList.add(lt);return}for(const t of Q.parents(e,Hv))for(const o of Q.prev(t,Bv))o.classList.add(lt)}_clearActiveClass(e){e.classList.remove(lt);const t=Q.find(`${Os}.${lt}`,e);for(const o of t)o.classList.remove(lt)}static jQueryInterface(e){return this.each(function(){const t=ds.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}V.on(window,Pv,()=>{for(const s of Q.find(Wv))ds.getOrCreateInstance(s)});Oe(ds);const Gv="tab",Yv="bs.tab",it=`.${Yv}`,Jv=`hide${it}`,Xv=`hidden${it}`,Qv=`show${it}`,Zv=`shown${it}`,eh=`click${it}`,th=`keydown${it}`,sh=`load${it}`,nh="ArrowLeft",Xn="ArrowRight",oh="ArrowUp",Qn="ArrowDown",Ds="Home",Zn="End",Ze="active",eo="fade",Ns="show",ih="dropdown",li=".dropdown-toggle",ah=".dropdown-menu",Ls=`:not(${li})`,rh='.list-group, .nav, [role="tablist"]',lh=".nav-item, .list-group-item",ch=`.nav-link${Ls}, .list-group-item${Ls}, [role="tab"]${Ls}`,ci='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Is=`${ch}, ${ci}`,uh=`.${Ze}[data-bs-toggle="tab"], .${Ze}[data-bs-toggle="pill"], .${Ze}[data-bs-toggle="list"]`;class $t extends De{constructor(e){super(e),this._parent=this._element.closest(rh),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),V.on(this._element,th,t=>this._keydown(t)))}static get NAME(){return Gv}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),o=t?V.trigger(t,Jv,{relatedTarget:e}):null;V.trigger(e,Qv,{relatedTarget:t}).defaultPrevented||o&&o.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){if(!e)return;e.classList.add(Ze),this._activate(Q.getElementFromSelector(e));const o=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(Ns);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),V.trigger(e,Zv,{relatedTarget:t})};this._queueCallback(o,e,e.classList.contains(eo))}_deactivate(e,t){if(!e)return;e.classList.remove(Ze),e.blur(),this._deactivate(Q.getElementFromSelector(e));const o=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(Ns);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),V.trigger(e,Xv,{relatedTarget:t})};this._queueCallback(o,e,e.classList.contains(eo))}_keydown(e){if(![nh,Xn,oh,Qn,Ds,Zn].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter(i=>!qe(i));let o;if([Ds,Zn].includes(e.key))o=t[e.key===Ds?0:t.length-1];else{const i=[Xn,Qn].includes(e.key);o=Qs(t,e.target,i,!0)}o&&(o.focus({preventScroll:!0}),$t.getOrCreateInstance(o).show())}_getChildren(){return Q.find(Is,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const o of t)this._setInitialAttributesOnChild(o)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),o=this._getOuterElement(e);e.setAttribute("aria-selected",t),o!==e&&this._setAttributeIfNotExists(o,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=Q.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const o=this._getOuterElement(e);if(!o.classList.contains(ih))return;const i=(a,r)=>{const c=Q.findOne(a,o);c&&c.classList.toggle(r,t)};i(li,Ze),i(ah,Ns),o.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,o){e.hasAttribute(t)||e.setAttribute(t,o)}_elemIsActive(e){return e.classList.contains(Ze)}_getInnerElement(e){return e.matches(Is)?e:Q.findOne(Is,e)}_getOuterElement(e){return e.closest(lh)||e}static jQueryInterface(e){return this.each(function(){const t=$t.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}V.on(document,eh,ci,function(s){["A","AREA"].includes(this.tagName)&&s.preventDefault(),!qe(this)&&$t.getOrCreateInstance(this).show()});V.on(window,sh,()=>{for(const s of Q.find(uh))$t.getOrCreateInstance(s)});Oe($t);const dh="toast",mh="bs.toast",Je=`.${mh}`,ph=`mouseover${Je}`,fh=`mouseout${Je}`,vh=`focusin${Je}`,hh=`focusout${Je}`,_h=`hide${Je}`,gh=`hidden${Je}`,bh=`show${Je}`,yh=`shown${Je}`,$h="fade",to="hide",Gt="show",Yt="showing",wh={animation:"boolean",autohide:"boolean",delay:"number"},Eh={animation:!0,autohide:!0,delay:5e3};class ms extends De{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Eh}static get DefaultType(){return wh}static get NAME(){return dh}show(){if(V.trigger(this._element,bh).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add($h);const t=()=>{this._element.classList.remove(Yt),V.trigger(this._element,yh),this._maybeScheduleHide()};this._element.classList.remove(to),Pt(this._element),this._element.classList.add(Gt,Yt),this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this.isShown()||V.trigger(this._element,_h).defaultPrevented)return;const t=()=>{this._element.classList.add(to),this._element.classList.remove(Yt,Gt),V.trigger(this._element,gh)};this._element.classList.add(Yt),this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Gt),super.dispose()}isShown(){return this._element.classList.contains(Gt)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=t;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=t;break}}if(t){this._clearTimeout();return}const o=e.relatedTarget;this._element===o||this._element.contains(o)||this._maybeScheduleHide()}_setListeners(){V.on(this._element,ph,e=>this._onInteraction(e,!0)),V.on(this._element,fh,e=>this._onInteraction(e,!1)),V.on(this._element,vh,e=>this._onInteraction(e,!0)),V.on(this._element,hh,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=ms.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}ls(ms);Oe(ms);const Ch={class:"message-content-column"},Sh=["id"],kh={class:"accordion-item"},Th=["id"],xh=["aria-controls"],Ah={class:"d-flex align-items-center w-100"},Mh={class:"badge bg-warning text-dark ms-auto me-2"},Oh={class:"text-muted"},Dh=["id","aria-labelledby"],Nh={class:"accordion-body bg-light"},Lh={class:"alert alert-warning mb-3",role:"alert"},Ih={class:"compaction-metadata"},jh={class:"metadata-row"},Ph={class:"metadata-row"},Rh={key:0,class:"metadata-row"},Wh={class:"continuation-content"},Hh={class:"continuation-text border rounded p-3 bg-white"},Vh={class:"mb-0"},Fh={__name:"CompactionEventGroup",props:{messages:{type:Array,required:!0,validator:s=>s.length===4||s.length===5}},setup(s){const e=s,t=b(()=>`accordion-compaction-${e.messages[0]?.timestamp||Date.now()}`),o=b(()=>`heading-${t.value}`),i=b(()=>`collapse-${t.value}`),a=j(null);let r=null;he(()=>{a.value&&(r=new bt(a.value,{toggle:!1}))}),pi(()=>{r&&r.dispose()});function c(){r&&r.toggle()}const f=b(()=>e.messages.length===5&&e.messages[2]?.type==="system"&&e.messages[2]?.metadata?.subtype==="init"),h=b(()=>f.value?e.messages[3]:e.messages[2]),l=b(()=>h.value?.metadata?.init_data?.compact_metadata||{}),w=b(()=>l.value.pre_tokens||0),_=b(()=>f.value?e.messages[4]:e.messages[3]),v=b(()=>_.value?.content||""),g=b(()=>{const d=e.messages[0]?.timestamp;return d?It(d):""});function p(d){return d?`${d.toLocaleString()} tokens`:"0 tokens"}return(d,y)=>(u(),m("div",{class:"message-row message-row-compaction",key:t.value},[y[7]||(y[7]=n("div",{class:"message-speaker"},[n("span",{class:"speaker-label"},"system")],-1)),n("div",Ch,[n("div",{class:"accordion compaction-accordion",id:t.value},[n("div",kh,[n("h2",{class:"accordion-header",id:o.value},[n("button",{class:"accordion-button collapsed",type:"button","aria-expanded":!1,"aria-controls":i.value,onClick:c},[n("div",Ah,[y[0]||(y[0]=n("span",{class:"me-2"},"ðŸ—œï¸",-1)),y[1]||(y[1]=n("strong",{class:"me-2"},"Context Compaction Event",-1)),n("span",Mh,$(p(w.value)),1),n("small",Oh,$(g.value),1)])],8,xh)],8,Th),n("div",{ref_key:"collapseElement",ref:a,id:i.value,class:"accordion-collapse collapse","aria-labelledby":o.value},[n("div",Nh,[n("div",Lh,[y[5]||(y[5]=n("h6",{class:"alert-heading mb-2"},[n("span",{class:"me-2"},"â„¹ï¸"),se(" Compaction Details ")],-1)),n("div",Ih,[n("div",jh,[y[2]||(y[2]=n("strong",null,"Trigger:",-1)),n("span",null,$(l.value.trigger||"auto"),1)]),n("div",Ph,[y[3]||(y[3]=n("strong",null,"Pre-compaction tokens:",-1)),n("span",null,$(p(w.value)),1)]),l.value.post_tokens?(u(),m("div",Rh,[y[4]||(y[4]=n("strong",null,"Post-compaction tokens:",-1)),n("span",null,$(p(l.value.post_tokens)),1)])):D("",!0)])]),n("div",Wh,[y[6]||(y[6]=n("h6",{class:"text-muted mb-2"},[n("span",{class:"me-2"},"â†©ï¸"),se(" Continuation Message ")],-1)),n("div",Hh,[n("pre",Vh,$(v.value),1)])])])],8,Dh)])],8,Sh)])]))}},Bh=ee(Fh,[["__scopeId","data-v-e0b95ba8"]]),Uh={key:0,class:"text-muted text-center py-5"},qh={__name:"MessageList",setup(s){const e=Te(),t=me(),o=j(null),i=b(()=>{const l=e.currentMessages,w=[];let _=0;for(;_<l.length;){const v=l[_];if(r(v,l,_)){const g=l[_+2],d=g?.type==="system"&&g?.metadata?.subtype==="init"?5:4,y=l.slice(_,_+d);w.push({type:"compaction",messages:y}),_+=d;continue}f(v)&&w.push({type:"message",message:v,attachedTools:[]}),_++}return a(w)});function a(l){const w=new Map,_=new Set;for(let g=0;g<l.length;g++){const p=l[g];if(p.type==="compaction")continue;const d=p.message,y=d.content&&d.content.trim().length>0&&d.content!=="Assistant response",k=d.type==="assistant"&&d.metadata?.has_tool_uses&&d.metadata?.tool_uses?.length>0;if(d.type==="assistant"&&k&&!y){let T=-1,O=!1;for(let q=g-1;q>=0;q--){const G=l[q];if(!_.has(q)){if(G.type==="message"&&G.message.type!=="assistant"){O=!0;break}if(G.type==="message"&&G.message.type==="assistant"){const I=G.message;if(I.content&&I.content.trim().length>0&&I.content!=="Assistant response"){T=q;break}else{T=q;break}}}}O&&T===-1||(O&&T>=0?(w.has(T)||w.set(T,[]),w.get(T).push(...d.metadata.tool_uses),_.add(g)):!O&&T>=0&&(w.has(T)||w.set(T,[]),w.get(T).push(...d.metadata.tool_uses),_.add(g)))}}const v=[];for(let g=0;g<l.length;g++){if(_.has(g))continue;const p=l[g];w.has(g)&&(p.attachedTools=[...p.attachedTools||[],...w.get(g)]),v.push(p)}return v}function r(l,w,_){if(_+3>=w.length)return!1;const v=w[_],g=w[_+1];let p=w[_+2],d=w[_+3],y=w[_+4];const k=v.type==="system"&&v.metadata?.subtype==="status"&&v.metadata?.init_data?.status==="compacting",T=g.type==="system"&&g.metadata?.subtype==="status"&&(g.metadata?.init_data?.status===null||g.metadata?.init_data?.status===void 0);if(p?.type==="system"&&p?.metadata?.subtype==="init"){if(_+4>=w.length)return!1;const q=!0,G=d?.type==="system"&&d?.metadata?.subtype==="compact_boundary",I=y?.type==="user"&&y?.content?.startsWith("This session is being continued from a previous conversation");return v.type==="system"&&v.metadata?.subtype==="status"&&(console.log("[Compaction Debug] Checking 5-message pattern (with init) at index",_),console.log("  Msg1 (compacting):",k),console.log("  Msg2 (null status):",T),console.log("  Msg3 (init):",q),console.log("  Msg4 (boundary):",G),console.log("  Msg5 (continuation):",I)),k&&T&&q&&G&&I}else{const q=p?.type==="system"&&p?.metadata?.subtype==="compact_boundary",G=d?.type==="user"&&d?.content?.startsWith("This session is being continued from a previous conversation");return v.type==="system"&&v.metadata?.subtype==="status"&&(console.log("[Compaction Debug] Checking 4-message pattern (no init) at index",_),console.log("  Msg1 (compacting):",k),console.log("  Msg2 (null status):",T),console.log("  Msg3 (boundary):",q),console.log("  Msg4 (continuation):",G)),k&&T&&q&&G}}async function c(){t.autoScrollEnabled&&(await es(),o.value&&(o.value.scrollTop=o.value.scrollHeight))}de(()=>i.value.length,c),de(()=>e.currentToolCalls.length,c),de(()=>e.currentToolCalls.map(l=>`${l.id}-${l.status}`).join(","),c),he(()=>{setTimeout(()=>{c()},100)});function f(l){const w=l.subtype||l.metadata?.subtype;if(l.type==="system"&&w==="init"||l.type==="result"||l.type==="permission_request"||l.type==="permission_response")return!1;if(l.type==="user"&&l.metadata?.has_tool_results){const _=l.content||"";if(_.match(/^Tool results?: \d+ results?$/i)||_.trim()==="")return!1}if(l.type==="user"){const _=l.content||"";if(_.includes("<command-message>")&&_.includes("skill is running")||_.startsWith("Base directory for this skill:"))return!1}if(l.type==="user"){const _=l.content||"";if(_.includes("<command-message>")&&_.includes("<command-name>")&&_.includes("<command-args>")||_.includes("ARGUMENTS:")&&(_.includes("<command-name>")||_.match(/\nARGUMENTS:/)))return!1}return!0}function h(l){return{type:l.type||"unknown",content:l.content||"",timestamp:l.timestamp||Date.now()/1e3,metadata:{has_tool_uses:!1,has_tool_results:!1,has_thinking:!1,has_permission_requests:!1,has_permission_responses:!1,tool_uses:[],tool_results:[],thinking_content:"",thinking_blocks:[],...l.metadata}}}return(l,w)=>(u(),m("div",{class:"messages-area flex-grow-1 overflow-auto",ref_key:"messagesArea",ref:o},[i.value.length===0?(u(),m("div",Uh," No messages yet. Start a conversation! ")):D("",!0),(u(!0),m(ie,null,le(i.value,(_,v)=>(u(),m(ie,{key:`item-${v}`},[_.type==="message"?(u(),_e(kd,{key:0,message:h(_.message),attachedTools:_.attachedTools||[]},null,8,["message","attachedTools"])):_.type==="compaction"?(u(),_e(Bh,{key:1,messages:_.messages},null,8,["messages"])):D("",!0)],64))),128))],512))}},zh=ee(qh,[["__scopeId","data-v-6bae0fb1"]]),Kh={class:"border-top bg-light"},Gh={key:0,class:"alert alert-danger mb-0 py-2 px-3 small d-flex align-items-center gap-2",role:"alert"},Yh={class:"d-flex gap-2 align-items-end px-2 py-1"},Jh=["placeholder","disabled"],Xh=["disabled"],Qh={__name:"InputArea",setup(s){const e=oe(),t=Ke(),o=j(null),i=j(window.innerWidth),a=b({get:()=>e.currentInput,set:d=>{e.currentInput=d}}),r=b(()=>e.currentSession?.is_processing||!1),c=b(()=>t.sessionConnected),f=b(()=>e.currentSession?.state==="starting"),h=b(()=>i.value<768),l=b(()=>f.value?"Session is starting...":c.value?"Type your message to Claude Code...":"Waiting for connection...");function w(){i.value=window.innerWidth}he(()=>{window.addEventListener("resize",w)}),$e(()=>{window.removeEventListener("resize",w)});function _(d){if(d.key==="Enter"&&!d.shiftKey){if(h.value)return;d.preventDefault(),g()}}function v(){const d=o.value;if(!d)return;d.style.height="auto";const y=Math.min(d.scrollHeight,parseInt(getComputedStyle(d).maxHeight));d.style.height=y+"px"}function g(){a.value.trim()&&(t.sendMessage(a.value),a.value="",o.value&&(o.value.style.height="auto"))}function p(){t.interruptSession()}return(d,y)=>(u(),m("div",Kh,[c.value?D("",!0):(u(),m("div",Gh,[...y[1]||(y[1]=[n("span",{class:"flex-shrink-0"},"â—",-1),n("strong",null,"Disconnected",-1),n("span",{class:"text-muted"},"â€”",-1),n("span",null,"Cannot send messages while reconnecting...",-1)])])),n("div",Yh,[ve(n("textarea",{id:"message-input",ref_key:"messageTextarea",ref:o,"onUpdate:modelValue":y[0]||(y[0]=k=>a.value=k),class:"form-control",placeholder:l.value,disabled:f.value||!c.value,rows:"1",onInput:v,onKeydown:_},null,40,Jh),[[Le,a.value]]),r.value?(u(),m("button",{key:0,class:"btn btn-warning",title:"Stop current processing",onClick:p}," Stop ")):(u(),m("button",{key:1,class:"btn btn-primary",disabled:!a.value.trim()||!c.value||f.value,onClick:g}," Send ",8,Xh))])]))}},Zh=ee(Qh,[["__scopeId","data-v-ef1e5094"]]),e_={class:"d-flex flex-column flex-grow-1 overflow-hidden position-relative"},t_={key:0,class:"position-absolute top-0 start-0 w-100 h-100 bg-white bg-opacity-75 d-flex flex-column justify-content-center align-items-center",style:{"z-index":"1000"}},s_={class:"text-secondary"},n_={class:"d-flex flex-column flex-grow-1 overflow-hidden"},o_={__name:"SessionView",props:{sessionId:{type:String,required:!0}},setup(s){const e=s,t=oe(),o=me(),i=b(()=>t.currentSession),a=b(()=>o.isLoading),r=b(()=>o.loadingMessage);return he(async()=>{if(e.sessionId!==t.currentSessionId){o.showLoading("Loading session...");try{await t.selectSession(e.sessionId)}finally{o.hideLoading()}}}),de(()=>e.sessionId,async(c,f)=>{if(c!==f&&c!==t.currentSessionId){o.showLoading("Loading session...");try{await t.selectSession(c)}finally{o.hideLoading()}}}),$e(()=>{}),(c,f)=>(u(),m("div",e_,[a.value?(u(),m("div",t_,[f[0]||(f[0]=n("div",{class:"spinner-border text-primary mb-3",role:"status"},[n("span",{class:"visually-hidden"},"Loading...")],-1)),n("p",s_,$(r.value),1)])):D("",!0),i.value?(u(),_e(Di,{key:1,"session-id":e.sessionId},null,8,["session-id"])):D("",!0),n("div",n_,[ue(zh)]),ue(Zh),i.value?(u(),_e(Pi,{key:2,"session-id":e.sessionId},null,8,["session-id"])):D("",!0),i.value?(u(),_e(zi,{key:3,"session-id":e.sessionId},null,8,["session-id"])):D("",!0)]))}},ps=wt("legion",()=>{const s=j(new Map),e=j(new Map),t=j(null),o=b(()=>s.value.get(t.value)||[]),i=b(()=>e.value.get(t.value)||[]);function a(g){t.value=g}async function r(g,p=100,d=0){try{const y=await ne.get(`/api/legions/${g}/timeline?limit=${p}&offset=${d}`),k=y.comms||[],T=y.total_count||k.length,O=y.has_more||!1;return k.sort((q,G)=>new Date(q.timestamp)-new Date(G.timestamp)),console.log(`Loaded ${k.length} of ${T} comms for legion ${g}`),s.value.set(g,k),s.value=new Map(s.value),{comms:k,totalCount:T,hasMore:O}}catch(y){throw console.error("Failed to load timeline:",y),y}}function c(g,p){s.value.has(g)||s.value.set(g,[]);const d=s.value.get(g);if(d.some(k=>k.comm_id===p.comm_id)){console.log(`Duplicate comm ${p.comm_id} prevented in timeline`);return}d.push(p),s.value=new Map(s.value)}async function f(g,p){try{const y=(await ne.post(`/api/legions/${g}/comms`,p)).comm;return console.log(`Sent comm ${y.comm_id} to legion ${g}`),y}catch(d){throw console.error("Failed to send comm:",d),d}}async function h(g){return console.log(`Minions for legion ${g} are already available in session store`),[]}async function l(g,p){try{const y=(await ne.post(`/api/legions/${g}/minions`,p)).minion;return await h(g),console.log(`Created minion ${y.minion_id} in legion ${g}`),y}catch(d){throw console.error("Failed to create minion:",d),d}}async function w(g){try{const p=await ne.post(`/api/legions/${g}/halt-all`);return console.log(`Halted ${p.halted_count} of ${p.total_minions} minions in legion ${g}`),p.failed_minions&&p.failed_minions.length>0&&console.warn("Failed to halt some minions:",p.failed_minions),p}catch(p){throw console.error("Failed to halt all minions:",p),p}}async function _(g){try{const p=await ne.post(`/api/legions/${g}/resume-all`);return console.log(`Resumed ${p.resumed_count} of ${p.total_minions} minions in legion ${g}`),p.failed_minions&&p.failed_minions.length>0&&console.warn("Failed to resume some minions:",p.failed_minions),p}catch(p){throw console.error("Failed to resume all minions:",p),p}}function v(g){s.value.delete(g),e.value.delete(g),s.value=new Map(s.value),e.value=new Map(e.value)}return{commsByLegion:s,minionsByLegion:e,currentLegionId:t,currentComms:o,currentMinions:i,setCurrentLegion:a,loadTimeline:r,addComm:c,sendComm:f,loadMinions:h,createMinion:l,haltAll:w,resumeAll:_,clearLegionData:v}}),i_=Object.freeze(Object.defineProperty({__proto__:null,useLegionStore:ps},Symbol.toStringTag,{value:"Module"})),a_={class:"timeline-header border-bottom p-3"},r_={class:"project-name"},l_=["title"],c_={__name:"TimelineHeader",props:{legionId:{type:String,required:!0}},setup(s){const e=s,t=Me(),o=b(()=>t.projects.get(e.legionId)),i=b(()=>o.value?.name||"Legion");return(a,r)=>(u(),m("div",a_,[n("div",null,[n("div",r_,$(i.value),1),n("div",{class:"view-name",title:s.legionId},"Timeline",8,l_)])]))}},u_=ee(c_,[["__scopeId","data-v-44f386f5"]]),d_={class:"timeline-status-bar border-top p-2 bg-light"},m_={class:"d-flex justify-content-end"},p_={__name:"TimelineStatusBar",props:{legionId:{type:String,required:!0}},setup(s){const e=me();function t(){e.setAutoScroll(!e.autoScrollEnabled)}return(o,i)=>(u(),m("div",d_,[n("div",m_,[n("button",{class:Z(["btn btn-sm",Zt(e).autoScrollEnabled?"btn-primary":"btn-outline-secondary"]),onClick:t}," â¬‡ï¸ "+$(Zt(e).autoScrollEnabled?"ON":"OFF"),3)])]))}},f_=ee(p_,[["__scopeId","data-v-891c73db"]]),v_={class:"comm-composer border-top p-3"},h_={key:0,class:"d-flex gap-2 mb-2"},__={class:"flex-grow-1"},g_=["disabled"],b_={label:"Minions"},y_=["value"],$_={style:{"min-width":"150px"}},w_=["disabled"],E_={class:"d-flex gap-2 align-items-end position-relative"},C_={class:"flex-grow-1 position-relative"},S_=["disabled"],k_=["onClick","onMouseenter"],T_=["disabled"],x_={key:0},A_={key:1},M_={__name:"CommComposer",props:{legionId:{type:String,required:!0},hideRecipientSelector:{type:Boolean,default:!1}},setup(s){const e=s,t=ps(),o=oe(),i=Me(),a=j(""),r=j("task"),c=j(""),f=j(!1),h=j(window.innerWidth),l=j(!1),w=j([]),_=j(0),v=j(-1),g=j(null),p=j(null),d=b(()=>h.value<768),y=b(()=>{const H=i.projects.get(e.legionId);return!H||!H.session_ids?[]:H.session_ids.map(C=>o.sessions.get(C)).filter(C=>C)}),k=b(()=>a.value&&c.value.trim().length>0);function T(H){return{created:"â—‹",starting:"â—",active:"â—",paused:"â¸",terminating:"â—",terminated:"âœ—",error:"âš "}[H.state]||"â—‹"}function O(H){return H.role?`${H.name} (${H.role})`:H.name}function q(){const H=g.value;if(!H)return;H.style.height="auto";const C=Math.min(H.scrollHeight,parseInt(getComputedStyle(H).maxHeight));H.style.height=C+"px"}function G(){const H=g.value;if(!H)return;q();const C=c.value,E=H.selectionStart,N=C.substring(0,E),x=N.lastIndexOf("#");if(x===-1){l.value=!1;return}const S=N.substring(x+1).toLowerCase();if(S.includes(" ")){l.value=!1;return}const P=y.value.filter(F=>F.name.toLowerCase().includes(S)).map(F=>({type:"minion",name:F.name,role:F.role,id:F.session_id,state:F.state}));if(P.length===0){l.value=!1;return}w.value=P,_.value=0,v.value=x,l.value=!0}function I(){if(!p.value)return;const H=p.value,C=H.children[_.value];if(!C)return;const E=C.offsetTop,N=C.offsetHeight,x=H.scrollTop,S=H.clientHeight;E<x?H.scrollTop=E:E+N>x+S&&(H.scrollTop=E+N-S)}function B(H){if(!l.value){if(H.key==="Enter"&&!H.shiftKey){if(d.value)return;k.value&&(H.preventDefault(),L())}return}if(H.key==="ArrowDown")H.preventDefault(),_.value=(_.value+1)%w.value.length,I();else if(H.key==="ArrowUp")H.preventDefault(),_.value=_.value===0?w.value.length-1:_.value-1,I();else if(H.key==="Enter"){H.preventDefault();const C=w.value[_.value];C&&A(C)}else H.key==="Escape"&&(l.value=!1)}function A(H){const C=g.value;if(!C)return;const E=c.value,N=C.selectionStart,x=E.substring(0,v.value)+"#"+H.name+" "+E.substring(N);c.value=x;const S=v.value+H.name.length+2;setTimeout(()=>{C.setSelectionRange(S,S),C.focus()},0),l.value=!1}async function L(){if(!(!k.value||f.value)){f.value=!0;try{const[H,C]=a.value.split(":"),E={comm_type:r.value,content:c.value.trim()};H==="minion"&&(E.to_minion_id=C),await t.sendComm(e.legionId,E),c.value="",q()}catch(H){console.error("Failed to send comm:",H),alert(`Failed to send comm: ${H.message}`)}finally{f.value=!1}}}function z(){h.value=window.innerWidth}return he(()=>{window.addEventListener("resize",z)}),$e(()=>{window.removeEventListener("resize",z)}),de(l,H=>{if(H){const C=E=>{E.target.closest(".comm-composer")||(l.value=!1,document.removeEventListener("click",C))};setTimeout(()=>document.addEventListener("click",C),0)}}),(H,C)=>(u(),m("div",v_,[s.hideRecipientSelector?D("",!0):(u(),m("div",h_,[n("div",__,[ve(n("select",{"onUpdate:modelValue":C[0]||(C[0]=E=>a.value=E),class:"form-select form-select-sm",disabled:f.value},[C[3]||(C[3]=n("option",{value:""},"-- Select Recipient --",-1)),n("optgroup",b_,[(u(!0),m(ie,null,le(y.value,E=>(u(),m("option",{key:E.session_id,value:`minion:${E.session_id}`},$(T(E))+" "+$(O(E)),9,y_))),128))])],8,g_),[[dn,a.value]])]),n("div",$_,[ve(n("select",{"onUpdate:modelValue":C[1]||(C[1]=E=>r.value=E),class:"form-select form-select-sm",disabled:f.value},[...C[4]||(C[4]=[n("option",{value:"task"},"Task",-1),n("option",{value:"question"},"Question",-1),n("option",{value:"info"},"Info",-1),n("option",{value:"report"},"Report",-1)])],8,w_),[[dn,r.value]])])])),n("div",E_,[n("div",C_,[ve(n("textarea",{ref_key:"contentTextarea",ref:g,"onUpdate:modelValue":C[2]||(C[2]=E=>c.value=E),class:"form-control form-control-sm",rows:"1",placeholder:"Type message... Use # to mention minions",disabled:f.value,onInput:G,onKeydown:B},null,40,S_),[[Le,c.value]]),l.value?(u(),m("div",{key:0,ref_key:"autocompleteDropdown",ref:p,class:"autocomplete-dropdown position-absolute bg-white border rounded shadow-sm"},[(u(!0),m(ie,null,le(w.value,(E,N)=>(u(),m("div",{key:E.id,class:Z(["autocomplete-item px-2 py-1",{"bg-light":N===_.value}]),onClick:x=>A(E),onMouseenter:x=>_.value=N},$(E.type==="minion"?T(E):"#ï¸âƒ£")+" "+$(E.name)+$(E.role?` (${E.role})`:""),43,k_))),128))],512)):D("",!0)]),n("div",null,[n("button",{class:"btn btn-primary btn-sm",disabled:!k.value||f.value,onClick:L},[f.value?(u(),m("span",x_,[...C[5]||(C[5]=[n("span",{class:"spinner-border spinner-border-sm me-1"},null,-1),se(" Sending... ",-1)])])):(u(),m("span",A_,"Send"))],8,T_)])])]))}},O_=ee(M_,[["__scopeId","data-v-e52b8e8f"]]),D_={class:"message-content-column-full"},N_=["aria-expanded"],L_={class:"comm-sender-recipient"},I_={class:"comm-badge-summary"},j_=["title"],P_={class:"comm-summary-text text-muted ms-2"},R_=["aria-label"],W_={key:0,class:"comm-content-body"},H_=["innerHTML"],V_="ffffffff-ffff-ffff-ffff-ffffffffffff",F_={__name:"CommCard",props:{comm:{type:Object,required:!0},senderName:{type:String,required:!0},recipientName:{type:String,required:!0}},setup(s){const e=s;tt.setOptions({breaks:!0,gfm:!0});const t=j(!1);function o(){t.value=!t.value}const i=b(()=>e.comm.from_minion_id===V_),a=b(()=>{const h=new Date(e.comm.timestamp*1e3);return`${e.senderName} â†’ ${e.recipientName}
${h.toLocaleString()}`}),r=b(()=>({task:"bg-primary",question:"bg-info",info:"bg-secondary",report:"bg-success",system:"bg-dark"})[e.comm.comm_type]||"bg-secondary"),c=b(()=>{if(e.comm.summary)return e.comm.summary;const h=e.comm.content||"";return h.length>100?h.substring(0,100)+"...":h}),f=b(()=>{const h=e.comm.content||"";let l=tt.parse(h);return l=l.replace(/\n</g,"<"),l=l.replace(/\n+$/,""),is.sanitize(l)});return(h,l)=>(u(),m("div",{class:Z(["message-row message-row-comm",{"system-comm":i.value}])},[n("div",D_,[n("div",{class:"comm-header-accordion",onClick:o,role:"button","aria-expanded":t.value},[n("div",L_,[n("strong",{class:Z({"system-sender":i.value})},$(s.senderName),3),s.recipientName?(u(),m(ie,{key:0},[l[0]||(l[0]=n("span",{class:"text-muted mx-1"},"â†’",-1)),n("strong",null,$(s.recipientName),1)],64)):D("",!0)]),n("div",I_,[n("span",{class:Z(["badge",r.value]),title:a.value},$(s.comm.comm_type),11,j_),n("span",P_,$(c.value),1)]),n("div",{class:"expand-icon","aria-label":t.value?"Collapse":"Expand"},$(t.value?"â–¾":"â–¸"),9,R_)],8,N_),t.value?(u(),m("div",W_,[n("div",{class:"message-text",innerHTML:f.value},null,8,H_)])):D("",!0)])],2))}},B_=ee(F_,[["__scopeId","data-v-28513f64"]]),U_={class:"timeline-view d-flex flex-column h-100"},q_={key:0,class:"text-center text-muted"},z_={key:1,class:"text-center text-danger"},K_={key:2,class:"text-center text-muted"},G_={key:3,class:"comm-list"},Y_={__name:"TimelineView",props:{legionId:{type:String,required:!0}},setup(s){const e=s,t=ps();Me();const o=oe(),i=Ke(),a=me(),r=j(!0),c=j(null),f=j(null),h=b(()=>t.currentComms);function l(d){return d.from_user?"You":d.from_minion_id?d.from_minion_id==="ffffffff-ffff-ffff-ffff-ffffffffffff"?"SYSTEM":o.sessions.get(d.from_minion_id)?.name||"Unknown":"Unknown"}function w(d){return d.to_user?"You":d.to_minion_id?o.sessions.get(d.to_minion_id)?.name||"Unknown":"All"}async function _(){a.autoScrollEnabled&&(await es(),f.value&&(f.value.scrollTop=f.value.scrollHeight))}async function v(){r.value=!0,c.value=null;try{t.setCurrentLegion(e.legionId),await Promise.all([t.loadTimeline(e.legionId),t.loadMinions(e.legionId)]),await es(),await _(),setTimeout(()=>{_()},100)}catch(d){console.error("Failed to load timeline:",d),d.response?c.value=`${d.message} (${d.response.status})`:c.value=d.message||"Unknown error"}finally{r.value=!1}}function g(){i.connectLegion(e.legionId)}function p(){i.disconnectLegion()}return de(()=>h.value.length,()=>{_()}),he(()=>{o.currentSessionId=null,v(),g(),setTimeout(()=>{_()},100)}),$e(()=>{p()}),(d,y)=>(u(),m("div",U_,[ue(u_,{"legion-id":s.legionId},null,8,["legion-id"]),n("div",{ref_key:"messagesArea",ref:f,class:"timeline-messages flex-grow-1 overflow-auto"},[r.value?(u(),m("div",q_,[...y[0]||(y[0]=[n("div",{class:"spinner-border spinner-border-sm me-2",role:"status"},null,-1),se(" Loading timeline... ",-1)])])):c.value?(u(),m("div",z_," Failed to load timeline: "+$(c.value),1)):h.value.length===0?(u(),m("div",K_," No messages yet. Minions will appear here once they start communicating. ")):(u(),m("div",G_,[(u(!0),m(ie,null,le(h.value,k=>(u(),_e(B_,{key:k.comm_id,comm:k,"sender-name":l(k),"recipient-name":w(k)},null,8,["comm","sender-name","recipient-name"]))),128))]))],512),ue(O_,{"legion-id":s.legionId},null,8,["legion-id"]),ue(f_,{"legion-id":s.legionId},null,8,["legion-id"])]))}},J_=ee(Y_,[["__scopeId","data-v-b6752179"]]),X_={class:"minion-info flex-grow-1"},Q_={class:"minion-name"},Z_={key:0,class:"me-1"},eg={key:1,class:"badge bg-secondary ms-2"},tg={key:0,class:"latest-activity text-muted"},sg={key:0,class:"activity-prefix"},ng=["title"],og={key:1,class:"activity-time ms-1"},ig={key:1,class:"latest-activity text-muted"},ag={class:"activity-prefix"},rg=["title"],lg={key:2,class:"latest-activity text-muted fst-italic small"},cg={class:"node-row"},ug={class:"node-left"},dg={key:0,class:"me-2"},mg={key:1,class:"badge bg-secondary ms-2"},pg={class:"node-right"},fg={key:0,class:"latest-message-preview"},vg={key:0,class:"message-prefix"},hg=["title"],_g={key:1,class:"message-time ms-1"},gg={key:1,class:"last-comm-preview"},bg={class:"comm-direction"},yg=["title"],$g={key:2,class:"text-muted fst-italic small"},wg={class:"node-actions"},Eg={key:2,class:"minion-children"},Cg={key:1,class:"text-danger small ms-4"},Sg={__name:"MinionTreeNode",props:{minionData:{type:Object,required:!0},level:{type:Number,default:0},layout:{type:String,default:"two-column",validator:s=>["two-column","sidebar"].includes(s)}},emits:["minion-click"],setup(s,{emit:e}){const t=s,o=e,i=oe(),a=Te(),r=me(),c=b(()=>!t.minionData||!t.minionData.id?null:i.getSession(t.minionData.id)),f=b(()=>{if(!t.minionData||!t.minionData.id)return null;const A=a.messagesBySession.get(t.minionData.id);if(!A||A.length===0)return null;for(let L=A.length-1;L>=0;L--){const z=A[L];if(z.type!=="result"&&!(z.type==="user"&&z.content&&z.content.startsWith("Tool results:"))&&!(z.type==="system"&&z.content==="System message")&&!(z.type==="assistant"&&z.content==="Assistant response")&&(z.type==="user"||z.type==="assistant"||z.type==="system"))return{content:z.content,type:z.type,timestamp:z.timestamp}}return null}),h=b(()=>{if(!t.minionData)return null;const A={...t.minionData};return c.value&&(A.state=c.value.state,A.is_processing=c.value.is_processing,c.value.latest_message&&(A.latest_message=c.value.latest_message,A.latest_message_type=c.value.latest_message_type,A.latest_message_time=c.value.latest_message_time)),f.value&&(A.latest_message=f.value.content,A.latest_message_type=f.value.type,A.latest_message_time=f.value.timestamp),A}),l=b(()=>t.level*24),w=b(()=>!t.minionData||!t.minionData.id?!1:i.currentSessionId===t.minionData.id),_=b(()=>t.minionData&&t.minionData.children&&t.minionData.children.length>0),v=b(()=>t.minionData&&t.minionData.is_overseer&&_.value),g=b(()=>{const A=h.value;return A?A.state==="paused"&&A.is_processing?"pending-prompt":A.is_processing?"processing":A.state||"created":"created"}),p=b(()=>{const A=g.value;return{created:"status-dot-grey",starting:"status-dot-green status-blinking",active:"status-dot-green",running:"status-dot-green",processing:"status-dot-purple status-blinking",paused:"status-dot-grey","pending-prompt":"status-dot-yellow status-blinking",terminated:"status-dot-grey",error:"status-dot-red",failed:"status-dot-red"}[A]||"status-dot-grey"}),d=b(()=>{const A=g.value;return{backgroundColor:{created:"#d3d3d3",starting:"#90ee90",active:"#90ee90",running:"#90ee90",processing:"#dda0dd",paused:"#d3d3d3","pending-prompt":"#ffc107",terminated:"#d3d3d3",error:"#ffb3b3",failed:"#ffb3b3"}[A]||"#d3d3d3"}}),y=b(()=>{const A=h.value;if(!A||!A.latest_message_type)return"";const L=A.latest_message_type;return L==="user"?"User -->:":L==="system"?"System:":""}),k=b(()=>{const A=h.value;if(!A||!A.latest_message)return"";const L=A.latest_message,z=150;return L.length>z?L.slice(0,z)+"...":L}),T=b(()=>{const A=h.value;if(!A||!A.latest_message_time)return"";try{const L=Date.now();let z;if(typeof A.latest_message_time=="number"?z=A.latest_message_time<3250368e4?A.latest_message_time*1e3:A.latest_message_time:z=new Date(A.latest_message_time).getTime(),isNaN(z)||z<9466848e5||z>L+6e4)return console.warn("Invalid timestamp for relative time calculation:",A.latest_message_time,"parsed to:",z),"";const H=L-z;if(H<0)return"just now";const C=Math.floor(H/6e4),E=Math.floor(C/60),N=Math.floor(E/24);return N>0?`${N}d ago`:E>0?`${E}h ago`:C>0?`${C}m ago`:"just now"}catch(L){return console.error("Error calculating relative time:",L,A.latest_message_time),""}});function O(A){return A.to_user?"User":A.to_minion_name?A.to_minion_name:"unknown"}function q(A){const L=A.summary||A.content||"";return L.length>150?L.substring(0,150)+"...":L}function G(){o("minion-click",t.minionData.id)}function I(){const A=i.sessions.get(t.minionData.id);A&&r.showModal("edit-session",{session:A})}function B(){const A=i.sessions.get(t.minionData.id);A&&r.showModal("manage-session",{session:A})}return(A,L)=>{const z=no("MinionTreeNode",!0);return s.minionData?(u(),m("div",{key:0,class:"minion-tree-node",style:pt({marginLeft:`${l.value}px`})},[s.layout==="sidebar"?(u(),m("div",{key:0,class:Z(["minion-card minion-card-clickable border-start border-2 mb-2 d-flex align-items-center p-2",{active:w.value}]),onClick:G},[n("div",{class:Z(["status-dot me-2",p.value]),style:pt(d.value)},null,6),n("div",X_,[n("div",Q_,[v.value?(u(),m("span",Z_,"ðŸ‘‘")):D("",!0),n("strong",null,$(s.minionData.name),1),v.value?(u(),m("span",eg,$(s.minionData.children.length)+" "+$(s.minionData.children.length===1?"child":"children"),1)):D("",!0)]),h.value?.latest_message?(u(),m("div",tg,[y.value?(u(),m("span",sg,$(y.value),1)):D("",!0),n("span",{class:"activity-content",title:h.value.latest_message},$(k.value),9,ng),T.value?(u(),m("span",og,"("+$(T.value)+")",1)):D("",!0)])):s.minionData?.last_comm?(u(),m("div",ig,[n("span",ag,[L[1]||(L[1]=se("â†’ ",-1)),n("strong",null,$(O(s.minionData.last_comm)),1),L[2]||(L[2]=se(": ",-1))]),n("span",{class:"activity-content",title:s.minionData.last_comm.content||""},$(q(s.minionData.last_comm)),9,rg)])):(u(),m("div",lg," No activity yet "))]),n("button",{class:"btn btn-sm btn-outline-secondary me-1",title:"Edit minion",onClick:pe(I,["stop"])}," âœï¸ "),n("button",{class:"btn btn-sm btn-outline-secondary",title:"Manage minion",onClick:pe(B,["stop"])}," âš™ï¸ ")],2)):(u(),m("div",{key:1,class:Z(["minion-card minion-card-clickable border-start border-2 mb-2",{active:w.value}]),onClick:G},[n("div",cg,[n("div",ug,[n("div",{class:Z(["status-dot me-2",p.value]),style:pt(d.value)},null,6),v.value?(u(),m("span",dg,"ðŸ‘‘")):D("",!0),n("strong",null,$(s.minionData.name),1),v.value?(u(),m("span",mg,$(s.minionData.children.length)+" "+$(s.minionData.children.length===1?"child":"children"),1)):D("",!0)]),n("div",pg,[h.value?.latest_message?(u(),m("div",fg,[y.value?(u(),m("span",vg,$(y.value),1)):D("",!0),n("span",{class:"message-content",title:h.value.latest_message},$(k.value),9,hg),T.value?(u(),m("span",_g,"("+$(T.value)+")",1)):D("",!0)])):s.minionData?.last_comm?(u(),m("div",gg,[n("span",bg,[L[3]||(L[3]=se("â†’ ",-1)),n("strong",null,$(O(s.minionData.last_comm)),1),L[4]||(L[4]=se(":",-1))]),n("span",{class:"comm-content",title:s.minionData.last_comm.content||""},$(q(s.minionData.last_comm)),9,yg)])):(u(),m("div",$g," No activity yet "))]),n("div",wg,[n("button",{class:"btn btn-sm btn-outline-secondary me-1",title:"Edit minion",onClick:pe(I,["stop"])}," âœï¸ "),n("button",{class:"btn btn-sm btn-outline-secondary",title:"Manage minion",onClick:pe(B,["stop"])}," âš™ï¸ ")])])],2)),_.value?(u(),m("div",Eg,[(u(!0),m(ie,null,le(s.minionData.children,H=>(u(),_e(z,{key:H.id,"minion-data":H,level:s.level+1,layout:s.layout,onMinionClick:L[0]||(L[0]=C=>A.$emit("minion-click",C))},null,8,["minion-data","level","layout"]))),128))])):D("",!0)],4)):(u(),m("div",Cg," âš  Minion data is missing "))}}},ui=ee(Sg,[["__scopeId","data-v-e940b7c4"]]),kg={class:"project-overview d-flex flex-column h-100"},Tg={class:"project-overview-header border-bottom p-3"},xg={class:"d-flex align-items-center justify-content-between"},Ag={class:"mb-1"},Mg={key:0,class:"me-2"},Og={class:"text-muted font-monospace"},Dg={class:"d-flex gap-2"},Ng=["title"],Lg={class:"project-overview-content flex-grow-1 overflow-auto p-3"},Ig={key:0,class:"text-center py-5"},jg={key:1,class:"alert alert-danger"},Pg={key:2,class:"text-center py-5"},Rg={key:3},Wg={class:"row g-3 mb-4"},Hg={class:"col-md-4"},Vg={class:"card h-100"},Fg={class:"card-body"},Bg={class:"card-title mb-0"},Ug={class:"text-muted"},qg={class:"col-md-4"},zg={class:"card h-100"},Kg={class:"card-body"},Gg={class:"card-title mb-0"},Yg={class:"text-muted"},Jg={key:0,class:"card mb-4"},Xg={class:"card mb-4"},Qg={class:"card-header d-flex align-items-center justify-content-between"},Zg={class:"mb-0"},eb={class:"badge bg-secondary"},tb={class:"card-body"},sb={key:0,class:"text-center py-4"},nb={key:1,class:"text-center text-muted py-4"},ob={key:2,class:"hierarchy-tree"},ib={class:"user-root-node mb-3 border rounded bg-white"},ab={class:"node-row"},rb={class:"node-left"},lb={class:"badge bg-primary ms-2"},cb={class:"node-right"},ub={key:0,class:"last-comm-preview"},db={class:"comm-direction"},mb=["title"],pb={key:1,class:"text-muted fst-italic"},fb={class:"root-minions ms-4"},vb={class:"card"},hb={class:"card-body"},_b={class:"row mb-0"},gb={class:"col-sm-8 font-monospace text-break"},bb={class:"col-sm-8 font-monospace text-break"},yb={class:"col-sm-8"},$b={class:"project-overview-statusbar border-top p-2 bg-light d-flex align-items-center justify-content-between"},wb={class:"text-muted"},Eb={__name:"ProjectOverview",props:{projectId:{type:String,required:!0}},setup(s){const e=s,t=Lt(),o=Me(),i=oe(),a=me(),r=ps(),c=Ke(),f=j(!1),h=j(null),l=j(null),w=j(!1);let _=null;const v=b(()=>o.getProject(e.projectId)),g=b(()=>v.value?.session_ids?v.value.session_ids.map(E=>i.getSession(E)).filter(E=>E!=null):[]),p=b(()=>g.value.length>0),d=b(()=>g.value.length),y=b(()=>g.value.filter(E=>E.state==="ACTIVE").length),k=b(()=>{const E=g.value.some(S=>S.state==="ACTIVE"),N=g.value.some(S=>S.is_processing);return g.value.some(S=>S.state==="ERROR")?"Error":N?"Working":E?"Active":d.value>0?"Idle":"Empty"}),T=b(()=>{switch(k.value){case"Error":return"text-danger";case"Working":return"text-warning";case"Active":return"text-success";case"Idle":return"text-muted";default:return"text-secondary"}}),O=b(()=>{switch(k.value){case"Error":return"One or more sessions have errors";case"Working":return"Processing in progress";case"Active":return"Sessions are running";case"Idle":return"No active processing";default:return"No sessions created"}});async function q(){w.value=!0;try{const E=await ne.get(`/api/legions/${e.projectId}/hierarchy`);l.value=E}catch(E){console.error("Failed to load minion hierarchy:",E),l.value=null}finally{w.value=!1}}function G(E,N){if(E&&E.id===N)return E;if(E&&E.children)for(const x of E.children){const S=G(x,N);if(S)return S}return null}function I(E){return E.to_user?"User":E.to_minion_name?E.to_minion_name:"unknown"}function B(E){const N=E.summary||E.content||"";return N.length>150?N.substring(0,150)+"...":N}function A(E){if(l.value){if(E.from_minion_id){const N=G(l.value,E.from_minion_id);N&&N.type==="minion"&&(N.last_comm=E)}E.from_user&&l.value.type==="user"&&(l.value.last_comm=E)}}function L(E){t.push(`/session/${E}`)}function z(){t.push(`/timeline/${e.projectId}`)}function H(){a.showModal("edit-project",{project:v.value})}function C(){a.showModal("create-minion",{project:v.value})}return he(()=>{o.selectProject(e.projectId),i.currentSessionId=null,q(),r.setCurrentLegion(e.projectId),c.connectLegion(e.projectId),_=de(()=>i.sessions,E=>{if(l.value){for(const[N,x]of E)if(x.project_id===e.projectId){const S=G(l.value,N);S&&S.type==="minion"&&(S.state!==x.state&&(S.state=x.state),S.is_processing!==x.is_processing&&(S.is_processing=x.is_processing),S.latest_message!==x.latest_message&&(S.latest_message=x.latest_message,S.latest_message_type=x.latest_message_type,S.latest_message_time=x.latest_message_time))}}},{deep:!0}),de(()=>r.commsByLegion.get(e.projectId),E=>{if(E&&E.length>0){const N=E[E.length-1];A(N)}},{deep:!0}),de(()=>o.projects.get(e.projectId)?.session_ids?.length||0,(E,N)=>{E!==N&&q()})}),de(()=>e.projectId,E=>{o.selectProject(E),i.currentSessionId=null,q(),r.setCurrentLegion(E),c.connectLegion(E)}),$e(()=>{_&&_()}),(E,N)=>(u(),m("div",kg,[n("div",Tg,[n("div",xg,[n("div",null,[n("h4",Ag,[p.value?(u(),m("span",Mg,"ðŸ›")):D("",!0),se(" "+$(v.value?.name||"Project Overview"),1)]),n("small",Og,$(v.value?.working_directory),1)]),n("div",Dg,[n("button",{class:"btn btn-sm btn-outline-secondary",title:"Edit project",onClick:H}," âœï¸ Edit "),n("button",{class:"btn btn-sm btn-outline-primary",title:p.value?"Create minion":"Add session",onClick:C}," âž• "+$(p.value?"Add Minion":"Add Session"),9,Ng)])])]),n("div",Lg,[f.value?(u(),m("div",Ig,[...N[0]||(N[0]=[n("div",{class:"spinner-border",role:"status"},[n("span",{class:"visually-hidden"},"Loading...")],-1),n("p",{class:"text-muted mt-2"},"Loading project data...",-1)])])):h.value?(u(),m("div",jg,$(h.value),1)):v.value?(u(),m("div",Rg,[n("div",Wg,[n("div",Hg,[n("div",Vg,[n("div",Fg,[N[2]||(N[2]=n("h6",{class:"card-subtitle mb-2 text-muted"},"Sessions",-1)),n("h3",Bg,$(d.value),1),n("small",Ug,$(y.value)+" active",1)])])]),n("div",qg,[n("div",zg,[n("div",Kg,[N[3]||(N[3]=n("h6",{class:"card-subtitle mb-2 text-muted"},"Status",-1)),n("h3",Gg,[n("span",{class:Z(T.value)},$(k.value),3)]),n("small",Yg,$(O.value),1)])])])]),p.value?(u(),m("div",Jg,[N[4]||(N[4]=n("div",{class:"card-header"},[n("h5",{class:"mb-0"},"ðŸ› Legion Controls")],-1)),n("div",{class:"card-body"},[n("div",{class:"d-flex gap-2 flex-wrap"},[n("button",{class:"btn btn-outline-primary",onClick:z}," ðŸ“Š View Timeline ")])])])):D("",!0),n("div",Xg,[n("div",Qg,[n("h5",Zg,"ðŸŒ³ "+$(p.value?"Minion Hierarchy":"Sessions"),1),n("span",eb,$(g.value.length),1)]),n("div",tb,[w.value?(u(),m("div",sb,[...N[5]||(N[5]=[n("div",{class:"spinner-border spinner-border-sm",role:"status"},[n("span",{class:"visually-hidden"},"Loading...")],-1),n("p",{class:"text-muted mt-2 mb-0"},"Loading hierarchy...",-1)])])):!l.value||!l.value.children||l.value.children.length===0?(u(),m("div",nb,' No sessions yet. Click "Add Session" to create one. ')):(u(),m("div",ob,[n("div",ib,[n("div",ab,[n("div",rb,[N[6]||(N[6]=n("span",{class:"me-2",style:{"font-size":"1.2rem"}},"ðŸ‘¤",-1)),n("strong",null,$(l.value.name),1),n("span",lb,$(l.value.children.length)+" "+$(l.value.children.length===1?"minion":"minions"),1)]),n("div",cb,[l.value.last_comm?(u(),m("div",ub,[n("span",db,[N[7]||(N[7]=se(" â†’ ",-1)),n("strong",null,$(I(l.value.last_comm)),1),N[8]||(N[8]=se(": ",-1))]),n("span",{class:"comm-content",title:l.value.last_comm.content||""},$(B(l.value.last_comm)),9,mb)])):(u(),m("div",pb," No communications yet "))])])]),n("div",fb,[(u(!0),m(ie,null,le(l.value.children,x=>(u(),_e(ui,{key:x.id,"minion-data":x,level:1,layout:"two-column",onMinionClick:L},null,8,["minion-data"]))),128))])]))])]),n("div",vb,[N[12]||(N[12]=n("div",{class:"card-header"},[n("h5",{class:"mb-0"},"Configuration")],-1)),n("div",hb,[n("dl",_b,[N[9]||(N[9]=n("dt",{class:"col-sm-4"},"Working Directory",-1)),n("dd",gb,$(v.value.working_directory),1),N[10]||(N[10]=n("dt",{class:"col-sm-4"},"Project ID",-1)),n("dd",bb,$(v.value.project_id),1),N[11]||(N[11]=n("dt",{class:"col-sm-4"},"Legion Mode",-1)),n("dd",yb,$(p.value?"Yes (has minions)":"No"),1)])])])])):(u(),m("div",Pg,[...N[1]||(N[1]=[n("h5",{class:"text-muted"},"Project not found",-1),n("p",{class:"text-secondary"},"The requested project does not exist.",-1)])]))]),n("div",$b,[N[13]||(N[13]=n("small",{class:"text-muted"}," Project Overview ",-1)),n("small",wb,$(d.value)+" session"+$(d.value!==1?"s":""),1)])]))}},Cb=ee(Eb,[["__scopeId","data-v-168bf04c"]]),Sb=[{path:"/",name:"home",component:$i},{path:"/project/:projectId",name:"project",component:Cb,props:!0},{path:"/session/:sessionId",name:"session",component:o_,props:!0},{path:"/timeline/:legionId",name:"timeline",component:J_,props:!0}],kb=fi({history:vi(),routes:Sb}),Tb={class:"connection-indicators"},xb=["title"],Ab=["title"],Mb=["title"],Ob={__name:"ConnectionIndicator",setup(s){const e=Ke();function t(i){const a={ui:{connected:e.uiConnected,retryCount:e.uiRetryCount},session:{connected:e.sessionConnected,retryCount:e.sessionRetryCount},legion:{connected:e.legionConnected,retryCount:e.legionRetryCount}},{connected:r,retryCount:c}=a[i];return c>0&&!r?"indicator-connecting":r?"indicator-connected":"indicator-disconnected"}function o(i){const a={ui:"UI WebSocket",session:"Session WebSocket",legion:"Legion WebSocket"},r={ui:"Global UI state updates",session:"Session message streaming",legion:"Multi-agent communications"},c={ui:{connected:e.uiConnected,retryCount:e.uiRetryCount},session:{connected:e.sessionConnected,retryCount:e.sessionRetryCount},legion:{connected:e.legionConnected,retryCount:e.legionRetryCount}},{connected:f,retryCount:h}=c[i];let l="Disconnected";return f?l="Connected":h>0&&(l=`Reconnecting (attempt ${h})`),`${a[i]}
${r[i]}
Status: ${l}`}return(i,a)=>(u(),m("div",Tb,[n("div",{class:Z(["indicator",t("ui")]),title:o("ui")}," ðŸŒ ",10,xb),n("div",{class:Z(["indicator",t("session")]),title:o("session")}," ðŸ’¬ ",10,Ab),n("div",{class:Z(["indicator",t("legion")]),title:o("legion")}," ðŸ‘¥ ",10,Mb)]))}},Db=ee(Ob,[["__scopeId","data-v-d35b07c8"]]),Nb={class:"bg-white border-bottom shadow-sm d-flex justify-content-between align-items-center px-3 py-2"},Lb={class:"d-flex align-items-center gap-2"},Ib={__name:"AppHeader",setup(s){const e=me();function t(){e.toggleSidebar()}return(o,i)=>(u(),m("header",Nb,[n("div",{class:"d-flex align-items-center gap-2"},[n("button",{id:"sidebar-toggle-btn",class:"btn btn-sm btn-outline-secondary",title:"Toggle sidebar",onClick:t},[...i[0]||(i[0]=[n("span",null,"â˜°",-1)])]),i[1]||(i[1]=n("h1",{class:"mb-0 fs-4"},"Claude Code WebUI",-1))]),n("div",Lb,[ue(Db)])]))}},jb={class:"progress project-status-line",style:{height:"4px","border-radius":"0"}},Pb={key:0,class:"progress-bar bg-secondary",style:{width:"100%"}},Rb=["title"],Wb={__name:"ProjectStatusLine",props:{project:{type:Object,required:!0},sessions:{type:Array,default:()=>[]}},setup(s){const e=s,t=b(()=>!e.sessions||e.sessions.length===0?"100%":`${100/e.sessions.length}%`);function o(c){return c.state==="paused"&&c.is_processing?"pending-prompt":c.is_processing?"processing":c.state}function i(c){const f=o(c);return{created:"#d3d3d3",starting:"#90ee90",active:"#90ee90",running:"#90ee90",processing:"#dda0dd",paused:"#d3d3d3","pending-prompt":"#ffc107",terminated:"#d3d3d3",error:"#ffb3b3",failed:"#ffb3b3"}[f]||"#d3d3d3"}function a(c){const f=o(c);return f==="starting"||f==="processing"||f==="pending-prompt"}function r(c){const f=o(c),h=f.charAt(0).toUpperCase()+f.slice(1),l=c.name||"Unnamed Session",w=c.role?` (${c.role})`:"";return`${l}${w}: ${h}`}return(c,f)=>(u(),m("div",jb,[!s.sessions||s.sessions.length===0?(u(),m("div",Pb)):(u(!0),m(ie,{key:1},le(s.sessions,h=>(u(),m("div",{key:h.session_id,class:Z(["progress-bar",{"progress-bar-striped progress-bar-animated":a(h)}]),style:pt({width:t.value,backgroundColor:i(h),cursor:"help"}),title:r(h)},null,14,Rb))),128))]))}},Hb=ee(Wb,[["__scopeId","data-v-391d77c1"]]),Vb=["data-project-id"],Fb=["id"],Bb=["aria-expanded","aria-controls","aria-label","onKeydown"],Ub=["aria-label","onKeydown"],qb={class:"d-flex align-items-center mb-1",style:{gap:"0.5rem"}},zb={class:"fw-semibold",style:{"flex-shrink":"0"}},Kb={key:0,class:"legion-icon",style:{"font-size":"1rem","margin-right":"0.25rem"}},Gb={class:"d-flex gap-1 ms-auto",style:{"flex-shrink":"0"}},Yb=["title"],Jb=["title"],Xb=["id","aria-labelledby"],Qb={class:"accordion-body p-0"},Zb={class:"list-group list-group-flush"},ey={class:"minion-hierarchy-container"},ty={key:0,class:"text-center py-2"},sy={key:2,class:"text-muted text-center py-2 small"},ny={__name:"ProjectItem",props:{project:{type:Object,required:!0}},setup(s){const e=s,t=Lt(),o=Me(),i=oe(),a=me(),r=j(e.project.is_expanded||!1),c=j(null),f=j(!1);let h=null;const l=b(()=>o.formatPath(e.project.working_directory)),w=b(()=>!e.project?.session_ids||e.project.session_ids.length===0?[]:e.project.session_ids.map(C=>i.getSession(C)).filter(C=>C!=null)),_=b(()=>w.value.length>0),v=b(()=>{const C=t.currentRoute.value;return C.name==="timeline"&&C.params.legionId===e.project.project_id}),g=b(()=>{const C=t.currentRoute.value;return C.name==="project"&&C.params.projectId===e.project.project_id});function p(C){const E=window.bootstrap;if(!E)return;const N=document.getElementById(`collapse-${e.project.project_id}`);if(!N)return;E.Collapse.getOrCreateInstance(N).toggle(),r.value=!r.value}function d(){o.selectProject(e.project.project_id),t.push(`/project/${e.project.project_id}`)}function y(){r.value||(o.toggleExpansion(e.project.project_id),r.value=!0)}function k(){if(r.value){o.toggleExpansion(e.project.project_id),r.value=!1;const C=i.currentSessionId;C&&i.getSession(C)&&e.project.session_ids?.includes(C)&&t.push("/"),o.currentProjectId===e.project.project_id&&t.push("/")}}function T(){a.showModal("edit-project",{project:e.project})}function O(){a.showModal("create-minion",{project:e.project})}function q(){t.push(`/timeline/${e.project.project_id}`)}async function G(){f.value=!0;try{const C=await ne.get(`/api/legions/${e.project.project_id}/hierarchy`);c.value=C}catch(C){console.error("Failed to load minion hierarchy:",C),c.value=null}finally{f.value=!1}}function I(C){t.push(`/session/${C}`)}function B(C,E){if(C&&C.id===E)return C;if(C&&C.children)for(const N of C.children){const x=B(N,E);if(x)return x}return null}de(r,C=>{C&&G()}),he(()=>{h=de(()=>i.sessions,C=>{if(!(!c.value||!r.value)){for(const[E,N]of C)if(N.project_id===e.project.project_id){const x=B(c.value,E);x&&x.type==="minion"&&(x.state!==N.state&&(x.state=N.state),x.is_processing!==N.is_processing&&(x.is_processing=N.is_processing),x.latest_message!==N.latest_message&&(x.latest_message=N.latest_message,x.latest_message_type=N.latest_message_type,x.latest_message_time=N.latest_message_time))}}},{deep:!0}),de(()=>i.sessions.size,(C,E)=>{if(r.value&&(C>E&&Array.from(i.sessions.values()).some(S=>S.project_id===e.project.project_id&&(!c.value||!B(c.value,S.session_id)))&&(console.log("New minion detected, reloading hierarchy"),G()),C<E&&c.value)){const N=i.sessions,x=S=>S.type==="minion"&&!N.has(S.id)?!0:S.children?S.children.some(P=>x(P)):!1;x(c.value)&&(console.log("Minion deletion detected, reloading hierarchy"),G())}}),r.value&&G()}),$e(()=>{h&&h()});function A(C){C.dataTransfer.effectAllowed="move",C.dataTransfer.setData("application/project-id",e.project.project_id),C.dataTransfer.setData("text/plain",e.project.project_id),C.target.classList.add("dragging")}function L(C){C.target.classList.remove("dragging")}function z(C){C.preventDefault(),C.dataTransfer.dropEffect="move";const E=C.currentTarget.getBoundingClientRect(),N=E.top+E.height/2;C.clientY<N?(C.currentTarget.classList.add("drop-above"),C.currentTarget.classList.remove("drop-below")):(C.currentTarget.classList.add("drop-below"),C.currentTarget.classList.remove("drop-above"))}function H(C){C.preventDefault(),C.currentTarget.classList.remove("drop-above","drop-below");const E=C.dataTransfer.getData("application/project-id")||C.dataTransfer.getData("text/plain");if(!E||E===e.project.project_id)return;const N=C.currentTarget.getBoundingClientRect(),x=N.top+N.height/2,S=C.clientY<x,P=o.orderedProjects,F=P.findIndex(ce=>ce.project_id===e.project.project_id),Y=P.findIndex(ce=>ce.project_id===E);if(F===-1||Y===-1)return;const J=[...P],[re]=J.splice(Y,1);let ae=S?F:F+1;Y<F&&ae--,J.splice(ae,0,re);const te=J.map(ce=>ce.project_id);o.reorderProjects(te)}return(C,E)=>(u(),m("div",{class:"accordion-item border rounded mb-2","data-project-id":s.project.project_id,draggable:"true",onDragstart:A,onDragend:L,onDragover:z,onDrop:H},[n("h2",{class:"accordion-header",id:`heading-${s.project.project_id}`},[n("div",{class:Z(["accordion-button bg-white p-2 project-header-split",{collapsed:!r.value,"project-selected":g.value}])},[n("button",{class:"chevron-toggle btn btn-link p-0 me-2",type:"button","aria-expanded":r.value,"aria-controls":`collapse-${s.project.project_id}`,"aria-label":r.value?"Collapse session list":"Expand session list",onClick:pe(p,["stop"]),onKeydown:[Re(pe(p,["prevent"]),["enter"]),Re(pe(p,["prevent"]),["space"])]},[(u(),m("svg",{class:Z(["chevron-icon",{expanded:r.value}]),width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor"},[...E[0]||(E[0]=[n("path",{d:"M4.5 2L8.5 6L4.5 10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",fill:"none"},null,-1)])],2))],40,Bb),n("div",{class:"flex-grow-1 d-flex flex-column project-name-area",style:{"min-width":"0",cursor:"pointer"},role:"button",tabindex:"0","aria-label":`View ${s.project.name} overview`,onClick:d,onKeydown:[Re(pe(d,["prevent"]),["enter"]),Re(pe(d,["prevent"]),["space"])]},[n("div",qb,[n("div",zb,[_.value?(u(),m("span",Kb,"ðŸ›")):D("",!0),se(" "+$(s.project.name),1)]),n("div",Gb,[n("button",{class:"btn btn-sm btn-outline-secondary",title:"Edit or delete project",type:"button",onClick:pe(T,["stop"])}," âœï¸ "),n("button",{class:"btn btn-sm btn-outline-primary",title:_.value?"Create minion":"Add session or minion",type:"button",onClick:pe(O,["stop"])}," âž• ",8,Yb)])]),n("small",{class:"text-muted font-monospace",title:s.project.working_directory,style:{display:"block","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","min-width":"0"}},$(l.value),9,Jb)],40,Ub)],2)],8,Fb),ue(Hb,{project:s.project,sessions:w.value},null,8,["project","sessions"]),n("div",{id:`collapse-${s.project.project_id}`,class:Z(["accordion-collapse collapse",{show:r.value}]),"aria-labelledby":`heading-${s.project.project_id}`,onShown:y,onHidden:k},[n("div",Qb,[n("div",Zb,[_.value?(u(),m("div",{key:0,class:Z(["list-group-item list-group-item-action timeline-item d-flex align-items-center p-2",{active:v.value}]),style:{cursor:"pointer"},onClick:q},[...E[1]||(E[1]=[n("div",{class:"flex-grow-1"},[n("span",{style:{"font-size":"1rem","margin-right":"0.5rem"}},"ðŸ“Š"),n("span",{class:"fw-semibold"},"Timeline"),n("small",{class:"text-muted ms-2"},"(Comms)")],-1)])],2)):D("",!0),n("div",ey,[f.value?(u(),m("div",ty,[...E[2]||(E[2]=[n("div",{class:"spinner-border spinner-border-sm",role:"status"},[n("span",{class:"visually-hidden"},"Loading...")],-1)])])):c.value&&c.value.children&&c.value.children.length>0?(u(!0),m(ie,{key:1},le(c.value.children,N=>(u(),_e(ui,{key:N.id,"minion-data":N,level:0,layout:"sidebar",onMinionClick:I},null,8,["minion-data"]))),128)):(u(),m("div",sy," No sessions "))])])])],42,Xb)],40,Vb))}},oy=ee(ny,[["__scopeId","data-v-a15b34e8"]]),iy={class:"project-list"},ay={key:0,class:"text-muted text-center py-3"},ry={__name:"ProjectList",setup(s){const e=Me(),t=b(()=>e.orderedProjects);return(o,i)=>(u(),m("div",iy,[t.value.length===0?(u(),m("div",ay,' No projects yet. Click "New" to create one. ')):D("",!0),(u(!0),m(ie,null,le(t.value,a=>(u(),_e(oy,{key:a.project_id,project:a},null,8,["project"]))),128))]))}},ly={class:"flex-grow-1 overflow-auto p-3"},cy={id:"sessions-container"},uy={__name:"Sidebar",setup(s){const e=me(),t=b(()=>e.sidebarCollapsed),o=b(()=>e.isMobile),i=b(()=>{if(o.value)return{};const l=`${e.sidebarWidth}px`;return{width:l,minWidth:"200px",maxWidth:"30vw","--sidebar-width":l}});function a(){e.showModal("create-project")}const r=j(!1);function c(l){r.value=!0,document.addEventListener("mousemove",f),document.addEventListener("mouseup",h)}function f(l){r.value&&e.setSidebarWidth(l.clientX)}function h(){r.value=!1,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",h)}return(l,w)=>(u(),m("aside",{id:"sidebar",class:Z(["col-auto bg-light border-end d-flex flex-column overflow-auto",{collapsed:t.value,"mobile-open":!t.value&&o.value,"desktop-collapsed":t.value&&!o.value}]),style:pt(i.value)},[n("div",ly,[n("div",{class:"d-flex justify-content-between align-items-center mb-3"},[w[0]||(w[0]=n("h6",{class:"text-muted mb-0"},"Projects",-1)),n("button",{id:"create-project-btn",class:"btn btn-sm btn-outline-primary",title:"New Project",onClick:a}," ðŸ“ New ")]),n("div",cy,[ue(ry)])]),n("div",{class:"sidebar-resize-handle",onMousedown:c},null,32)],6))}},dy=ee(uy,[["__scopeId","data-v-d792f0f0"]]),my={class:"modal-dialog modal-lg"},py={class:"modal-content"},fy={class:"modal-body"},vy={class:"mb-3"},hy={class:"input-group"},_y=["disabled"],gy={key:0,class:"text-center py-4"},by={key:1,class:"alert alert-danger",role:"alert"},yy={key:2,class:"folder-list"},$y=["onClick","onDblclick"],wy={class:"d-flex align-items-center flex-grow-1"},Ey=["onClick"],Cy={key:1,class:"text-center text-muted py-3"},Sy={class:"modal-footer"},ky=["disabled"],Ty={__name:"FolderBrowserModal",setup(s){const e=me(),t=j(""),o=j(""),i=j([]),a=j(!1),r=j(""),c=j(null);let f=null,h=null;const l=b(()=>{if(!t.value)return null;const T=t.value.split(/[\\/]/).filter(Boolean);return T.length<=1?null:(T.pop(),T.length>0?"/"+T.join("/"):"/")});function w(T){if(!T)return"";const O=T.split(/[\\/]/).filter(Boolean);return O.length<=2?T:".../"+O.slice(-2).join("/")}async function _(){a.value=!0,r.value="",i.value=[],o.value="";try{const T=t.value?{path:t.value}:{},O=await ne.get("/api/filesystem/browse",{params:T});O.current_path&&(t.value=O.current_path),i.value=O.directories||[]}catch(T){console.error("Failed to load directory:",T),r.value=T.message||"Failed to load directory"}finally{a.value=!1}}function v(T){o.value=T.path}function g(T){t.value=T.path,o.value="",_()}function p(){l.value&&(t.value=l.value,o.value="",_())}function d(){const T=o.value||t.value;T&&h&&h(T),f&&f.hide()}function y(){_()}function k(){i.value=[],o.value="",r.value="",h=null,e.hideModal()}return de(()=>e.currentModal,T=>{if(T?.name==="folder-browser"&&f){const O=T.data||{};t.value=O.defaultPath||O.currentPath||"",h=O.onSelect||null,f.show()}}),he(()=>{c.value&&Se(async()=>{const{default:T}=await import("./modal-BK1Vt_in.js").then(O=>O.m);return{default:T}},__vite__mapDeps([0,1])).then(({default:T})=>{f=new T(c.value),c.value.addEventListener("shown.bs.modal",y),c.value.addEventListener("hidden.bs.modal",k)})}),$e(()=>{c.value&&(c.value.removeEventListener("shown.bs.modal",y),c.value.removeEventListener("hidden.bs.modal",k)),f&&f.dispose()}),(T,O)=>(u(),m("div",{class:"modal fade folder-browser-modal",id:"folderBrowserModal",tabindex:"-1","aria-labelledby":"folderBrowserModalLabel","aria-hidden":"true",ref_key:"modalElement",ref:c},[n("div",my,[n("div",py,[O[6]||(O[6]=n("div",{class:"modal-header"},[n("h5",{class:"modal-title",id:"folderBrowserModalLabel"},"Browse Folders"),n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),n("div",fy,[n("div",vy,[O[1]||(O[1]=n("label",{class:"form-label"},"Current Path:",-1)),n("div",hy,[ve(n("input",{type:"text",class:"form-control","onUpdate:modelValue":O[0]||(O[0]=q=>t.value=q),onKeyup:Re(_,["enter"]),placeholder:"Enter or select a directory path"},null,544),[[Le,t.value]]),n("button",{class:"btn btn-outline-secondary",onClick:_,disabled:a.value}," ðŸ”„ Refresh ",8,_y)])]),a.value?(u(),m("div",gy,[...O[2]||(O[2]=[n("div",{class:"spinner-border",role:"status"},[n("span",{class:"visually-hidden"},"Loading...")],-1)])])):r.value?(u(),m("div",by,$(r.value),1)):(u(),m("div",yy,[l.value?(u(),m("div",{key:0,class:"folder-item d-flex align-items-center p-2 border-bottom",onClick:p,role:"button"},[...O[3]||(O[3]=[n("span",{class:"me-2 text-secondary"},"â¬†ï¸",-1),n("span",{class:"text-secondary"},"..",-1)])])):D("",!0),(u(!0),m(ie,null,le(i.value,q=>(u(),m("div",{key:q.path,class:Z(["folder-item d-flex align-items-center justify-content-between p-2 border-bottom",{selected:q.path===o.value}]),onClick:G=>v(q),onDblclick:G=>g(q),role:"button"},[n("div",wy,[O[4]||(O[4]=n("span",{class:"me-2"},"ðŸ“",-1)),n("span",null,$(q.name),1)]),n("button",{class:"btn btn-sm btn-outline-primary",onClick:pe(G=>g(q),["stop"])}," Open ",8,Ey)],42,$y))),128)),i.value.length===0?(u(),m("div",Cy," No subdirectories found ")):D("",!0)]))]),n("div",Sy,[O[5]||(O[5]=n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),n("button",{type:"button",class:"btn btn-primary",onClick:d,disabled:!o.value},' Select "'+$(w(o.value||t.value))+'" ',9,ky)])])])],512))}},xy=ee(Ty,[["__scopeId","data-v-0d61ed46"]]),Ay={class:"modal-dialog"},My={class:"modal-content"},Oy={class:"modal-body"},Dy={class:"mb-3"},Ny={key:0,class:"invalid-feedback"},Ly={class:"mb-3"},Iy={class:"input-group"},jy={key:0,class:"invalid-feedback"},Py={class:"mb-3 form-check"},Ry={key:0,class:"mb-3 ms-4"},Wy={key:1,class:"alert alert-danger",role:"alert"},Hy={class:"modal-footer"},Vy=["disabled"],Fy={key:0,class:"spinner-border spinner-border-sm me-2"},By={__name:"ProjectCreateModal",setup(s){const e=Me(),t=oe(),o=me(),i=j({name:"",workingDirectory:"",createSession:!0,sessionName:"main"}),a=j({name:"",workingDirectory:""}),r=j(!1),c=j(""),f=j(null);let h=null;function l(){o.showModal("folder-browser",{currentPath:i.value.workingDirectory||"",onSelect:d=>{i.value.workingDirectory=d,a.value.workingDirectory=""}})}function w(){a.value={};let d=!0;return i.value.name.trim()||(a.value.name="Project name is required",d=!1),i.value.workingDirectory.trim()||(a.value.workingDirectory="Working directory is required",d=!1),d}async function _(){if(w()){r.value=!0,c.value="";try{const d=await e.createProject(i.value.name,i.value.workingDirectory);i.value.createSession&&await t.createSession(d.project_id,{name:i.value.sessionName||"main",permission_mode:"default",tools:[],model:"claude-sonnet-4-5-20250929"}),h&&h.hide(),v()}catch(d){console.error("Failed to create project:",d),c.value=d.message||"Failed to create project. Please try again."}finally{r.value=!1}}}function v(){i.value={name:"",workingDirectory:"",createSession:!0,sessionName:"main"},a.value={},c.value=""}function g(){const d=document.getElementById("projectName");d&&d.focus()}function p(){v(),o.hideModal()}return de(()=>o.currentModal,d=>{d?.name==="create-project"&&h&&h.show()}),he(()=>{f.value&&Se(async()=>{const{default:d}=await import("./modal-BK1Vt_in.js").then(y=>y.m);return{default:d}},__vite__mapDeps([0,1])).then(({default:d})=>{h=new d(f.value),f.value.addEventListener("shown.bs.modal",g),f.value.addEventListener("hidden.bs.modal",p)})}),$e(()=>{f.value&&(f.value.removeEventListener("shown.bs.modal",g),f.value.removeEventListener("hidden.bs.modal",p)),h&&h.dispose()}),(d,y)=>(u(),m("div",{class:"modal fade",id:"createProjectModal",tabindex:"-1","aria-labelledby":"createProjectModalLabel","aria-hidden":"true",ref_key:"modalElement",ref:f},[n("div",Ay,[n("div",My,[y[11]||(y[11]=n("div",{class:"modal-header"},[n("h5",{class:"modal-title",id:"createProjectModalLabel"},"Create New Project"),n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),n("div",Oy,[n("form",{onSubmit:pe(_,["prevent"])},[n("div",Dy,[y[4]||(y[4]=n("label",{for:"projectName",class:"form-label"},"Project Name",-1)),ve(n("input",{type:"text",class:Z(["form-control",{"is-invalid":a.value.name}]),id:"projectName","onUpdate:modelValue":y[0]||(y[0]=k=>i.value.name=k),placeholder:"My Project",required:""},null,2),[[Le,i.value.name]]),a.value.name?(u(),m("div",Ny,$(a.value.name),1)):D("",!0)]),n("div",Ly,[y[5]||(y[5]=n("label",{for:"workingDirectory",class:"form-label"},"Working Directory",-1)),n("div",Iy,[ve(n("input",{type:"text",class:Z(["form-control",{"is-invalid":a.value.workingDirectory}]),id:"workingDirectory","onUpdate:modelValue":y[1]||(y[1]=k=>i.value.workingDirectory=k),placeholder:"/path/to/project",required:""},null,2),[[Le,i.value.workingDirectory]]),n("button",{class:"btn btn-outline-secondary",type:"button",onClick:l}," Browse... "),a.value.workingDirectory?(u(),m("div",jy,$(a.value.workingDirectory),1)):D("",!0)]),y[6]||(y[6]=n("div",{class:"form-text"}," The project's working directory (cannot be changed after creation) ",-1))]),n("div",Py,[ve(n("input",{type:"checkbox",class:"form-check-input",id:"createSession","onUpdate:modelValue":y[2]||(y[2]=k=>i.value.createSession=k)},null,512),[[hi,i.value.createSession]]),y[7]||(y[7]=n("label",{class:"form-check-label",for:"createSession"}," Create initial session ",-1)),y[8]||(y[8]=n("div",{class:"form-text"}," You can add minions later from the project sidebar ",-1))]),i.value.createSession?(u(),m("div",Ry,[y[9]||(y[9]=n("label",{for:"sessionName",class:"form-label"}," Initial Session Name ",-1)),ve(n("input",{type:"text",class:"form-control",id:"sessionName","onUpdate:modelValue":y[3]||(y[3]=k=>i.value.sessionName=k),placeholder:"main"},null,512),[[Le,i.value.sessionName]])])):D("",!0),c.value?(u(),m("div",Wy,$(c.value),1)):D("",!0)],32)]),n("div",Hy,[y[10]||(y[10]=n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),n("button",{type:"button",class:"btn btn-primary",onClick:_,disabled:r.value},[r.value?(u(),m("span",Fy)):D("",!0),se(" "+$(r.value?"Creating...":"Create Project"),1)],8,Vy)])])])],512))}},Uy=ee(By,[["__scopeId","data-v-b8c9a401"]]),qy={class:"modal-dialog"},zy={class:"modal-content"},Ky={class:"modal-body"},Gy={class:"mb-3"},Yy={key:0,class:"invalid-feedback"},Jy={class:"mb-3"},Xy=["value"],Qy={key:0,class:"alert alert-danger",role:"alert"},Zy={class:"danger-zone"},e$={class:"text-muted small"},t$=["disabled"],s$={key:0,class:"alert alert-warning mt-3",role:"alert"},n$={class:"mb-2"},o$={class:"d-flex gap-2"},i$=["disabled"],a$={key:0,class:"spinner-border spinner-border-sm me-2"},r$=["disabled"],l$={class:"modal-footer"},c$=["disabled"],u$={key:0,class:"spinner-border spinner-border-sm me-2"},d$={__name:"ProjectEditModal",setup(s){const e=Me(),t=me(),o=j(null),i=j({name:""}),a=j({name:""}),r=j(!1),c=j(!1),f=j(""),h=j(!1),l=j(null);let w=null;const _=b(()=>o.value?.session_ids?.length||0);function v(){a.value={};let T=!0;return i.value.name.trim()||(a.value.name="Project name is required",T=!1),T}async function g(){if(!(!v()||!o.value)){r.value=!0,f.value="";try{await e.updateProject(o.value.project_id,{name:i.value.name}),w&&w.hide()}catch(T){console.error("Failed to update project:",T),f.value=T.message||"Failed to update project. Please try again."}finally{r.value=!1}}}async function p(){if(o.value){c.value=!0,f.value="";try{await e.deleteProject(o.value.project_id),w&&w.hide()}catch(T){console.error("Failed to delete project:",T),f.value=T.message||"Failed to delete project. Please try again."}finally{c.value=!1}}}function d(){i.value={name:""},a.value={},f.value="",h.value=!1}function y(){const T=document.getElementById("editProjectName");T&&(T.focus(),T.select())}function k(){d(),o.value=null,t.hideModal()}return de(()=>t.currentModal,T=>{if(T?.name==="edit-project"&&w){const O=T.data||{};o.value=O.project,o.value&&(i.value.name=o.value.name),w.show()}}),he(()=>{l.value&&Se(async()=>{const{default:T}=await import("./modal-BK1Vt_in.js").then(O=>O.m);return{default:T}},__vite__mapDeps([0,1])).then(({default:T})=>{w=new T(l.value),l.value.addEventListener("shown.bs.modal",y),l.value.addEventListener("hidden.bs.modal",k)})}),$e(()=>{l.value&&(l.value.removeEventListener("shown.bs.modal",y),l.value.removeEventListener("hidden.bs.modal",k)),w&&w.dispose()}),(T,O)=>(u(),m("div",{class:"modal fade",id:"editProjectModal",tabindex:"-1","aria-labelledby":"editProjectModalLabel","aria-hidden":"true",ref_key:"modalElement",ref:l},[n("div",qy,[n("div",zy,[O[10]||(O[10]=n("div",{class:"modal-header"},[n("h5",{class:"modal-title",id:"editProjectModalLabel"},"Edit Project"),n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),n("div",Ky,[n("form",{onSubmit:pe(g,["prevent"])},[n("div",Gy,[O[3]||(O[3]=n("label",{for:"editProjectName",class:"form-label"},"Project Name",-1)),ve(n("input",{type:"text",class:Z(["form-control",{"is-invalid":a.value.name}]),id:"editProjectName","onUpdate:modelValue":O[0]||(O[0]=q=>i.value.name=q),placeholder:"My Project",required:""},null,2),[[Le,i.value.name]]),a.value.name?(u(),m("div",Yy,$(a.value.name),1)):D("",!0)]),n("div",Jy,[O[4]||(O[4]=n("label",{class:"form-label"},"Working Directory",-1)),n("input",{type:"text",class:"form-control",value:o.value?.working_directory,disabled:"",readonly:""},null,8,Xy),O[5]||(O[5]=n("div",{class:"form-text text-muted"}," Working directory cannot be changed after creation ",-1))]),f.value?(u(),m("div",Qy,$(f.value),1)):D("",!0)],32),O[8]||(O[8]=n("hr",null,null,-1)),n("div",Zy,[O[6]||(O[6]=n("h6",{class:"text-danger"},"Danger Zone",-1)),n("p",e$," Deleting this project will also delete all "+$(_.value)+" session(s) and their data. This action cannot be undone. ",1),n("button",{type:"button",class:"btn btn-outline-danger",onClick:O[1]||(O[1]=q=>h.value=!0),disabled:c.value}," ðŸ—‘ï¸ Delete Project ",8,t$)]),h.value?(u(),m("div",s$,[O[7]||(O[7]=n("strong",null,"Are you sure?",-1)),n("p",n$,' This will permanently delete the project "'+$(o.value?.name)+'" and all '+$(_.value)+" session(s). ",1),n("div",o$,[n("button",{type:"button",class:"btn btn-danger btn-sm",onClick:p,disabled:c.value},[c.value?(u(),m("span",a$)):D("",!0),se(" "+$(c.value?"Deleting...":"Yes, Delete Permanently"),1)],8,i$),n("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:O[2]||(O[2]=q=>h.value=!1),disabled:c.value}," Cancel ",8,r$)])])):D("",!0)]),n("div",l$,[O[9]||(O[9]=n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),n("button",{type:"button",class:"btn btn-primary",onClick:g,disabled:r.value},[r.value?(u(),m("span",u$)):D("",!0),se(" "+$(r.value?"Saving...":"Save Changes"),1)],8,c$)])])])],512))}},m$=ee(d$,[["__scopeId","data-v-52679516"]]),p$={class:"general-tab"},f$={key:0,class:"mb-3"},v$={for:"template-select",class:"form-label"},h$=["value"],_$=["value"],g$={key:0,class:"form-text"},b$={class:"mb-3"},y$={for:"config-name",class:"form-label"},$$=["value","placeholder","pattern","title"],w$={key:0,class:"invalid-feedback"},E$={key:1,class:"form-text"},C$={key:1,class:"mb-3"},S$=["value"],k$={class:"mb-3"},T$=["value"],x$={key:0,class:"form-text"},A$={class:"mb-3"},M$=["value","disabled"],O$={key:0,value:"bypassPermissions"},D$={class:"form-text"},N$={key:0,class:"text-warning"},L$={key:1},I$={class:"mb-3"},j$={for:"config-role",class:"form-label"},P$=["value","placeholder"],R$={class:"form-text"},W$={key:2,class:"mb-3"},H$={class:"input-group"},V$=["value","placeholder","disabled","readonly"],F$={class:"form-text"},B$={key:3,class:"mb-3"},U$={class:"form-control-plaintext"},q$={key:4,class:"mb-3 form-check"},z$=["checked"],K$={__name:"GeneralTab",props:{mode:{type:String,required:!0},formData:{type:Object,required:!0},errors:{type:Object,required:!0},templates:{type:Array,default:()=>[]},selectedTemplateId:{type:String,default:null},session:{type:Object,default:null}},emits:["update:form-data","update:selected-template-id","open-folder-browser","open-template-manager"],setup(s){const e=s,t=b(()=>e.mode==="create-session"||e.mode==="edit-session"),o=b(()=>e.mode==="create-template"||e.mode==="edit-template"),i=b(()=>e.mode==="create-session"),a=b(()=>e.mode==="edit-session"),r=b(()=>e.session?.state==="active"||e.session?.state==="starting"),c=b(()=>e.session?.initial_permission_mode==="bypassPermissions"),f=b(()=>e.selectedTemplateId?e.templates.find(_=>_.template_id===e.selectedTemplateId):null),h={sonnet:{description:"Smart model for coding and complex agents - best balance of speed & capability"},opus:{description:"Most capable model for complex reasoning, advanced analysis, and sophisticated tasks"},haiku:{description:"Optimized for speed and cost-efficiency on straightforward tasks"},opusplan:{description:"Uses Opus for planning phase, Sonnet for execution - best of both worlds"}},l=b(()=>h[e.formData.model]||null);function w(_){return{created:"bg-secondary",starting:"bg-info",active:"bg-success",paused:"bg-warning",terminating:"bg-warning",terminated:"bg-secondary",error:"bg-danger"}[_]||"bg-secondary"}return(_,v)=>(u(),m("div",p$,[i.value?(u(),m("div",f$,[n("label",v$,[v[10]||(v[10]=se(" Template ",-1)),n("button",{type:"button",onClick:v[0]||(v[0]=g=>_.$emit("open-template-manager")),class:"btn btn-link btn-sm p-0 ms-2"}," Manage Templates ")]),n("select",{id:"template-select",value:s.selectedTemplateId,onChange:v[1]||(v[1]=g=>_.$emit("update:selected-template-id",g.target.value||null)),class:"form-select"},[v[11]||(v[11]=n("option",{value:null},"[None - Manual Configuration]",-1)),(u(!0),m(ie,null,le(s.templates,g=>(u(),m("option",{key:g.template_id,value:g.template_id},$(g.name),9,_$))),128))],40,h$),f.value?(u(),m("div",g$,$(f.value.description),1)):D("",!0)])):D("",!0),n("div",b$,[n("label",y$,[se($(o.value?"Template Name":"Session Name")+" ",1),v[12]||(v[12]=n("span",{class:"text-danger"},"*",-1))]),n("input",{id:"config-name",type:"text",class:Z(["form-control",{"is-invalid":s.errors.name}]),value:s.formData.name,onInput:v[2]||(v[2]=g=>_.$emit("update:form-data","name",g.target.value)),placeholder:o.value?"e.g., Code Expert":"main",pattern:t.value?"[^\\s]+":void 0,title:t.value?"Session name must be a single word with no spaces":void 0,required:""},null,42,$$),s.errors.name?(u(),m("div",w$,$(s.errors.name),1)):D("",!0),t.value?(u(),m("div",E$,"Must be a single word (no spaces) for #nametag matching")):D("",!0)]),o.value?(u(),m("div",C$,[v[13]||(v[13]=n("label",{for:"config-description",class:"form-label"},"Description",-1)),n("textarea",{id:"config-description",class:"form-control",value:s.formData.description,onInput:v[3]||(v[3]=g=>_.$emit("update:form-data","description",g.target.value)),rows:"2",placeholder:"Brief description of this template's purpose"},null,40,S$)])):D("",!0),n("div",k$,[v[15]||(v[15]=n("label",{for:"config-model",class:"form-label"},"Model",-1)),n("select",{id:"config-model",class:"form-select",value:s.formData.model,onChange:v[4]||(v[4]=g=>_.$emit("update:form-data","model",g.target.value))},[...v[14]||(v[14]=[n("option",{value:"sonnet"},"Sonnet 4.5 (Recommended) - Coding & complex agents",-1),n("option",{value:"opus"},"Opus 4.5 - Complex reasoning tasks",-1),n("option",{value:"haiku"},"Haiku 4.5 - Fastest for simple tasks",-1),n("option",{value:"opusplan"},"OpusPlan - Opus planning + Sonnet execution",-1)])],40,T$),l.value?(u(),m("div",x$,$(l.value.description),1)):D("",!0)]),n("div",A$,[v[19]||(v[19]=n("label",{for:"config-permission-mode",class:"form-label"},"Permission Mode",-1)),n("select",{id:"config-permission-mode",class:"form-select",value:s.formData.permission_mode,onChange:v[5]||(v[5]=g=>_.$emit("update:form-data","permission_mode",g.target.value)),disabled:a.value&&!r.value},[v[16]||(v[16]=n("option",{value:"default"},"Default (Prompt for tools not in settings)",-1)),v[17]||(v[17]=n("option",{value:"acceptEdits"},"Accept Edits (Auto-approve Edit/Write)",-1)),v[18]||(v[18]=n("option",{value:"plan"},"Plan Mode (Auto-resets after ExitPlanMode)",-1)),!a.value||c.value?(u(),m("option",O$," Bypass Permissions (No prompts - use with caution) ")):D("",!0)],40,M$),n("div",D$,[a.value&&!r.value?(u(),m("span",N$," Session must be active to change permission mode. Start the session first. ")):(u(),m("span",L$,"Controls which tool actions require permission prompts"))])]),n("div",I$,[n("label",j$,$(o.value?"Default Role":"Role"),1),n("input",{id:"config-role",type:"text",class:"form-control",value:s.formData.default_role,onInput:v[6]||(v[6]=g=>_.$emit("update:form-data","default_role",g.target.value)),placeholder:o.value?"e.g., Code review and refactoring specialist":"Optional role description"},null,40,P$),n("div",R$,$(o.value?"Default role for minions using this template":"Optional role description for the session"),1)]),t.value?(u(),m("div",W$,[v[20]||(v[20]=n("label",{for:"config-working-dir",class:"form-label"},"Working Directory",-1)),n("div",H$,[n("input",{id:"config-working-dir",type:"text",class:"form-control",value:s.formData.working_directory,onInput:v[7]||(v[7]=g=>_.$emit("update:form-data","working_directory",g.target.value)),placeholder:a.value?"":"Leave empty to inherit from project",disabled:a.value,readonly:a.value},null,40,V$),a.value?D("",!0):(u(),m("button",{key:0,type:"button",class:"btn btn-outline-secondary",onClick:v[8]||(v[8]=g=>_.$emit("open-folder-browser"))}," Browse "))]),n("div",F$,$(a.value?"Working directory is inherited from project":"Custom working directory for git worktrees or multi-repo workflows"),1)])):D("",!0),a.value&&s.session?(u(),m("div",B$,[v[21]||(v[21]=n("label",{class:"form-label"},"Current State",-1)),n("div",U$,[n("span",{class:Z(["badge",w(s.session.state)])},$(s.session.state),3)])])):D("",!0),i.value?(u(),m("div",q$,[n("input",{type:"checkbox",class:"form-check-input",id:"config-start-immediately",checked:s.formData.startImmediately,onChange:v[9]||(v[9]=g=>_.$emit("update:form-data","startImmediately",g.target.checked))},null,40,z$),v[22]||(v[22]=n("label",{class:"form-check-label",for:"config-start-immediately"}," Start session immediately after creation ",-1))])):D("",!0)]))}},G$=ee(K$,[["__scopeId","data-v-c93dffd4"]]),Y$={class:"permissions-tab"},J$={class:"mb-3"},X$={class:"allowed-tools-editor"},Q$={key:0,class:"tools-list mb-2"},Z$=["onClick"],ew={class:"input-group input-group-sm"},tw=["onKeydown"],sw=["disabled"],nw={class:"mt-2"},ow=["onClick"],iw={class:"form-text"},aw={class:"mb-3"},rw={class:"capabilities-editor"},lw={key:0,class:"capabilities-list mb-2"},cw=["onClick"],uw={class:"input-group input-group-sm"},dw=["onKeydown"],mw=["disabled"],pw={class:"mb-3"},fw={key:0,class:"mt-2"},vw=["value"],hw=["value"],_w={__name:"PermissionsTab",props:{mode:{type:String,required:!0},formData:{type:Object,required:!0},errors:{type:Object,required:!0}},emits:["update:form-data"],setup(s,{emit:e}){const t=s,o=e,i=j(""),a=j(""),r=j(!1),c=["bash","read","edit","write","glob","grep","webfetch","websearch","task","todo"],f=b(()=>t.mode==="create-template"||t.mode==="edit-template"),h=b(()=>!t.formData.allowed_tools||!t.formData.allowed_tools.trim()?[]:t.formData.allowed_tools.split(",").map(d=>d.trim()).filter(d=>d.length>0)),l=b(()=>!t.formData.capabilities||!t.formData.capabilities.trim()?[]:t.formData.capabilities.split(",").map(d=>d.trim()).filter(d=>d.length>0));function w(){const d=i.value.trim().toLowerCase();if(d){if(!h.value.includes(d)){const y=[...h.value,d];o("update:form-data","allowed_tools",y.join(", "))}i.value=""}}function _(d){const y=[...h.value];y.splice(d,1),o("update:form-data","allowed_tools",y.join(", "))}function v(d){if(h.value.includes(d)){const y=h.value.indexOf(d);_(y)}else{const y=[...h.value,d];o("update:form-data","allowed_tools",y.join(", "))}}function g(){const d=a.value.trim().toLowerCase();if(d){if(!l.value.includes(d)){const y=[...l.value,d];o("update:form-data","capabilities",y.join(", "))}a.value=""}}function p(d){const y=[...l.value];y.splice(d,1),o("update:form-data","capabilities",y.join(", "))}return(d,y)=>(u(),m("div",Y$,[n("div",J$,[y[6]||(y[6]=n("label",{for:"config-allowed-tools",class:"form-label"},"Allowed Tools",-1)),n("div",X$,[h.value.length>0?(u(),m("div",Q$,[(u(!0),m(ie,null,le(h.value,(k,T)=>(u(),m("span",{key:T,class:"badge bg-primary me-1 mb-1 tool-badge"},[se($(k)+" ",1),n("button",{type:"button",class:"btn-close btn-close-white ms-1",onClick:O=>_(T),"aria-label":"Remove tool"},null,8,Z$)]))),128))])):D("",!0),n("div",ew,[ve(n("input",{type:"text",class:"form-control","onUpdate:modelValue":y[0]||(y[0]=k=>i.value=k),onKeydown:Re(pe(w,["prevent"]),["enter"]),placeholder:"Add tool (e.g., bash, read, edit)"},null,40,tw),[[Le,i.value]]),n("button",{type:"button",class:"btn btn-outline-primary",onClick:w,disabled:!i.value.trim()}," Add ",8,sw)]),n("div",nw,[y[5]||(y[5]=n("span",{class:"form-text me-2"},"Quick add:",-1)),(u(),m(ie,null,le(c,k=>n("button",{key:k,type:"button",class:Z(["btn btn-outline-secondary btn-sm me-1 mb-1",{"btn-secondary text-white":h.value.includes(k)}]),onClick:T=>v(k)},$(k),11,ow)),64))])]),n("div",iw,$(f.value?"Default tools allowed for sessions using this template":"Leave empty to allow all tools"),1)]),n("div",aw,[y[7]||(y[7]=n("label",{for:"config-capabilities",class:"form-label"},"Capabilities",-1)),n("div",rw,[l.value.length>0?(u(),m("div",lw,[(u(!0),m(ie,null,le(l.value,(k,T)=>(u(),m("span",{key:T,class:"badge bg-info me-1 mb-1 capability-badge"},[se($(k)+" ",1),n("button",{type:"button",class:"btn-close btn-close-white ms-1",onClick:O=>p(T),"aria-label":"Remove capability"},null,8,cw)]))),128))])):D("",!0),n("div",uw,[ve(n("input",{type:"text",class:"form-control","onUpdate:modelValue":y[1]||(y[1]=k=>a.value=k),onKeydown:Re(pe(g,["prevent"]),["enter"]),placeholder:"Add capability (e.g., python, testing)"},null,40,dw),[[Le,a.value]]),n("button",{type:"button",class:"btn btn-outline-info",onClick:g,disabled:!a.value.trim()}," Add ",8,mw)])]),y[8]||(y[8]=n("div",{class:"form-text"},"Comma-separated list of capability keywords for discovery",-1))]),n("div",pw,[n("a",{class:"text-muted small",role:"button",onClick:y[2]||(y[2]=k=>r.value=!r.value)},$(r.value?"Hide":"Show")+" raw input ",1),r.value?(u(),m("div",fw,[y[9]||(y[9]=n("label",{class:"form-label small text-muted"},"Allowed Tools (comma-separated)",-1)),n("input",{type:"text",class:"form-control form-control-sm",value:s.formData.allowed_tools,onInput:y[3]||(y[3]=k=>d.$emit("update:form-data","allowed_tools",k.target.value)),placeholder:"bash, read, edit, write, glob, grep"},null,40,vw),y[10]||(y[10]=n("label",{class:"form-label small text-muted mt-2"},"Capabilities (comma-separated)",-1)),n("input",{type:"text",class:"form-control form-control-sm",value:s.formData.capabilities,onInput:y[4]||(y[4]=k=>d.$emit("update:form-data","capabilities",k.target.value)),placeholder:"python, testing, debugging"},null,40,hw)])):D("",!0)])]))}},gw=ee(_w,[["__scopeId","data-v-60fd6aa0"]]),bw={class:"advanced-tab"},yw={class:"mb-3"},$w={for:"config-system-prompt",class:"form-label"},ww=["value","rows","maxlength","placeholder"],Ew={class:"form-text d-flex justify-content-between"},Cw={key:0,class:"invalid-feedback"},Sw={class:"mb-3 form-check"},kw=["checked"],Tw={key:0,class:"form-text text-warning"},xw={key:0,class:"mb-3"},Aw=["value"],Mw={class:"form-text d-flex justify-content-between"},Ow={key:0,class:"invalid-feedback"},Dw={key:1,class:"mb-3 form-check"},Nw=["checked"],Lw={key:2,class:"mb-3"},Iw={class:"card"},jw={class:"card-body"},Pw={key:0,class:"mb-2"},Rw={key:1,class:"mb-2"},Ww={key:2,class:"mt-2"},Hw={class:"form-control bg-light",style:{height:"auto","min-height":"60px","white-space":"pre-wrap"},readonly:""},Vw={__name:"AdvancedTab",props:{mode:{type:String,required:!0},formData:{type:Object,required:!0},errors:{type:Object,required:!0}},emits:["update:form-data"],setup(s,{emit:e}){const t=s,o=e,i=b(()=>t.mode==="create-session"||t.mode==="edit-session"),a=b(()=>t.mode==="create-template"||t.mode==="edit-template"),r=b(()=>t.mode==="edit-session"),c=b(()=>a.value?6e3:2e3),f=b(()=>a.value?t.formData.system_prompt:t.formData.initialization_context),h=b(()=>f.value?.length||0),l=b(()=>h.value>c.value),w=b(()=>{const k=c.value*.9;return h.value>k&&h.value<=c.value}),_=b(()=>a.value?"Optional default system prompt for sessions using this template":"Instructions and context for the session..."),v=b(()=>t.formData.override_system_prompt?a.value?"This prompt will replace Claude Code's preset":"This context will replace Claude Code's preset and legion guide":a.value?"This prompt will be appended to Claude Code's preset":"This context will be appended to legion guide and Claude Code's preset"),g=b(()=>t.formData.system_prompt?.length||0),p=b(()=>g.value>6e3),d=b(()=>g.value>5500&&g.value<=6e3);function y(k){const T=k.target.value,O=a.value?"system_prompt":"initialization_context";o("update:form-data",O,T)}return(k,T)=>(u(),m("div",bw,[n("div",yw,[n("label",$w,$(a.value?"Default System Prompt":"Initialization Context"),1),n("textarea",{id:"config-system-prompt",class:Z(["form-control",{"is-invalid":l.value}]),value:f.value,onInput:y,rows:a.value?4:5,maxlength:c.value,placeholder:_.value},null,42,ww),n("div",Ew,[n("span",null,$(v.value),1),n("span",{class:Z({"text-danger":l.value,"text-warning":w.value})},$(h.value)+" / "+$(c.value)+" chars ",3)]),l.value?(u(),m("div",Cw,$(a.value?"System prompt":"Initialization context")+" exceeds "+$(c.value)+" character limit ",1)):D("",!0)]),n("div",Sw,[n("input",{type:"checkbox",class:"form-check-input",id:"config-override-prompt",checked:s.formData.override_system_prompt,onChange:T[0]||(T[0]=O=>k.$emit("update:form-data","override_system_prompt",O.target.checked))},null,40,kw),T[3]||(T[3]=n("label",{class:"form-check-label",for:"config-override-prompt"}," Override Claude Code preset (use custom prompt only) ",-1)),s.formData.override_system_prompt?(u(),m("div",Tw,[n("small",null,"Override mode may cause unexpected behaviors. Only custom instructions will be used (no Claude Code preset"+$(a.value?"":" or legion guide")+").",1)])):D("",!0)]),i.value?(u(),m("div",xw,[T[4]||(T[4]=n("label",{for:"config-additional-prompt",class:"form-label"}," Additional Instructions ",-1)),n("textarea",{id:"config-additional-prompt",class:Z(["form-control",{"is-invalid":p.value}]),value:s.formData.system_prompt,onInput:T[1]||(T[1]=O=>k.$emit("update:form-data","system_prompt",O.target.value)),rows:"3",maxlength:6e3,placeholder:"Additional instructions to append to the system prompt..."},null,42,Aw),n("div",Mw,[n("span",null,$(s.formData.override_system_prompt?"These instructions will be used as the system prompt":"These instructions will be appended to the system prompt"),1),n("span",{class:Z({"text-danger":p.value,"text-warning":d.value})},$(g.value)+" / 6000 chars ",3)]),p.value?(u(),m("div",Ow," Additional instructions exceed 6000 character limit ")):D("",!0)])):D("",!0),i.value?(u(),m("div",Dw,[n("input",{type:"checkbox",class:"form-check-input",id:"config-sandbox",checked:s.formData.sandbox_enabled,onChange:T[2]||(T[2]=O=>k.$emit("update:form-data","sandbox_enabled",O.target.checked))},null,40,Nw),T[5]||(T[5]=n("label",{class:"form-check-label",for:"config-sandbox"}," Enable Sandbox Mode ",-1)),n("div",{class:Z(["form-text",s.formData.sandbox_enabled?"text-info":"text-muted"])},[n("small",null,$(s.formData.sandbox_enabled?"Sandbox enabled: Session will have OS-level isolation restricting file system and network access.":"Sandbox mode restricts file system and network access for added security."),1)],2)])):D("",!0),r.value&&(s.formData.system_prompt||s.formData.override_system_prompt)?(u(),m("div",Lw,[T[9]||(T[9]=n("label",{class:"form-label"},"System Prompt Configuration",-1)),n("div",Iw,[n("div",jw,[s.formData.override_system_prompt?(u(),m("div",Pw,[...T[6]||(T[6]=[n("span",{class:"badge bg-warning text-dark"},"Override Mode",-1),n("div",{class:"form-text text-warning mt-1"}," Using custom prompt only (no Claude Code preset) ",-1)])])):(u(),m("div",Rw,[...T[7]||(T[7]=[n("span",{class:"badge bg-info"},"Append Mode",-1),n("div",{class:"form-text mt-1"}," Custom instructions appended to Claude Code preset ",-1)])])),s.formData.system_prompt?(u(),m("div",Ww,[T[8]||(T[8]=n("strong",{class:"small"},"Custom Instructions:",-1)),n("div",Hw,$(s.formData.system_prompt),1)])):D("",!0)])])])):D("",!0)]))}},Fw=ee(Vw,[["__scopeId","data-v-0b73b368"]]),Bw={class:"modal-dialog modal-lg modal-dialog-centered"},Uw={class:"modal-content"},qw={class:"modal-header"},zw={id:"configurationModalLabel",class:"modal-title"},Kw={class:"modal-body"},Gw={key:0,class:"template-list-view"},Yw={key:0,class:"alert alert-info"},Jw={class:"card-body"},Xw={class:"d-flex justify-content-between align-items-start"},Qw={class:"flex-grow-1"},Zw={class:"card-title mb-1"},e1={key:0,class:"card-text text-muted small mb-2"},t1={class:"template-meta"},s1={class:"badge bg-secondary me-2"},n1={class:"text-muted small"},o1={class:"btn-group btn-group-sm ms-3"},i1=["onClick"],a1=["onClick"],r1={key:1},l1={class:"nav nav-tabs nav-tabs-responsive mb-3",role:"tablist"},c1={class:"nav-item",role:"presentation"},u1={key:0,class:"error-indicator",title:"This tab has validation errors"},d1={class:"nav-item",role:"presentation"},m1={key:0,class:"error-indicator",title:"This tab has validation errors"},p1={class:"nav-item",role:"presentation"},f1={key:0,class:"error-indicator",title:"This tab has validation errors"},v1={class:"tab-content"},h1={key:2,class:"alert alert-danger mt-3"},_1={class:"modal-footer"},g1={type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},b1=["disabled"],y1={key:0,class:"spinner-border spinner-border-sm me-2"},$1={__name:"ConfigurationModal",setup(s){const e=Lt(),t=Me(),o=oe(),i=me(),a=j(null);let r=null;const c=j("create-session"),f=j("general"),h=j(null),l=j(null),w=j(null),_=j([]),v=j(null),g=j(null),p=mn({name:"",model:"sonnet",permission_mode:"default",working_directory:"",description:"",default_role:"",startImmediately:!0,allowed_tools:"",capabilities:"",system_prompt:"",override_system_prompt:!1,initialization_context:"",sandbox_enabled:!1}),d=mn({name:"",system_prompt:"",initialization_context:""}),y=b(()=>({general:!!d.name,permissions:!1,advanced:!!d.system_prompt||!!d.initialization_context})),k=j(!1),T=j(""),O=b(()=>c.value==="create-session"||c.value==="edit-session"),q=b(()=>c.value==="edit-session"||c.value==="edit-template"),G=b(()=>{switch(c.value){case"create-session":return"Create Session";case"edit-session":return"Edit Session";case"create-template":return"Create Template";case"edit-template":return"Edit Template";case"template-list":return"Manage Templates";default:return"Configuration"}}),I=b(()=>k.value?q.value?"Saving...":"Creating...":q.value?"Save Changes":O.value?"Create Session":"Save Template"),B=b(()=>!(!p.name.trim()||p.system_prompt.length>6e3||p.initialization_context.length>2e3||O.value&&p.name.includes(" ")));function A(M,K){p[M]=K,M==="name"&&(d.name=""),M==="system_prompt"&&(d.system_prompt=""),M==="initialization_context"&&(d.initialization_context="")}function L(M){v.value=M,H()}async function z(){try{const M=await ne.get("/api/templates");_.value=M||[]}catch(M){console.error("Failed to load templates:",M),_.value=[]}}function H(){if(!v.value){p.default_role="",p.initialization_context="",p.permission_mode="default",p.allowed_tools="";return}const M=_.value.find(K=>K.template_id===v.value);M&&(M.default_role&&(p.default_role=M.default_role),M.default_system_prompt&&(p.initialization_context=M.default_system_prompt),M.permission_mode&&(p.permission_mode=M.permission_mode),M.allowed_tools&&M.allowed_tools.length>0&&(p.allowed_tools=M.allowed_tools.join(", ")))}function C(){const K=(h.value?t.projects.get(h.value):null)?.working_directory||"";i.showModal("folder-browser",{defaultPath:K,currentPath:p.working_directory||"",onSelect:X=>{p.working_directory=X}})}function E(){c.value==="create-session"&&(g.value={mode:"create-session",projectId:h.value,formData:{...p},selectedTemplateId:v.value}),c.value="template-list",te()}function N(){c.value="create-template",te(),f.value="general"}function x(M){c.value="edit-template",w.value=M,te(),U(M),f.value="general"}async function S(M){if(confirm(`Delete template "${M.name}"?

This action cannot be undone.`))try{await ne.delete(`/api/templates/${M.template_id}`),await z()}catch(K){console.error("Failed to delete template:",K),T.value=K.response?.data?.detail||"Failed to delete template"}}function P(){let M=!0;return d.name="",d.system_prompt="",d.initialization_context="",p.name.trim()||(d.name="Name is required",M=!1),O.value&&p.name.includes(" ")&&(d.name="Session name must be a single word (no spaces)",M=!1),p.system_prompt.length>6e3&&(d.system_prompt="System prompt exceeds 6000 character limit",M=!1),p.initialization_context.length>2e3&&(d.initialization_context="Initialization context exceeds 2000 character limit",M=!1),M}async function F(){if(!P()){d.name?f.value="general":(d.system_prompt||d.initialization_context)&&(f.value="advanced");return}k.value=!0,T.value="";try{switch(c.value){case"create-session":await Y(),r&&r.hide();break;case"edit-session":await J(),r&&r.hide();break;case"create-template":await re();break;case"edit-template":await ae();break}}catch(M){console.error("Submit failed:",M),T.value=M.response?.data?.detail||M.message||"Operation failed. Please try again."}finally{k.value=!1}}async function Y(){if(!h.value)throw new Error("Project ID is missing");const M=p.allowed_tools.split(",").map(fe=>fe.trim()).filter(fe=>fe.length>0),K=p.capabilities.split(",").map(fe=>fe.trim()).filter(fe=>fe.length>0),X={name:p.name.trim(),model:p.model,role:p.default_role.trim()||null,initialization_context:p.initialization_context.trim()||null,override_system_prompt:p.override_system_prompt,capabilities:K.length>0?K:null,permission_mode:p.permission_mode,allowed_tools:M.length>0?M:null,working_directory:p.working_directory.trim()||null,sandbox_enabled:p.sandbox_enabled},Ne=await ne.post(`/api/legions/${h.value}/minions`,X);if(Ne.success&&Ne.minion_id)await t.fetchProjects(),await o.fetchSessions(),p.startImmediately&&await o.startSession(Ne.minion_id),e.push(`/session/${Ne.minion_id}`);else throw new Error("Failed to create session")}async function J(){if(!l.value)throw new Error("Session data is missing");const M=l.value.session_id;await o.updateSessionName(M,p.name.trim()),(l.value.state==="active"||l.value.state==="starting")&&p.permission_mode!==l.value.current_permission_mode&&await o.setPermissionMode(M,p.permission_mode)}async function re(){const M=p.allowed_tools.split(",").map(X=>X.trim()).filter(X=>X.length>0),K={name:p.name.trim(),description:p.description.trim()||null,permission_mode:p.permission_mode,allowed_tools:M.length>0?M:null,default_role:p.default_role.trim()||null,default_system_prompt:p.initialization_context.trim()||null};await ne.post("/api/templates",K),await z(),c.value="template-list",te()}async function ae(){if(!w.value)throw new Error("Template data is missing");const M=p.allowed_tools.split(",").map(X=>X.trim()).filter(X=>X.length>0),K={name:p.name.trim(),description:p.description.trim()||null,permission_mode:p.permission_mode,allowed_tools:M.length>0?M:null,default_role:p.default_role.trim()||null,default_system_prompt:p.initialization_context.trim()||null};await ne.put(`/api/templates/${w.value.template_id}`,K),await z(),c.value="template-list",w.value=null,te()}function te(){p.name="",p.model="sonnet",p.permission_mode="default",p.working_directory="",p.description="",p.default_role="",p.startImmediately=!0,p.allowed_tools="",p.capabilities="",p.system_prompt="",p.override_system_prompt=!1,p.initialization_context="",p.sandbox_enabled=!1,d.name="",d.system_prompt="",d.initialization_context="",v.value=null,T.value="",f.value="general"}function ce(M){p.name=M.name||"",p.model=M.model||"sonnet",p.permission_mode=M.current_permission_mode||"default",p.working_directory=M.working_directory||"",p.default_role=M.role||"",p.system_prompt=M.system_prompt||"",p.override_system_prompt=M.override_system_prompt||!1,p.initialization_context=M.initialization_context||"",p.allowed_tools=M.allowed_tools?.join(", ")||"",p.capabilities=M.capabilities?.join(", ")||"",p.sandbox_enabled=M.sandbox_enabled||!1}function U(M){p.name=M.name||"",p.description=M.description||"",p.permission_mode=M.permission_mode||"default",p.default_role=M.default_role||"",p.initialization_context=M.default_system_prompt||"",p.allowed_tools=M.allowed_tools?.join(", ")||""}function R(){es(()=>{const M=document.getElementById("config-name");M&&(M.focus(),q.value&&M.select())})}function W(){te(),c.value="create-session",h.value=null,l.value=null,w.value=null,i.hideModal()}return de(()=>i.currentModal,async(M,K)=>{if(!(!M||!r)){if(M.name==="configuration"){const X=M.data||{};c.value=X.mode||"create-session",h.value=X.project?.project_id||X.projectId||null,l.value=X.session||null,w.value=X.template||null,te(),c.value==="create-session"&&await z(),c.value==="edit-session"&&l.value?ce(l.value):c.value==="edit-template"&&w.value&&U(w.value),r.show()}else if(M.name==="create-minion"||M.name==="create-session"){const X=M.data||{};c.value="create-session",h.value=X.project?.project_id||null,l.value=null,w.value=null,te(),await z(),r.show()}else if(M.name==="edit-session"){const X=M.data||{};c.value="edit-session",l.value=X.session||null,h.value=l.value?.project_id||null,w.value=null,te(),l.value&&ce(l.value),r.show()}else M.name==="template-management"&&(c.value="template-list",te(),await z(),r.show());K?.name==="configuration"&&K.data?.mode?.includes("template")&&M?.name==="configuration"&&c.value==="create-session"&&await z()}}),he(()=>{a.value&&Se(()=>import("./modal-BK1Vt_in.js").then(M=>M.m),__vite__mapDeps([0,1])).then(M=>{const K=M.default;r=new K(a.value),a.value.addEventListener("shown.bs.modal",R),a.value.addEventListener("hidden.bs.modal",W)})}),$e(()=>{a.value&&(a.value.removeEventListener("shown.bs.modal",R),a.value.removeEventListener("hidden.bs.modal",W)),r&&r.dispose()}),(M,K)=>(u(),m("div",{ref_key:"modalElement",ref:a,class:"modal fade",tabindex:"-1","aria-labelledby":"configurationModalLabel","aria-hidden":"true"},[n("div",Bw,[n("div",Uw,[n("div",qw,[n("h5",zw,[c.value==="create-template"||c.value==="edit-template"?(u(),m("button",{key:0,type:"button",class:"btn btn-link p-0 me-2",onClick:E,title:"Back to template list"}," â† ")):D("",!0),se(" "+$(G.value),1)]),K[3]||(K[3]=n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),n("div",Kw,[c.value==="template-list"?(u(),m("div",Gw,[n("div",{class:"d-flex justify-content-between align-items-center mb-3"},[K[4]||(K[4]=n("h6",{class:"mb-0"},"Templates",-1)),n("button",{onClick:N,class:"btn btn-primary btn-sm"}," + Create New ")]),_.value.length===0?(u(),m("div",Yw," No templates found. Create your first template! ")):D("",!0),(u(!0),m(ie,null,le(_.value,X=>(u(),m("div",{key:X.template_id,class:"card mb-2"},[n("div",Jw,[n("div",Xw,[n("div",Qw,[n("h6",Zw,$(X.name),1),X.description?(u(),m("p",e1,$(X.description),1)):D("",!0),n("div",t1,[n("span",s1,$(X.permission_mode),1),n("span",n1,$(X.allowed_tools?.length||0)+" tools",1)])]),n("div",o1,[n("button",{onClick:Ne=>x(X),class:"btn btn-outline-primary",title:"Edit"}," Edit ",8,i1),n("button",{onClick:Ne=>S(X),class:"btn btn-outline-danger",title:"Delete"}," Delete ",8,a1)])])])]))),128))])):(u(),m("div",r1,[n("ul",l1,[n("li",c1,[n("button",{class:Z(["nav-link",{active:f.value==="general","has-error":y.value.general}]),type:"button",onClick:K[0]||(K[0]=X=>f.value="general")},[K[5]||(K[5]=se(" General ",-1)),y.value.general?(u(),m("span",u1)):D("",!0)],2)]),n("li",d1,[n("button",{class:Z(["nav-link",{active:f.value==="permissions","has-error":y.value.permissions}]),type:"button",onClick:K[1]||(K[1]=X=>f.value="permissions")},[K[6]||(K[6]=se(" Permissions ",-1)),y.value.permissions?(u(),m("span",m1)):D("",!0)],2)]),n("li",p1,[n("button",{class:Z(["nav-link",{active:f.value==="advanced","has-error":y.value.advanced}]),type:"button",onClick:K[2]||(K[2]=X=>f.value="advanced")},[K[7]||(K[7]=se(" Advanced ",-1)),y.value.advanced?(u(),m("span",f1)):D("",!0)],2)])]),n("div",v1,[ve(ue(G$,{mode:c.value,"form-data":p,errors:d,templates:_.value,"selected-template-id":v.value,session:l.value,"onUpdate:formData":A,"onUpdate:selectedTemplateId":L,onOpenFolderBrowser:C,onOpenTemplateManager:E},null,8,["mode","form-data","errors","templates","selected-template-id","session"]),[[hs,f.value==="general"]]),ve(ue(gw,{mode:c.value,"form-data":p,errors:d,"onUpdate:formData":A},null,8,["mode","form-data","errors"]),[[hs,f.value==="permissions"]]),ve(ue(Fw,{mode:c.value,"form-data":p,errors:d,"onUpdate:formData":A},null,8,["mode","form-data","errors"]),[[hs,f.value==="advanced"]])])])),T.value?(u(),m("div",h1,$(T.value),1)):D("",!0)]),n("div",_1,[n("button",g1,$(c.value==="template-list"?"Close":"Cancel"),1),c.value!=="template-list"?(u(),m("button",{key:0,type:"button",class:"btn btn-primary",disabled:k.value||!B.value,onClick:F},[k.value?(u(),m("span",y1)):D("",!0),se(" "+$(I.value),1)],8,b1)):D("",!0)])])])],512))}},w1=ee($1,[["__scopeId","data-v-c244e8dd"]]),E1={class:"modal-dialog modal-dialog-centered"},C1={class:"modal-content"},S1={class:"modal-header"},k1={class:"modal-title",id:"manageSessionModalLabel"},T1={class:"modal-body"},x1={key:0,class:"text-center py-4"},A1={class:"text-muted"},M1={key:1},O1={key:2},D1={class:"text-muted"},N1={key:0,class:"text-center py-2"},L1={key:1,class:"alert alert-warning mt-3"},I1={class:"mb-0 mt-2"},j1={key:0,class:"text-muted"},P1={key:3},R1={key:0,class:"alert alert-danger alert-dismissible fade show",role:"alert"},W1={class:"d-grid gap-2"},H1=["disabled"],V1=["disabled"],F1=["disabled"],B1=["disabled"],U1={class:"modal-footer"},q1={key:1,type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},z1={__name:"SessionManageModal",setup(s){const e=Lt(),t=oe(),o=me(),i=Ke();Te();const a=j(null),r=j(!1),c=j(""),f=j(""),h=j(null),l=j(null);let w=null;const _=j([]),v=j(!1),g=b(()=>h.value==="reset"?"Reset Session":h.value==="delete"?"Delete Session":"Manage Session");function p(){h.value="reset"}async function d(){if(h.value="delete",_.value=[],!!a.value){v.value=!0;try{const A=await ne.get(`/api/sessions/${a.value.session_id}/descendants`);_.value=A.descendants||[]}catch(A){console.error("Failed to fetch descendants:",A),_.value=[]}finally{v.value=!1}}}function y(){h.value=null}async function k(){h.value==="reset"?await q():h.value==="delete"&&await G()}async function T(){if(a.value){r.value=!0,c.value="Restarting session...";try{const A=a.value.session_id,L=t.currentSessionId===A,z=await ne.post(`/api/sessions/${A}/restart`);if(z.success)console.log("Session restarted successfully"),L&&(await i.disconnectSession(),t.currentSessionId=null,await t.selectSession(A)),w&&w.hide();else{const H=z.error||z.detail||"Failed to restart session";console.error("Failed to restart session:",H),f.value=`Failed to restart session: ${H}`}}catch(A){console.error("Error restarting session:",A);const L=A.data?.detail||A.message||"Unknown error";f.value=`Error restarting session: ${L}`}finally{r.value=!1}}}async function O(){if(a.value)try{w&&w.hide(),console.log("Ending session",a.value.session_id);const A=a.value.session_id;await ne.post(`/api/sessions/${A}/terminate`),t.currentSessionId===A&&(await i.disconnectSession(),t.currentSessionId=null,e.push("/"))}catch(A){console.error("Error ending session:",A),t.currentSessionId===a.value?.session_id&&(await i.disconnectSession(),t.currentSessionId=null,e.push("/"))}}async function q(){if(a.value){r.value=!0,c.value="Resetting session...";try{const A=a.value.session_id,L=t.currentSessionId===A,z=await ne.post(`/api/sessions/${A}/reset`);if(z.success)console.log("Session reset successfully"),L&&(await i.disconnectSession(),t.currentSessionId=null,await t.selectSession(A)),w&&w.hide();else{const H=z.error||z.detail||"Failed to reset session";console.error("Failed to reset session:",H),f.value=`Failed to reset session: ${H}`,h.value=null}}catch(A){console.error("Error resetting session:",A);const L=A.data?.detail||A.message||"Unknown error";f.value=`Error resetting session: ${L}`,h.value=null}finally{r.value=!1}}}async function G(){if(a.value){r.value=!0,c.value="Deleting session...";try{const A=a.value.session_id;await t.deleteSession(A),e.currentRoute.value.params.sessionId===A&&e.push("/"),w&&w.hide()}catch(A){console.error("Error deleting session:",A);const L=A.data?.detail||A.message||"Unknown error";f.value=`Error deleting session: ${L}`,h.value=null}finally{r.value=!1}}}function I(){h.value=null,r.value=!1,c.value="",f.value="",_.value=[],v.value=!1}function B(){I(),a.value=null,o.hideModal()}return de(()=>o.currentModal,A=>{if(A?.name==="manage-session"&&w){const L=A.data||{};a.value=L.session,I(),w.show()}}),he(()=>{l.value&&Se(async()=>{const{default:A}=await import("./modal-BK1Vt_in.js").then(L=>L.m);return{default:A}},__vite__mapDeps([0,1])).then(({default:A})=>{w=new A(l.value),l.value.addEventListener("hidden.bs.modal",B)})}),$e(()=>{l.value&&l.value.removeEventListener("hidden.bs.modal",B),w&&w.dispose()}),(A,L)=>(u(),m("div",{class:"modal fade",id:"manageSessionModal",tabindex:"-1","aria-labelledby":"manageSessionModalLabel","aria-hidden":"true",ref_key:"modalElement",ref:l},[n("div",E1,[n("div",C1,[n("div",S1,[n("h5",k1,$(h.value?g.value:"Manage Session"),1),L[1]||(L[1]=n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),n("div",T1,[r.value?(u(),m("div",x1,[L[2]||(L[2]=n("div",{class:"spinner-border text-primary mb-3",role:"status"},[n("span",{class:"visually-hidden"},"Loading...")],-1)),n("p",A1,$(c.value),1)])):h.value==="reset"?(u(),m("div",M1,[...L[3]||(L[3]=[n("div",{class:"alert alert-danger mb-3"},[n("strong",null,"âš ï¸ Warning: This action cannot be undone")],-1),n("p",{class:"text-muted"},"This will permanently delete all messages and conversation history for this session.",-1),n("p",{class:"text-muted"},"The session settings and configuration will be preserved, but you will start with a completely fresh conversation.",-1)])])):h.value==="delete"?(u(),m("div",O1,[L[9]||(L[9]=n("div",{class:"alert alert-danger mb-3"},[n("strong",null,"âš ï¸ Warning: This action cannot be undone")],-1)),n("p",D1,[L[4]||(L[4]=se("This will permanently delete session ",-1)),n("strong",null,$(a.value?.name),1),L[5]||(L[5]=se(".",-1))]),L[10]||(L[10]=n("p",{class:"text-muted"},"All messages, conversation history, settings, and configuration will be completely destroyed. This is more destructive than Reset Session.",-1)),v.value?(u(),m("div",N1,[...L[6]||(L[6]=[n("div",{class:"spinner-border spinner-border-sm text-secondary",role:"status"},[n("span",{class:"visually-hidden"},"Checking for child sessions...")],-1),n("span",{class:"ms-2 text-muted small"},"Checking for child sessions...",-1)])])):_.value.length>0?(u(),m("div",L1,[L[7]||(L[7]=n("strong",null,"Cascading Deletion:",-1)),L[8]||(L[8]=se(" This session has ",-1)),n("strong",null,$(_.value.length),1),se(" child session"+$(_.value.length===1?"":"s")+" that will also be deleted: ",1),n("ul",I1,[(u(!0),m(ie,null,le(_.value,z=>(u(),m("li",{key:z.session_id,class:"small"},[n("strong",null,$(z.name||z.session_id),1),z.role?(u(),m("span",j1," ("+$(z.role)+")",1)):D("",!0)]))),128))])])):D("",!0)])):(u(),m("div",P1,[f.value?(u(),m("div",R1,[L[11]||(L[11]=n("strong",null,"Error:",-1)),se(" "+$(f.value)+" ",1),n("button",{type:"button",class:"btn-close",onClick:L[0]||(L[0]=z=>f.value="")})])):D("",!0),L[18]||(L[18]=n("p",{class:"text-muted"},"Choose how to manage this session:",-1)),n("div",W1,[n("button",{class:"btn btn-outline-primary text-start",onClick:T,disabled:r.value},[...L[12]||(L[12]=[n("strong",null,"ðŸ”„ Restart Agent",-1),n("div",{class:"small text-muted"},"Disconnect and resume session (keeps all messages)",-1)])],8,H1),n("button",{class:"btn btn-outline-secondary text-start",onClick:O,disabled:r.value},[...L[13]||(L[13]=[n("strong",null,"ðŸšª End Session",-1),n("div",{class:"small text-muted"},"Close agent and return to session list",-1)])],8,V1),L[16]||(L[16]=n("hr",{class:"my-2"},null,-1)),L[17]||(L[17]=n("div",{class:"danger-zone-header"},[n("h6",{class:"text-danger mb-2"},"âš ï¸ Danger Zone")],-1)),n("button",{class:"btn btn-outline-warning text-start",onClick:p,disabled:r.value},[...L[14]||(L[14]=[n("strong",null,"ðŸ§¹ Reset Session",-1),n("div",{class:"small text-muted"},"Clear all messages and start fresh (keeps settings)",-1)])],8,F1),n("button",{class:"btn btn-outline-danger text-start",onClick:d,disabled:r.value},[...L[15]||(L[15]=[n("strong",null,"ðŸ—‘ï¸ Delete Session",-1),n("div",{class:"small text-muted"},"Permanently delete this session and all its data",-1)])],8,B1)]),L[19]||(L[19]=n("div",{class:"alert alert-warning mt-3 mb-0"},[n("small",null,[n("strong",null,"Note:"),se(" Restart is the recommended option for unsticking the agent.")])],-1))]))]),n("div",U1,[h.value&&!r.value?(u(),m(ie,{key:0},[n("button",{type:"button",class:"btn btn-secondary",onClick:y},"Cancel"),n("button",{type:"button",class:Z(["btn",h.value==="delete"?"btn-danger":"btn-warning"]),onClick:k},$(h.value==="delete"?"Delete Session":"Confirm Reset"),3)],64)):r.value?D("",!0):(u(),m("button",q1,"Cancel"))])])])],512))}},K1=ee(z1,[["__scopeId","data-v-6b832853"]]),G1={class:"modal-dialog modal-dialog-centered modal-lg"},Y1={class:"modal-content"},J1={class:"modal-body"},X1={key:0,class:"text-center text-muted py-4"},Q1={key:1},Z1={class:"mb-3"},eE={class:"font-monospace small"},tE={class:"mb-3"},sE=["value"],nE={class:"mb-3"},oE={class:"mb-3"},iE={class:"mb-3"},aE={key:0},rE={class:"d-flex flex-wrap gap-1"},lE={key:1,class:"text-muted small"},cE={key:0,class:"mb-3"},uE={class:"d-flex flex-wrap gap-1"},dE={key:1,class:"mb-3"},mE={class:"bg-light p-2 rounded small",style:{"max-height":"200px","overflow-y":"auto"}},pE={class:"mb-3"},fE={class:"text-muted"},vE={key:0,class:"bg-light p-2 rounded small",style:{"max-height":"300px","overflow-y":"auto"}},hE={__name:"SessionInfoModal",setup(s){const e=oe(),t=Te(),o=me(),i=j(null),a=j(!1),r=j(null);let c=null;const f={sonnet:"Sonnet 4.5",opus:"Opus 4.5",haiku:"Haiku 4.5",opusplan:"OpusPlan (Opus + Sonnet)"},h=b(()=>{if(!i.value)return null;const p=e.initData.get(i.value);return p||(t.messagesBySession.get(i.value)||[]).find(k=>k.type==="system"&&(k.subtype==="init"||k.metadata?.subtype==="init")&&k.metadata?.init_data)?.metadata?.init_data||null});function l(p){return p?f[p]||p:"Default (Sonnet 4.5)"}function w(p){return typeof p=="string"?p:typeof p=="object"&&p.type==="preset"?`Preset: ${p.preset}`:JSON.stringify(p,null,2)}function _(p){p.target.select()}function v(){i.value=null,a.value=!1}function g(){v(),o.hideModal()}return de(()=>o.currentModal,p=>{if(p?.name==="session-info"&&c){const d=p.data||{};i.value=d.sessionId,a.value=!1,c.show()}}),he(()=>{r.value&&Se(async()=>{const{default:p}=await import("./modal-BK1Vt_in.js").then(d=>d.m);return{default:p}},__vite__mapDeps([0,1])).then(({default:p})=>{c=new p(r.value),r.value.addEventListener("hidden.bs.modal",g)})}),$e(()=>{r.value&&r.value.removeEventListener("hidden.bs.modal",g),c&&c.dispose()}),(p,d)=>(u(),m("div",{class:"modal fade",id:"sessionInfoModal",tabindex:"-1","aria-labelledby":"sessionInfoModalLabel","aria-hidden":"true",ref_key:"modalElement",ref:r},[n("div",G1,[n("div",Y1,[d[9]||(d[9]=n("div",{class:"modal-header"},[n("h5",{class:"modal-title",id:"sessionInfoModalLabel"},"Session Configuration"),n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),n("div",J1,[h.value?(u(),m("div",Q1,[n("div",Z1,[d[1]||(d[1]=n("h6",{class:"text-muted"},"Session ID",-1)),n("div",eE,$(i.value),1)]),n("div",tE,[d[2]||(d[2]=n("h6",{class:"text-muted"},"Working Directory",-1)),n("input",{type:"text",class:"form-control form-control-sm font-monospace path-input",value:h.value.cwd||"Not specified",readonly:"",onClick:_},null,8,sE)]),n("div",nE,[d[3]||(d[3]=n("h6",{class:"text-muted"},"Model",-1)),n("div",null,$(l(h.value.model)),1)]),n("div",oE,[d[4]||(d[4]=n("h6",{class:"text-muted"},"Permission Mode",-1)),n("div",null,$(h.value.permissionMode||"default"),1)]),n("div",iE,[d[5]||(d[5]=n("h6",{class:"text-muted"},"Pre-Authorized Tools",-1)),(h.value.allowed_tools||h.value.tools)&&(h.value.allowed_tools||h.value.tools).length>0?(u(),m("div",aE,[n("div",rE,[(u(!0),m(ie,null,le(h.value.allowed_tools||h.value.tools,y=>(u(),m("span",{key:y,class:"badge bg-secondary"},$(y),1))),128))])])):(u(),m("div",lE,"No pre-authorized tools (will prompt for permissions)"))]),h.value.commands&&h.value.commands.length>0?(u(),m("div",cE,[d[6]||(d[6]=n("h6",{class:"text-muted"},"Commands",-1)),n("div",uE,[(u(!0),m(ie,null,le(h.value.commands,y=>(u(),m("span",{key:y,class:"badge bg-info"},$(y),1))),128))])])):D("",!0),h.value.systemPrompt?(u(),m("div",dE,[d[7]||(d[7]=n("h6",{class:"text-muted"},"System Prompt",-1)),n("pre",mE,$(w(h.value.systemPrompt)),1)])):D("",!0),n("div",pE,[n("h6",fE,[d[8]||(d[8]=se(" Raw Configuration ",-1)),n("button",{class:"btn btn-sm btn-outline-secondary ms-2",onClick:d[0]||(d[0]=y=>a.value=!a.value)},$(a.value?"Hide":"Show"),1)]),a.value?(u(),m("pre",vE,$(JSON.stringify(h.value,null,2)),1)):D("",!0)])])):(u(),m("div",X1," No session configuration data available "))]),d[10]||(d[10]=n("div",{class:"modal-footer"},[n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])],512))}},_E=ee(hE,[["__scopeId","data-v-b28b39b3"]]),gE={class:"modal-dialog modal-dialog-centered modal-lg"},bE={class:"modal-content"},yE={class:"modal-body"},$E={key:0,class:"text-center text-muted py-4"},wE={key:1},EE={class:"mb-3"},CE={class:"mb-3"},SE={class:"font-monospace small"},kE={class:"mb-3"},TE={class:"mb-3"},xE={class:"mb-3"},AE={key:0},ME={class:"d-flex flex-wrap gap-1"},OE={key:1,class:"text-muted small"},DE={class:"mb-3"},NE={key:0,class:"bg-light p-2 rounded small",style:{"max-height":"200px","overflow-y":"auto","white-space":"pre-wrap"}},LE={key:1,class:"text-muted small"},IE={class:"mb-3"},jE={key:0,class:"badge bg-info"},PE={key:1,class:"badge bg-secondary"},RE={class:"mb-3"},WE={key:0,class:"font-monospace small"},HE={key:1,class:"text-muted small"},VE={key:0,class:"mb-3"},FE={key:0},BE={class:"list-unstyled mb-0"},UE={key:1,class:"text-muted small"},qE={class:"mb-3"},zE={class:"small"},KE={class:"mb-3"},GE={class:"small"},YE={__name:"MinionViewModal",setup(s){const e=me(),t=j(null),o=j(null);let i=null;function a(h){return{created:"bg-secondary",starting:"bg-info",active:"bg-success",paused:"bg-warning",terminating:"bg-warning",terminated:"bg-secondary",error:"bg-danger"}[h]||"bg-secondary"}function r(h){if(!h)return"N/A";try{const l=new Date(h);return isNaN(l.getTime())?"Invalid date":l.toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch(l){return console.error("Error formatting timestamp:",l),"Invalid date"}}function c(){t.value=null}function f(){c(),e.hideModal()}return de(()=>e.currentModal,h=>{if(h?.name==="minion-view"&&i){const l=h.data||{};t.value=l.session,i.show()}}),he(()=>{o.value&&Se(async()=>{const{default:h}=await import("./modal-BK1Vt_in.js").then(l=>l.m);return{default:h}},__vite__mapDeps([0,1])).then(({default:h})=>{i=new h(o.value),o.value.addEventListener("hidden.bs.modal",f)})}),$e(()=>{o.value&&o.value.removeEventListener("hidden.bs.modal",f),i&&i.dispose()}),(h,l)=>(u(),m("div",{class:"modal fade",id:"minionViewModal",tabindex:"-1","aria-labelledby":"minionViewModalLabel","aria-hidden":"true",ref_key:"modalElement",ref:o},[n("div",gE,[n("div",bE,[l[11]||(l[11]=n("div",{class:"modal-header"},[n("h5",{class:"modal-title",id:"minionViewModalLabel"},"Minion Details"),n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),n("div",yE,[t.value?(u(),m("div",wE,[n("div",EE,[l[0]||(l[0]=n("h6",{class:"text-muted"},"Name",-1)),n("div",null,$(t.value.name||"Unnamed Minion"),1)]),n("div",CE,[l[1]||(l[1]=n("h6",{class:"text-muted"},"Session ID",-1)),n("div",SE,$(t.value.session_id),1)]),n("div",kE,[l[2]||(l[2]=n("h6",{class:"text-muted"},"Role",-1)),n("div",null,$(t.value.role||"Not specified"),1)]),n("div",TE,[l[3]||(l[3]=n("h6",{class:"text-muted"},"Current State",-1)),n("div",null,[n("span",{class:Z(["badge",a(t.value.state)])},$(t.value.state),3)])]),n("div",xE,[l[4]||(l[4]=n("h6",{class:"text-muted"},"Capabilities",-1)),t.value.capabilities&&t.value.capabilities.length>0?(u(),m("div",AE,[n("div",ME,[(u(!0),m(ie,null,le(t.value.capabilities,w=>(u(),m("span",{key:w,class:"badge bg-secondary"},$(w),1))),128))])])):(u(),m("div",OE,"None"))]),n("div",DE,[l[5]||(l[5]=n("h6",{class:"text-muted"},"Initialization Context",-1)),t.value.initialization_context?(u(),m("div",NE,$(t.value.initialization_context),1)):(u(),m("div",LE,"Not specified"))]),n("div",IE,[l[6]||(l[6]=n("h6",{class:"text-muted"},"Overseer",-1)),n("div",null,[t.value.is_overseer?(u(),m("span",jE,"Yes")):(u(),m("span",PE,"No"))])]),n("div",RE,[l[7]||(l[7]=n("h6",{class:"text-muted"},"Parent Overseer",-1)),t.value.parent_overseer_id?(u(),m("div",WE,$(t.value.parent_overseer_id),1)):(u(),m("div",HE," Root overseer (user-created) "))]),t.value.is_overseer?(u(),m("div",VE,[l[8]||(l[8]=n("h6",{class:"text-muted"},"Child Minions",-1)),t.value.child_minion_ids&&t.value.child_minion_ids.length>0?(u(),m("div",FE,[n("ul",BE,[(u(!0),m(ie,null,le(t.value.child_minion_ids,w=>(u(),m("li",{key:w,class:"font-monospace small"},$(w),1))),128))])])):(u(),m("div",UE,"No children"))])):D("",!0),n("div",qE,[l[9]||(l[9]=n("h6",{class:"text-muted"},"Created",-1)),n("div",zE,$(r(t.value.created_at)),1)]),n("div",KE,[l[10]||(l[10]=n("h6",{class:"text-muted"},"Last Active",-1)),n("div",GE,$(r(t.value.updated_at)),1)])])):(u(),m("div",$E," No minion data available "))]),l[12]||(l[12]=n("div",{class:"modal-footer"},[n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])],512))}},JE=ee(YE,[["__scopeId","data-v-d996dc6f"]]),XE={class:"container-fluid vh-100 d-flex flex-column p-0"},QE={class:"d-flex flex-grow-1 overflow-hidden position-relative"},ZE={class:"flex-grow-1 d-flex flex-column overflow-hidden"},eC={__name:"App",setup(s){const e=me(),t=Ke(),o=oe(),i=Me(),a=Lt(),r=b(()=>e.sidebarCollapsed),c=b(()=>e.isMobile);he(async()=>{typeof marked<"u"&&marked.setOptions({breaks:!0,gfm:!0}),t.connectUI(),await Promise.all([i.fetchProjects(),o.fetchSessions()]);const l=window.location.hash;if(l.startsWith("#/session/")){const w=l.replace("#/session/","");o.sessions.has(w)&&await o.selectSession(w)}else if(l.startsWith("#/timeline/")){const w=l.replace("#/timeline/","");a.push(`/timeline/${w}`)}window.addEventListener("popstate",f),window.addEventListener("resize",e.handleResize)}),$e(()=>{window.removeEventListener("popstate",f),window.removeEventListener("resize",e.handleResize),t.disconnectUI()});function f(){const l=window.location.hash;if(l.startsWith("#/session/")){const w=l.replace("#/session/","");o.sessions.has(w)&&o.selectSession(w)}}function h(){e.toggleSidebar()}return(l,w)=>{const _=no("router-view");return u(),m("div",XE,[ue(Ib),n("div",{id:"sidebar-backdrop",class:Z({show:!r.value&&c.value}),onClick:h},null,2),n("div",QE,[ue(dy),n("main",ZE,[ue(_)])]),ue(xy),ue(Uy),ue(m$),ue(w1),ue(K1),ue(_E),ue(JE)])}}},nn=_i(eC);nn.use(gi());nn.use(kb);nn.mount("#app");
