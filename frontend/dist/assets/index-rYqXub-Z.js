const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/modal-D6mKceGM.js","assets/diff-vendor-BaWSTkgn.js"])))=>i.map(i=>d[i]);
import{c as d,a as n,o as c,d as At,r as j,b as v,t as w,n as bt,e as X,f as Z,u as ss,w as pe,g as _s,F as re,h as ue,i as M,j as ge,v as He,k as $e,l as ro,m as fe,p as We,q as he,s as yt,x as be,y as hi,z as Ce,A as fn,B as lo,C as Rt,D as _i,E as gi,G as bi,H as gs,I as bs,J as yi,K as $i}from"./vue-vendor-bYhd3Cdy.js";import{m as rt,p as rs}from"./markdown-vendor-BRsjnVvP.js";import{c as wi}from"./diff-vendor-BaWSTkgn.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();const Ei={class:"flex-grow-1 d-flex flex-column justify-content-center align-items-center text-center p-5"},Si={__name:"NoSessionSelected",setup(s){return(e,t)=>(c(),d("div",Ei,[...t[0]||(t[0]=[n("h2",{class:"text-muted"},"No Session Selected",-1),n("p",{class:"text-secondary"}," Create a new session or select an existing one to start chatting with Claude Code. ",-1)])]))}},Ci="modulepreload",ki=function(s){return"/"+s},vn={},Oe=function(e,t,o){let i=Promise.resolve();if(t&&t.length>0){let p=function(f){return Promise.all(f.map(u=>Promise.resolve(u).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),m=r?.nonce||r?.getAttribute("nonce");i=p(t.map(f=>{if(f=ki(f),f in vn)return;vn[f]=!0;const u=f.endsWith(".css"),E=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${E}`))return;const g=document.createElement("link");if(g.rel=u?"stylesheet":Ci,u||(g.as="script"),g.crossOrigin="",g.href=f,m&&g.setAttribute("nonce",m),document.head.appendChild(g),u)return new Promise(($,b)=>{g.addEventListener("load",$),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(r){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=r,window.dispatchEvent(m),!m.defaultPrevented)throw r}return i.then(r=>{for(const m of r||[])m.status==="rejected"&&a(m.reason);return e().catch(a)})};class ys extends Error{constructor(e,t,o){super(e),this.name="APIError",this.status=t,this.data=o}}async function $t(s,e={}){try{const t=await fetch(s,{headers:{"Content-Type":"application/json",...e.headers},...e});if(!t.ok){let i;try{i=await t.json()}catch{i={detail:t.statusText}}throw new ys(i.detail||`HTTP ${t.status}: ${t.statusText}`,t.status,i)}const o=t.headers.get("content-type");return o&&o.includes("application/json")?await t.json():await t.text()}catch(t){throw t instanceof ys?t:(console.error("API request failed:",t),new ys(`Network error: ${t.message}`,0,null))}}async function Ti(s,e={}){let t=s;if(e.params){const o=new URLSearchParams;for(const[m,p]of Object.entries(e.params))p!=null&&o.append(m,p);const i=o.toString();i&&(t=`${s}?${i}`);const{params:a,...r}=e;return $t(t,{...r,method:"GET"})}return $t(t,{...e,method:"GET"})}async function xi(s,e,t={}){return $t(s,{...t,method:"POST",body:JSON.stringify(e)})}async function Ai(s,e,t={}){return $t(s,{...t,method:"PUT",body:JSON.stringify(e)})}async function Oi(s,e={}){return $t(s,{...e,method:"DELETE"})}async function Mi(s,e,t={}){return $t(s,{...t,method:"PATCH",body:JSON.stringify(e)})}const ce={get:Ti,post:xi,put:Ai,delete:Oi,patch:Mi},de=At("session",()=>{const s=j(new Map),e=j(null),t=j(new Map),o=j(new Map),i=j(new Set),a=j(!1);let r=null;const m=v(()=>s.value.get(e.value)),p=v(()=>Array.from(s.value.values()).sort((A,V)=>A.order-V.order)),f=A=>v(()=>p.value.filter(V=>V.project_id===A)),u=v({get:()=>t.value.get(e.value)||"",set:A=>{e.value&&t.value.set(e.value,A)}});async function E(){try{const A=await ce.get("/api/sessions");return s.value.clear(),A.sessions.forEach(V=>{s.value.set(V.session_id,V)}),console.log(`Loaded ${s.value.size} sessions`),A.sessions}catch(A){throw console.error("Failed to fetch sessions:",A),A}}async function g(A,V){try{const k=(await ce.post("/api/sessions",{project_id:A,...V})).session_id,U=(await ce.get(`/api/sessions/${k}`)).session;return s.value.set(k,U),s.value=new Map(s.value),console.log(`Created session ${k}`),U}catch(S){throw console.error("Failed to create session:",S),S}}async function $(A){if(e.value===A&&!a.value)return;r&&(console.log(`Aborting pending selection to switch to ${A}`),r.abort(),r=null);const V=new AbortController;r=V,a.value=!0;try{if(e.value=A,V.signal.aborted){console.log(`Selection of ${A} aborted early`);return}let S=s.value.get(A);if(!S)try{const U=await ce.get(`/api/sessions/${A}`);if(V.signal.aborted){console.log(`Selection of ${A} aborted after fetch`);return}S=U.session,s.value.set(A,S),s.value=new Map(s.value),console.log(`Fetched session ${A} for deeplink`)}catch(U){console.error(`Failed to fetch session ${A}:`,U);return}if(S&&(S.state==="created"||S.state==="terminated"))try{if(await y(A),V.signal.aborted){console.log(`Selection of ${A} aborted after start`);return}console.log(`Auto-started session ${A} (was in ${S.state} state)`);const U=6e4,I=200,R=5e3;let F=0,x=0;for(;F<U;){if(V.signal.aborted){console.log(`Selection of ${A} aborted during state wait`);return}const z=s.value.get(A);if(z&&z.state==="active"){console.log(`Session ${A} is now active after ${F}ms`);break}if(F-x>=R){const L=s.value.get(A)?.state||"unknown";console.log(`Waiting for session ${A} to become active (current: ${L}, ${F/1e3}s elapsed)`),x=F}await new Promise(L=>setTimeout(L,I)),F+=I}const O=s.value.get(A);O&&O.state!=="active"&&console.warn(`Session ${A} did not become active within ${U/1e3}s (state: ${O.state}), continuing anyway`)}catch(U){console.error(`Failed to auto-start session ${A}:`,U)}if(V.signal.aborted){console.log(`Selection of ${A} aborted before message load`);return}if(await(await Oe(()=>Promise.resolve().then(()=>Qi),void 0)).useMessageStore().loadMessages(A),V.signal.aborted){console.log(`Selection of ${A} aborted after message load`);return}await(await Oe(()=>Promise.resolve().then(()=>ga),void 0)).useWebSocketStore().connectSession(A),V.signal.aborted||console.log(`Selected session ${A}`)}finally{r===V&&(r=null),a.value=!1}}function b(A,V){const S=s.value.get(A);S?Object.assign(S,V):(s.value.set(A,V),console.log(`Added new session ${A} via WebSocket update`)),s.value=new Map(s.value)}async function h(A){i.value.add(A);try{const S=(await ce.delete(`/api/sessions/${A}`)).deleted_session_ids||[A];for(const k of S)s.value.delete(k),t.value.delete(k),o.value.delete(k);return s.value=new Map(s.value),S.includes(e.value)&&(e.value=null),console.log(`Deleted ${S.length} session(s): ${S.join(", ")}`),S}catch(V){throw console.error("Failed to delete session:",V),V}finally{i.value.delete(A)}}async function l(A,V){try{await ce.patch(`/api/sessions/${A}`,V),b(A,V),console.log(`Updated session ${A}:`,V)}catch(S){throw console.error("Failed to update session:",S),S}}async function _(A,V){try{await ce.post(`/api/sessions/${A}/permission-mode`,{mode:V}),b(A,{current_permission_mode:V});const S=o.value.get(A);S&&(S.permissionMode=V,o.value.set(A,S)),console.log(`Set permission mode for session ${A} to ${V}`)}catch(S){throw console.error("Failed to set permission mode:",S),S}}async function y(A){try{await ce.post(`/api/sessions/${A}/start`),console.log(`Started session ${A}`)}catch(V){throw console.error("Failed to start session:",V),V}}async function C(A){try{await ce.post(`/api/sessions/${A}/pause`),console.log(`Paused session ${A}`)}catch(V){throw console.error("Failed to pause session:",V),V}}async function T(A){try{await ce.post(`/api/sessions/${A}/terminate`),console.log(`Terminated session ${A}`)}catch(V){throw console.error("Failed to terminate session:",V),V}}function P(A){return s.value.get(A)}function W(A,V){o.value.set(A,V),V.permissionMode&&b(A,{current_permission_mode:V.permissionMode})}return{sessions:s,currentSessionId:e,inputCache:t,initData:o,deletingSessions:i,currentSession:m,orderedSessions:p,sessionsInProject:f,currentInput:u,fetchSessions:E,createSession:g,selectSession:$,updateSession:b,deleteSession:h,patchSession:l,setPermissionMode:_,startSession:y,pauseSession:C,terminateSession:T,getSession:P,storeInitData:W}}),hn=Object.freeze(Object.defineProperty({__proto__:null,useSessionStore:de},Symbol.toStringTag,{value:"Module"})),_e=At("ui",()=>{const s=j(window.innerWidth<768),e=j(300),t=j(window.innerWidth),o=v(()=>t.value<768),i=j(!0),a=j(null),r=j(null),m=v(()=>a.value?{name:a.value,data:r.value}:null),p=j(!1),f=j("Loading...");function u(){s.value=!s.value}function E(C){s.value=C}function g(C){e.value=Math.max(200,Math.min(C,window.innerWidth*.3))}function $(C){i.value=C}function b(C,T=null){a.value=null,r.value=null,setTimeout(()=>{a.value=C,r.value=T},0)}function h(){a.value=null,r.value=null}function l(C="Loading..."){p.value=!0,f.value=C}function _(){p.value=!1}function y(){const C=t.value;t.value=window.innerWidth,t.value<768&&C>=768?s.value=!0:t.value>=768&&C<768&&(s.value=!1)}return{sidebarCollapsed:s,sidebarWidth:e,isMobile:o,autoScrollEnabled:i,activeModal:a,modalData:r,currentModal:m,isLoading:p,loadingMessage:f,toggleSidebar:u,setSidebarCollapsed:E,setSidebarWidth:g,setAutoScroll:$,showModal:b,hideModal:h,showLoading:l,hideLoading:_,handleResize:y}}),Le=At("project",()=>{const s=j(new Map),e=j(null),t=v(()=>s.value.get(e.value)),o=v(()=>Array.from(s.value.values()).sort((l,_)=>l.order-_.order));async function i(){try{const l=await ce.get("/api/projects");return s.value.clear(),l.projects.forEach(_=>{s.value.set(_.project_id,_)}),console.log(`Loaded ${s.value.size} projects`),l.projects}catch(l){throw console.error("Failed to fetch projects:",l),l}}async function a(l,_){try{const C=(await ce.post("/api/projects",{name:l,working_directory:_})).project;return s.value.set(C.project_id,C),s.value=new Map(s.value),console.log(`Created project ${C.project_id}`),C}catch(y){throw console.error("Failed to create project:",y),y}}async function r(l,_){try{await ce.put(`/api/projects/${l}`,_),m(l,_),console.log(`Updated project ${l}`,_)}catch(y){throw console.error("Failed to update project:",y),y}}function m(l,_){const y=s.value.get(l);y&&(Object.assign(y,_),s.value=new Map(s.value))}async function p(l){try{await ce.delete(`/api/projects/${l}`),s.value.delete(l),s.value=new Map(s.value),e.value===l&&(e.value=null),console.log(`Deleted project ${l}`)}catch(_){throw console.error("Failed to delete project:",_),_}}async function f(l){try{const _=await ce.put(`/api/projects/${l}/toggle-expansion`),y=s.value.get(l);return y&&(y.is_expanded=_.is_expanded,s.value=new Map(s.value)),_.is_expanded}catch(_){throw console.error("Failed to toggle expansion:",_),_}}async function u(l){try{await ce.put("/api/projects/reorder",{project_ids:l}),l.forEach((_,y)=>{const C=s.value.get(_);C&&(C.order=y)}),s.value=new Map(s.value),console.log("Reordered projects",l)}catch(_){throw console.error("Failed to reorder projects:",_),_}}async function E(l,_){try{await ce.put(`/api/projects/${l}/sessions/reorder`,{session_ids:_});const y=s.value.get(l);y&&(y.session_ids=_,s.value=new Map(s.value)),console.log(`Reordered sessions in project ${l}`,_)}catch(y){throw console.error("Failed to reorder sessions:",y),y}}function g(l){return s.value.get(l)}function $(l){e.value=l}function b(){e.value=null}function h(l){if(!l)return"";const _=l.split(/[/\\]/).filter(y=>y);return _.length===0?"/":_.length===1?`/${_[0]}`:_.length===2?`/${_.join("/")}`:`.../${_.slice(-2).join("/")}`}return{projects:s,currentProjectId:e,currentProject:t,orderedProjects:o,fetchProjects:i,createProject:a,updateProject:r,updateProjectLocal:m,deleteProject:p,toggleExpansion:f,reorderProjects:u,reorderSessionsInProject:E,getProject:g,selectProject:$,clearProjectSelection:b,formatPath:h}}),se=(s,e)=>{const t=s.__vccOpts||s;for(const[o,i]of e)t[o]=i;return t},Di={class:"session-header border-bottom p-3"},Ni={class:"project-name"},Li=["title"],Ii={__name:"SessionHeader",props:{sessionId:{type:String,required:!0}},setup(s){const e=s,t=de(),o=Le(),i=v(()=>t.sessions.get(e.sessionId)),a=v(()=>i.value?.name||e.sessionId),r=v(()=>{for(const p of o.projects.values())if(p.session_ids?.includes(e.sessionId))return p;return null}),m=v(()=>r.value?.name||"Unknown Project");return(p,f)=>(c(),d("div",Di,[n("div",null,[n("div",Ni,w(m.value),1),n("div",{class:"session-name",title:s.sessionId},w(a.value),9,Li)])]))}},ji=se(Ii,[["__scopeId","data-v-89e9c269"]]),Pi={class:"progress session-state-status-line",style:{height:"4px","border-radius":"0"}},Ri=["title"],Wi={key:1,class:"progress-bar bg-secondary",style:{width:"100%"},title:"No session selected"},Hi={__name:"SessionStateStatusLine",props:{sessionId:{type:String,required:!0}},setup(s){const e=s,t=de(),o=v(()=>t.sessions.get(e.sessionId)),i=v(()=>o.value?o.value.state==="paused"&&o.value.is_processing?"pending-prompt":o.value.is_processing?"processing":o.value.state:"unknown"),a=v(()=>{const p=i.value;return{created:"#d3d3d3",starting:"#90ee90",active:"#90ee90",running:"#90ee90",processing:"#dda0dd",paused:"#d3d3d3","pending-prompt":"#ffc107",terminated:"#d3d3d3",error:"#ffb3b3",failed:"#ffb3b3",unknown:"#d3d3d3"}[p]||"#d3d3d3"}),r=v(()=>{const p=i.value;return p==="starting"||p==="processing"||p==="pending-prompt"}),m=v(()=>{if(!o.value)return"No session selected";const p=i.value,f=p.charAt(0).toUpperCase()+p.slice(1).replace("-"," "),u=o.value.name||"Unnamed Session",E=o.value.role?` (${o.value.role})`:"";return`${u}${E}: ${f}`});return(p,f)=>(c(),d("div",Pi,[o.value?(c(),d("div",{key:0,class:X(["progress-bar",{"progress-bar-striped progress-bar-animated":r.value}]),style:bt({width:"100%",backgroundColor:a.value}),title:m.value},null,14,Ri)):(c(),d("div",Wi))]))}},Vi=se(Hi,[["__scopeId","data-v-63d222fe"]]),Fi={class:"session-status-bar border-top p-2 bg-light"},Bi={class:"d-flex justify-content-between align-items-center gap-2"},qi={class:"d-flex gap-2"},Ui=["disabled"],zi={class:"mode-label"},Ki=["disabled"],Gi=["disabled"],Yi={__name:"SessionStatusBar",props:{sessionId:{type:String,required:!0}},setup(s){const e=s,t=de(),o=_e(),i=v(()=>t.sessions.get(e.sessionId)),a=v(()=>i.value?.current_permission_mode||"default"),r={default:"ðŸ”’",acceptEdits:"âœï¸",plan:"ðŸ“‹",bypassPermissions:"â˜¢ï¸"},m=v(()=>r[a.value]||"ðŸ”’"),p=v(()=>a.value),f=["default","acceptEdits","plan"],u=async()=>{if(!i.value)return;if(a.value==="bypassPermissions"){try{await t.setPermissionMode(e.sessionId,"default")}catch(_){console.error("Failed to cycle permission mode:",_)}return}const h=(f.indexOf(a.value)+1)%f.length,l=f[h];try{await t.setPermissionMode(e.sessionId,l)}catch(_){console.error("Failed to cycle permission mode:",_)}},E=()=>{o.showModal("session-info",{sessionId:e.sessionId})},g=()=>{o.showModal("manage-session",{session:i.value})},$=()=>{o.setAutoScroll(!o.autoScrollEnabled)};return(b,h)=>(c(),d("div",Fi,[n("div",Bi,[n("div",qi,[n("button",{class:"btn btn-sm btn-outline-secondary",onClick:u,disabled:!i.value},[Z(w(m.value)+" ",1),n("span",zi,w(p.value),1)],8,Ui),n("button",{class:"btn btn-sm btn-outline-secondary",onClick:E,disabled:!i.value},[...h[0]||(h[0]=[Z(" â„¹ï¸ ",-1),n("span",{class:"button-label"},"Info",-1)])],8,Ki),n("button",{class:"btn btn-sm btn-outline-secondary",onClick:g,disabled:!i.value},[...h[1]||(h[1]=[Z(" âš™ï¸ ",-1),n("span",{class:"button-label"},"Manage",-1)])],8,Gi)]),n("div",null,[n("button",{class:X(["btn btn-sm",ss(o).autoScrollEnabled?"btn-primary":"btn-outline-secondary"]),onClick:$}," â¬‡ï¸ "+w(ss(o).autoScrollEnabled?"ON":"OFF"),3)])])]))}},Ji=se(Yi,[["__scopeId","data-v-fdcd3535"]]),ke=At("message",()=>{const s=j(new Map),e=j(new Map),t=j(new Map),o=j(new Map),i=j(new Map),a=j(new Map),r=j(new Map),m=j(new Map),p=v(()=>{const x=de();return s.value.get(x.currentSessionId)||[]}),f=v(()=>{const x=de();return e.value.get(x.currentSessionId)||[]});async function u(x,O=null,z=0){try{const L=O||1e4,D=await ce.get(`/api/sessions/${x}/messages?limit=${L}&offset=${z}`),G=D.messages||[],ie=D.total_count||G.length,J=D.has_more||!1;if(console.log(`Loaded ${G.length} of ${ie} messages for session ${x}`),s.value.set(x,G),G.length>0){const H=G[G.length-1];H.timestamp&&(r.value.set(x,H.timestamp),console.log(`Tracked last received timestamp for session ${x}: ${H.timestamp}`))}const Q=new Set;G.forEach(H=>{H.type==="assistant"&&H.metadata?.tool_uses&&H.metadata.tool_uses.forEach(N=>{Q.add(N.id)}),H.type==="user"&&H.metadata?.tool_results&&H.metadata.tool_results.forEach(N=>{Q.delete(N.tool_use_id);const Y=a.value.get(x);Y&&Y.delete(N.tool_use_id)}),H.type==="system"&&H.metadata?.subtype==="client_launched"&&(Q.forEach(N=>{V(x,N,"Session was restarted")}),Q.clear()),H.type==="system"&&H.metadata?.subtype==="interrupt"&&(Q.forEach(N=>{V(x,N,"Session was interrupted")}),Q.clear()),H.metadata?.has_tool_uses&&H.metadata.tool_uses&&H.metadata.tool_uses.forEach(N=>{h(x,N)}),H.metadata?.has_tool_results&&H.metadata.tool_results&&H.metadata.tool_results.forEach(N=>{y(x,N)}),(H.type==="permission_request"||H.metadata?.has_permission_requests)&&l(x,H),H.type==="permission_response"&&_(x,{request_id:H.metadata?.request_id,decision:H.metadata?.decision,updated_input:H.metadata?.updated_input,reasoning:H.metadata?.reasoning,applied_updates:H.metadata?.applied_updates}),H.type==="system"&&(H.subtype==="init"||H.metadata?.subtype==="init")&&H.metadata?.init_data&&de().storeInitData(x,H.metadata.init_data)});const me=de().sessions.get(x);return me&&!["active","paused","starting"].includes(me.state)&&(Q.forEach(H=>{V(x,H,"Session was terminated")}),Q.clear()),i.value.set(x,Q),s.value=new Map(s.value),J&&console.warn(`Warning: Only loaded ${G.length} of ${ie} messages. Some messages may be missing.`),{messages:G,totalCount:ie,hasMore:J}}catch(L){throw console.error("Failed to load messages:",L),L}}function E(x,O){const z=i.value.get(x)||new Set;O.type==="assistant"&&O.metadata?.tool_uses&&O.metadata.tool_uses.forEach(L=>{z.add(L.id)}),O.type==="user"&&O.metadata?.tool_results&&O.metadata.tool_results.forEach(L=>{z.delete(L.tool_use_id);const D=a.value.get(x);D&&D.delete(L.tool_use_id)}),O.type==="system"&&O.metadata?.subtype==="client_launched"&&(z.forEach(L=>{V(x,L,"Session was restarted")}),z.clear()),O.type==="system"&&O.metadata?.subtype==="interrupt"&&(z.forEach(L=>{V(x,L,"Session was interrupted")}),z.clear()),i.value.set(x,z)}function g(x,O){s.value.has(x)||s.value.set(x,[]);const z=s.value.get(x);if(O.id){const L=z.findIndex(D=>D.id===O.id);if(L!==-1){console.log(`Skipping duplicate message ${O.id} (already exists at index ${L})`);return}}z.push(O),O.timestamp&&r.value.set(x,O.timestamp),P(x,O),E(x,O),s.value=new Map(s.value)}function $(x,O){e.value.has(x)||e.value.set(x,[]),e.value.get(x).push(O),e.value=new Map(e.value)}function b(x,O,z){const L=e.value.get(x);if(L){const D=L.find(G=>G.id===O);D&&(Object.assign(D,z),e.value=new Map(e.value))}}function h(x,O){const z=T(O.name,O.input);t.value.set(z,O.id);const L={id:O.id,name:O.name,input:O.input,signature:z,status:"pending",permissionRequestId:null,permissionDecision:null,result:null,explanation:null,timestamp:new Date().toISOString(),isExpanded:!0};return $(x,L),console.log(`Created tool call ${L.id} for ${L.name}`),L}function l(x,O){console.log("handlePermissionRequest received:",O);const z=O.metadata?.tool_name||O.tool_name,L=O.metadata?.input_params||O.input_params,D=O.metadata?.request_id||O.request_id,G=O.metadata?.suggestions||O.suggestions||[];console.log("Extracted data:",{toolName:z,inputParams:L,requestId:D,suggestions:G});const ie=T(z,L),J=t.value.get(ie);J?(o.value.set(D,J),b(x,J,{status:"permission_required",permissionRequestId:D,suggestions:G}),console.log(`Permission required for tool ${J}`,{suggestions:G})):console.warn("No tool use ID found for permission request signature:",ie,{toolName:z,inputParams:L,availableSignatures:Array.from(t.value.keys())})}function _(x,O){const z=o.value.get(O.request_id);if(z){const L={permissionDecision:O.decision,appliedUpdates:O.applied_updates||[]};O.decision==="allow"?L.status="executing":(L.status="completed",L.result={error:!0,message:O.reasoning||"Permission denied"},L.isExpanded=!1),O.updated_input&&(L.input=O.updated_input),b(x,z,L),console.log(`Permission ${O.decision} for tool ${z}`)}}function y(x,O){const z=O.tool_use_id;b(x,z,{status:O.is_error?"error":"completed",result:{error:O.is_error,content:O.content},isExpanded:!1}),console.log(`Tool ${z} ${O.is_error?"failed":"completed"}`)}function C(x,O){const z=e.value.get(x);if(z){const L=z.find(D=>D.id===O);L&&(L.isExpanded=!L.isExpanded,e.value=new Map(e.value))}}function T(x,O){if(!x)return"unknown:{}";if(!O||typeof O!="object")return`${x}:{}`;const z=JSON.stringify(O,Object.keys(O).sort());return`${x}:${z}`}function P(x,O){const z=O.metadata?.display||O.display;if(!z)return;m.value.has(x)||m.value.set(x,new Map);const L=m.value.get(x);if(z.tool_states)for(const[D,G]of Object.entries(z.tool_states)){L.set(D,G);const ie=e.value.get(x);if(ie){const J=ie.find(Q=>Q.id===D);if(J){const Q={pending:"pending",permission_required:"permission_required",executing:"executing",completed:"completed",failed:"error",orphaned:"completed"};J.status=Q[G.state]||G.state,J.backendState=G}}}if(z.orphaned_tools&&z.orphaned_tools.length>0){const D=a.value.get(x)||new Map;for(const G of z.orphaned_tools)D.has(G)||D.set(G,{reason:"denied",message:"Session was interrupted"});a.value.set(x,D)}if(z.linked_permissions)for(const[D,G]of Object.entries(z.linked_permissions))o.value.set(D,G);z.tool_states&&Object.keys(z.tool_states).length>0&&(e.value=new Map(e.value)),console.log(`Applied backend display metadata for session ${x}:`,{toolStates:Object.keys(z.tool_states||{}).length,orphanedTools:(z.orphaned_tools||[]).length,linkedPermissions:Object.keys(z.linked_permissions||{}).length})}function W(x,O){return m.value.get(x)?.get(O)}function A(x){const O=m.value.get(x);return O&&O.size>0}function V(x,O,z){const L=a.value.get(x)||new Map;L.set(O,{reason:"denied",message:z}),a.value.set(x,L);const D=e.value.get(x);if(D){const G=D.find(ie=>ie.id===O);G&&G.isExpanded&&(G.isExpanded=!1,e.value=new Map(e.value))}console.log(`Marked tool use ${O} as orphaned: ${z}`)}function S(x,O){const z=W(x,O);return z&&z.state==="orphaned"?!0:a.value.get(x)?.has(O)||!1}function k(x,O){const z=W(x,O);return z&&z.state==="orphaned"?{reason:"denied",message:"Session was interrupted",backendState:z}:a.value.get(x)?.get(O)}function q(x,O){const z=i.value.get(x);z&&z.size>0&&(z.forEach(L=>V(x,L,O)),z.clear())}function U(x){s.value.delete(x),e.value.delete(x),s.value=new Map(s.value),e.value=new Map(e.value)}function I(x){return r.value.get(x)}async function R(x){const O=r.value.get(x);if(!O)return console.log(`No sync needed for session ${x} (no previous messages)`),{syncedCount:0,hasMore:!1};try{console.log(`Syncing messages for session ${x} since ${O}`);const z=await ce.get(`/api/sessions/${x}/messages?limit=1000&offset=0`),L=z.messages||[],D=z.has_more||!1,G=N=>N?typeof N=="number"?N*1e3:new Date(N).getTime():0,ie=G(O),J=L.filter(N=>N.timestamp?G(N.timestamp)>ie:!1);if(J.length===0)return console.log(`No missed messages for session ${x}`),{syncedCount:0,hasMore:!1};console.log(`Synced ${J.length} missed messages for session ${x}`);const Q=s.value.get(x)||[],ae=new Set(Q.map(N=>N.id).filter(Boolean)),me=J.filter(N=>!N.id||!ae.has(N.id));if(console.log(`After deduplication: ${me.length} unique new messages`),me.length>0){const N=me.sort((je,Ye)=>{const B=G(je.timestamp),oe=G(Ye.timestamp);return B-oe}),Y=s.value.get(x)||[],ee=Y.length>0?G(Y[Y.length-1].timestamp):0,ne=G(N[0].timestamp),ve=G(N[N.length-1].timestamp);if(console.log("Timestamp comparison:",{existingCount:Y.length,lastExisting:ee,lastExistingDate:Y.length>0?Y[Y.length-1].timestamp:"none",firstNew:ne,firstNewDate:N[0].timestamp,lastNew:ve,lastNewDate:N[N.length-1].timestamp,shouldAppend:ne>ee}),ne>ee){const je=[...Y,...N];s.value.set(x,je),console.log(`âœ… Appended ${N.length} new messages (no full sort needed)`)}else{const je=[...Y,...N].sort((Ye,B)=>{const oe=G(Ye.timestamp),le=G(B.timestamp);return oe-le});s.value.set(x,je),console.log(`âš ï¸ Merged and sorted ${N.length} new messages (interleaved with existing)`)}}else console.log(`No new messages to merge, keeping existing ${Q.length} messages unchanged`);me.forEach(N=>{E(x,N),N.metadata?.has_tool_uses&&N.metadata.tool_uses&&N.metadata.tool_uses.forEach(Y=>{h(x,Y)}),N.metadata?.has_tool_results&&N.metadata.tool_results&&N.metadata.tool_results.forEach(Y=>{y(x,Y)}),(N.type==="permission_request"||N.metadata?.has_permission_requests)&&l(x,N),N.type==="permission_response"&&_(x,{request_id:N.metadata?.request_id,decision:N.metadata?.decision,updated_input:N.metadata?.updated_input,reasoning:N.metadata?.reasoning,applied_updates:N.metadata?.applied_updates}),N.type==="system"&&(N.subtype==="init"||N.metadata?.subtype==="init")&&N.metadata?.init_data&&de().storeInitData(x,N.metadata.init_data)});const H=s.value.get(x);if(H&&H.length>0){const N=H[H.length-1];N.timestamp&&r.value.set(x,N.timestamp)}return s.value=new Map(s.value),{syncedCount:me.length,hasMore:D}}catch(z){return console.error(`Failed to sync messages for session ${x}:`,z),{syncedCount:0,hasMore:!1,error:z.message}}}const F=de();return pe(()=>Array.from(F.sessions.values()).map(O=>({id:O.session_id,state:O.state})),(x,O)=>{O&&x.forEach((z,L)=>{const D=O[L];if(!D||D.id!==z.id)return;const G=["active","paused","starting"].includes(D.state),ie=!["active","paused","starting"].includes(z.state);G&&ie&&q(z.id,"Session was terminated")})},{deep:!0}),{messagesBySession:s,toolCallsBySession:e,activeToolUses:_s(i),orphanedToolUses:_s(a),currentMessages:p,currentToolCalls:f,loadMessages:u,addMessage:g,addToolCall:$,updateToolCall:b,handleToolUse:h,handlePermissionRequest:l,handlePermissionResponse:_,handleToolResult:y,toggleToolExpansion:C,clearMessages:U,markToolUseOrphaned:V,isToolUseOrphaned:S,getOrphanedInfo:k,clearOrphanedToolUses:q,getLastReceivedTimestamp:I,syncMessages:R,getBackendToolState:W,hasBackendDisplayMetadata:A,backendToolStates:_s(m)}}),Qi=Object.freeze(Object.defineProperty({__proto__:null,useMessageStore:ke},Symbol.toStringTag,{value:"Module"}));function Xi(s){if(!s)return new Date;if(typeof s=="string"){const e=new Date(s);return isNaN(e.getTime())?new Date:e}return typeof s=="number"?s<1e10?new Date(s*1e3):new Date(s):new Date}function Wt(s){return Xi(s).toLocaleTimeString()}const Zi={class:"message-row message-row-user"},ea=["title"],ta={class:"message-content-column"},sa=["innerHTML"],na={key:0,class:"tool-results mt-2"},oa={class:"tool-results-header text-muted small mb-2"},ia={class:"d-flex align-items-start gap-2"},aa={class:"flex-grow-1"},ra={class:"text-muted"},la={key:0,class:"text-danger small"},ca={__name:"UserMessage",props:{message:{type:Object,required:!0}},setup(s){const e=s;rt.setOptions({breaks:!0,gfm:!0});const t=v(()=>Wt(e.message.timestamp)),o=v(()=>`user
${t.value}`),i=v(()=>{const p=e.message.content||"";let f=rt.parse(p);return f=f.replace(/\n</g,"<"),f=f.replace(/\n+$/,""),rs.sanitize(f)}),a=v(()=>e.message.metadata?.has_tool_results&&e.message.metadata?.tool_results?.length>0),r=v(()=>e.message.metadata?.tool_results||[]);function m(p,f){return p?p.length<=f?p:p.substring(0,f)+"...":""}return(p,f)=>(c(),d("div",Zi,[n("div",{class:"message-speaker",title:o.value},[...f[0]||(f[0]=[n("span",{class:"speaker-label"},"user",-1)])],8,ea),n("div",ta,[n("div",{class:"message-text",innerHTML:i.value},null,8,sa),a.value?(c(),d("div",na,[n("div",oa," ðŸ”§ Tool Results ("+w(r.value.length)+") ",1),(c(!0),d(re,null,ue(r.value,(u,E)=>(c(),d("div",{key:E,class:X(["tool-result-summary p-2 mb-2 rounded",u.is_error?"bg-danger bg-opacity-10":"bg-success bg-opacity-10"])},[n("div",ia,[n("span",null,w(u.is_error?"âŒ":"âœ…"),1),n("div",aa,[n("small",ra,"Tool: "+w(u.tool_use_id),1),u.is_error?(c(),d("div",la,w(m(u.content,200)),1)):M("",!0)])])],2))),128))])):M("",!0)])]))}},ua=se(ca,[["__scopeId","data-v-7665755b"]]),da={class:"thinking-block"},ma=["aria-label"],pa={class:"text-muted ms-auto"},fa={key:0,class:"thinking-content mt-2 p-3 bg-light rounded border"},va=["innerHTML"],ha={__name:"ThinkingBlock",props:{thinking:{type:String,required:!0}},setup(s){const e=s,t=j(!1),o=v(()=>e.thinking?.length||0),i=v(()=>{const r=e.thinking||"",m=rt.parse(r);return rs.sanitize(m)});function a(){t.value=!t.value}return(r,m)=>(c(),d("div",da,[n("div",{class:"thinking-header d-flex align-items-center gap-2 p-2 bg-info bg-opacity-10 rounded cursor-pointer",onClick:a},[n("span",{"aria-label":t.value?"Collapse":"Expand"},w(t.value?"â–¾":"â–¸"),9,ma),m[0]||(m[0]=n("span",{class:"thinking-label"}," ðŸ’¡ Thinking ",-1)),n("small",pa,w(o.value)+" characters",1)]),t.value?(c(),d("div",fa,[n("div",{class:"thinking-text",innerHTML:i.value},null,8,va)])):M("",!0)]))}},_a=se(ha,[["__scopeId","data-v-fda2352c"]]),et=At("websocket",()=>{const s=j(null),e=j(!1),t=j(0),o=10,i=j(null),a=j(!1),r=j(0),m=5,p=j(null);let f=null;const u=j(0),E=j(null),g=j(new Map),$=j(null),b=j(!1),h=j(0),l=5,_=j(null),y=1e4,C=1e3,T=j(Date.now()),P=j(Date.now()),W=j(Date.now());let A=null,V=null,S=null;const k=v(()=>e.value&&(a.value||!p.value)?"connected":e.value?"partial":"disconnected");function q(H){return`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}${H}`}function U(H){const N={ui:{timer:()=>A,setTimer:Y=>{A=Y},lastPing:T,connected:e,name:"UI"},session:{timer:()=>V,setTimer:Y=>{V=Y},lastPing:P,connected:a,name:"Session"},legion:{timer:()=>S,setTimer:Y=>{S=Y},lastPing:W,connected:b,name:"Legion"}}[H];N.timer()&&clearInterval(N.timer()),N.setTimer(setInterval(()=>{if(!N.connected.value)return;const Y=Date.now()-N.lastPing.value;if(Y>y){console.warn(`âš ï¸ ${N.name} WebSocket heartbeat timeout (${Y}ms since last ping) - forcing close to trigger reconnection`),N.connected.value=!1;const ne={ui:s,session:i,legion:$}[H];ne.value&&ne.value.readyState===WebSocket.OPEN&&ne.value.close()}},C)),console.log(`âœ… Started heartbeat monitor for ${N.name} WebSocket`)}function I(H){const N={ui:{get:()=>A,set:Y=>{A=Y}},session:{get:()=>V,set:Y=>{V=Y}},legion:{get:()=>S,set:Y=>{S=Y}}}[H];N.get()&&(clearInterval(N.get()),N.set(null),console.log(`ðŸ›‘ Stopped heartbeat monitor for ${H} WebSocket`))}function R(){if(s.value)return;const H=q("/ws/ui");console.log(`Connecting to UI WebSocket: ${H}`),s.value=new WebSocket(H),s.value.onopen=()=>{e.value=!0,t.value=0,T.value=Date.now(),U("ui"),console.log("UI WebSocket connected")},s.value.onmessage=N=>{const Y=JSON.parse(N.data);ie(Y)},s.value.onclose=()=>{if(I("ui"),e.value=!1,s.value=null,console.log("UI WebSocket closed"),t.value<o){t.value++;const N=Math.min(2e3*t.value,3e4);console.log(`Reconnecting UI WebSocket in ${N}ms (attempt ${t.value})`),setTimeout(R,N)}},s.value.onerror=N=>{console.error("UI WebSocket error:",N)}}function F(){s.value&&(s.value.close(),s.value=null,e.value=!1)}async function x(H){u.value++;const N=u.value;if(console.log(`[Gen ${N}] Starting connection to session ${H}`),f&&(clearTimeout(f),f=null),await O(),u.value!==N){console.log(`[Gen ${N}] Connection cancelled (current generation: ${u.value})`);return}p.value=H,E.value=N;const Y=q(`/ws/session/${H}`);console.log(`[Gen ${N}] Connecting to Session WebSocket: ${Y}`),i.value=new WebSocket(Y),i.value.onopen=async()=>{if(E.value!==N){console.log(`[Gen ${N}] Ignoring onopen (stale connection, current: ${E.value})`),i.value.close();return}a.value=!0,r.value=0,P.value=Date.now(),U("session"),console.log(`[Gen ${N}] Session WebSocket connected for ${H}`);const ee=g.value.get(H);if(g.value.set(H,!0),ee){console.log(`[Gen ${N}] Reconnection detected, syncing missed messages...`);try{const ve=await ke().syncMessages(H);ve.syncedCount>0?console.log(`[Gen ${N}] âœ… Synced ${ve.syncedCount} missed messages`):ve.error?console.warn(`[Gen ${N}] âš ï¸ Message sync failed: ${ve.error}`):console.log(`[Gen ${N}] No missed messages to sync`),ve.hasMore&&console.warn(`[Gen ${N}] âš ï¸ More than 1000 missed messages, showing recent 1000 only`)}catch(ne){console.error(`[Gen ${N}] Error during message sync:`,ne)}}else console.log(`[Gen ${N}] Initial connection, no sync needed`)},i.value.onmessage=ee=>{if(E.value!==N){console.log(`[Gen ${N}] Ignoring message (stale connection, current: ${E.value})`);return}const ne=JSON.parse(ee.data);J(ne,H)},i.value.onclose=()=>{I("session"),a.value=!1,i.value=null,console.log(`[Gen ${N}] Session WebSocket closed for ${H}`);const ee=de();if(ee.currentSessionId===H&&E.value===N&&r.value<m){r.value++;const ne=Math.min(2e3*r.value,3e4);console.log(`[Gen ${N}] Reconnecting Session WebSocket in ${ne}ms (attempt ${r.value})`),f=setTimeout(()=>{E.value===N&&ee.currentSessionId===H?(f=null,x(H)):console.log(`[Gen ${N}] Skipping reconnect (generation or session changed)`)},ne)}},i.value.onerror=ee=>{console.error(`[Gen ${N}] Session WebSocket error:`,ee)}}function O(){return new Promise(H=>{if(f&&(clearTimeout(f),f=null,console.log("Cancelled pending session reconnect timer")),i.value){const N=p.value,Y=()=>{i.value=null,a.value=!1,p.value=null,E.value=null,r.value=0,N&&g.value.delete(N),H()};if(i.value.readyState===WebSocket.CLOSED)Y();else{const ee=setTimeout(()=>{console.warn("Session WebSocket close timeout - forcing cleanup"),Y()},2e3);i.value.addEventListener("close",()=>{clearTimeout(ee),Y()},{once:!0}),i.value.close()}}else p.value=null,E.value=null,H()})}function z(H){i.value&&a.value?(i.value.send(JSON.stringify({type:"send_message",content:H})),console.log("Sent message to session")):console.error("Cannot send message: Session WebSocket not connected")}function L(H,N,Y=!1,ee=null){if(i.value&&a.value){const ne={type:"permission_response",request_id:H,decision:N,apply_suggestions:Y,timestamp:new Date().toISOString()};ee&&(ne.clarification_message=ee),i.value.send(JSON.stringify(ne)),console.log(`Sent permission ${N} for request ${H}`,{applySuggestions:Y,clarification:ee})}}function D(H,N,Y){if(i.value&&a.value){const ee={type:"permission_response",request_id:H,decision:N,updated_input:Y,timestamp:new Date().toISOString()};i.value.send(JSON.stringify(ee)),console.log(`Sent permission ${N} with updated_input for request ${H}`,Y)}}function G(){i.value&&a.value&&(i.value.send(JSON.stringify({type:"interrupt_session"})),console.log("Sent interrupt to session"))}function ie(H){const N=de(),Y=Le();switch(H.type){case"sessions_list":H.sessions&&Array.isArray(H.sessions)&&H.sessions.forEach(ee=>{N.updateSession(ee.session_id,ee)});break;case"state_change":H.data&&H.data.session_id&&H.data.session&&N.updateSession(H.data.session_id,H.data.session);break;case"project_updated":if(H.data&&H.data.project){const ee=H.data.project;Y.updateProjectLocal(ee.project_id,ee),N.fetchSessions()}break;case"project_deleted":H.data&&H.data.project_id&&Y.projects.delete(H.data.project_id);break;case"connection_established":console.log("UI WebSocket: Connection established");break;case"ping":T.value=Date.now(),s.value?.readyState===WebSocket.OPEN&&s.value.send(JSON.stringify({type:"pong",timestamp:new Date().toISOString()}));break;default:console.warn("Unknown UI WebSocket message type:",H.type)}}function J(H,N){const Y=de();if(Y.currentSessionId!==N){console.warn(`Ignoring message for session ${N} (current: ${Y.currentSessionId})`);return}const ee=ke();switch(H.type){case"message":const ne=H.data;if(!ne||!ne.type){console.warn("Received message event with invalid data:",H);break}if(ne.type==="permission_request"){ee.handlePermissionRequest(N,ne);break}if(ne.type==="permission_response"){ee.handlePermissionResponse(N,ne);break}ne.metadata?.has_tool_uses&&ne.metadata.tool_uses.forEach(ve=>{ee.handleToolUse(N,ve)}),ne.metadata?.has_tool_results&&ne.metadata.tool_results.forEach(ve=>{ee.handleToolResult(N,ve)}),ne.type==="system"&&(ne.subtype==="init"||ne.metadata?.subtype==="init")&&ne.metadata?.init_data&&Y.storeInitData(N,ne.metadata.init_data),ee.addMessage(N,ne);break;case"permission_request":ee.handlePermissionRequest(N,H);break;case"permission_response":ee.handlePermissionResponse(N,H);break;case"tool_result":ee.handleToolResult(N,H);break;case"state_change":Y.updateSession(N,H.updates);break;case"connection_established":console.log(`Session WebSocket: Connection established for ${N}`);break;case"ping":P.value=Date.now(),i.value?.readyState===WebSocket.OPEN&&i.value.send(JSON.stringify({type:"pong",timestamp:new Date().toISOString()}));break;default:console.warn("Unknown Session WebSocket message type:",H.type)}}function Q(H){ae(),_.value=H;const N=q(`/ws/legion/${H}`);console.log(`Connecting to Legion WebSocket: ${N}`),$.value=new WebSocket(N),$.value.onopen=()=>{b.value=!0,h.value=0,W.value=Date.now(),U("legion"),console.log(`Legion WebSocket connected for ${H}`)},$.value.onmessage=Y=>{const ee=JSON.parse(Y.data);me(ee,H)},$.value.onclose=()=>{if(I("legion"),b.value=!1,$.value=null,console.log(`Legion WebSocket closed for ${H}`),_.value===H&&h.value<l){h.value++;const Y=Math.min(2e3*h.value,3e4);setTimeout(()=>Q(H),Y)}},$.value.onerror=Y=>{console.error("Legion WebSocket error:",Y)}}function ae(){$.value&&($.value.close(),$.value=null,b.value=!1,_.value=null)}function me(H,N){Oe(async()=>{const{useLegionStore:Y}=await Promise.resolve().then(()=>F_);return{useLegionStore:Y}},void 0).then(({useLegionStore:Y})=>{const ee=Y();switch(H.type){case"comm":H.comm&&(ee.addComm(N,H.comm),console.log("Legion WebSocket: Received new comm",H.comm));break;case"minion_created":H.data&&(console.log("Legion WebSocket: Minion created, reloading sessions",H.data),Oe(async()=>{const{useSessionStore:ne}=await Promise.resolve().then(()=>hn);return{useSessionStore:ne}},void 0).then(({useSessionStore:ne})=>{ne().loadSessions()}));break;case"minion_updated":H.data&&(console.log("Legion WebSocket: Minion updated, reloading sessions",H.data),Oe(async()=>{const{useSessionStore:ne}=await Promise.resolve().then(()=>hn);return{useSessionStore:ne}},void 0).then(({useSessionStore:ne})=>{ne().loadSessions()}));break;case"connection_established":console.log(`Legion WebSocket: Connection established for ${N}`);break;case"ping":W.value=Date.now(),$.value?.readyState===WebSocket.OPEN&&$.value.send(JSON.stringify({type:"pong",timestamp:new Date().toISOString()}));break;default:console.warn("Unknown Legion WebSocket message type:",H.type)}})}return{uiConnected:e,uiRetryCount:t,sessionConnected:a,sessionRetryCount:r,legionConnected:b,legionRetryCount:h,overallStatus:k,connectUI:R,disconnectUI:F,connectSession:x,disconnectSession:O,sendMessage:z,sendPermissionResponse:L,sendPermissionResponseWithInput:D,interruptSession:G,connectLegion:Q,disconnectLegion:ae}}),ga=Object.freeze(Object.defineProperty({__proto__:null,useWebSocketStore:et},Symbol.toStringTag,{value:"Module"})),ba={class:"base-tool-handler"},ya={class:"tool-section"},$a={class:"tool-parameters"},wa={class:"tool-code"},Ea={key:0,class:"tool-section"},Sa={class:"tool-section-label"},Ca={class:"tool-code"},ka={__name:"BaseToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=v(()=>e.toolCall.input?JSON.stringify(e.toolCall.input,null,2):"{}"),o=v(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),i=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),a=v(()=>{if(!o.value)return"";const r=e.toolCall.result;return r.content!==void 0?typeof r.content=="string"?r.content:JSON.stringify(r.content,null,2):r.message?r.message:JSON.stringify(r,null,2)});return(r,m)=>(c(),d("div",ba,[n("div",ya,[m[0]||(m[0]=n("div",{class:"tool-section-label"},"Parameters:",-1)),n("div",$a,[n("pre",wa,w(t.value),1)])]),o.value?(c(),d("div",Ea,[n("div",Sa,w(i.value?"Error:":"Result:"),1),n("div",{class:X(["tool-result",{"tool-result-error":i.value}])},[n("pre",Ca,w(a.value),1)],2)])):M("",!0)]))}},Ta=se(ka,[["__scopeId","data-v-1e69f57d"]]),xa={class:"read-tool-handler"},Aa={class:"tool-section"},Oa={class:"read-file-info"},Ma={class:"file-path"},Da={key:0,class:"read-range"},Na={key:0,class:"tool-section"},La={key:0,class:"tool-result tool-result-error"},Ia={class:"tool-code"},ja={key:1,class:"file-content-preview"},Pa={class:"content-header"},Ra={class:"line-count-badge"},Wa={key:0,class:"preview-note"},Ha={class:"tool-code content-display"},Va={key:0,class:"more-indicator"},$s=100,Fa={__name:"ReadToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=v(()=>e.toolCall.input?.file_path||"Unknown"),o=v(()=>{const $=e.toolCall.input?.offset,b=e.toolCall.input?.limit;return $!==void 0||b!==void 0}),i=v(()=>{const $=e.toolCall.input?.offset;return $!==void 0?$+1:1}),a=v(()=>{const $=e.toolCall.input?.offset||0,b=e.toolCall.input?.limit;return b!==void 0?$+b:"âˆž"}),r=v(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),m=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),p=v(()=>{if(!r.value)return"";const $=e.toolCall.result;return $.content!==void 0?typeof $.content=="string"?$.content:JSON.stringify($.content,null,2):$.message?$.message:JSON.stringify($,null,2)}),f=v(()=>m.value||!p.value?[]:p.value.split(`
`)),u=v(()=>f.value.length),E=v(()=>u.value>$s),g=v(()=>m.value?"":f.value.slice(0,$s).join(`
`));return($,b)=>(c(),d("div",xa,[n("div",Aa,[n("div",Oa,[b[0]||(b[0]=n("span",{class:"file-icon"},"ðŸ“„",-1)),b[1]||(b[1]=n("strong",null,"Reading:",-1)),n("code",Ma,w(t.value),1),o.value?(c(),d("span",Da,"Lines "+w(i.value)+"-"+w(a.value),1)):M("",!0)])]),r.value?(c(),d("div",Na,[m.value?(c(),d("div",La,[n("pre",Ia,w(p.value),1)])):(c(),d("div",ja,[n("div",Pa,[b[2]||(b[2]=n("span",{class:"content-label"},"Content Preview:",-1)),n("span",Ra,w(u.value)+" lines",1),E.value?(c(),d("span",Wa,"(showing first "+w($s)+")")):M("",!0)]),n("pre",Ha,w(g.value),1),E.value?(c(),d("div",Va,"...")):M("",!0)]))])):M("",!0)]))}},Ba=se(Fa,[["__scopeId","data-v-1f2b0569"]]),qa={class:"write-tool-handler"},Ua={class:"tool-section"},za={class:"write-file-info mb-2"},Ka={class:"file-path"},Ga={class:"write-content-preview"},Ya={class:"content-header"},Ja={class:"line-count-badge"},Qa={key:0,class:"preview-note"},Xa={class:"tool-code content-display"},Za={key:0,class:"more-indicator"},er={key:0,class:"tool-section"},tr={key:0,class:"tool-result tool-result-error"},sr={class:"tool-code"},nr={key:1,class:"tool-result tool-result-success"},or={class:"success-message"},ws=100,ir={__name:"WriteToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=v(()=>e.toolCall.input?.file_path||"Unknown"),o=v(()=>e.toolCall.input?.content||""),i=v(()=>o.value.split(`
`)),a=v(()=>i.value.length),r=v(()=>a.value>ws),m=v(()=>i.value.slice(0,ws).join(`
`)),p=v(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),f=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),u=v(()=>{if(!p.value)return"";const E=e.toolCall.result;return E.content!==void 0?typeof E.content=="string"?E.content:JSON.stringify(E.content,null,2):E.message?E.message:JSON.stringify(E,null,2)});return(E,g)=>(c(),d("div",qa,[n("div",Ua,[n("div",za,[g[0]||(g[0]=n("span",{class:"file-icon"},"ðŸ“",-1)),g[1]||(g[1]=n("strong",null,"Writing:",-1)),n("code",Ka,w(t.value),1)]),n("div",Ga,[n("div",Ya,[g[2]||(g[2]=n("span",{class:"content-label"},"Content:",-1)),n("span",Ja,w(a.value)+" lines",1),r.value?(c(),d("span",Qa,"(showing first "+w(ws)+")")):M("",!0)]),n("pre",Xa,w(m.value),1),r.value?(c(),d("div",Za,"...")):M("",!0)])]),p.value?(c(),d("div",er,[f.value?(c(),d("div",tr,[g[3]||(g[3]=n("strong",null,"Error:",-1)),n("pre",sr,w(u.value),1)])):(c(),d("div",nr,[n("div",or,[g[4]||(g[4]=n("span",{class:"success-icon"},"âœ…",-1)),n("strong",null,"File created successfully ("+w(a.value)+" lines written)",1)])]))])):M("",!0)]))}},ar=se(ir,[["__scopeId","data-v-ddc24a0f"]]),rr={class:"bash-tool-handler"},lr={class:"tool-section"},cr={class:"bash-header"},ur={class:"bash-header-content"},dr={key:0,class:"bash-description"},mr={key:1,class:"bash-flags"},pr={class:"bash-command-section"},fr={class:"bash-command-content"},vr={key:0,class:"tool-section"},hr={key:0,class:"bash-output"},_r={key:1,class:"bash-output-empty"},gr={__name:"BashToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=v(()=>e.toolCall.input?.command||""),o=v(()=>e.toolCall.input?.description||""),i=v(()=>e.toolCall.input?.timeout),a=v(()=>e.toolCall.input?.run_in_background||!1),r=v(()=>i.value||a.value),m=v(()=>{const g=[];return i.value&&g.push(`timeout: ${i.value}ms`),a.value&&g.push("background"),g.join(", ")}),p=v(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),f=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),u=v(()=>f.value?"tool-result-error":"tool-result-success"),E=v(()=>{if(!p.value)return"";const g=e.toolCall.result;return g.content!==void 0?typeof g.content=="string"?g.content:JSON.stringify(g.content,null,2):g.message?g.message:JSON.stringify(g,null,2)});return(g,$)=>(c(),d("div",rr,[n("div",lr,[n("div",cr,[$[1]||($[1]=n("span",{class:"bash-icon"},"ðŸ’»",-1)),n("div",ur,[o.value?(c(),d("div",dr,[$[0]||($[0]=n("strong",null,"Description:",-1)),Z(" "+w(o.value),1)])):M("",!0),r.value?(c(),d("div",mr,w(m.value),1)):M("",!0)])]),n("div",pr,[$[2]||($[2]=n("div",{class:"bash-command-label"},[n("strong",null,"Command:")],-1)),n("div",fr,w(t.value),1)])]),p.value?(c(),d("div",vr,[n("div",{class:X(["tool-result",u.value])},[$[3]||($[3]=n("strong",null,"Output:",-1)),E.value?(c(),d("pre",hr,w(E.value),1)):(c(),d("div",_r,"No output"))],2)])):M("",!0)]))}},br=se(gr,[["__scopeId","data-v-ab50fe73"]]),yr={class:"todo-tool-handler"},$r={class:"tool-section"},wr={class:"todo-header"},Er={class:"todo-summary"},Sr={key:0,class:"todo-count todo-count-completed"},Cr={key:1,class:"todo-count todo-count-in-progress"},kr={key:2,class:"todo-count todo-count-pending"},Tr={class:"todo-checklist"},xr={class:"todo-checkbox"},Ar={class:"todo-content"},Or={key:0,class:"tool-section"},Mr={key:0,class:"tool-result tool-result-error"},Dr={class:"tool-code"},Nr={key:1,class:"tool-result tool-result-success"},Lr={class:"success-message"},Ir={__name:"TodoToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=v(()=>e.toolCall.input?.todos||[]),o=v(()=>t.value.filter(u=>u.status==="completed").length),i=v(()=>t.value.filter(u=>u.status==="in_progress").length),a=v(()=>t.value.filter(u=>u.status==="pending").length);function r(u){return{pending:"â˜",in_progress:"â—",completed:"â˜‘"}[u]||"â˜"}const m=v(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),p=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),f=v(()=>{if(!m.value)return"";const u=e.toolCall.result;return u.content!==void 0?typeof u.content=="string"?u.content:JSON.stringify(u.content,null,2):u.message?u.message:JSON.stringify(u,null,2)});return(u,E)=>(c(),d("div",yr,[n("div",$r,[n("div",wr,[E[0]||(E[0]=n("span",{class:"todo-icon"},"ðŸ“‹",-1)),E[1]||(E[1]=n("strong",null,"Task List:",-1)),n("div",Er,[o.value>0?(c(),d("span",Sr,w(o.value)+" completed ",1)):M("",!0),i.value>0?(c(),d("span",Cr,w(i.value)+" in progress ",1)):M("",!0),a.value>0?(c(),d("span",kr,w(a.value)+" pending ",1)):M("",!0)])]),n("div",Tr,[(c(!0),d(re,null,ue(t.value,(g,$)=>(c(),d("div",{key:$,class:X(["todo-item",`todo-${g.status}`])},[n("span",xr,w(r(g.status)),1),n("span",Ar,w(g.content),1)],2))),128))])]),m.value?(c(),d("div",Or,[p.value?(c(),d("div",Mr,[E[2]||(E[2]=n("strong",null,"Error:",-1)),n("pre",Dr,w(f.value),1)])):(c(),d("div",Nr,[n("div",Lr,[E[3]||(E[3]=n("span",{class:"success-icon"},"âœ…",-1)),n("strong",null,"Task list updated ("+w(t.value.length)+" tasks)",1)])]))])):M("",!0)]))}},jr=se(Ir,[["__scopeId","data-v-bbe55ee7"]]),Pr={class:"edit-tool-handler"},Rr={class:"tool-section"},Wr={class:"edit-file-info"},Hr={class:"file-path"},Vr={key:0,class:"replace-all-badge"},Fr={class:"edit-diff-container"},Br={class:"diff-header"},qr={class:"diff-stats"},Ur={class:"stat-removed"},zr={class:"stat-added"},Kr={class:"unified-diff"},Gr={class:"diff-scroll-container"},Yr={class:"diff-marker"},Jr={class:"diff-content"},Qr={key:0,class:"tool-section"},Xr={key:0,class:"tool-result tool-result-error"},Zr={class:"tool-code"},el={key:1,class:"tool-result tool-result-success"},tl={class:"success-message"},sl={key:0,class:"success-detail"},nl={__name:"EditToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=v(()=>e.toolCall.input?.file_path||"Unknown"),o=v(()=>e.toolCall.input?.old_string||""),i=v(()=>e.toolCall.input?.new_string||""),a=v(()=>e.toolCall.input?.replace_all||!1),r=v(()=>{const $=wi(t.value,o.value,i.value,"","",{context:3}).split(`
`),b=[];for(let h=4;h<$.length;h++){const l=$[h];l&&(l.startsWith("-")?b.push({type:"removed",content:l.substring(1)}):l.startsWith("+")?b.push({type:"added",content:l.substring(1)}):l.startsWith(" ")?b.push({type:"context",content:l.substring(1)}):l.startsWith("@@")&&b.push({type:"hunk",content:l}))}return b}),m=v(()=>r.value.filter(g=>g.type==="removed").length),p=v(()=>r.value.filter(g=>g.type==="added").length),f=v(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),u=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),E=v(()=>{if(!f.value)return"";const g=e.toolCall.result;return g.content!==void 0?typeof g.content=="string"?g.content:JSON.stringify(g.content,null,2):g.message?g.message:JSON.stringify(g,null,2)});return(g,$)=>(c(),d("div",Pr,[n("div",Rr,[n("div",Wr,[$[0]||($[0]=n("span",{class:"file-icon"},"âœï¸",-1)),$[1]||($[1]=n("strong",null,"Editing:",-1)),n("code",Hr,w(t.value),1),a.value?(c(),d("span",Vr,"Replace All")):M("",!0)]),n("div",Fr,[n("div",Br,[$[2]||($[2]=n("span",{class:"diff-label"},"Changes:",-1)),n("span",qr,[n("span",Ur,"-"+w(m.value),1),n("span",zr,"+"+w(p.value),1)])]),n("div",Kr,[n("div",Gr,[(c(!0),d(re,null,ue(r.value,(b,h)=>(c(),d("div",{key:h,class:X(["diff-line",{"diff-line-removed":b.type==="removed","diff-line-added":b.type==="added","diff-line-context":b.type==="context","diff-line-hunk":b.type==="hunk"}])},[n("span",Yr,w(b.type==="removed"?"-":b.type==="added"?"+":b.type==="hunk"?"@":" "),1),n("span",Jr,w(b.content),1)],2))),128))])])])]),f.value?(c(),d("div",Qr,[u.value?(c(),d("div",Xr,[$[3]||($[3]=n("strong",null,"Error:",-1)),n("pre",Zr,w(E.value),1)])):(c(),d("div",el,[n("div",tl,[$[4]||($[4]=n("span",{class:"success-icon"},"âœ…",-1)),$[5]||($[5]=n("strong",null,"File edited successfully",-1)),a.value?(c(),d("span",sl,"(all occurrences replaced)")):M("",!0)])]))])):M("",!0)]))}},ol=se(nl,[["__scopeId","data-v-dd74055e"]]),il={class:"search-tool-handler"},al={class:"tool-section"},rl={class:"search-info"},ll={class:"search-icon"},cl={class:"search-pattern"},ul={key:0,class:"search-path"},dl={key:1,class:"search-filters"},ml={key:0,class:"filter-badge"},pl={key:1,class:"filter-badge"},fl={key:2,class:"filter-badge"},vl={key:0,class:"tool-section"},hl={key:0,class:"tool-result tool-result-error"},_l={class:"tool-code"},gl={key:1,class:"search-results"},bl={class:"results-header"},yl={class:"results-label"},$l={class:"results-count-badge"},wl={class:"results-content"},El={class:"tool-code"},Sl={__name:"SearchToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=v(()=>e.toolCall.name==="Grep"),o=v(()=>e.toolCall.input?.pattern||"Unknown"),i=v(()=>e.toolCall.input?.path||null),a=v(()=>e.toolCall.input?.type||null),r=v(()=>e.toolCall.input?.glob||null),m=v(()=>e.toolCall.input?.["-i"]||!1),p=v(()=>a.value||r.value||m.value),f=v(()=>t.value?"ðŸ”":"ðŸ“"),u=v(()=>t.value?"Searching content":"Finding files"),E=v(()=>t.value?"Matches":"Files found"),g=v(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),$=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),b=v(()=>{if(!g.value)return"";const l=e.toolCall.result;return l.content!==void 0?typeof l.content=="string"?l.content:JSON.stringify(l.content,null,2):l.message?l.message:JSON.stringify(l,null,2)}),h=v(()=>!g.value||$.value||!b.value?0:b.value.split(`
`).filter(_=>_.trim()).length);return(l,_)=>(c(),d("div",il,[n("div",al,[n("div",rl,[n("span",ll,w(f.value),1),n("strong",null,w(u.value)+":",1),n("code",cl,w(o.value),1),i.value?(c(),d("span",ul,"in "+w(i.value),1)):M("",!0),p.value?(c(),d("span",dl,[a.value?(c(),d("span",ml,"type: "+w(a.value),1)):M("",!0),r.value?(c(),d("span",pl,"glob: "+w(r.value),1)):M("",!0),m.value?(c(),d("span",fl,"case-insensitive")):M("",!0)])):M("",!0)])]),g.value?(c(),d("div",vl,[$.value?(c(),d("div",hl,[_[0]||(_[0]=n("strong",null,"Error:",-1)),n("pre",_l,w(b.value),1)])):(c(),d("div",gl,[n("div",bl,[n("span",yl,w(E.value)+":",1),n("span",$l,w(h.value)+" "+w(h.value===1?"match":"matches"),1)]),n("div",wl,[n("pre",El,w(b.value),1)])]))])):M("",!0)]))}},_n=se(Sl,[["__scopeId","data-v-0d272c39"]]),Cl={class:"web-tool-handler"},kl={class:"tool-section"},Tl={class:"web-info"},xl={class:"web-icon"},Al=["href"],Ol={key:1,class:"web-query"},Ml={key:0,class:"web-prompt-container"},Dl={class:"prompt-content"},Nl={key:1,class:"web-domains"},Ll={class:"domains-label"},Il={key:0,class:"tool-section"},jl={key:0,class:"tool-result tool-result-error"},Pl={class:"tool-code"},Rl={key:1,class:"web-results"},Wl={class:"results-header"},Hl={class:"results-label"},Vl={class:"results-content"},Fl={class:"tool-code"},Bl={__name:"WebToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=v(()=>e.toolCall.name==="WebFetch"),o=v(()=>e.toolCall.input?.url||null),i=v(()=>e.toolCall.input?.query||null),a=v(()=>e.toolCall.input?.prompt||null),r=v(()=>e.toolCall.input?.allowed_domains||[]),m=v(()=>e.toolCall.input?.blocked_domains||[]),p=v(()=>r.value.length>0?r.value:m.value.length>0?m.value:[]),f=v(()=>r.value.length>0?"Allowed domains":m.value.length>0?"Blocked domains":"Domains"),u=v(()=>t.value?"ðŸŒ":"ðŸ”Ž"),E=v(()=>t.value?"Fetching URL":"Searching web"),g=v(()=>t.value?"Fetched content":"Search results"),$=v(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),b=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),h=v(()=>{if(!$.value)return"";const l=e.toolCall.result;return l.content!==void 0?typeof l.content=="string"?l.content:JSON.stringify(l.content,null,2):l.message?l.message:JSON.stringify(l,null,2)});return(l,_)=>(c(),d("div",Cl,[n("div",kl,[n("div",Tl,[n("span",xl,w(u.value),1),n("strong",null,w(E.value)+":",1),o.value?(c(),d("a",{key:0,href:o.value,target:"_blank",class:"web-url"},w(o.value),9,Al)):i.value?(c(),d("code",Ol,w(i.value),1)):M("",!0)]),a.value?(c(),d("div",Ml,[_[0]||(_[0]=n("div",{class:"prompt-label"},"Prompt:",-1)),n("div",Dl,w(a.value),1)])):M("",!0),p.value.length>0?(c(),d("div",Nl,[n("span",Ll,w(f.value)+":",1),(c(!0),d(re,null,ue(p.value,y=>(c(),d("span",{key:y,class:"domain-badge"},w(y),1))),128))])):M("",!0)]),$.value?(c(),d("div",Il,[b.value?(c(),d("div",jl,[_[1]||(_[1]=n("strong",null,"Error:",-1)),n("pre",Pl,w(h.value),1)])):(c(),d("div",Rl,[n("div",Wl,[n("span",Hl,w(g.value)+":",1)]),n("div",Vl,[n("pre",Fl,w(h.value),1)])]))])):M("",!0)]))}},gn=se(Bl,[["__scopeId","data-v-62b55b55"]]),ql={class:"task-tool-handler"},Ul={class:"tool-section"},zl={class:"task-header"},Kl={key:0,class:"agent-type-badge"},Gl={key:0,class:"task-description"},Yl={class:"description-content"},Jl={key:1,class:"task-prompt-container"},Ql={class:"prompt-header"},Xl={class:"prompt-length"},Zl={class:"prompt-code"},ec={key:0,class:"tool-section"},tc={key:0,class:"tool-result tool-result-error"},sc={class:"tool-code"},nc={key:1,class:"agent-output"},oc={class:"output-header"},ic={key:0,class:"output-count-badge"},ac={class:"output-content"},rc={class:"tool-code"},lc={__name:"TaskToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=v(()=>e.toolCall.input?.description||null),o=v(()=>e.toolCall.input?.prompt||null),i=v(()=>e.toolCall.input?.subagent_type||null),a=v(()=>e.toolCall.result!==null&&e.toolCall.result!==void 0),r=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),m=v(()=>{if(!a.value)return"";const f=e.toolCall.result;return f.content!==void 0?typeof f.content=="string"?f.content:JSON.stringify(f.content,null,2):f.message?f.message:JSON.stringify(f,null,2)}),p=v(()=>m.value?m.value.split(`
`).length:0);return(f,u)=>(c(),d("div",ql,[n("div",Ul,[n("div",zl,[u[0]||(u[0]=n("span",{class:"task-icon"},"ðŸ¤–",-1)),u[1]||(u[1]=n("strong",null,"Agent Task:",-1)),i.value?(c(),d("span",Kl,w(i.value),1)):M("",!0)]),t.value?(c(),d("div",Gl,[u[2]||(u[2]=n("div",{class:"description-label"},"Description:",-1)),n("div",Yl,w(t.value),1)])):M("",!0),o.value?(c(),d("div",Jl,[n("div",Ql,[u[3]||(u[3]=n("span",{class:"prompt-label"},"Task Prompt:",-1)),n("span",Xl,w(o.value.length)+" characters",1)]),n("pre",Zl,w(o.value),1)])):M("",!0)]),a.value?(c(),d("div",ec,[r.value?(c(),d("div",tc,[u[4]||(u[4]=n("strong",null,"Error:",-1)),n("pre",sc,w(m.value),1)])):(c(),d("div",nc,[n("div",oc,[u[5]||(u[5]=n("span",{class:"output-label"},"Agent Output:",-1)),p.value>0?(c(),d("span",ic,w(p.value)+" lines",1)):M("",!0)]),n("div",ac,[n("pre",rc,w(m.value),1)])]))])):M("",!0)]))}},cc=se(lc,[["__scopeId","data-v-c520c244"]]),uc={class:"notebook-edit-tool-handler"},dc={class:"tool-section"},mc={class:"notebook-info"},pc={class:"file-path"},fc={class:"cell-info mt-2"},vc={class:"info-row"},hc={class:"info-row"},_c={key:0,class:"info-row"},gc={class:"badge bg-info"},bc={key:0,class:"source-preview mt-3"},yc={class:"preview-header"},$c={class:"preview-stats"},wc={class:"source-code"},Ec={key:0,class:"tool-section"},Sc={key:0},Cc={key:1,class:"text-danger"},kc={__name:"NotebookEditToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=v(()=>e.toolCall.input?.notebook_path||"Unknown"),o=v(()=>e.toolCall.input?.cell_id),i=v(()=>e.toolCall.input?.cell_type||"code"),a=v(()=>e.toolCall.input?.edit_mode||"replace"),r=v(()=>e.toolCall.input?.new_source||""),m=v(()=>r.value.split(`
`).length),p=v(()=>i.value==="code"?"bg-primary":"bg-secondary"),f=v(()=>e.toolCall.result?.success===!1?"tool-result-error":"tool-result-success"),u=v(()=>{if(e.toolCall.result?.message)return e.toolCall.result.message;const E=a.value;return E==="insert"?"Cell inserted successfully":E==="delete"?"Cell deleted successfully":"Cell updated successfully"});return(E,g)=>(c(),d("div",uc,[n("div",dc,[n("div",mc,[g[0]||(g[0]=n("span",{class:"notebook-icon"},"ðŸ““",-1)),g[1]||(g[1]=n("strong",null,"Notebook:",-1)),n("code",pc,w(t.value),1)]),n("div",fc,[n("div",vc,[g[2]||(g[2]=n("strong",null,"Cell ID:",-1)),n("code",null,w(o.value||"N/A"),1)]),n("div",hc,[g[3]||(g[3]=n("strong",null,"Cell Type:",-1)),n("span",{class:X(["badge",p.value])},w(i.value),3)]),a.value?(c(),d("div",_c,[g[4]||(g[4]=n("strong",null,"Edit Mode:",-1)),n("span",gc,w(a.value),1)])):M("",!0)]),r.value?(c(),d("div",bc,[n("div",yc,[g[5]||(g[5]=n("span",{class:"preview-label"},"New Source:",-1)),n("span",$c,w(m.value)+" lines",1)]),n("pre",wc,[n("code",null,w(r.value),1)])])):M("",!0)]),s.toolCall.result?(c(),d("div",Ec,[g[6]||(g[6]=n("div",{class:"result-header mb-2"},[n("strong",null,"Result:")],-1)),n("div",{class:X(["tool-result",f.value])},[s.toolCall.result.success!==!1?(c(),d("div",Sc," âœ… "+w(u.value),1)):(c(),d("div",Cc," â— "+w(s.toolCall.result.error||"Operation failed"),1))],2)])):M("",!0)]))}},Tc=se(kc,[["__scopeId","data-v-c81a9bcf"]]),xc={class:"shell-tool-handler"},Ac={class:"tool-section"},Oc={class:"shell-info"},Mc={class:"shell-icon"},Dc={key:0,class:"shell-id"},Nc={key:0,class:"filter-info mt-2"},Lc={class:"filter-pattern"},Ic={key:0,class:"tool-section"},jc={class:"result-header mb-2"},Pc={key:0,class:"mb-2"},Rc={class:"shell-output"},Wc={key:1,class:"mb-2"},Hc={class:"shell-output shell-output-error"},Vc={key:0},Fc={key:1,class:"text-danger"},Bc={__name:"ShellToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=v(()=>e.toolCall.name==="BashOutput"?"ðŸ“¤":e.toolCall.name==="KillShell"?"ðŸ›‘":"ðŸš"),o=v(()=>e.toolCall.name==="BashOutput"?"Reading Shell Output":e.toolCall.name==="KillShell"?"Terminating Shell":"Shell Operation"),i=v(()=>e.toolCall.name==="BashOutput"?"Output":e.toolCall.name==="KillShell"?"Status":"Result"),a=v(()=>e.toolCall.input?.bash_id||e.toolCall.input?.shell_id),r=v(()=>e.toolCall.input?.filter);function m($,b){if(!$)return null;const h=new RegExp(`<${b}>([\\s\\S]*?)<\\/${b}>`,"i"),l=$.match(h);return l?l[1].trim():null}const p=v(()=>{const $=e.toolCall.result;if(!$)return null;let b=$;if($.content&&(b=$.content),typeof b=="string")return{status:m(b,"status"),stdout:m(b,"stdout"),stderr:m(b,"stderr"),exit_code:m(b,"exit_code")};if(Array.isArray(b)){const h=b.find(l=>l.type==="text")?.text||"";return{status:m(h,"status"),stdout:m(h,"stdout"),stderr:m(h,"stderr"),exit_code:m(h,"exit_code")}}return{status:$.status||b.status,stdout:$.stdout||$.output||b.stdout||b.output,stderr:$.stderr||b.stderr,exit_code:$.exit_code||b.exit_code}}),f=v(()=>p.value?.status),u=v(()=>{const $=f.value;return $==="running"?"bg-success":$==="completed"?"bg-secondary":$==="killed"||$==="terminated"?"bg-danger":"bg-info"}),E=v(()=>e.toolCall.result?.success===!1?"tool-result-error":"tool-result-success"),g=v(()=>{if(e.toolCall.result?.message)return e.toolCall.result.message;if(e.toolCall.name==="KillShell")return"Shell terminated successfully";if(e.toolCall.name==="BashOutput"){const $=p.value;if($?.status==="running"&&!$.stdout&&!$.stderr)return"No new output since last check";if($?.status==="failed")return`Shell failed (exit code ${$.exit_code||"unknown"})`}return"Operation completed"});return($,b)=>(c(),d("div",xc,[n("div",Ac,[n("div",Oc,[n("span",Mc,w(t.value),1),n("strong",null,w(o.value)+":",1),a.value?(c(),d("code",Dc,"Shell "+w(a.value),1)):M("",!0)]),s.toolCall.name==="BashOutput"&&r.value?(c(),d("div",Nc,[b[0]||(b[0]=n("strong",null,"Filter:",-1)),n("code",Lc,w(r.value),1)])):M("",!0)]),s.toolCall.result?(c(),d("div",Ic,[n("div",jc,[n("strong",null,w(i.value)+":",1),f.value?(c(),d("span",{key:0,class:X(["badge",u.value])},w(f.value),3)):M("",!0)]),p.value?.stdout?(c(),d("div",Pc,[b[1]||(b[1]=n("div",{class:"output-label"},"Output:",-1)),n("div",Rc,[n("pre",null,[n("code",null,w(p.value.stdout),1)])])])):M("",!0),p.value?.stderr?(c(),d("div",Wc,[b[2]||(b[2]=n("div",{class:"output-label text-danger"}," â— Errors: ",-1)),n("div",Hc,[n("pre",null,[n("code",null,w(p.value.stderr),1)])])])):M("",!0),!p.value?.stdout&&!p.value?.stderr?(c(),d("div",{key:2,class:X(["tool-result",E.value])},[s.toolCall.result.success!==!1?(c(),d("div",Vc," âœ… "+w(g.value),1)):(c(),d("div",Fc," â— "+w(s.toolCall.result.error||"Operation failed"),1))],2)):M("",!0)])):M("",!0)]))}},bn=se(Bc,[["__scopeId","data-v-86def281"]]),qc={class:"skill-tool-handler"},Uc={key:0,class:"tool-section"},zc={class:"d-flex align-items-center gap-2"},Kc={class:"text-muted small"},Gc={key:0,class:"skill-content-body"},Yc={class:"skill-content-text"},Jc={key:1,class:"tool-section mt-3"},Qc={class:"tool-result tool-result-error"},Xc={class:"tool-code"},Zc={__name:"SkillToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=ke(),o=de(),i=j(!1);function a(){i.value=!i.value}const r=v(()=>{const g=o.currentSessionId;if(!g)return{running:null,content:null};const $=t.messagesBySession.get(g)||[],b=$.findIndex(_=>_.type==="user"&&_.metadata?.has_tool_results&&_.metadata?.tool_results?.some(y=>y.tool_use_id===e.toolCall.id));if(b===-1)return{running:null,content:null};let h=null,l=null;for(let _=b+1;_<Math.min(b+3,$.length);_++){const y=$[_];if(y.type!=="user")continue;const C=y.content||"";C.includes("<command-message>")&&C.includes("skill is running")?h=y:C.startsWith("Base directory for this skill:")&&(l=y)}return{running:h,content:l}}),m=v(()=>{const g=r.value.content;if(!g)return"";const $=g.content||"",b=/Base directory(?:\s+for\s+this\s+skill)?:.*?\n/i;return $.replace(b,"").trim()}),p=v(()=>m.value.length>0),f=v(()=>m.value?m.value.split(`
`).length:0),u=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),E=v(()=>{if(!u.value)return"";const g=e.toolCall.result;return g?.message?g.message:g?.error?g.error:"An error occurred"});return(g,$)=>(c(),d("div",qc,[p.value?(c(),d("div",Uc,[n("div",{class:"skill-content-header",onClick:a},[n("div",zc,[n("i",{class:X(["bi",i.value?"bi-chevron-down":"bi-chevron-right"])},null,2),$[0]||($[0]=n("strong",null,"Skill Content",-1)),n("span",Kc,"("+w(f.value)+" lines)",1)])]),i.value?(c(),d("div",Gc,[n("pre",Yc,w(m.value),1)])):M("",!0)])):M("",!0),u.value?(c(),d("div",Jc,[$[1]||($[1]=n("div",{class:"tool-section-label text-danger"}," â— Error: ",-1)),n("div",Qc,[n("pre",Xc,w(E.value),1)])])):M("",!0)]))}},eu=se(Zc,[["__scopeId","data-v-0a48ca0f"]]),tu={class:"slashcommand-tool-handler"},su={key:0,class:"tool-section"},nu={class:"d-flex align-items-center gap-2"},ou=["aria-label"],iu={class:"text-muted small"},au={key:0,class:"command-content-body"},ru={class:"command-content-text"},lu={key:1,class:"tool-section mt-3"},cu={class:"tool-result tool-result-error"},uu={class:"tool-code"},du={__name:"SlashCommandToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=ke(),o=de(),i=j(!1);function a(){i.value=!i.value}const r=v(()=>{const g=o.currentSessionId;if(!g)return{running:null,content:null};const $=t.messagesBySession.get(g)||[],b=$.findIndex(_=>_.type==="user"&&_.metadata?.has_tool_results&&_.metadata?.tool_results?.some(y=>y.tool_use_id===e.toolCall.id));if(b===-1)return{running:null,content:null};let h=null,l=null;for(let _=b+1;_<Math.min(b+3,$.length);_++){const y=$[_];if(y.type!=="user")continue;const C=y.content||"";C.includes("<command-message>")&&C.includes("<command-name>")&&C.includes("<command-args>")?h=y:C.includes("ARGUMENTS:")&&(l=y)}return{running:h,content:l}}),m=v(()=>{const g=r.value.content;if(!g)return"";const $=g.content||"",b=/\nARGUMENTS:.*$/s;return $.replace(b,"").replace(/<command-message>.*?<\/command-message>/s,"").replace(/<command-name>.*?<\/command-name>/s,"").replace(/<command-args>.*?<\/command-args>/s,"").trim()}),p=v(()=>m.value.length>0),f=v(()=>m.value?m.value.split(`
`).length:0),u=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),E=v(()=>{if(!u.value)return"";const g=e.toolCall.result;return g?.message?g.message:g?.error?g.error:"An error occurred"});return(g,$)=>(c(),d("div",tu,[p.value?(c(),d("div",su,[n("div",{class:"command-content-header",onClick:a},[n("div",nu,[n("span",{"aria-label":i.value?"Collapse":"Expand"},w(i.value?"â–¾":"â–¸"),9,ou),$[0]||($[0]=n("strong",null,"Command Content",-1)),n("span",iu,"("+w(f.value)+" lines)",1)])]),i.value?(c(),d("div",au,[n("pre",ru,w(m.value),1)])):M("",!0)])):M("",!0),u.value?(c(),d("div",lu,[$[1]||($[1]=n("div",{class:"tool-section-label text-danger"}," â— Error: ",-1)),n("div",cu,[n("pre",uu,w(E.value),1)])])):M("",!0)]))}},mu=se(du,[["__scopeId","data-v-15991acf"]]),pu={class:"exit-plan-mode-tool-handler"},fu={class:"tool-section"},vu={key:0,class:"plan-content mt-2"},hu={class:"plan-text"},_u={key:0,class:"tool-section"},gu={key:0},bu={key:1,class:"text-danger"},yu={__name:"ExitPlanModeToolHandler",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=v(()=>e.toolCall.input?.plan),o=v(()=>e.toolCall.result?.success===!1?"tool-result-error":"tool-result-success");return(i,a)=>(c(),d("div",pu,[n("div",fu,[a[1]||(a[1]=n("div",{class:"plan-info"},[n("span",{class:"plan-icon"},"ðŸ“‹"),n("strong",null,"Exiting Plan Mode")],-1)),t.value?(c(),d("div",vu,[a[0]||(a[0]=n("div",{class:"plan-header"},[n("strong",null,"Proposed Plan:")],-1)),n("div",hu,w(t.value),1)])):M("",!0)]),s.toolCall.result?(c(),d("div",_u,[a[2]||(a[2]=n("div",{class:"result-header mb-2"},[n("strong",null,"Result:")],-1)),n("div",{class:X(["tool-result",o.value])},[s.toolCall.result.success!==!1?(c(),d("div",gu," âœ… Permission mode reverted to default ")):(c(),d("div",bu," â— "+w(s.toolCall.result.error||"Failed to exit plan mode"),1))],2)])):M("",!0)]))}},$u=se(yu,[["__scopeId","data-v-e2e3c781"]]),wu={class:"ask-user-question-handler"},Eu={key:0,class:"answers-summary"},Su={class:"answer-question text-muted small"},Cu={class:"answer-value fw-medium"},ku={key:1,class:"text-muted small"},Tu={key:0,class:"questions-container"},xu={class:"question-header d-flex align-items-center gap-2 mb-2"},Au={key:0,class:"badge bg-secondary"},Ou={class:"question-text fw-medium"},Mu={class:"options-list"},Du=["id","checked","onChange"],Nu=["id","name","checked","onChange"],Lu=["for"],Iu={class:"option-label"},ju={key:0,class:"option-description text-muted d-block small"},Pu={class:"option-item form-check other-option"},Ru=["id","checked","onChange"],Wu=["id","name","checked","onChange"],Hu=["for"],Vu={key:2,class:"other-input mt-2"},Fu=["onUpdate:modelValue","onInput"],Bu={key:1,class:"alert alert-info mb-0"},qu={__name:"AskUserQuestionToolHandler",props:{toolCall:{type:Object,required:!0}},emits:["answer"],setup(s,{expose:e,emit:t}){const o=s,i=t,a=v(()=>o.toolCall.status==="completed"||o.toolCall.result!=null),r=v(()=>{if(!a.value)return{};const T=o.toolCall.result;if(T?.content){if(typeof T.content=="object"&&T.content.answers)return T.content.answers;if(typeof T.content=="string")try{const W=JSON.parse(T.content);if(W.answers)return W.answers}catch{}}const P=o.toolCall.input||{};return P.answers?P.answers:{}}),m=v(()=>Object.keys(r.value).length>0),p=v(()=>(o.toolCall.input||{}).questions||[]),f=j({}),u=j({});pe(p,T=>{T.forEach((P,W)=>{W in f.value||(f.value[W]=P.multiSelect?[]:null),W in u.value||(u.value[W]="")})},{immediate:!0});function E(T,P){const W=f.value[T];return Array.isArray(W)?W.includes(P):W===P}function g(T){const P=f.value[T];return Array.isArray(P)?P.includes("__OTHER__"):P==="__OTHER__"}function $(T,P){f.value[T]=P,y()}function b(T){f.value[T]="__OTHER__",y()}function h(T,P){const W=f.value[T];if(!Array.isArray(W))f.value[T]=[P];else{const A=W.indexOf(P);A===-1?W.push(P):W.splice(A,1)}y()}function l(T){const P=f.value[T];if(!Array.isArray(P))f.value[T]=["__OTHER__"];else{const W=P.indexOf("__OTHER__");W===-1?P.push("__OTHER__"):P.splice(W,1)}y()}function _(T){y()}function y(){const T={};p.value.forEach((P,W)=>{const A=f.value[W],V=P.question;if(P.multiSelect){if(Array.isArray(A)&&A.length>0){const S=A.map(k=>k==="__OTHER__"?u.value[W]||"":k).filter(k=>k);T[V]=S.join(", ")}}else A==="__OTHER__"?T[V]=u.value[W]||"":A&&(T[V]=A)}),i("answer",T)}const C=v(()=>p.value.every((T,P)=>{const W=f.value[P];if(T.multiSelect){if(!Array.isArray(W)||W.length===0||W.includes("__OTHER__")&&!u.value[P])return!1}else if(!W||W==="__OTHER__"&&!u.value[P])return!1;return!0}));return e({allQuestionsAnswered:C,getAnswers:()=>{const T={};return p.value.forEach((P,W)=>{const A=f.value[W],V=P.question;if(P.multiSelect){if(Array.isArray(A)&&A.length>0){const S=A.map(k=>k==="__OTHER__"?u.value[W]||"":k).filter(k=>k);T[V]=S.join(", ")}}else A==="__OTHER__"?T[V]=u.value[W]||"":A&&(T[V]=A)}),T}}),(T,P)=>(c(),d("div",wu,[a.value?(c(),d(re,{key:0},[m.value?(c(),d("div",Eu,[(c(!0),d(re,null,ue(r.value,(W,A)=>(c(),d("div",{key:A,class:"answer-item mb-2"},[n("div",Su,w(A),1),n("div",Cu,w(W),1)]))),128))])):(c(),d("div",ku," No answers recorded. "))],64)):(c(),d(re,{key:1},[p.value.length>0?(c(),d("div",Tu,[(c(!0),d(re,null,ue(p.value,(W,A)=>(c(),d("div",{key:A,class:"question-block mb-3"},[n("div",xu,[W.header?(c(),d("span",Au,w(W.header),1)):M("",!0),n("span",Ou,w(W.question),1)]),n("div",Mu,[(c(!0),d(re,null,ue(W.options,(V,S)=>(c(),d("div",{key:S,class:X(["option-item form-check",{selected:E(A,V.label)}])},[W.multiSelect?(c(),d("input",{key:0,type:"checkbox",class:"form-check-input",id:`q${A}-opt${S}`,checked:E(A,V.label),onChange:k=>h(A,V.label)},null,40,Du)):(c(),d("input",{key:1,type:"radio",class:"form-check-input",id:`q${A}-opt${S}`,name:`question-${A}`,checked:E(A,V.label),onChange:k=>$(A,V.label)},null,40,Nu)),n("label",{class:"form-check-label",for:`q${A}-opt${S}`},[n("span",Iu,w(V.label),1),V.description?(c(),d("span",ju,w(V.description),1)):M("",!0)],8,Lu)],2))),128)),n("div",Pu,[W.multiSelect?(c(),d("input",{key:0,type:"checkbox",class:"form-check-input",id:`q${A}-other`,checked:g(A),onChange:V=>l(A)},null,40,Ru)):(c(),d("input",{key:1,type:"radio",class:"form-check-input",id:`q${A}-other`,name:`question-${A}`,checked:g(A),onChange:V=>b(A)},null,40,Wu)),n("label",{class:"form-check-label",for:`q${A}-other`},[...P[0]||(P[0]=[n("span",{class:"option-label"},"Other",-1)])],8,Hu),g(A)?(c(),d("div",Vu,[ge(n("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":V=>u.value[A]=V,placeholder:"Enter your custom answer...",onInput:V=>_()},null,40,Fu),[[He,u.value[A]]])])):M("",!0)])])]))),128))])):(c(),d("div",Bu," No questions to display. "))],64))]))}},yn=se(qu,[["__scopeId","data-v-75ce45b4"]]),Uu={class:"d-flex align-items-center gap-2 flex-grow-1 min-width-0"},zu={class:"tool-status-icon"},Ku=["title"],Gu={class:"d-flex align-items-center gap-2"},Yu={class:"text-muted"},Ju=["aria-label"],Qu={key:0,class:"card-body"},Xu={key:0,class:"alert alert-warning mb-3"},Zu={class:"d-flex align-items-center"},ed={class:"mb-0 small"},td={key:2,class:"permission-prompt mt-3"},sd={class:"question-buttons d-flex gap-2 mt-3"},nd=["disabled"],od=["disabled"],id={class:"alert alert-warning mb-3"},ad={class:"mb-0"},rd={class:"tool-name"},ld={key:0,class:"suggestions-section mb-3"},cd={class:"alert alert-info mb-0"},ud={class:"suggestion-details p-2 bg-white rounded"},dd={class:"permission-buttons d-flex gap-2 mb-3"},md=["disabled"],pd=["disabled"],fd=["disabled"],vd={class:"guidance-section mt-3"},hd=["disabled"],_d=["disabled"],gd={key:3,class:"mt-3"},bd={class:"alert alert-warning mb-0"},yd={class:"d-flex align-items-center"},$d={class:"mb-0 small"},wd={key:4,class:"tool-section"},Ed={class:"alert alert-danger mb-0"},Sd={key:0},Cd={__name:"ToolCallCard",props:{toolCall:{type:Object,required:!0}},setup(s){const e=s,t=ke(),o=de(),i=et(),a=j(!1),r=j(null),m=j(""),p=j(null),f=j({}),u=v(()=>e.toolCall.name==="AskUserQuestion"),E=v(()=>!u.value||!p.value?!1:p.value.allQuestionsAnswered);function g(L){f.value=L}async function $(){if(!a.value&&p.value){a.value=!0,r.value="submit-answers";try{const L=o.currentSessionId,D=p.value.getAnswers(),G={questions:e.toolCall.input?.questions||[],answers:D};L&&(t.updateToolCall(L,e.toolCall.id,{input:G}),t.handlePermissionResponse(L,{request_id:e.toolCall.permissionRequestId,decision:"allow",reasoning:"User answered questions",applied_updates:[]})),await i.sendPermissionResponseWithInput(e.toolCall.permissionRequestId,"allow",G)}catch(L){console.error("Failed to submit question answers:",L)}finally{a.value=!1,r.value=null}}}const b=v(()=>t.isToolUseOrphaned(o.currentSessionId,e.toolCall.id)),h=v(()=>t.getOrphanedInfo(o.currentSessionId,e.toolCall.id)),l=v(()=>t.getBackendToolState(o.currentSessionId,e.toolCall.id)),_=v(()=>{if(l.value){const L=l.value.state;return{pending:"pending",permission_required:"permission_required",executing:"executing",completed:"completed",failed:"error",orphaned:"completed"}[L]||L}return e.toolCall.status}),y={Read:Ba,Write:ar,Bash:br,TodoWrite:jr,Edit:ol,Grep:_n,Glob:_n,WebFetch:gn,WebSearch:gn,Task:cc,NotebookEdit:Tc,BashOutput:bn,KillShell:bn,SlashCommand:mu,Skill:eu,ExitPlanMode:$u,AskUserQuestion:yn},C=v(()=>{const L=e.toolCall.name;return y[L]?y[L]:Ta}),T=v(()=>{const L=[];if(b.value)return L.push("border-warning"),L.join(" ");switch(_.value){case"pending":L.push("border-secondary");break;case"permission_required":L.push("border-warning");break;case"executing":L.push("border-primary");break;case"completed":A.value||e.toolCall.permissionDecision==="deny"?L.push("border-danger"):L.push("border-success");break;case"error":L.push("border-danger");break}return L.join(" ")}),P=v(()=>{if(b.value)return"â¹ï¸";switch(_.value){case"pending":return"ðŸ”„";case"permission_required":return"â“";case"executing":return"âš¡";case"completed":return e.toolCall.permissionDecision==="deny"?"âŒ":A.value?"â—":"âœ…";case"error":return"â—";default:return"ðŸ”§"}}),W=v(()=>Wt(e.toolCall.timestamp)),A=v(()=>e.toolCall.result?.error||e.toolCall.status==="error"),V=v(()=>e.toolCall.suggestions&&e.toolCall.suggestions.length>0);function S(L){if(!L)return"";const D=L.replace(/\\/g,"/").split("/");return D[D.length-1]}function k(L){if(!L)return"";const D=L.match(/cd\s+"[^"]+"\s+&&\s+(.+)$/);return D?D[1]:L}function q(L,D=200){return L?L.length<=D?L:L.substring(0,D)+"...":""}function U(L){if(!L)return null;if(L.content){const D=L.content.match(/exit code (\d+)/i);if(D)return parseInt(D[1])}return L.error?1:0}function I(L,D){const G=L?L.split(`
`).length:0;return{added:D?D.split(`
`).length:0,removed:G}}const R=v(()=>{const L=e.toolCall.name,D=e.toolCall.input||{},G=e.toolCall.result,ie=_.value;switch(L){case"Bash":case"Shell":case"Command":{const J=k(D.command),Q=q(J,200);if(ie==="completed"&&G){const ae=U(G);return`Bash: ${Q} (exit ${ae})`}return`Bash: ${Q}`}case"SlashCommand":{const J=q(D.command,200);return ie==="completed"&&G?`SlashCommand: ${J}`:`SlashCommand: ${J}`}case"Edit":{const J=S(D.file_path);if(ie==="completed"&&G&&!G.error){const{added:Q,removed:ae}=I(D.old_string,D.new_string);return Q===ae?`Edit: ${J} (${Q} lines changed)`:`Edit: ${J} (${Q} lines added, ${ae} removed)`}return`Edit: ${J}`}case"Read":{const J=S(D.file_path);if(D.offset!==void 0||D.limit!==void 0){const ae=(D.offset||0)+1,me=D.limit?(D.offset||0)+D.limit:"âˆž";return`Read: ${J} (lines ${ae}-${me})`}return`Read: ${J} (full file)`}case"Write":{const J=S(D.file_path);if(ie==="completed"&&G&&!G.error&&D.content){const Q=D.content.split(`
`).length;return`Write: ${J} (${Q} lines written)`}return`Write: ${J}`}case"Skill":{const J=D.skill||"Unknown";return ie==="completed"&&G?G.error?`Skill: ${J} (error)`:`Skill: ${J} (completed)`:`Skill: ${J}`}case"Task":{const J=D.subagent_type||"general",Q=D.description||"Task";return ie==="completed"&&G?G.error?`Task: (${J}) ${Q} (error)`:`Task: (${J}) ${Q} (completed)`:`Task: (${J}) ${Q}`}case"TodoWrite":{if(D.todos&&Array.isArray(D.todos)){const J=D.todos.filter(me=>me.status==="completed").length,Q=D.todos.length,ae=D.todos.find(me=>me.status==="in_progress");return ae?`Todo: Working on "${ae.content}"`:`Todo: ${J}/${Q} Tasks Completed`}return"Todo: Updated"}case"Grep":case"Glob":{const J=D.pattern||"",Q=L==="Grep"?"Grep":"Glob";if(ie==="completed"&&G&&!G.error){let ae=0;return G.content&&(ae=G.content.split(`
`).filter(H=>H.trim()).length),`${Q}: "${J}" (${ae} results)`}return`${Q}: "${J}"`}case"WebFetch":case"WebSearch":{const J=D.url||D.query||"";if(L==="WebSearch"){const ae=D.query||"",me=ae.length>50?ae.substring(0,50)+"...":ae;return ie==="completed"&&G?G.error?`Web: ${me} (error)`:`Web: ${me} (success)`:`Web: ${me}`}let Q="";try{J&&(Q=new URL(J.startsWith("http")?J:`https://${J}`).hostname)}catch{Q=J.length>50?J.substring(0,50)+"...":J}return ie==="completed"&&G?G.error?`Web: ${Q} (error)`:`Web: ${Q} (success)`:`Web: ${Q||J}`}case"NotebookEdit":{const J=S(D.notebook_path),Q=D.cell_number!==void 0?D.cell_number:"?",ae=D.edit_mode||"replace";return`NotebookEdit: ${J} cell #${Q} (${ae})`}case"ExitPlanMode":return"ExitPlanMode: Plan submitted";case"BashOutput":return`BashOutput: Read output from ${D.bash_id||"unknown"}`;case"KillShell":return`KillShell: Terminate ${D.shell_id||"unknown"}`;case"AskUserQuestion":{const Q=(D.questions||[]).length;return ie==="completed"&&G&&!G.error?`AskUserQuestion: ${Q} question(s) answered`:ie==="permission_required"?`AskUserQuestion: ${Q} question(s) awaiting response`:`AskUserQuestion: ${Q} question(s)`}default:return`${L}: executed`}}),F=v(()=>{const L=e.toolCall.name,D=e.toolCall.input||{};return["Bash","Shell","Command","SlashCommand"].includes(L)?D.command||L:["Edit","Read","Write","NotebookEdit"].includes(L)&&(D.file_path||D.notebook_path)||L});function x(){const L=o.currentSessionId;L&&t.toggleToolExpansion(L,e.toolCall.id)}function O(L){return L.type==="setMode"?`Set permission mode to "${L.mode}"`:L.type==="allow"?`Allow tool: ${L.tool}`:JSON.stringify(L)}async function z(L,D,G=null){if(!a.value){a.value=!0,L==="allow"?r.value=D?"approve-apply":"approve":G?r.value="deny-guidance":r.value="deny";try{const ie=o.currentSessionId;if(ie){const J=D&&e.toolCall.suggestions?e.toolCall.suggestions:[];t.handlePermissionResponse(ie,{request_id:e.toolCall.permissionRequestId,decision:L,reasoning:L==="allow"?"User allowed permission":"User denied permission",applied_updates:J})}await i.sendPermissionResponse(e.toolCall.permissionRequestId,L,D,G)}catch(ie){console.error("Failed to send permission response:",ie)}finally{a.value=!1,r.value=null}}}return(L,D)=>(c(),d("div",{class:X(["tool-call-card card",T.value])},[n("div",{class:"card-header d-flex align-items-center justify-content-between cursor-pointer",onClick:x},[n("div",Uu,[n("span",zu,w(P.value),1),n("span",{class:"tool-name",title:F.value},w(R.value),9,Ku)]),n("div",Gu,[n("small",Yu,w(W.value),1),n("span",{"aria-label":s.toolCall.isExpanded?"Collapse":"Expand"},w(s.toolCall.isExpanded?"â–¾":"â–¸"),9,Ju)])]),s.toolCall.isExpanded?(c(),d("div",Qu,[b.value?(c(),d("div",Xu,[n("div",Zu,[D[7]||(D[7]=n("span",{class:"me-2",style:{"font-size":"1.2rem"}},"â¹ï¸",-1)),n("div",null,[D[6]||(D[6]=n("strong",null,"Tool Execution Cancelled",-1)),n("p",ed,w(h.value?.message||"Session was terminated"),1)])])])):M("",!0),u.value&&_.value==="permission_required"?M("",!0):(c(),$e(ro(C.value),{key:1,toolCall:s.toolCall},null,8,["toolCall"])),_.value==="permission_required"&&!b.value?(c(),d("div",td,[u.value?(c(),d(re,{key:0},[D[8]||(D[8]=n("div",{class:"alert alert-info mb-3"},[n("p",{class:"mb-0"},[n("strong",null,"â“ Claude is asking for your input")])],-1)),fe(yn,{ref_key:"questionHandlerRef",ref:p,toolCall:s.toolCall,onAnswer:g},null,8,["toolCall"]),n("div",sd,[n("button",{class:"btn btn-primary",onClick:$,disabled:a.value||!E.value},w(a.value?"â³ Submitting...":"ðŸ“¤ Submit Answers"),9,nd),n("button",{class:"btn btn-outline-secondary",onClick:D[0]||(D[0]=G=>z("deny",!1)),disabled:a.value}," Skip Question ",8,od)])],64)):(c(),d(re,{key:1},[n("div",id,[D[11]||(D[11]=n("p",{class:"mb-2"},[n("strong",null,"ðŸ” Permission Required")],-1)),n("p",ad,[D[9]||(D[9]=Z("Claude wants to use the ",-1)),n("code",rd,w(s.toolCall.name),1),D[10]||(D[10]=Z(" tool.",-1))])]),V.value?(c(),d("div",ld,[n("div",cd,[D[12]||(D[12]=n("h6",{class:"mb-2"}," ðŸ’¾ Suggested Permission Update ",-1)),D[13]||(D[13]=n("p",{class:"mb-2 small"},"Claude suggests updating your permissions:",-1)),n("div",ud,[(c(!0),d(re,null,ue(s.toolCall.suggestions,(G,ie)=>(c(),d("div",{key:ie,class:"suggestion-item"},[n("code",null,w(O(G)),1)]))),128))]),D[14]||(D[14]=n("small",{class:"text-muted mt-2 d-block"}," This will prevent future permission prompts for this action. ",-1))])])):M("",!0),n("div",dd,[V.value?(c(),d("button",{key:0,class:"btn btn-success",onClick:D[1]||(D[1]=G=>z("allow",!0)),disabled:a.value},w(a.value&&r.value==="approve-apply"?"â³ Submitting...":"âœ… Approve & Apply"),9,md)):M("",!0),n("button",{class:X(["btn",V.value?"btn-outline-success":"btn-success"]),onClick:D[2]||(D[2]=G=>z("allow",!1)),disabled:a.value},w(a.value&&r.value==="approve"?"â³ Submitting...":V.value?"âœ… Approve Only":"âœ… Approve"),11,pd),n("button",{class:"btn btn-danger",onClick:D[3]||(D[3]=G=>z("deny",!1)),disabled:a.value}," ðŸš« "+w(a.value&&r.value==="deny"?"Submitting...":"Deny"),9,fd)]),n("div",vd,[D[15]||(D[15]=n("label",{class:"form-label fw-bold"}," Provide Guidance (Optional) ",-1)),D[16]||(D[16]=n("p",{class:"text-muted small mb-2"}," Provide guidance to help Claude retry with better context. If provided, Claude will continue with your guidance instead of stopping. ",-1)),ge(n("textarea",{"onUpdate:modelValue":D[4]||(D[4]=G=>m.value=G),class:"form-control mb-2",rows:"3",placeholder:"e.g., 'Try using a different approach...' or 'Make sure to check the file exists first...'",disabled:a.value},null,8,hd),[[He,m.value]]),m.value.trim()?(c(),d("button",{key:0,class:"btn btn-warning btn-sm",onClick:D[5]||(D[5]=G=>z("deny",!1,m.value)),disabled:a.value},w(a.value&&r.value==="deny-guidance"?"â³ Submitting...":"ðŸ”€ Provide Guidance & Continue"),9,_d)):M("",!0)])],64))])):M("",!0),_.value==="permission_required"&&b.value?(c(),d("div",gd,[n("div",bd,[n("div",yd,[D[18]||(D[18]=n("span",{class:"me-2",style:{"font-size":"1.2rem"}},"ðŸš§",-1)),n("div",null,[D[17]||(D[17]=n("strong",null,"Permission Request Cancelled",-1)),n("p",$d,w(h.value?.message||"Session was terminated before permission could be granted"),1)])])])])):M("",!0),s.toolCall.permissionDecision==="deny"?(c(),d("div",wd,[n("div",Ed,[D[19]||(D[19]=Z(" ðŸš« Permission denied ",-1)),s.toolCall.result?.message?(c(),d("span",Sd," - "+w(s.toolCall.result.message),1)):M("",!0)])])):M("",!0)])):M("",!0)],2))}},$n=se(Cd,[["__scopeId","data-v-4661b75e"]]);function wn(s){if(!s)return"";const e=s.replace(/\\/g,"/").split("/");return e[e.length-1]}function kd(s){if(!s)return"";const e=s.match(/cd\s+"[^"]+"\s+&&\s+(.+)$/);return e?e[1]:s}function En(s,e=200){return s?s.length<=e?s:s.substring(0,e)+"...":""}function Td(s){const e=s.name,t=s.input||{};switch(e){case"Bash":case"Shell":case"Command":{const o=kd(t.command),i=En(o,60);return`${e}: ${i}`}case"SlashCommand":return`SlashCommand: ${En(t.command,60)}`;case"Edit":case"Read":case"Write":{const o=wn(t.file_path);return`${e}: ${o}`}case"Skill":return`Skill: ${t.skill||"Unknown"}`;case"Task":{const o=t.subagent_type||"general",i=t.description||"Task",a=i.length>40?i.substring(0,40)+"...":i;return`Task: (${o}) ${a}`}case"Grep":case"Glob":{const o=t.pattern||"",i=o.length>40?o.substring(0,40)+"...":o;return`${e}: "${i}"`}case"WebFetch":case"WebSearch":{if(e==="WebSearch"){const i=t.query||"";return`WebSearch: ${i.length>40?i.substring(0,40)+"...":i}`}let o="";try{const i=t.url||"";i&&(o=new URL(i.startsWith("http")?i:`https://${i}`).hostname)}catch{o="URL"}return`WebFetch: ${o}`}case"NotebookEdit":return`NotebookEdit: ${wn(t.notebook_path)}`;case"AskUserQuestion":return`AskUserQuestion: ${(t.questions||[]).length} question(s)`;default:return e}}const xd={key:0,class:"tool-timeline-bar"},Ad={class:"timeline-container"},Od=["title","onClick","onKeydown"],Md={__name:"ToolTimelineBar",props:{tools:{type:Array,required:!0,default:()=>[]}},emits:["segment-click"],setup(s,{emit:e}){const t=s,o=e,i=ke(),a=de(),r=v(()=>t.tools.map(($,b)=>({tool:$,originalIndex:b})).sort(($,b)=>{if($.tool.timestamp&&b.tool.timestamp){const h=new Date($.tool.timestamp).getTime(),l=new Date(b.tool.timestamp).getTime();if(h!==l)return h-l}return $.originalIndex-b.originalIndex}).map(({tool:$})=>$));function m($){const b=a.currentSessionId;if(!b)return $.status;const h=i.getBackendToolState(b,$.id);return h?{pending:"pending",permission_required:"permission_required",executing:"executing",completed:"completed",failed:"error",orphaned:"orphaned"}[h.state]||h.state:i.isToolUseOrphaned(b,$.id)?"orphaned":$.status}function p($){return $.result?.error||$.status==="error"||$.permissionDecision==="deny"}function f($){return m($)==="executing"}function u($){switch(m($)){case"completed":return p($)?"segment-failed":"segment-success";case"error":return"segment-failed";case"executing":return"segment-executing";case"permission_required":return"segment-permission";case"orphaned":return"segment-orphaned";default:return"segment-pending"}}function E($){const b=Td($),h=m($),l={completed:p($)?"Failed":"Success",error:"Failed",executing:"Executing...",permission_required:"Awaiting permission",orphaned:"Cancelled",pending:"Pending"}[h]||h;return`${b} [${l}]`}function g($,b){o("segment-click",{tool:$,index:b})}return($,b)=>r.value.length>1?(c(),d("div",xd,[n("div",Ad,[(c(!0),d(re,null,ue(r.value,(h,l)=>(c(),d("div",{key:h.id,class:X(["timeline-segment",u(h)]),style:{flex:1},title:E(h),onClick:_=>g(h,l),role:"button",tabindex:"0",onKeydown:[We(_=>g(h,l),["enter"]),We(he(_=>g(h,l),["prevent"]),["space"])]},[n("span",{class:X(["segment-inner",{"executing-pulse":f(h)}])},null,2)],42,Od))),128))])])):M("",!0)}},Dd=se(Md,[["__scopeId","data-v-26c45a04"]]),Nd={class:"tool-footer-container"},Ld=["aria-label","onKeydown"],Id={class:"footer-left"},jd={class:"footer-text"},Pd={class:"footer-middle"},Rd={class:"footer-text"},Wd={class:"footer-right"},Hd={class:"expand-icon"},Vd={key:0,class:"tool-footer-expanded"},Fd={key:1,class:"active-tools-area"},Bd={__name:"ToolFooter",props:{tools:{type:Array,required:!0,default:()=>[]}},setup(s){const e=s,t=ke(),o=de(),i=j(!1);function a(b){return b.map((h,l)=>({tool:h,originalIndex:l})).sort((h,l)=>{if(h.tool.timestamp&&l.tool.timestamp){const _=new Date(h.tool.timestamp).getTime(),y=new Date(l.tool.timestamp).getTime();if(_!==y)return _-y}return h.originalIndex-l.originalIndex}).map(({tool:h})=>h)}const r=v(()=>{const b=e.tools.filter(h=>h.status==="executing"||h.status==="permission_required");return a(b)}),m=v(()=>{const b=e.tools.filter(h=>h.status!=="executing"&&h.status!=="permission_required");return a(b)}),p=v(()=>{const b=new Map;e.tools.forEach(C=>{const T=b.get(C.name)||0;b.set(C.name,T+1)});const h=Array.from(b.entries()).sort((C,T)=>T[1]-C[1]),l=h.slice(0,5),_=h.length-l.length,y=l.map(([C,T])=>`${C} (${T})`).join(", ");return _>0?`${y}, +${_} more`:y}),f=v(()=>{const b=e.tools.length;let h=0,l=0,_=0;e.tools.forEach(P=>{const W=o.currentSessionId;(W?t.isToolUseOrphaned(W,P.id):!1)?_++:P.status==="completed"&&!P.result?.error&&P.permissionDecision!=="deny"?h++:(P.status==="error"||P.result?.error||P.permissionDecision==="deny")&&l++});let y=[];h>0&&y.push(`${h} âœ…`),l>0&&y.push(`${l} âŒ`),_>0&&y.push(`${_} â¹ï¸`);const C=b===1?"tool":"tools",T=y.length>0?": "+y.join(" "):"";return`${b} ${C}${T}`}),u=v(()=>i.value?"â–²":"â–¼"),E=v(()=>{const b=o.currentSessionId,h=e.tools.some(C=>C.status==="error"||C.result?.error||C.permissionDecision==="deny"),l=e.tools.some(C=>b?t.isToolUseOrphaned(b,C.id):!1),_=r.value.length>0,y=e.tools.every(C=>!(b?t.isToolUseOrphaned(b,C.id):!1)&&C.status==="completed"&&!C.result?.error&&C.permissionDecision!=="deny");return h?"footer-status-error":l?"footer-status-orphaned":_?"footer-status-in-progress":y?"footer-status-success":""});function g(){i.value=!i.value}async function $({tool:b}){const h=o.currentSessionId;if(!h)return;i.value||(i.value=!0,await yt()),t.toggleToolExpansion(h,b.id),await yt();const l=document.querySelector(`[data-tool-id="${b.id}"]`);l&&l.scrollIntoView({behavior:"smooth",block:"nearest"})}return(b,h)=>(c(),d("div",Nd,[fe(Dd,{tools:s.tools,onSegmentClick:$},null,8,["tools"]),n("div",{class:X(["tool-footer-summary",E.value]),onClick:g,role:"button","aria-label":i.value?"Collapse tools":"Expand tools",tabindex:"0",onKeydown:[We(g,["enter"]),We(he(g,["prevent"]),["space"])]},[n("div",Id,[n("span",jd,"Used: "+w(p.value),1)]),n("div",Pd,[h[0]||(h[0]=n("span",{class:"footer-separator"},"|",-1)),n("span",Rd,w(f.value),1)]),n("div",Wd,[n("span",Hd,w(u.value),1)])],42,Ld),i.value?(c(),d("div",Vd,[(c(!0),d(re,null,ue(m.value,l=>(c(),$e($n,{key:l.id,toolCall:l,"data-tool-id":l.id},null,8,["toolCall","data-tool-id"]))),128))])):M("",!0),r.value.length>0?(c(),d("div",Fd,[(c(!0),d(re,null,ue(r.value,l=>(c(),$e($n,{key:l.id,toolCall:l,"data-tool-id":l.id},null,8,["toolCall","data-tool-id"]))),128))])):M("",!0)]))}},qd=se(Bd,[["__scopeId","data-v-f80c8c6c"]]),Ud={class:"message-row message-row-assistant"},zd=["title"],Kd={class:"message-content-column"},Gd={key:0,class:"thinking-block mb-2"},Yd=["innerHTML"],Jd={__name:"AssistantMessage",props:{message:{type:Object,required:!0},attachedTools:{type:Array,default:()=>[]}},setup(s){const e=s,t=ke(),o=de();rt.setOptions({breaks:!0,gfm:!0});const i=v(()=>Wt(e.message.timestamp)),a=v(()=>e.message.metadata?.model||null),r=v(()=>{const b=i.value;return`assistant${a.value?`
Model: ${a.value}`:""}
${b}`}),m=v(()=>{const b=e.message.content||"";return b.trim().length>0&&b!=="Assistant response"}),p=v(()=>{const b=e.message.content||"";let h=rt.parse(b);return h=h.replace(/\n</g,"<"),h=h.replace(/\n+$/,""),rs.sanitize(h)}),f=v(()=>e.message.metadata?.has_thinking&&e.message.metadata?.thinking_content),u=v(()=>e.message.metadata?.thinking_content||""),E=v(()=>{const b=e.message.metadata?.has_tool_uses&&e.message.metadata?.tool_uses?.length>0,h=e.attachedTools&&e.attachedTools.length>0;return b||h}),g=v(()=>{const b=e.message.metadata?.tool_uses||[],h=e.attachedTools||[],l=[...b],_=new Set(b.map(y=>y.id));for(const y of h)_.has(y.id)||l.push(y);return l}),$=v(()=>{const b=o.currentSessionId;if(!b)return[];const h=t.toolCallsBySession.get(b)||[];return g.value.map(l=>{const _=h.find(y=>y.id===l.id);return _||{id:l.id,name:l.name,input:l.input,status:"pending",result:null,timestamp:l.timestamp||e.message.timestamp,isExpanded:!0}})});return(b,h)=>(c(),d("div",Ud,[n("div",{class:"message-speaker",title:r.value},[...h[0]||(h[0]=[n("span",{class:"speaker-label"},"assistant",-1)])],8,zd),n("div",Kd,[f.value?(c(),d("div",Gd,[fe(_a,{thinking:u.value},null,8,["thinking"])])):M("",!0),m.value?(c(),d("div",{key:1,class:"message-text",innerHTML:p.value},null,8,Yd)):M("",!0),E.value?(c(),$e(qd,{key:2,tools:$.value},null,8,["tools"])):M("",!0)])]))}},Qd=se(Jd,[["__scopeId","data-v-2e32f6ef"]]),Xd={key:0,class:"message-row message-row-compaction"},Zd=["title"],em={class:"message-content-column"},tm={class:"compaction-status-content"},sm={class:"text-muted ms-auto"},nm={key:1,class:"message-row message-row-system"},om=["title"],im={class:"message-content-column"},am={class:"system-text"},rm={__name:"SystemMessage",props:{message:{type:Object,required:!0}},setup(s){const e=s,t=v(()=>Wt(e.message.timestamp)),o=v(()=>`system
${t.value}`),i=v(()=>e.message.metadata?.subtype==="status"&&e.message.metadata?.init_data?.status==="compacting");return(a,r)=>i.value?(c(),d("div",Xd,[n("div",{class:"message-speaker",title:o.value},[...r[0]||(r[0]=[n("span",{class:"speaker-label"},"system",-1)])],8,Zd),n("div",em,[n("div",tm,[r[1]||(r[1]=n("span",{class:"me-2"},"ðŸ—œï¸",-1)),r[2]||(r[2]=n("strong",{class:"me-2"},"Context compaction in progress...",-1)),n("small",sm,w(t.value),1)])])])):(c(),d("div",nm,[n("div",{class:"message-speaker",title:o.value},[...r[3]||(r[3]=[n("span",{class:"speaker-label"},"system",-1)])],8,om),n("div",im,[n("span",am,w(s.message.content),1)])]))}},Sn=se(rm,[["__scopeId","data-v-a078178f"]]),lm={__name:"MessageItem",props:{message:{type:Object,required:!0},attachedTools:{type:Array,default:()=>[]}},setup(s){const e=s,t=v(()=>{switch(e.message.type){case"user":return ua;case"assistant":return Qd;case"system":return Sn;default:return Sn}});return(o,i)=>(c(),$e(ro(t.value),{message:s.message,attachedTools:s.attachedTools},null,8,["message","attachedTools"]))}},cm=se(lm,[["__scopeId","data-v-11dff525"]]);var we="top",Te="bottom",xe="right",Ee="left",ls="auto",Ot=[we,Te,xe,Ee],lt="start",wt="end",co="clippingParents",zs="viewport",vt="popper",uo="reference",Ws=Ot.reduce(function(s,e){return s.concat([e+"-"+lt,e+"-"+wt])},[]),Ks=[].concat(Ot,[ls]).reduce(function(s,e){return s.concat([e,e+"-"+lt,e+"-"+wt])},[]),mo="beforeRead",po="read",fo="afterRead",vo="beforeMain",ho="main",_o="afterMain",go="beforeWrite",bo="write",yo="afterWrite",$o=[mo,po,fo,vo,ho,_o,go,bo,yo];function qe(s){return s?(s.nodeName||"").toLowerCase():null}function Ae(s){if(s==null)return window;if(s.toString()!=="[object Window]"){var e=s.ownerDocument;return e&&e.defaultView||window}return s}function ct(s){var e=Ae(s).Element;return s instanceof e||s instanceof Element}function Me(s){var e=Ae(s).HTMLElement;return s instanceof e||s instanceof HTMLElement}function Gs(s){if(typeof ShadowRoot>"u")return!1;var e=Ae(s).ShadowRoot;return s instanceof e||s instanceof ShadowRoot}function um(s){var e=s.state;Object.keys(e.elements).forEach(function(t){var o=e.styles[t]||{},i=e.attributes[t]||{},a=e.elements[t];!Me(a)||!qe(a)||(Object.assign(a.style,o),Object.keys(i).forEach(function(r){var m=i[r];m===!1?a.removeAttribute(r):a.setAttribute(r,m===!0?"":m)}))})}function dm(s){var e=s.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(o){var i=e.elements[o],a=e.attributes[o]||{},r=Object.keys(e.styles.hasOwnProperty(o)?e.styles[o]:t[o]),m=r.reduce(function(p,f){return p[f]="",p},{});!Me(i)||!qe(i)||(Object.assign(i.style,m),Object.keys(a).forEach(function(p){i.removeAttribute(p)}))})}}const wo={name:"applyStyles",enabled:!0,phase:"write",fn:um,effect:dm,requires:["computeStyles"]};function Fe(s){return s.split("-")[0]}var at=Math.max,ns=Math.min,Et=Math.round;function Hs(){var s=navigator.userAgentData;return s!=null&&s.brands&&Array.isArray(s.brands)?s.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Eo(){return!/^((?!chrome|android).)*safari/i.test(Hs())}function St(s,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var o=s.getBoundingClientRect(),i=1,a=1;e&&Me(s)&&(i=s.offsetWidth>0&&Et(o.width)/s.offsetWidth||1,a=s.offsetHeight>0&&Et(o.height)/s.offsetHeight||1);var r=ct(s)?Ae(s):window,m=r.visualViewport,p=!Eo()&&t,f=(o.left+(p&&m?m.offsetLeft:0))/i,u=(o.top+(p&&m?m.offsetTop:0))/a,E=o.width/i,g=o.height/a;return{width:E,height:g,top:u,right:f+E,bottom:u+g,left:f,x:f,y:u}}function Ys(s){var e=St(s),t=s.offsetWidth,o=s.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-o)<=1&&(o=e.height),{x:s.offsetLeft,y:s.offsetTop,width:t,height:o}}function So(s,e){var t=e.getRootNode&&e.getRootNode();if(s.contains(e))return!0;if(t&&Gs(t)){var o=e;do{if(o&&s.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function Ke(s){return Ae(s).getComputedStyle(s)}function mm(s){return["table","td","th"].indexOf(qe(s))>=0}function tt(s){return((ct(s)?s.ownerDocument:s.document)||window.document).documentElement}function cs(s){return qe(s)==="html"?s:s.assignedSlot||s.parentNode||(Gs(s)?s.host:null)||tt(s)}function Cn(s){return!Me(s)||Ke(s).position==="fixed"?null:s.offsetParent}function pm(s){var e=/firefox/i.test(Hs()),t=/Trident/i.test(Hs());if(t&&Me(s)){var o=Ke(s);if(o.position==="fixed")return null}var i=cs(s);for(Gs(i)&&(i=i.host);Me(i)&&["html","body"].indexOf(qe(i))<0;){var a=Ke(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function Ht(s){for(var e=Ae(s),t=Cn(s);t&&mm(t)&&Ke(t).position==="static";)t=Cn(t);return t&&(qe(t)==="html"||qe(t)==="body"&&Ke(t).position==="static")?e:t||pm(s)||e}function Js(s){return["top","bottom"].indexOf(s)>=0?"x":"y"}function jt(s,e,t){return at(s,ns(e,t))}function fm(s,e,t){var o=jt(s,e,t);return o>t?t:o}function Co(){return{top:0,right:0,bottom:0,left:0}}function ko(s){return Object.assign({},Co(),s)}function To(s,e){return e.reduce(function(t,o){return t[o]=s,t},{})}var vm=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,ko(typeof e!="number"?e:To(e,Ot))};function hm(s){var e,t=s.state,o=s.name,i=s.options,a=t.elements.arrow,r=t.modifiersData.popperOffsets,m=Fe(t.placement),p=Js(m),f=[Ee,xe].indexOf(m)>=0,u=f?"height":"width";if(!(!a||!r)){var E=vm(i.padding,t),g=Ys(a),$=p==="y"?we:Ee,b=p==="y"?Te:xe,h=t.rects.reference[u]+t.rects.reference[p]-r[p]-t.rects.popper[u],l=r[p]-t.rects.reference[p],_=Ht(a),y=_?p==="y"?_.clientHeight||0:_.clientWidth||0:0,C=h/2-l/2,T=E[$],P=y-g[u]-E[b],W=y/2-g[u]/2+C,A=jt(T,W,P),V=p;t.modifiersData[o]=(e={},e[V]=A,e.centerOffset=A-W,e)}}function _m(s){var e=s.state,t=s.options,o=t.element,i=o===void 0?"[data-popper-arrow]":o;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||So(e.elements.popper,i)&&(e.elements.arrow=i))}const xo={name:"arrow",enabled:!0,phase:"main",fn:hm,effect:_m,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ct(s){return s.split("-")[1]}var gm={top:"auto",right:"auto",bottom:"auto",left:"auto"};function bm(s,e){var t=s.x,o=s.y,i=e.devicePixelRatio||1;return{x:Et(t*i)/i||0,y:Et(o*i)/i||0}}function kn(s){var e,t=s.popper,o=s.popperRect,i=s.placement,a=s.variation,r=s.offsets,m=s.position,p=s.gpuAcceleration,f=s.adaptive,u=s.roundOffsets,E=s.isFixed,g=r.x,$=g===void 0?0:g,b=r.y,h=b===void 0?0:b,l=typeof u=="function"?u({x:$,y:h}):{x:$,y:h};$=l.x,h=l.y;var _=r.hasOwnProperty("x"),y=r.hasOwnProperty("y"),C=Ee,T=we,P=window;if(f){var W=Ht(t),A="clientHeight",V="clientWidth";if(W===Ae(t)&&(W=tt(t),Ke(W).position!=="static"&&m==="absolute"&&(A="scrollHeight",V="scrollWidth")),W=W,i===we||(i===Ee||i===xe)&&a===wt){T=Te;var S=E&&W===P&&P.visualViewport?P.visualViewport.height:W[A];h-=S-o.height,h*=p?1:-1}if(i===Ee||(i===we||i===Te)&&a===wt){C=xe;var k=E&&W===P&&P.visualViewport?P.visualViewport.width:W[V];$-=k-o.width,$*=p?1:-1}}var q=Object.assign({position:m},f&&gm),U=u===!0?bm({x:$,y:h},Ae(t)):{x:$,y:h};if($=U.x,h=U.y,p){var I;return Object.assign({},q,(I={},I[T]=y?"0":"",I[C]=_?"0":"",I.transform=(P.devicePixelRatio||1)<=1?"translate("+$+"px, "+h+"px)":"translate3d("+$+"px, "+h+"px, 0)",I))}return Object.assign({},q,(e={},e[T]=y?h+"px":"",e[C]=_?$+"px":"",e.transform="",e))}function ym(s){var e=s.state,t=s.options,o=t.gpuAcceleration,i=o===void 0?!0:o,a=t.adaptive,r=a===void 0?!0:a,m=t.roundOffsets,p=m===void 0?!0:m,f={placement:Fe(e.placement),variation:Ct(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,kn(Object.assign({},f,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:r,roundOffsets:p})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,kn(Object.assign({},f,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:p})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Ao={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ym,data:{}};var zt={passive:!0};function $m(s){var e=s.state,t=s.instance,o=s.options,i=o.scroll,a=i===void 0?!0:i,r=o.resize,m=r===void 0?!0:r,p=Ae(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&f.forEach(function(u){u.addEventListener("scroll",t.update,zt)}),m&&p.addEventListener("resize",t.update,zt),function(){a&&f.forEach(function(u){u.removeEventListener("scroll",t.update,zt)}),m&&p.removeEventListener("resize",t.update,zt)}}const Oo={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:$m,data:{}};var wm={left:"right",right:"left",bottom:"top",top:"bottom"};function Zt(s){return s.replace(/left|right|bottom|top/g,function(e){return wm[e]})}var Em={start:"end",end:"start"};function Tn(s){return s.replace(/start|end/g,function(e){return Em[e]})}function Qs(s){var e=Ae(s),t=e.pageXOffset,o=e.pageYOffset;return{scrollLeft:t,scrollTop:o}}function Xs(s){return St(tt(s)).left+Qs(s).scrollLeft}function Sm(s,e){var t=Ae(s),o=tt(s),i=t.visualViewport,a=o.clientWidth,r=o.clientHeight,m=0,p=0;if(i){a=i.width,r=i.height;var f=Eo();(f||!f&&e==="fixed")&&(m=i.offsetLeft,p=i.offsetTop)}return{width:a,height:r,x:m+Xs(s),y:p}}function Cm(s){var e,t=tt(s),o=Qs(s),i=(e=s.ownerDocument)==null?void 0:e.body,a=at(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),r=at(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),m=-o.scrollLeft+Xs(s),p=-o.scrollTop;return Ke(i||t).direction==="rtl"&&(m+=at(t.clientWidth,i?i.clientWidth:0)-a),{width:a,height:r,x:m,y:p}}function Zs(s){var e=Ke(s),t=e.overflow,o=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+o)}function Mo(s){return["html","body","#document"].indexOf(qe(s))>=0?s.ownerDocument.body:Me(s)&&Zs(s)?s:Mo(cs(s))}function Pt(s,e){var t;e===void 0&&(e=[]);var o=Mo(s),i=o===((t=s.ownerDocument)==null?void 0:t.body),a=Ae(o),r=i?[a].concat(a.visualViewport||[],Zs(o)?o:[]):o,m=e.concat(r);return i?m:m.concat(Pt(cs(r)))}function Vs(s){return Object.assign({},s,{left:s.x,top:s.y,right:s.x+s.width,bottom:s.y+s.height})}function km(s,e){var t=St(s,!1,e==="fixed");return t.top=t.top+s.clientTop,t.left=t.left+s.clientLeft,t.bottom=t.top+s.clientHeight,t.right=t.left+s.clientWidth,t.width=s.clientWidth,t.height=s.clientHeight,t.x=t.left,t.y=t.top,t}function xn(s,e,t){return e===zs?Vs(Sm(s,t)):ct(e)?km(e,t):Vs(Cm(tt(s)))}function Tm(s){var e=Pt(cs(s)),t=["absolute","fixed"].indexOf(Ke(s).position)>=0,o=t&&Me(s)?Ht(s):s;return ct(o)?e.filter(function(i){return ct(i)&&So(i,o)&&qe(i)!=="body"}):[]}function xm(s,e,t,o){var i=e==="clippingParents"?Tm(s):[].concat(e),a=[].concat(i,[t]),r=a[0],m=a.reduce(function(p,f){var u=xn(s,f,o);return p.top=at(u.top,p.top),p.right=ns(u.right,p.right),p.bottom=ns(u.bottom,p.bottom),p.left=at(u.left,p.left),p},xn(s,r,o));return m.width=m.right-m.left,m.height=m.bottom-m.top,m.x=m.left,m.y=m.top,m}function Do(s){var e=s.reference,t=s.element,o=s.placement,i=o?Fe(o):null,a=o?Ct(o):null,r=e.x+e.width/2-t.width/2,m=e.y+e.height/2-t.height/2,p;switch(i){case we:p={x:r,y:e.y-t.height};break;case Te:p={x:r,y:e.y+e.height};break;case xe:p={x:e.x+e.width,y:m};break;case Ee:p={x:e.x-t.width,y:m};break;default:p={x:e.x,y:e.y}}var f=i?Js(i):null;if(f!=null){var u=f==="y"?"height":"width";switch(a){case lt:p[f]=p[f]-(e[u]/2-t[u]/2);break;case wt:p[f]=p[f]+(e[u]/2-t[u]/2);break}}return p}function kt(s,e){e===void 0&&(e={});var t=e,o=t.placement,i=o===void 0?s.placement:o,a=t.strategy,r=a===void 0?s.strategy:a,m=t.boundary,p=m===void 0?co:m,f=t.rootBoundary,u=f===void 0?zs:f,E=t.elementContext,g=E===void 0?vt:E,$=t.altBoundary,b=$===void 0?!1:$,h=t.padding,l=h===void 0?0:h,_=ko(typeof l!="number"?l:To(l,Ot)),y=g===vt?uo:vt,C=s.rects.popper,T=s.elements[b?y:g],P=xm(ct(T)?T:T.contextElement||tt(s.elements.popper),p,u,r),W=St(s.elements.reference),A=Do({reference:W,element:C,placement:i}),V=Vs(Object.assign({},C,A)),S=g===vt?V:W,k={top:P.top-S.top+_.top,bottom:S.bottom-P.bottom+_.bottom,left:P.left-S.left+_.left,right:S.right-P.right+_.right},q=s.modifiersData.offset;if(g===vt&&q){var U=q[i];Object.keys(k).forEach(function(I){var R=[xe,Te].indexOf(I)>=0?1:-1,F=[we,Te].indexOf(I)>=0?"y":"x";k[I]+=U[F]*R})}return k}function Am(s,e){e===void 0&&(e={});var t=e,o=t.placement,i=t.boundary,a=t.rootBoundary,r=t.padding,m=t.flipVariations,p=t.allowedAutoPlacements,f=p===void 0?Ks:p,u=Ct(o),E=u?m?Ws:Ws.filter(function(b){return Ct(b)===u}):Ot,g=E.filter(function(b){return f.indexOf(b)>=0});g.length===0&&(g=E);var $=g.reduce(function(b,h){return b[h]=kt(s,{placement:h,boundary:i,rootBoundary:a,padding:r})[Fe(h)],b},{});return Object.keys($).sort(function(b,h){return $[b]-$[h]})}function Om(s){if(Fe(s)===ls)return[];var e=Zt(s);return[Tn(s),e,Tn(e)]}function Mm(s){var e=s.state,t=s.options,o=s.name;if(!e.modifiersData[o]._skip){for(var i=t.mainAxis,a=i===void 0?!0:i,r=t.altAxis,m=r===void 0?!0:r,p=t.fallbackPlacements,f=t.padding,u=t.boundary,E=t.rootBoundary,g=t.altBoundary,$=t.flipVariations,b=$===void 0?!0:$,h=t.allowedAutoPlacements,l=e.options.placement,_=Fe(l),y=_===l,C=p||(y||!b?[Zt(l)]:Om(l)),T=[l].concat(C).reduce(function(Q,ae){return Q.concat(Fe(ae)===ls?Am(e,{placement:ae,boundary:u,rootBoundary:E,padding:f,flipVariations:b,allowedAutoPlacements:h}):ae)},[]),P=e.rects.reference,W=e.rects.popper,A=new Map,V=!0,S=T[0],k=0;k<T.length;k++){var q=T[k],U=Fe(q),I=Ct(q)===lt,R=[we,Te].indexOf(U)>=0,F=R?"width":"height",x=kt(e,{placement:q,boundary:u,rootBoundary:E,altBoundary:g,padding:f}),O=R?I?xe:Ee:I?Te:we;P[F]>W[F]&&(O=Zt(O));var z=Zt(O),L=[];if(a&&L.push(x[U]<=0),m&&L.push(x[O]<=0,x[z]<=0),L.every(function(Q){return Q})){S=q,V=!1;break}A.set(q,L)}if(V)for(var D=b?3:1,G=function(ae){var me=T.find(function(H){var N=A.get(H);if(N)return N.slice(0,ae).every(function(Y){return Y})});if(me)return S=me,"break"},ie=D;ie>0;ie--){var J=G(ie);if(J==="break")break}e.placement!==S&&(e.modifiersData[o]._skip=!0,e.placement=S,e.reset=!0)}}const No={name:"flip",enabled:!0,phase:"main",fn:Mm,requiresIfExists:["offset"],data:{_skip:!1}};function An(s,e,t){return t===void 0&&(t={x:0,y:0}),{top:s.top-e.height-t.y,right:s.right-e.width+t.x,bottom:s.bottom-e.height+t.y,left:s.left-e.width-t.x}}function On(s){return[we,xe,Te,Ee].some(function(e){return s[e]>=0})}function Dm(s){var e=s.state,t=s.name,o=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,r=kt(e,{elementContext:"reference"}),m=kt(e,{altBoundary:!0}),p=An(r,o),f=An(m,i,a),u=On(p),E=On(f);e.modifiersData[t]={referenceClippingOffsets:p,popperEscapeOffsets:f,isReferenceHidden:u,hasPopperEscaped:E},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":E})}const Lo={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Dm};function Nm(s,e,t){var o=Fe(s),i=[Ee,we].indexOf(o)>=0?-1:1,a=typeof t=="function"?t(Object.assign({},e,{placement:s})):t,r=a[0],m=a[1];return r=r||0,m=(m||0)*i,[Ee,xe].indexOf(o)>=0?{x:m,y:r}:{x:r,y:m}}function Lm(s){var e=s.state,t=s.options,o=s.name,i=t.offset,a=i===void 0?[0,0]:i,r=Ks.reduce(function(u,E){return u[E]=Nm(E,e.rects,a),u},{}),m=r[e.placement],p=m.x,f=m.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=p,e.modifiersData.popperOffsets.y+=f),e.modifiersData[o]=r}const Io={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Lm};function Im(s){var e=s.state,t=s.name;e.modifiersData[t]=Do({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const jo={name:"popperOffsets",enabled:!0,phase:"read",fn:Im,data:{}};function jm(s){return s==="x"?"y":"x"}function Pm(s){var e=s.state,t=s.options,o=s.name,i=t.mainAxis,a=i===void 0?!0:i,r=t.altAxis,m=r===void 0?!1:r,p=t.boundary,f=t.rootBoundary,u=t.altBoundary,E=t.padding,g=t.tether,$=g===void 0?!0:g,b=t.tetherOffset,h=b===void 0?0:b,l=kt(e,{boundary:p,rootBoundary:f,padding:E,altBoundary:u}),_=Fe(e.placement),y=Ct(e.placement),C=!y,T=Js(_),P=jm(T),W=e.modifiersData.popperOffsets,A=e.rects.reference,V=e.rects.popper,S=typeof h=="function"?h(Object.assign({},e.rects,{placement:e.placement})):h,k=typeof S=="number"?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),q=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,U={x:0,y:0};if(W){if(a){var I,R=T==="y"?we:Ee,F=T==="y"?Te:xe,x=T==="y"?"height":"width",O=W[T],z=O+l[R],L=O-l[F],D=$?-V[x]/2:0,G=y===lt?A[x]:V[x],ie=y===lt?-V[x]:-A[x],J=e.elements.arrow,Q=$&&J?Ys(J):{width:0,height:0},ae=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Co(),me=ae[R],H=ae[F],N=jt(0,A[x],Q[x]),Y=C?A[x]/2-D-N-me-k.mainAxis:G-N-me-k.mainAxis,ee=C?-A[x]/2+D+N+H+k.mainAxis:ie+N+H+k.mainAxis,ne=e.elements.arrow&&Ht(e.elements.arrow),ve=ne?T==="y"?ne.clientTop||0:ne.clientLeft||0:0,je=(I=q?.[T])!=null?I:0,Ye=O+Y-je-ve,B=O+ee-je,oe=jt($?ns(z,Ye):z,O,$?at(L,B):L);W[T]=oe,U[T]=oe-O}if(m){var le,Pe=T==="x"?we:Ee,Re=T==="x"?Te:xe,ye=W[P],Ut=P==="y"?"height":"width",ln=ye+l[Pe],cn=ye-l[Re],hs=[we,Ee].indexOf(_)!==-1,un=(le=q?.[P])!=null?le:0,dn=hs?ln:ye-A[Ut]-V[Ut]-un+k.altAxis,mn=hs?ye+A[Ut]+V[Ut]-un-k.altAxis:cn,pn=$&&hs?fm(dn,ye,mn):jt($?dn:ln,ye,$?mn:cn);W[P]=pn,U[P]=pn-ye}e.modifiersData[o]=U}}const Po={name:"preventOverflow",enabled:!0,phase:"main",fn:Pm,requiresIfExists:["offset"]};function Rm(s){return{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}}function Wm(s){return s===Ae(s)||!Me(s)?Qs(s):Rm(s)}function Hm(s){var e=s.getBoundingClientRect(),t=Et(e.width)/s.offsetWidth||1,o=Et(e.height)/s.offsetHeight||1;return t!==1||o!==1}function Vm(s,e,t){t===void 0&&(t=!1);var o=Me(e),i=Me(e)&&Hm(e),a=tt(e),r=St(s,i,t),m={scrollLeft:0,scrollTop:0},p={x:0,y:0};return(o||!o&&!t)&&((qe(e)!=="body"||Zs(a))&&(m=Wm(e)),Me(e)?(p=St(e,!0),p.x+=e.clientLeft,p.y+=e.clientTop):a&&(p.x=Xs(a))),{x:r.left+m.scrollLeft-p.x,y:r.top+m.scrollTop-p.y,width:r.width,height:r.height}}function Fm(s){var e=new Map,t=new Set,o=[];s.forEach(function(a){e.set(a.name,a)});function i(a){t.add(a.name);var r=[].concat(a.requires||[],a.requiresIfExists||[]);r.forEach(function(m){if(!t.has(m)){var p=e.get(m);p&&i(p)}}),o.push(a)}return s.forEach(function(a){t.has(a.name)||i(a)}),o}function Bm(s){var e=Fm(s);return $o.reduce(function(t,o){return t.concat(e.filter(function(i){return i.phase===o}))},[])}function qm(s){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(s())})})),e}}function Um(s){var e=s.reduce(function(t,o){var i=t[o.name];return t[o.name]=i?Object.assign({},i,o,{options:Object.assign({},i.options,o.options),data:Object.assign({},i.data,o.data)}):o,t},{});return Object.keys(e).map(function(t){return e[t]})}var Mn={placement:"bottom",modifiers:[],strategy:"absolute"};function Dn(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return!e.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function Ro(s){s===void 0&&(s={});var e=s,t=e.defaultModifiers,o=t===void 0?[]:t,i=e.defaultOptions,a=i===void 0?Mn:i;return function(m,p,f){f===void 0&&(f=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Mn,a),modifiersData:{},elements:{reference:m,popper:p},attributes:{},styles:{}},E=[],g=!1,$={state:u,setOptions:function(_){var y=typeof _=="function"?_(u.options):_;h(),u.options=Object.assign({},a,u.options,y),u.scrollParents={reference:ct(m)?Pt(m):m.contextElement?Pt(m.contextElement):[],popper:Pt(p)};var C=Bm(Um([].concat(o,u.options.modifiers)));return u.orderedModifiers=C.filter(function(T){return T.enabled}),b(),$.update()},forceUpdate:function(){if(!g){var _=u.elements,y=_.reference,C=_.popper;if(Dn(y,C)){u.rects={reference:Vm(y,Ht(C),u.options.strategy==="fixed"),popper:Ys(C)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(k){return u.modifiersData[k.name]=Object.assign({},k.data)});for(var T=0;T<u.orderedModifiers.length;T++){if(u.reset===!0){u.reset=!1,T=-1;continue}var P=u.orderedModifiers[T],W=P.fn,A=P.options,V=A===void 0?{}:A,S=P.name;typeof W=="function"&&(u=W({state:u,options:V,name:S,instance:$})||u)}}}},update:qm(function(){return new Promise(function(l){$.forceUpdate(),l(u)})}),destroy:function(){h(),g=!0}};if(!Dn(m,p))return $;$.setOptions(f).then(function(l){!g&&f.onFirstUpdate&&f.onFirstUpdate(l)});function b(){u.orderedModifiers.forEach(function(l){var _=l.name,y=l.options,C=y===void 0?{}:y,T=l.effect;if(typeof T=="function"){var P=T({state:u,name:_,instance:$,options:C}),W=function(){};E.push(P||W)}})}function h(){E.forEach(function(l){return l()}),E=[]}return $}}var zm=[Oo,jo,Ao,wo,Io,No,Po,xo,Lo],en=Ro({defaultModifiers:zm});const Wo=Object.freeze(Object.defineProperty({__proto__:null,afterMain:_o,afterRead:fo,afterWrite:yo,applyStyles:wo,arrow:xo,auto:ls,basePlacements:Ot,beforeMain:vo,beforeRead:mo,beforeWrite:go,bottom:Te,clippingParents:co,computeStyles:Ao,createPopper:en,detectOverflow:kt,end:wt,eventListeners:Oo,flip:No,hide:Lo,left:Ee,main:ho,modifierPhases:$o,offset:Io,placements:Ks,popper:vt,popperGenerator:Ro,popperOffsets:jo,preventOverflow:Po,read:po,reference:uo,right:xe,start:lt,top:we,variationPlacements:Ws,viewport:zs,write:bo},Symbol.toStringTag,{value:"Module"}));const Je=new Map,Es={set(s,e,t){Je.has(s)||Je.set(s,new Map);const o=Je.get(s);if(!o.has(e)&&o.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(o.keys())[0]}.`);return}o.set(e,t)},get(s,e){return Je.has(s)&&Je.get(s).get(e)||null},remove(s,e){if(!Je.has(s))return;const t=Je.get(s);t.delete(e),t.size===0&&Je.delete(s)}},Km=1e6,Gm=1e3,Fs="transitionend",Ho=s=>(s&&window.CSS&&window.CSS.escape&&(s=s.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),s),Ym=s=>s==null?`${s}`:Object.prototype.toString.call(s).match(/\s([a-z]+)/i)[1].toLowerCase(),Jm=s=>{do s+=Math.floor(Math.random()*Km);while(document.getElementById(s));return s},Qm=s=>{if(!s)return 0;let{transitionDuration:e,transitionDelay:t}=window.getComputedStyle(s);const o=Number.parseFloat(e),i=Number.parseFloat(t);return!o&&!i?0:(e=e.split(",")[0],t=t.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(t))*Gm)},Vo=s=>{s.dispatchEvent(new Event(Fs))},Ue=s=>!s||typeof s!="object"?!1:(typeof s.jquery<"u"&&(s=s[0]),typeof s.nodeType<"u"),Qe=s=>Ue(s)?s.jquery?s[0]:s:typeof s=="string"&&s.length>0?document.querySelector(Ho(s)):null,Mt=s=>{if(!Ue(s)||s.getClientRects().length===0)return!1;const e=getComputedStyle(s).getPropertyValue("visibility")==="visible",t=s.closest("details:not([open])");if(!t)return e;if(t!==s){const o=s.closest("summary");if(o&&o.parentNode!==t||o===null)return!1}return e},Xe=s=>!s||s.nodeType!==Node.ELEMENT_NODE||s.classList.contains("disabled")?!0:typeof s.disabled<"u"?s.disabled:s.hasAttribute("disabled")&&s.getAttribute("disabled")!=="false",Fo=s=>{if(!document.documentElement.attachShadow)return null;if(typeof s.getRootNode=="function"){const e=s.getRootNode();return e instanceof ShadowRoot?e:null}return s instanceof ShadowRoot?s:s.parentNode?Fo(s.parentNode):null},os=()=>{},Vt=s=>{s.offsetHeight},Bo=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ss=[],Xm=s=>{document.readyState==="loading"?(Ss.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of Ss)e()}),Ss.push(s)):s()},De=()=>document.documentElement.dir==="rtl",Ie=s=>{Xm(()=>{const e=Bo();if(e){const t=s.NAME,o=e.fn[t];e.fn[t]=s.jQueryInterface,e.fn[t].Constructor=s,e.fn[t].noConflict=()=>(e.fn[t]=o,s.jQueryInterface)}})},Se=(s,e=[],t=s)=>typeof s=="function"?s.call(...e):t,qo=(s,e,t=!0)=>{if(!t){Se(s);return}const i=Qm(e)+5;let a=!1;const r=({target:m})=>{m===e&&(a=!0,e.removeEventListener(Fs,r),Se(s))};e.addEventListener(Fs,r),setTimeout(()=>{a||Vo(e)},i)},tn=(s,e,t,o)=>{const i=s.length;let a=s.indexOf(e);return a===-1?!t&&o?s[i-1]:s[0]:(a+=t?1:-1,o&&(a=(a+i)%i),s[Math.max(0,Math.min(a,i-1))])},Zm=/[^.]*(?=\..*)\.|.*/,ep=/\..*/,tp=/::\d+$/,Cs={};let Nn=1;const Uo={mouseenter:"mouseover",mouseleave:"mouseout"},sp=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function zo(s,e){return e&&`${e}::${Nn++}`||s.uidEvent||Nn++}function Ko(s){const e=zo(s);return s.uidEvent=e,Cs[e]=Cs[e]||{},Cs[e]}function np(s,e){return function t(o){return sn(o,{delegateTarget:s}),t.oneOff&&K.off(s,o.type,e),e.apply(s,[o])}}function op(s,e,t){return function o(i){const a=s.querySelectorAll(e);for(let{target:r}=i;r&&r!==this;r=r.parentNode)for(const m of a)if(m===r)return sn(i,{delegateTarget:r}),o.oneOff&&K.off(s,i.type,e,t),t.apply(r,[i])}}function Go(s,e,t=null){return Object.values(s).find(o=>o.callable===e&&o.delegationSelector===t)}function Yo(s,e,t){const o=typeof e=="string",i=o?t:e||t;let a=Jo(s);return sp.has(a)||(a=s),[o,i,a]}function Ln(s,e,t,o,i){if(typeof e!="string"||!s)return;let[a,r,m]=Yo(e,t,o);e in Uo&&(r=(b=>function(h){if(!h.relatedTarget||h.relatedTarget!==h.delegateTarget&&!h.delegateTarget.contains(h.relatedTarget))return b.call(this,h)})(r));const p=Ko(s),f=p[m]||(p[m]={}),u=Go(f,r,a?t:null);if(u){u.oneOff=u.oneOff&&i;return}const E=zo(r,e.replace(Zm,"")),g=a?op(s,t,r):np(s,r);g.delegationSelector=a?t:null,g.callable=r,g.oneOff=i,g.uidEvent=E,f[E]=g,s.addEventListener(m,g,a)}function Bs(s,e,t,o,i){const a=Go(e[t],o,i);a&&(s.removeEventListener(t,a,!!i),delete e[t][a.uidEvent])}function ip(s,e,t,o){const i=e[t]||{};for(const[a,r]of Object.entries(i))a.includes(o)&&Bs(s,e,t,r.callable,r.delegationSelector)}function Jo(s){return s=s.replace(ep,""),Uo[s]||s}const K={on(s,e,t,o){Ln(s,e,t,o,!1)},one(s,e,t,o){Ln(s,e,t,o,!0)},off(s,e,t,o){if(typeof e!="string"||!s)return;const[i,a,r]=Yo(e,t,o),m=r!==e,p=Ko(s),f=p[r]||{},u=e.startsWith(".");if(typeof a<"u"){if(!Object.keys(f).length)return;Bs(s,p,r,a,i?t:null);return}if(u)for(const E of Object.keys(p))ip(s,p,E,e.slice(1));for(const[E,g]of Object.entries(f)){const $=E.replace(tp,"");(!m||e.includes($))&&Bs(s,p,r,g.callable,g.delegationSelector)}},trigger(s,e,t){if(typeof e!="string"||!s)return null;const o=Bo(),i=Jo(e),a=e!==i;let r=null,m=!0,p=!0,f=!1;a&&o&&(r=o.Event(e,t),o(s).trigger(r),m=!r.isPropagationStopped(),p=!r.isImmediatePropagationStopped(),f=r.isDefaultPrevented());const u=sn(new Event(e,{bubbles:m,cancelable:!0}),t);return f&&u.preventDefault(),p&&s.dispatchEvent(u),u.defaultPrevented&&r&&r.preventDefault(),u}};function sn(s,e={}){for(const[t,o]of Object.entries(e))try{s[t]=o}catch{Object.defineProperty(s,t,{configurable:!0,get(){return o}})}return s}function In(s){if(s==="true")return!0;if(s==="false")return!1;if(s===Number(s).toString())return Number(s);if(s===""||s==="null")return null;if(typeof s!="string")return s;try{return JSON.parse(decodeURIComponent(s))}catch{return s}}function ks(s){return s.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const ze={setDataAttribute(s,e,t){s.setAttribute(`data-bs-${ks(e)}`,t)},removeDataAttribute(s,e){s.removeAttribute(`data-bs-${ks(e)}`)},getDataAttributes(s){if(!s)return{};const e={},t=Object.keys(s.dataset).filter(o=>o.startsWith("bs")&&!o.startsWith("bsConfig"));for(const o of t){let i=o.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1),e[i]=In(s.dataset[o])}return e},getDataAttribute(s,e){return In(s.getAttribute(`data-bs-${ks(e)}`))}};class Ft{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const o=Ue(t)?ze.getDataAttribute(t,"config"):{};return{...this.constructor.Default,...typeof o=="object"?o:{},...Ue(t)?ze.getDataAttributes(t):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[o,i]of Object.entries(t)){const a=e[o],r=Ue(a)?"element":Ym(a);if(!new RegExp(i).test(r))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${o}" provided type "${r}" but expected type "${i}".`)}}}const ap="5.3.8";class Ve extends Ft{constructor(e,t){super(),e=Qe(e),e&&(this._element=e,this._config=this._getConfig(t),Es.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Es.remove(this._element,this.constructor.DATA_KEY),K.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,o=!0){qo(e,t,o)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Es.get(Qe(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,typeof t=="object"?t:null)}static get VERSION(){return ap}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Ts=s=>{let e=s.getAttribute("data-bs-target");if(!e||e==="#"){let t=s.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),e=t&&t!=="#"?t.trim():null}return e?e.split(",").map(t=>Ho(t)).join(","):null},te={find(s,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,s))},findOne(s,e=document.documentElement){return Element.prototype.querySelector.call(e,s)},children(s,e){return[].concat(...s.children).filter(t=>t.matches(e))},parents(s,e){const t=[];let o=s.parentNode.closest(e);for(;o;)t.push(o),o=o.parentNode.closest(e);return t},prev(s,e){let t=s.previousElementSibling;for(;t;){if(t.matches(e))return[t];t=t.previousElementSibling}return[]},next(s,e){let t=s.nextElementSibling;for(;t;){if(t.matches(e))return[t];t=t.nextElementSibling}return[]},focusableChildren(s){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(e,s).filter(t=>!Xe(t)&&Mt(t))},getSelectorFromElement(s){const e=Ts(s);return e&&te.findOne(e)?e:null},getElementFromSelector(s){const e=Ts(s);return e?te.findOne(e):null},getMultipleElementsFromSelector(s){const e=Ts(s);return e?te.find(e):[]}},us=(s,e="hide")=>{const t=`click.dismiss${s.EVENT_KEY}`,o=s.NAME;K.on(document,t,`[data-bs-dismiss="${o}"]`,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),Xe(this))return;const a=te.getElementFromSelector(this)||this.closest(`.${o}`);s.getOrCreateInstance(a)[e]()})},rp="alert",lp="bs.alert",Qo=`.${lp}`,cp=`close${Qo}`,up=`closed${Qo}`,dp="fade",mp="show";class ds extends Ve{static get NAME(){return rp}close(){if(K.trigger(this._element,cp).defaultPrevented)return;this._element.classList.remove(mp);const t=this._element.classList.contains(dp);this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),K.trigger(this._element,up),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=ds.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}us(ds,"close");Ie(ds);const pp="button",fp="bs.button",vp=`.${fp}`,hp=".data-api",_p="active",jn='[data-bs-toggle="button"]',gp=`click${vp}${hp}`;class ms extends Ve{static get NAME(){return pp}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(_p))}static jQueryInterface(e){return this.each(function(){const t=ms.getOrCreateInstance(this);e==="toggle"&&t[e]()})}}K.on(document,gp,jn,s=>{s.preventDefault();const e=s.target.closest(jn);ms.getOrCreateInstance(e).toggle()});Ie(ms);const bp="swipe",Dt=".bs.swipe",yp=`touchstart${Dt}`,$p=`touchmove${Dt}`,wp=`touchend${Dt}`,Ep=`pointerdown${Dt}`,Sp=`pointerup${Dt}`,Cp="touch",kp="pen",Tp="pointer-event",xp=40,Ap={endCallback:null,leftCallback:null,rightCallback:null},Op={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class is extends Ft{constructor(e,t){super(),this._element=e,!(!e||!is.isSupported())&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Ap}static get DefaultType(){return Op}static get NAME(){return bp}dispose(){K.off(this._element,Dt)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Se(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=xp)return;const t=e/this._deltaX;this._deltaX=0,t&&Se(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(K.on(this._element,Ep,e=>this._start(e)),K.on(this._element,Sp,e=>this._end(e)),this._element.classList.add(Tp)):(K.on(this._element,yp,e=>this._start(e)),K.on(this._element,$p,e=>this._move(e)),K.on(this._element,wp,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===kp||e.pointerType===Cp)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Mp="carousel",Dp="bs.carousel",st=`.${Dp}`,Xo=".data-api",Np="ArrowLeft",Lp="ArrowRight",Ip=500,Lt="next",pt="prev",ht="left",es="right",jp=`slide${st}`,xs=`slid${st}`,Pp=`keydown${st}`,Rp=`mouseenter${st}`,Wp=`mouseleave${st}`,Hp=`dragstart${st}`,Vp=`load${st}${Xo}`,Fp=`click${st}${Xo}`,Zo="carousel",Kt="active",Bp="slide",qp="carousel-item-end",Up="carousel-item-start",zp="carousel-item-next",Kp="carousel-item-prev",ei=".active",ti=".carousel-item",Gp=ei+ti,Yp=".carousel-item img",Jp=".carousel-indicators",Qp="[data-bs-slide], [data-bs-slide-to]",Xp='[data-bs-ride="carousel"]',Zp={[Np]:es,[Lp]:ht},ef={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},tf={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Bt extends Ve{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=te.findOne(Jp,this._element),this._addEventListeners(),this._config.ride===Zo&&this.cycle()}static get Default(){return ef}static get DefaultType(){return tf}static get NAME(){return Mp}next(){this._slide(Lt)}nextWhenVisible(){!document.hidden&&Mt(this._element)&&this.next()}prev(){this._slide(pt)}pause(){this._isSliding&&Vo(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){K.one(this._element,xs,()=>this.cycle());return}this.cycle()}}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding){K.one(this._element,xs,()=>this.to(e));return}const o=this._getItemIndex(this._getActive());if(o===e)return;const i=e>o?Lt:pt;this._slide(i,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&K.on(this._element,Pp,e=>this._keydown(e)),this._config.pause==="hover"&&(K.on(this._element,Rp,()=>this.pause()),K.on(this._element,Wp,()=>this._maybeEnableCycle())),this._config.touch&&is.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const o of te.find(Yp,this._element))K.on(o,Hp,i=>i.preventDefault());const t={leftCallback:()=>this._slide(this._directionToOrder(ht)),rightCallback:()=>this._slide(this._directionToOrder(es)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Ip+this._config.interval))}};this._swipeHelper=new is(this._element,t)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=Zp[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=te.findOne(ei,this._indicatorsElement);t.classList.remove(Kt),t.removeAttribute("aria-current");const o=te.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);o&&(o.classList.add(Kt),o.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const o=this._getActive(),i=e===Lt,a=t||tn(this._getItems(),o,i,this._config.wrap);if(a===o)return;const r=this._getItemIndex(a),m=$=>K.trigger(this._element,$,{relatedTarget:a,direction:this._orderToDirection(e),from:this._getItemIndex(o),to:r});if(m(jp).defaultPrevented||!o||!a)return;const f=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(r),this._activeElement=a;const u=i?Up:qp,E=i?zp:Kp;a.classList.add(E),Vt(a),o.classList.add(u),a.classList.add(u);const g=()=>{a.classList.remove(u,E),a.classList.add(Kt),o.classList.remove(Kt,E,u),this._isSliding=!1,m(xs)};this._queueCallback(g,o,this._isAnimated()),f&&this.cycle()}_isAnimated(){return this._element.classList.contains(Bp)}_getActive(){return te.findOne(Gp,this._element)}_getItems(){return te.find(ti,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return De()?e===ht?pt:Lt:e===ht?Lt:pt}_orderToDirection(e){return De()?e===pt?ht:es:e===pt?es:ht}static jQueryInterface(e){return this.each(function(){const t=Bt.getOrCreateInstance(this,e);if(typeof e=="number"){t.to(e);return}if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}K.on(document,Fp,Qp,function(s){const e=te.getElementFromSelector(this);if(!e||!e.classList.contains(Zo))return;s.preventDefault();const t=Bt.getOrCreateInstance(e),o=this.getAttribute("data-bs-slide-to");if(o){t.to(o),t._maybeEnableCycle();return}if(ze.getDataAttribute(this,"slide")==="next"){t.next(),t._maybeEnableCycle();return}t.prev(),t._maybeEnableCycle()});K.on(window,Vp,()=>{const s=te.find(Xp);for(const e of s)Bt.getOrCreateInstance(e)});Ie(Bt);const sf="collapse",nf="bs.collapse",qt=`.${nf}`,of=".data-api",af=`show${qt}`,rf=`shown${qt}`,lf=`hide${qt}`,cf=`hidden${qt}`,uf=`click${qt}${of}`,As="show",gt="collapse",Gt="collapsing",df="collapsed",mf=`:scope .${gt} .${gt}`,pf="collapse-horizontal",ff="width",vf="height",hf=".collapse.show, .collapse.collapsing",qs='[data-bs-toggle="collapse"]',_f={parent:null,toggle:!0},gf={parent:"(null|element)",toggle:"boolean"};class Tt extends Ve{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const o=te.find(qs);for(const i of o){const a=te.getSelectorFromElement(i),r=te.find(a).filter(m=>m===this._element);a!==null&&r.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return _f}static get DefaultType(){return gf}static get NAME(){return sf}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(hf).filter(m=>m!==this._element).map(m=>Tt.getOrCreateInstance(m,{toggle:!1}))),e.length&&e[0]._isTransitioning||K.trigger(this._element,af).defaultPrevented)return;for(const m of e)m.hide();const o=this._getDimension();this._element.classList.remove(gt),this._element.classList.add(Gt),this._element.style[o]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(Gt),this._element.classList.add(gt,As),this._element.style[o]="",K.trigger(this._element,rf)},r=`scroll${o[0].toUpperCase()+o.slice(1)}`;this._queueCallback(i,this._element,!0),this._element.style[o]=`${this._element[r]}px`}hide(){if(this._isTransitioning||!this._isShown()||K.trigger(this._element,lf).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,Vt(this._element),this._element.classList.add(Gt),this._element.classList.remove(gt,As);for(const i of this._triggerArray){const a=te.getElementFromSelector(i);a&&!this._isShown(a)&&this._addAriaAndCollapsedClass([i],!1)}this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(Gt),this._element.classList.add(gt),K.trigger(this._element,cf)};this._element.style[t]="",this._queueCallback(o,this._element,!0)}_isShown(e=this._element){return e.classList.contains(As)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Qe(e.parent),e}_getDimension(){return this._element.classList.contains(pf)?ff:vf}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(qs);for(const t of e){const o=te.getElementFromSelector(t);o&&this._addAriaAndCollapsedClass([t],this._isShown(o))}}_getFirstLevelChildren(e){const t=te.find(mf,this._config.parent);return te.find(e,this._config.parent).filter(o=>!t.includes(o))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const o of e)o.classList.toggle(df,!t),o.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return typeof e=="string"&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const o=Tt.getOrCreateInstance(this,t);if(typeof e=="string"){if(typeof o[e]>"u")throw new TypeError(`No method named "${e}"`);o[e]()}})}}K.on(document,uf,qs,function(s){(s.target.tagName==="A"||s.delegateTarget&&s.delegateTarget.tagName==="A")&&s.preventDefault();for(const e of te.getMultipleElementsFromSelector(this))Tt.getOrCreateInstance(e,{toggle:!1}).toggle()});Ie(Tt);const Pn="dropdown",bf="bs.dropdown",dt=`.${bf}`,nn=".data-api",yf="Escape",Rn="Tab",$f="ArrowUp",Wn="ArrowDown",wf=2,Ef=`hide${dt}`,Sf=`hidden${dt}`,Cf=`show${dt}`,kf=`shown${dt}`,si=`click${dt}${nn}`,ni=`keydown${dt}${nn}`,Tf=`keyup${dt}${nn}`,_t="show",xf="dropup",Af="dropend",Of="dropstart",Mf="dropup-center",Df="dropdown-center",ot='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Nf=`${ot}.${_t}`,ts=".dropdown-menu",Lf=".navbar",If=".navbar-nav",jf=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Pf=De()?"top-end":"top-start",Rf=De()?"top-start":"top-end",Wf=De()?"bottom-end":"bottom-start",Hf=De()?"bottom-start":"bottom-end",Vf=De()?"left-start":"right-start",Ff=De()?"right-start":"left-start",Bf="top",qf="bottom",Uf={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},zf={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Be extends Ve{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=te.next(this._element,ts)[0]||te.prev(this._element,ts)[0]||te.findOne(ts,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Uf}static get DefaultType(){return zf}static get NAME(){return Pn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Xe(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!K.trigger(this._element,Cf,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(If))for(const o of[].concat(...document.body.children))K.on(o,"mouseover",os);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(_t),this._element.classList.add(_t),K.trigger(this._element,kf,e)}}hide(){if(Xe(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!K.trigger(this._element,Ef,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))K.off(o,"mouseover",os);this._popper&&this._popper.destroy(),this._menu.classList.remove(_t),this._element.classList.remove(_t),this._element.setAttribute("aria-expanded","false"),ze.removeDataAttribute(this._menu,"popper"),K.trigger(this._element,Sf,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!Ue(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${Pn.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof Wo>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let e=this._element;this._config.reference==="parent"?e=this._parent:Ue(this._config.reference)?e=Qe(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=en(e,this._menu,t)}_isShown(){return this._menu.classList.contains(_t)}_getPlacement(){const e=this._parent;if(e.classList.contains(Af))return Vf;if(e.classList.contains(Of))return Ff;if(e.classList.contains(Mf))return Bf;if(e.classList.contains(Df))return qf;const t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(xf)?t?Rf:Pf:t?Hf:Wf}_detectNavbar(){return this._element.closest(Lf)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(ze.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Se(this._config.popperConfig,[void 0,e])}}_selectMenuItem({key:e,target:t}){const o=te.find(jf,this._menu).filter(i=>Mt(i));o.length&&tn(o,t,e===Wn,!o.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=Be.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(e.button===wf||e.type==="keyup"&&e.key!==Rn)return;const t=te.find(Nf);for(const o of t){const i=Be.getInstance(o);if(!i||i._config.autoClose===!1)continue;const a=e.composedPath(),r=a.includes(i._menu);if(a.includes(i._element)||i._config.autoClose==="inside"&&!r||i._config.autoClose==="outside"&&r||i._menu.contains(e.target)&&(e.type==="keyup"&&e.key===Rn||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const m={relatedTarget:i._element};e.type==="click"&&(m.clickEvent=e),i._completeHide(m)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),o=e.key===yf,i=[$f,Wn].includes(e.key);if(!i&&!o||t&&!o)return;e.preventDefault();const a=this.matches(ot)?this:te.prev(this,ot)[0]||te.next(this,ot)[0]||te.findOne(ot,e.delegateTarget.parentNode),r=Be.getOrCreateInstance(a);if(i){e.stopPropagation(),r.show(),r._selectMenuItem(e);return}r._isShown()&&(e.stopPropagation(),r.hide(),a.focus())}}K.on(document,ni,ot,Be.dataApiKeydownHandler);K.on(document,ni,ts,Be.dataApiKeydownHandler);K.on(document,si,Be.clearMenus);K.on(document,Tf,Be.clearMenus);K.on(document,si,ot,function(s){s.preventDefault(),Be.getOrCreateInstance(this).toggle()});Ie(Be);const oi="backdrop",Kf="fade",Hn="show",Vn=`mousedown.bs.${oi}`,Gf={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Yf={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class ii extends Ft{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Gf}static get DefaultType(){return Yf}static get NAME(){return oi}show(e){if(!this._config.isVisible){Se(e);return}this._append();const t=this._getElement();this._config.isAnimated&&Vt(t),t.classList.add(Hn),this._emulateAnimation(()=>{Se(e)})}hide(e){if(!this._config.isVisible){Se(e);return}this._getElement().classList.remove(Hn),this._emulateAnimation(()=>{this.dispose(),Se(e)})}dispose(){this._isAppended&&(K.off(this._element,Vn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(Kf),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Qe(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),K.on(e,Vn,()=>{Se(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){qo(e,this._getElement(),this._config.isAnimated)}}const Jf="focustrap",Qf="bs.focustrap",as=`.${Qf}`,Xf=`focusin${as}`,Zf=`keydown.tab${as}`,ev="Tab",tv="forward",Fn="backward",sv={autofocus:!0,trapElement:null},nv={autofocus:"boolean",trapElement:"element"};class ai extends Ft{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return sv}static get DefaultType(){return nv}static get NAME(){return Jf}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),K.off(document,as),K.on(document,Xf,e=>this._handleFocusin(e)),K.on(document,Zf,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,K.off(document,as))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const o=te.focusableChildren(t);o.length===0?t.focus():this._lastTabNavDirection===Fn?o[o.length-1].focus():o[0].focus()}_handleKeydown(e){e.key===ev&&(this._lastTabNavDirection=e.shiftKey?Fn:tv)}}const Bn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",qn=".sticky-top",Yt="padding-right",Un="margin-right";class Us{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Yt,t=>t+e),this._setElementAttributes(Bn,Yt,t=>t+e),this._setElementAttributes(qn,Un,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Yt),this._resetElementAttributes(Bn,Yt),this._resetElementAttributes(qn,Un)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,o){const i=this.getWidth(),a=r=>{if(r!==this._element&&window.innerWidth>r.clientWidth+i)return;this._saveInitialAttribute(r,t);const m=window.getComputedStyle(r).getPropertyValue(t);r.style.setProperty(t,`${o(Number.parseFloat(m))}px`)};this._applyManipulationCallback(e,a)}_saveInitialAttribute(e,t){const o=e.style.getPropertyValue(t);o&&ze.setDataAttribute(e,t,o)}_resetElementAttributes(e,t){const o=i=>{const a=ze.getDataAttribute(i,t);if(a===null){i.style.removeProperty(t);return}ze.removeDataAttribute(i,t),i.style.setProperty(t,a)};this._applyManipulationCallback(e,o)}_applyManipulationCallback(e,t){if(Ue(e)){t(e);return}for(const o of te.find(e,this._element))t(o)}}const ov="modal",iv="bs.modal",Ne=`.${iv}`,av=".data-api",rv="Escape",lv=`hide${Ne}`,cv=`hidePrevented${Ne}`,ri=`hidden${Ne}`,li=`show${Ne}`,uv=`shown${Ne}`,dv=`resize${Ne}`,mv=`click.dismiss${Ne}`,pv=`mousedown.dismiss${Ne}`,fv=`keydown.dismiss${Ne}`,vv=`click${Ne}${av}`,zn="modal-open",hv="fade",Kn="show",Os="modal-static",_v=".modal.show",gv=".modal-dialog",bv=".modal-body",yv='[data-bs-toggle="modal"]',$v={backdrop:!0,focus:!0,keyboard:!0},wv={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ut extends Ve{constructor(e,t){super(e,t),this._dialog=te.findOne(gv,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Us,this._addEventListeners()}static get Default(){return $v}static get DefaultType(){return wv}static get NAME(){return ov}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||K.trigger(this._element,li,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(zn),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||K.trigger(this._element,lv).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Kn),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){K.off(window,Ne),K.off(this._dialog,Ne),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new ii({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ai({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=te.findOne(bv,this._dialog);t&&(t.scrollTop=0),Vt(this._element),this._element.classList.add(Kn);const o=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,K.trigger(this._element,uv,{relatedTarget:e})};this._queueCallback(o,this._dialog,this._isAnimated())}_addEventListeners(){K.on(this._element,fv,e=>{if(e.key===rv){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),K.on(window,dv,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),K.on(this._element,pv,e=>{K.one(this._element,mv,t=>{if(!(this._element!==e.target||this._element!==t.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(zn),this._resetAdjustments(),this._scrollBar.reset(),K.trigger(this._element,ri)})}_isAnimated(){return this._element.classList.contains(hv)}_triggerBackdropTransition(){if(K.trigger(this._element,cv).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,o=this._element.style.overflowY;o==="hidden"||this._element.classList.contains(Os)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(Os),this._queueCallback(()=>{this._element.classList.remove(Os),this._queueCallback(()=>{this._element.style.overflowY=o},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),o=t>0;if(o&&!e){const i=De()?"paddingLeft":"paddingRight";this._element.style[i]=`${t}px`}if(!o&&e){const i=De()?"paddingRight":"paddingLeft";this._element.style[i]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const o=ut.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof o[e]>"u")throw new TypeError(`No method named "${e}"`);o[e](t)}})}}K.on(document,vv,yv,function(s){const e=te.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&s.preventDefault(),K.one(e,li,i=>{i.defaultPrevented||K.one(e,ri,()=>{Mt(this)&&this.focus()})});const t=te.findOne(_v);t&&ut.getInstance(t).hide(),ut.getOrCreateInstance(e).toggle(this)});us(ut);Ie(ut);const Ev="offcanvas",Sv="bs.offcanvas",Ge=`.${Sv}`,ci=".data-api",Cv=`load${Ge}${ci}`,kv="Escape",Gn="show",Yn="showing",Jn="hiding",Tv="offcanvas-backdrop",ui=".offcanvas.show",xv=`show${Ge}`,Av=`shown${Ge}`,Ov=`hide${Ge}`,Qn=`hidePrevented${Ge}`,di=`hidden${Ge}`,Mv=`resize${Ge}`,Dv=`click${Ge}${ci}`,Nv=`keydown.dismiss${Ge}`,Lv='[data-bs-toggle="offcanvas"]',Iv={backdrop:!0,keyboard:!0,scroll:!1},jv={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ze extends Ve{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Iv}static get DefaultType(){return jv}static get NAME(){return Ev}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||K.trigger(this._element,xv,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Us().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Yn);const o=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Gn),this._element.classList.remove(Yn),K.trigger(this._element,Av,{relatedTarget:e})};this._queueCallback(o,this._element,!0)}hide(){if(!this._isShown||K.trigger(this._element,Ov).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Jn),this._backdrop.hide();const t=()=>{this._element.classList.remove(Gn,Jn),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Us().reset(),K.trigger(this._element,di)};this._queueCallback(t,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){K.trigger(this._element,Qn);return}this.hide()},t=!!this._config.backdrop;return new ii({className:Tv,isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?e:null})}_initializeFocusTrap(){return new ai({trapElement:this._element})}_addEventListeners(){K.on(this._element,Nv,e=>{if(e.key===kv){if(this._config.keyboard){this.hide();return}K.trigger(this._element,Qn)}})}static jQueryInterface(e){return this.each(function(){const t=Ze.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}K.on(document,Dv,Lv,function(s){const e=te.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),Xe(this))return;K.one(e,di,()=>{Mt(this)&&this.focus()});const t=te.findOne(ui);t&&t!==e&&Ze.getInstance(t).hide(),Ze.getOrCreateInstance(e).toggle(this)});K.on(window,Cv,()=>{for(const s of te.find(ui))Ze.getOrCreateInstance(s).show()});K.on(window,Mv,()=>{for(const s of te.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(s).position!=="fixed"&&Ze.getOrCreateInstance(s).hide()});us(Ze);Ie(Ze);const Pv=/^aria-[\w-]*$/i,mi={"*":["class","dir","id","lang","role",Pv],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Rv=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Wv=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Hv=(s,e)=>{const t=s.nodeName.toLowerCase();return e.includes(t)?Rv.has(t)?!!Wv.test(s.nodeValue):!0:e.filter(o=>o instanceof RegExp).some(o=>o.test(t))};function Vv(s,e,t){if(!s.length)return s;if(t&&typeof t=="function")return t(s);const i=new window.DOMParser().parseFromString(s,"text/html"),a=[].concat(...i.body.querySelectorAll("*"));for(const r of a){const m=r.nodeName.toLowerCase();if(!Object.keys(e).includes(m)){r.remove();continue}const p=[].concat(...r.attributes),f=[].concat(e["*"]||[],e[m]||[]);for(const u of p)Hv(u,f)||r.removeAttribute(u.nodeName)}return i.body.innerHTML}const Fv="TemplateFactory",Bv={allowList:mi,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},qv={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Uv={entry:"(string|element|function|null)",selector:"(string|element)"};class zv extends Ft{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Bv}static get DefaultType(){return qv}static get NAME(){return Fv}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[i,a]of Object.entries(this._config.content))this._setContent(e,a,i);const t=e.children[0],o=this._resolvePossibleFunction(this._config.extraClass);return o&&t.classList.add(...o.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,o]of Object.entries(e))super._typeCheckConfig({selector:t,entry:o},Uv)}_setContent(e,t,o){const i=te.findOne(o,e);if(i){if(t=this._resolvePossibleFunction(t),!t){i.remove();return}if(Ue(t)){this._putElementInTemplate(Qe(t),i);return}if(this._config.html){i.innerHTML=this._maybeSanitize(t);return}i.textContent=t}}_maybeSanitize(e){return this._config.sanitize?Vv(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return Se(e,[void 0,this])}_putElementInTemplate(e,t){if(this._config.html){t.innerHTML="",t.append(e);return}t.textContent=e.textContent}}const Kv="tooltip",Gv=new Set(["sanitize","allowList","sanitizeFn"]),Ms="fade",Yv="modal",Jt="show",Jv=".tooltip-inner",Xn=`.${Yv}`,Zn="hide.bs.modal",It="hover",Ds="focus",Ns="click",Qv="manual",Xv="hide",Zv="hidden",eh="show",th="shown",sh="inserted",nh="click",oh="focusin",ih="focusout",ah="mouseenter",rh="mouseleave",lh={AUTO:"auto",TOP:"top",RIGHT:De()?"left":"right",BOTTOM:"bottom",LEFT:De()?"right":"left"},ch={allowList:mi,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},uh={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Nt extends Ve{constructor(e,t){if(typeof Wo>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return ch}static get DefaultType(){return uh}static get NAME(){return Kv}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),K.off(this._element.closest(Xn),Zn,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=K.trigger(this._element,this.constructor.eventName(eh)),o=(Fo(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!o)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:a}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(a.append(i),K.trigger(this._element,this.constructor.eventName(sh))),this._popper=this._createPopper(i),i.classList.add(Jt),"ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))K.on(m,"mouseover",os);const r=()=>{K.trigger(this._element,this.constructor.eventName(th)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(r,this.tip,this._isAnimated())}hide(){if(!this._isShown()||K.trigger(this._element,this.constructor.eventName(Xv)).defaultPrevented)return;if(this._getTipElement().classList.remove(Jt),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))K.off(i,"mouseover",os);this._activeTrigger[Ns]=!1,this._activeTrigger[Ds]=!1,this._activeTrigger[It]=!1,this._isHovered=null;const o=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),K.trigger(this._element,this.constructor.eventName(Zv)))};this._queueCallback(o,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(Ms,Jt),t.classList.add(`bs-${this.constructor.NAME}-auto`);const o=Jm(this.constructor.NAME).toString();return t.setAttribute("id",o),this._isAnimated()&&t.classList.add(Ms),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new zv({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Jv]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Ms)}_isShown(){return this.tip&&this.tip.classList.contains(Jt)}_createPopper(e){const t=Se(this._config.placement,[this,e,this._element]),o=lh[t.toUpperCase()];return en(this._element,e,this._getPopperConfig(o))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_resolvePossibleFunction(e){return Se(e,[this._element,this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:o=>{this._getTipElement().setAttribute("data-popper-placement",o.state.placement)}}]};return{...t,...Se(this._config.popperConfig,[void 0,t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if(t==="click")K.on(this._element,this.constructor.eventName(nh),this._config.selector,o=>{const i=this._initializeOnDelegatedTarget(o);i._activeTrigger[Ns]=!(i._isShown()&&i._activeTrigger[Ns]),i.toggle()});else if(t!==Qv){const o=t===It?this.constructor.eventName(ah):this.constructor.eventName(oh),i=t===It?this.constructor.eventName(rh):this.constructor.eventName(ih);K.on(this._element,o,this._config.selector,a=>{const r=this._initializeOnDelegatedTarget(a);r._activeTrigger[a.type==="focusin"?Ds:It]=!0,r._enter()}),K.on(this._element,i,this._config.selector,a=>{const r=this._initializeOnDelegatedTarget(a);r._activeTrigger[a.type==="focusout"?Ds:It]=r._element.contains(a.relatedTarget),r._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},K.on(this._element.closest(Xn),Zn,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=ze.getDataAttributes(this._element);for(const o of Object.keys(t))Gv.has(o)&&delete t[o];return e={...t,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Qe(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,o]of Object.entries(this._config))this.constructor.Default[t]!==o&&(e[t]=o);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=Nt.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}Ie(Nt);const dh="popover",mh=".popover-header",ph=".popover-body",fh={...Nt.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},vh={...Nt.DefaultType,content:"(null|string|element|function)"};class on extends Nt{static get Default(){return fh}static get DefaultType(){return vh}static get NAME(){return dh}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[mh]:this._getTitle(),[ph]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=on.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}Ie(on);const hh="scrollspy",_h="bs.scrollspy",an=`.${_h}`,gh=".data-api",bh=`activate${an}`,eo=`click${an}`,yh=`load${an}${gh}`,$h="dropdown-item",ft="active",wh='[data-bs-spy="scroll"]',Ls="[href]",Eh=".nav, .list-group",to=".nav-link",Sh=".nav-item",Ch=".list-group-item",kh=`${to}, ${Sh} > ${to}, ${Ch}`,Th=".dropdown",xh=".dropdown-toggle",Ah={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Oh={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ps extends Ve{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Ah}static get DefaultType(){return Oh}static get NAME(){return hh}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Qe(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(t=>Number.parseFloat(t))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(K.off(this._config.target,eo),K.on(this._config.target,eo,Ls,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const o=this._rootElement||window,i=t.offsetTop-this._element.offsetTop;if(o.scrollTo){o.scrollTo({top:i,behavior:"smooth"});return}o.scrollTop=i}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(t=>this._observerCallback(t),e)}_observerCallback(e){const t=r=>this._targetLinks.get(`#${r.target.id}`),o=r=>{this._previousScrollData.visibleEntryTop=r.target.offsetTop,this._process(t(r))},i=(this._rootElement||document.documentElement).scrollTop,a=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const r of e){if(!r.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(r));continue}const m=r.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(a&&m){if(o(r),!i)return;continue}!a&&!m&&o(r)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=te.find(Ls,this._config.target);for(const t of e){if(!t.hash||Xe(t))continue;const o=te.findOne(decodeURI(t.hash),this._element);Mt(o)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,o))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(ft),this._activateParents(e),K.trigger(this._element,bh,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains($h)){te.findOne(xh,e.closest(Th)).classList.add(ft);return}for(const t of te.parents(e,Eh))for(const o of te.prev(t,kh))o.classList.add(ft)}_clearActiveClass(e){e.classList.remove(ft);const t=te.find(`${Ls}.${ft}`,e);for(const o of t)o.classList.remove(ft)}static jQueryInterface(e){return this.each(function(){const t=ps.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}K.on(window,yh,()=>{for(const s of te.find(wh))ps.getOrCreateInstance(s)});Ie(ps);const Mh="tab",Dh="bs.tab",mt=`.${Dh}`,Nh=`hide${mt}`,Lh=`hidden${mt}`,Ih=`show${mt}`,jh=`shown${mt}`,Ph=`click${mt}`,Rh=`keydown${mt}`,Wh=`load${mt}`,Hh="ArrowLeft",so="ArrowRight",Vh="ArrowUp",no="ArrowDown",Is="Home",oo="End",it="active",io="fade",js="show",Fh="dropdown",pi=".dropdown-toggle",Bh=".dropdown-menu",Ps=`:not(${pi})`,qh='.list-group, .nav, [role="tablist"]',Uh=".nav-item, .list-group-item",zh=`.nav-link${Ps}, .list-group-item${Ps}, [role="tab"]${Ps}`,fi='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Rs=`${zh}, ${fi}`,Kh=`.${it}[data-bs-toggle="tab"], .${it}[data-bs-toggle="pill"], .${it}[data-bs-toggle="list"]`;class xt extends Ve{constructor(e){super(e),this._parent=this._element.closest(qh),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),K.on(this._element,Rh,t=>this._keydown(t)))}static get NAME(){return Mh}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),o=t?K.trigger(t,Nh,{relatedTarget:e}):null;K.trigger(e,Ih,{relatedTarget:t}).defaultPrevented||o&&o.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){if(!e)return;e.classList.add(it),this._activate(te.getElementFromSelector(e));const o=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(js);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),K.trigger(e,jh,{relatedTarget:t})};this._queueCallback(o,e,e.classList.contains(io))}_deactivate(e,t){if(!e)return;e.classList.remove(it),e.blur(),this._deactivate(te.getElementFromSelector(e));const o=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(js);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),K.trigger(e,Lh,{relatedTarget:t})};this._queueCallback(o,e,e.classList.contains(io))}_keydown(e){if(![Hh,so,Vh,no,Is,oo].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter(i=>!Xe(i));let o;if([Is,oo].includes(e.key))o=t[e.key===Is?0:t.length-1];else{const i=[so,no].includes(e.key);o=tn(t,e.target,i,!0)}o&&(o.focus({preventScroll:!0}),xt.getOrCreateInstance(o).show())}_getChildren(){return te.find(Rs,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const o of t)this._setInitialAttributesOnChild(o)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),o=this._getOuterElement(e);e.setAttribute("aria-selected",t),o!==e&&this._setAttributeIfNotExists(o,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=te.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const o=this._getOuterElement(e);if(!o.classList.contains(Fh))return;const i=(a,r)=>{const m=te.findOne(a,o);m&&m.classList.toggle(r,t)};i(pi,it),i(Bh,js),o.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,o){e.hasAttribute(t)||e.setAttribute(t,o)}_elemIsActive(e){return e.classList.contains(it)}_getInnerElement(e){return e.matches(Rs)?e:te.findOne(Rs,e)}_getOuterElement(e){return e.closest(Uh)||e}static jQueryInterface(e){return this.each(function(){const t=xt.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}K.on(document,Ph,fi,function(s){["A","AREA"].includes(this.tagName)&&s.preventDefault(),!Xe(this)&&xt.getOrCreateInstance(this).show()});K.on(window,Wh,()=>{for(const s of te.find(Kh))xt.getOrCreateInstance(s)});Ie(xt);const Gh="toast",Yh="bs.toast",nt=`.${Yh}`,Jh=`mouseover${nt}`,Qh=`mouseout${nt}`,Xh=`focusin${nt}`,Zh=`focusout${nt}`,e_=`hide${nt}`,t_=`hidden${nt}`,s_=`show${nt}`,n_=`shown${nt}`,o_="fade",ao="hide",Qt="show",Xt="showing",i_={animation:"boolean",autohide:"boolean",delay:"number"},a_={animation:!0,autohide:!0,delay:5e3};class fs extends Ve{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return a_}static get DefaultType(){return i_}static get NAME(){return Gh}show(){if(K.trigger(this._element,s_).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(o_);const t=()=>{this._element.classList.remove(Xt),K.trigger(this._element,n_),this._maybeScheduleHide()};this._element.classList.remove(ao),Vt(this._element),this._element.classList.add(Qt,Xt),this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this.isShown()||K.trigger(this._element,e_).defaultPrevented)return;const t=()=>{this._element.classList.add(ao),this._element.classList.remove(Xt,Qt),K.trigger(this._element,t_)};this._element.classList.add(Xt),this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Qt),super.dispose()}isShown(){return this._element.classList.contains(Qt)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=t;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=t;break}}if(t){this._clearTimeout();return}const o=e.relatedTarget;this._element===o||this._element.contains(o)||this._maybeScheduleHide()}_setListeners(){K.on(this._element,Jh,e=>this._onInteraction(e,!0)),K.on(this._element,Qh,e=>this._onInteraction(e,!1)),K.on(this._element,Xh,e=>this._onInteraction(e,!0)),K.on(this._element,Zh,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=fs.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}us(fs);Ie(fs);const r_={class:"message-content-column"},l_=["id"],c_={class:"accordion-item"},u_=["id"],d_=["aria-controls"],m_={class:"d-flex align-items-center w-100"},p_={class:"badge bg-warning text-dark ms-auto me-2"},f_={class:"text-muted"},v_=["id","aria-labelledby"],h_={class:"accordion-body bg-light"},__={class:"alert alert-warning mb-3",role:"alert"},g_={class:"compaction-metadata"},b_={class:"metadata-row"},y_={class:"metadata-row"},$_={key:0,class:"metadata-row"},w_={class:"continuation-content"},E_={class:"continuation-text border rounded p-3 bg-white"},S_={class:"mb-0"},C_={__name:"CompactionEventGroup",props:{messages:{type:Array,required:!0,validator:s=>s.length===4||s.length===5}},setup(s){const e=s,t=v(()=>`accordion-compaction-${e.messages[0]?.timestamp||Date.now()}`),o=v(()=>`heading-${t.value}`),i=v(()=>`collapse-${t.value}`),a=j(null);let r=null;be(()=>{a.value&&(r=new Tt(a.value,{toggle:!1}))}),hi(()=>{r&&r.dispose()});function m(){r&&r.toggle()}const p=v(()=>e.messages.length===5&&e.messages[2]?.type==="system"&&e.messages[2]?.metadata?.subtype==="init"),f=v(()=>p.value?e.messages[3]:e.messages[2]),u=v(()=>f.value?.metadata?.init_data?.compact_metadata||{}),E=v(()=>u.value.pre_tokens||0),g=v(()=>p.value?e.messages[4]:e.messages[3]),$=v(()=>g.value?.content||""),b=v(()=>{const l=e.messages[0]?.timestamp;return l?Wt(l):""});function h(l){return l?`${l.toLocaleString()} tokens`:"0 tokens"}return(l,_)=>(c(),d("div",{class:"message-row message-row-compaction",key:t.value},[_[7]||(_[7]=n("div",{class:"message-speaker"},[n("span",{class:"speaker-label"},"system")],-1)),n("div",r_,[n("div",{class:"accordion compaction-accordion",id:t.value},[n("div",c_,[n("h2",{class:"accordion-header",id:o.value},[n("button",{class:"accordion-button collapsed",type:"button","aria-expanded":!1,"aria-controls":i.value,onClick:m},[n("div",m_,[_[0]||(_[0]=n("span",{class:"me-2"},"ðŸ—œï¸",-1)),_[1]||(_[1]=n("strong",{class:"me-2"},"Context Compaction Event",-1)),n("span",p_,w(h(E.value)),1),n("small",f_,w(b.value),1)])],8,d_)],8,u_),n("div",{ref_key:"collapseElement",ref:a,id:i.value,class:"accordion-collapse collapse","aria-labelledby":o.value},[n("div",h_,[n("div",__,[_[5]||(_[5]=n("h6",{class:"alert-heading mb-2"},[n("span",{class:"me-2"},"â„¹ï¸"),Z(" Compaction Details ")],-1)),n("div",g_,[n("div",b_,[_[2]||(_[2]=n("strong",null,"Trigger:",-1)),n("span",null,w(u.value.trigger||"auto"),1)]),n("div",y_,[_[3]||(_[3]=n("strong",null,"Pre-compaction tokens:",-1)),n("span",null,w(h(E.value)),1)]),u.value.post_tokens?(c(),d("div",$_,[_[4]||(_[4]=n("strong",null,"Post-compaction tokens:",-1)),n("span",null,w(h(u.value.post_tokens)),1)])):M("",!0)])]),n("div",w_,[_[6]||(_[6]=n("h6",{class:"text-muted mb-2"},[n("span",{class:"me-2"},"â†©ï¸"),Z(" Continuation Message ")],-1)),n("div",E_,[n("pre",S_,w($.value),1)])])])],8,v_)])],8,l_)])]))}},k_=se(C_,[["__scopeId","data-v-e0b95ba8"]]),T_={key:0,class:"text-muted text-center py-5"},x_={__name:"MessageList",setup(s){const e=ke(),t=_e(),o=j(null),i=v(()=>{const u=e.currentMessages,E=[];let g=0;for(;g<u.length;){const $=u[g];if(r($,u,g)){const b=u[g+2],l=b?.type==="system"&&b?.metadata?.subtype==="init"?5:4,_=u.slice(g,g+l);E.push({type:"compaction",messages:_}),g+=l;continue}p($)&&E.push({type:"message",message:$,attachedTools:[]}),g++}return a(E)});function a(u){const E=new Map,g=new Set;for(let b=0;b<u.length;b++){const h=u[b];if(h.type==="compaction")continue;const l=h.message,_=l.content&&l.content.trim().length>0&&l.content!=="Assistant response",y=l.type==="assistant"&&l.metadata?.has_tool_uses&&l.metadata?.tool_uses?.length>0;if(l.type==="assistant"&&y&&!_){let C=-1,T=!1;for(let P=b-1;P>=0;P--){const W=u[P];if(!g.has(P)){if(W.type==="message"&&W.message.type!=="assistant"){T=!0;break}if(W.type==="message"&&W.message.type==="assistant"){const A=W.message;if(A.content&&A.content.trim().length>0&&A.content!=="Assistant response"){C=P;break}else{C=P;break}}}}T&&C===-1||(T&&C>=0?(E.has(C)||E.set(C,[]),E.get(C).push(...l.metadata.tool_uses),g.add(b)):!T&&C>=0&&(E.has(C)||E.set(C,[]),E.get(C).push(...l.metadata.tool_uses),g.add(b)))}}const $=[];for(let b=0;b<u.length;b++){if(g.has(b))continue;const h=u[b];E.has(b)&&(h.attachedTools=[...h.attachedTools||[],...E.get(b)]),$.push(h)}return $}function r(u,E,g){if(g+3>=E.length)return!1;const $=E[g],b=E[g+1];let h=E[g+2],l=E[g+3],_=E[g+4];const y=$.type==="system"&&$.metadata?.subtype==="status"&&$.metadata?.init_data?.status==="compacting",C=b.type==="system"&&b.metadata?.subtype==="status"&&(b.metadata?.init_data?.status===null||b.metadata?.init_data?.status===void 0);if(h?.type==="system"&&h?.metadata?.subtype==="init"){if(g+4>=E.length)return!1;const P=!0,W=l?.type==="system"&&l?.metadata?.subtype==="compact_boundary",A=_?.type==="user"&&_?.content?.startsWith("This session is being continued from a previous conversation");return $.type==="system"&&$.metadata?.subtype==="status"&&(console.log("[Compaction Debug] Checking 5-message pattern (with init) at index",g),console.log("  Msg1 (compacting):",y),console.log("  Msg2 (null status):",C),console.log("  Msg3 (init):",P),console.log("  Msg4 (boundary):",W),console.log("  Msg5 (continuation):",A)),y&&C&&P&&W&&A}else{const P=h?.type==="system"&&h?.metadata?.subtype==="compact_boundary",W=l?.type==="user"&&l?.content?.startsWith("This session is being continued from a previous conversation");return $.type==="system"&&$.metadata?.subtype==="status"&&(console.log("[Compaction Debug] Checking 4-message pattern (no init) at index",g),console.log("  Msg1 (compacting):",y),console.log("  Msg2 (null status):",C),console.log("  Msg3 (boundary):",P),console.log("  Msg4 (continuation):",W)),y&&C&&P&&W}}async function m(){t.autoScrollEnabled&&(await yt(),o.value&&(o.value.scrollTop=o.value.scrollHeight))}pe(()=>i.value.length,m),pe(()=>e.currentToolCalls.length,m),pe(()=>e.currentToolCalls.map(u=>`${u.id}-${u.status}`).join(","),m),be(()=>{setTimeout(()=>{m()},100)});function p(u){const E=u.subtype||u.metadata?.subtype;if(u.type==="system"&&E==="init"||u.type==="result"||u.type==="permission_request"||u.type==="permission_response")return!1;if(u.type==="user"&&u.metadata?.has_tool_results){const g=u.content||"";if(g.match(/^Tool results?: \d+ results?$/i)||g.trim()==="")return!1}if(u.type==="user"){const g=u.content||"";if(g.includes("<command-message>")&&g.includes("skill is running")||g.startsWith("Base directory for this skill:"))return!1}if(u.type==="user"){const g=u.content||"";if(g.includes("<command-message>")&&g.includes("<command-name>")&&g.includes("<command-args>")||g.includes("ARGUMENTS:")&&(g.includes("<command-name>")||g.match(/\nARGUMENTS:/)))return!1}return!0}function f(u){return{type:u.type||"unknown",content:u.content||"",timestamp:u.timestamp||Date.now()/1e3,metadata:{has_tool_uses:!1,has_tool_results:!1,has_thinking:!1,has_permission_requests:!1,has_permission_responses:!1,tool_uses:[],tool_results:[],thinking_content:"",thinking_blocks:[],...u.metadata}}}return(u,E)=>(c(),d("div",{class:"messages-area flex-grow-1 overflow-auto",ref_key:"messagesArea",ref:o},[i.value.length===0?(c(),d("div",T_," No messages yet. Start a conversation! ")):M("",!0),(c(!0),d(re,null,ue(i.value,(g,$)=>(c(),d(re,{key:`item-${$}`},[g.type==="message"?(c(),$e(cm,{key:0,message:f(g.message),attachedTools:g.attachedTools||[]},null,8,["message","attachedTools"])):g.type==="compaction"?(c(),$e(k_,{key:1,messages:g.messages},null,8,["messages"])):M("",!0)],64))),128))],512))}},A_=se(x_,[["__scopeId","data-v-6bae0fb1"]]),O_={class:"border-top bg-light"},M_={key:0,class:"alert alert-danger mb-0 py-2 px-3 small d-flex align-items-center gap-2",role:"alert"},D_={class:"d-flex gap-2 align-items-end px-2 py-1"},N_=["placeholder","disabled"],L_=["disabled"],I_={__name:"InputArea",setup(s){const e=de(),t=et(),o=j(null),i=j(window.innerWidth),a=v({get:()=>e.currentInput,set:l=>{e.currentInput=l}}),r=v(()=>e.currentSession?.is_processing||!1),m=v(()=>t.sessionConnected),p=v(()=>e.currentSession?.state==="starting"),f=v(()=>i.value<768),u=v(()=>p.value?"Session is starting...":m.value?"Type your message to Claude Code...":"Waiting for connection...");function E(){i.value=window.innerWidth}be(()=>{window.addEventListener("resize",E)}),Ce(()=>{window.removeEventListener("resize",E)});function g(l){if(l.key==="Enter"&&!l.shiftKey){if(f.value)return;l.preventDefault(),b()}}function $(){const l=o.value;if(!l)return;l.style.height="auto";const _=Math.min(l.scrollHeight,parseInt(getComputedStyle(l).maxHeight));l.style.height=_+"px"}function b(){a.value.trim()&&(t.sendMessage(a.value),a.value="",o.value&&(o.value.style.height="auto"))}function h(){t.interruptSession()}return(l,_)=>(c(),d("div",O_,[m.value?M("",!0):(c(),d("div",M_,[..._[1]||(_[1]=[n("span",{class:"flex-shrink-0"},"â—",-1),n("strong",null,"Disconnected",-1),n("span",{class:"text-muted"},"â€”",-1),n("span",null,"Cannot send messages while reconnecting...",-1)])])),n("div",D_,[ge(n("textarea",{id:"message-input",ref_key:"messageTextarea",ref:o,"onUpdate:modelValue":_[0]||(_[0]=y=>a.value=y),class:"form-control",placeholder:u.value,disabled:p.value||!m.value,rows:"1",onInput:$,onKeydown:g},null,40,N_),[[He,a.value]]),r.value?(c(),d("button",{key:0,class:"btn btn-warning",title:"Stop current processing",onClick:h}," Stop ")):(c(),d("button",{key:1,class:"btn btn-primary",disabled:!a.value.trim()||!m.value||p.value,onClick:b}," Send ",8,L_))])]))}},j_=se(I_,[["__scopeId","data-v-ef1e5094"]]),P_={class:"d-flex flex-column flex-grow-1 overflow-hidden position-relative"},R_={key:0,class:"position-absolute top-0 start-0 w-100 h-100 bg-white bg-opacity-75 d-flex flex-column justify-content-center align-items-center",style:{"z-index":"1000"}},W_={class:"text-secondary"},H_={class:"d-flex flex-column flex-grow-1 overflow-hidden"},V_={__name:"SessionView",props:{sessionId:{type:String,required:!0}},setup(s){const e=s,t=de(),o=_e(),i=v(()=>t.currentSession),a=v(()=>o.isLoading),r=v(()=>o.loadingMessage);return be(async()=>{if(e.sessionId!==t.currentSessionId){o.showLoading("Loading session...");try{await t.selectSession(e.sessionId)}finally{o.hideLoading()}}}),pe(()=>e.sessionId,async(m,p)=>{if(m!==p&&m!==t.currentSessionId){o.showLoading("Loading session...");try{await t.selectSession(m)}finally{o.hideLoading()}}}),Ce(()=>{}),(m,p)=>(c(),d("div",P_,[a.value?(c(),d("div",R_,[p[0]||(p[0]=n("div",{class:"spinner-border text-primary mb-3",role:"status"},[n("span",{class:"visually-hidden"},"Loading...")],-1)),n("p",W_,w(r.value),1)])):M("",!0),i.value?(c(),$e(ji,{key:1,"session-id":e.sessionId},null,8,["session-id"])):M("",!0),n("div",H_,[fe(A_)]),fe(j_),i.value?(c(),$e(Vi,{key:2,"session-id":e.sessionId},null,8,["session-id"])):M("",!0),i.value?(c(),$e(Ji,{key:3,"session-id":e.sessionId},null,8,["session-id"])):M("",!0)]))}},vs=At("legion",()=>{const s=j(new Map),e=j(new Map),t=j(null),o=v(()=>s.value.get(t.value)||[]),i=v(()=>e.value.get(t.value)||[]);function a(b){t.value=b}async function r(b,h=100,l=0){try{const _=await ce.get(`/api/legions/${b}/timeline?limit=${h}&offset=${l}`),y=_.comms||[],C=_.total_count||y.length,T=_.has_more||!1;return y.sort((P,W)=>new Date(P.timestamp)-new Date(W.timestamp)),console.log(`Loaded ${y.length} of ${C} comms for legion ${b}`),s.value.set(b,y),s.value=new Map(s.value),{comms:y,totalCount:C,hasMore:T}}catch(_){throw console.error("Failed to load timeline:",_),_}}function m(b,h){s.value.has(b)||s.value.set(b,[]);const l=s.value.get(b);if(l.some(y=>y.comm_id===h.comm_id)){console.log(`Duplicate comm ${h.comm_id} prevented in timeline`);return}l.push(h),s.value=new Map(s.value)}async function p(b,h){try{const _=(await ce.post(`/api/legions/${b}/comms`,h)).comm;return console.log(`Sent comm ${_.comm_id} to legion ${b}`),_}catch(l){throw console.error("Failed to send comm:",l),l}}async function f(b){return console.log(`Minions for legion ${b} are already available in session store`),[]}async function u(b,h){try{const _=(await ce.post(`/api/legions/${b}/minions`,h)).minion;return await f(b),console.log(`Created minion ${_.minion_id} in legion ${b}`),_}catch(l){throw console.error("Failed to create minion:",l),l}}async function E(b){try{const h=await ce.post(`/api/legions/${b}/halt-all`);return console.log(`Halted ${h.halted_count} of ${h.total_minions} minions in legion ${b}`),h.failed_minions&&h.failed_minions.length>0&&console.warn("Failed to halt some minions:",h.failed_minions),h}catch(h){throw console.error("Failed to halt all minions:",h),h}}async function g(b){try{const h=await ce.post(`/api/legions/${b}/resume-all`);return console.log(`Resumed ${h.resumed_count} of ${h.total_minions} minions in legion ${b}`),h.failed_minions&&h.failed_minions.length>0&&console.warn("Failed to resume some minions:",h.failed_minions),h}catch(h){throw console.error("Failed to resume all minions:",h),h}}function $(b){s.value.delete(b),e.value.delete(b),s.value=new Map(s.value),e.value=new Map(e.value)}return{commsByLegion:s,minionsByLegion:e,currentLegionId:t,currentComms:o,currentMinions:i,setCurrentLegion:a,loadTimeline:r,addComm:m,sendComm:p,loadMinions:f,createMinion:u,haltAll:E,resumeAll:g,clearLegionData:$}}),F_=Object.freeze(Object.defineProperty({__proto__:null,useLegionStore:vs},Symbol.toStringTag,{value:"Module"})),B_={class:"timeline-header border-bottom p-3"},q_={class:"project-name"},U_=["title"],z_={__name:"TimelineHeader",props:{legionId:{type:String,required:!0}},setup(s){const e=s,t=Le(),o=v(()=>t.projects.get(e.legionId)),i=v(()=>o.value?.name||"Legion");return(a,r)=>(c(),d("div",B_,[n("div",null,[n("div",q_,w(i.value),1),n("div",{class:"view-name",title:s.legionId},"Timeline",8,U_)])]))}},K_=se(z_,[["__scopeId","data-v-44f386f5"]]),G_={class:"timeline-status-bar border-top p-2 bg-light"},Y_={class:"d-flex justify-content-end"},J_={__name:"TimelineStatusBar",props:{legionId:{type:String,required:!0}},setup(s){const e=_e();function t(){e.setAutoScroll(!e.autoScrollEnabled)}return(o,i)=>(c(),d("div",G_,[n("div",Y_,[n("button",{class:X(["btn btn-sm",ss(e).autoScrollEnabled?"btn-primary":"btn-outline-secondary"]),onClick:t}," â¬‡ï¸ "+w(ss(e).autoScrollEnabled?"ON":"OFF"),3)])]))}},Q_=se(J_,[["__scopeId","data-v-891c73db"]]),X_={class:"comm-composer border-top p-3"},Z_={key:0,class:"d-flex gap-2 mb-2"},eg={class:"flex-grow-1"},tg=["disabled"],sg={label:"Minions"},ng=["value"],og={style:{"min-width":"150px"}},ig=["disabled"],ag={class:"d-flex gap-2 align-items-end position-relative"},rg={class:"flex-grow-1 position-relative"},lg=["disabled"],cg=["onClick","onMouseenter"],ug=["disabled"],dg={key:0},mg={key:1},pg={__name:"CommComposer",props:{legionId:{type:String,required:!0},hideRecipientSelector:{type:Boolean,default:!1}},setup(s){const e=s,t=vs(),o=de(),i=Le(),a=j(""),r=j("task"),m=j(""),p=j(!1),f=j(window.innerWidth),u=j(!1),E=j([]),g=j(0),$=j(-1),b=j(null),h=j(null),l=v(()=>f.value<768),_=v(()=>{const U=i.projects.get(e.legionId);return!U||!U.session_ids?[]:U.session_ids.map(I=>o.sessions.get(I)).filter(I=>I)}),y=v(()=>a.value&&m.value.trim().length>0);function C(U){return{created:"â—‹",starting:"â—",active:"â—",paused:"â¸",terminating:"â—",terminated:"âœ—",error:"âš "}[U.state]||"â—‹"}function T(U){return U.role?`${U.name} (${U.role})`:U.name}function P(){const U=b.value;if(!U)return;U.style.height="auto";const I=Math.min(U.scrollHeight,parseInt(getComputedStyle(U).maxHeight));U.style.height=I+"px"}function W(){const U=b.value;if(!U)return;P();const I=m.value,R=U.selectionStart,F=I.substring(0,R),x=F.lastIndexOf("#");if(x===-1){u.value=!1;return}const O=F.substring(x+1).toLowerCase();if(O.includes(" ")){u.value=!1;return}const z=_.value.filter(L=>L.name.toLowerCase().includes(O)).map(L=>({type:"minion",name:L.name,role:L.role,id:L.session_id,state:L.state}));if(z.length===0){u.value=!1;return}E.value=z,g.value=0,$.value=x,u.value=!0}function A(){if(!h.value)return;const U=h.value,I=U.children[g.value];if(!I)return;const R=I.offsetTop,F=I.offsetHeight,x=U.scrollTop,O=U.clientHeight;R<x?U.scrollTop=R:R+F>x+O&&(U.scrollTop=R+F-O)}function V(U){if(!u.value){if(U.key==="Enter"&&!U.shiftKey){if(l.value)return;y.value&&(U.preventDefault(),k())}return}if(U.key==="ArrowDown")U.preventDefault(),g.value=(g.value+1)%E.value.length,A();else if(U.key==="ArrowUp")U.preventDefault(),g.value=g.value===0?E.value.length-1:g.value-1,A();else if(U.key==="Enter"){U.preventDefault();const I=E.value[g.value];I&&S(I)}else U.key==="Escape"&&(u.value=!1)}function S(U){const I=b.value;if(!I)return;const R=m.value,F=I.selectionStart,x=R.substring(0,$.value)+"#"+U.name+" "+R.substring(F);m.value=x;const O=$.value+U.name.length+2;setTimeout(()=>{I.setSelectionRange(O,O),I.focus()},0),u.value=!1}async function k(){if(!(!y.value||p.value)){p.value=!0;try{const[U,I]=a.value.split(":"),R={comm_type:r.value,content:m.value.trim()};U==="minion"&&(R.to_minion_id=I),await t.sendComm(e.legionId,R),m.value="",P()}catch(U){console.error("Failed to send comm:",U),alert(`Failed to send comm: ${U.message}`)}finally{p.value=!1}}}function q(){f.value=window.innerWidth}return be(()=>{window.addEventListener("resize",q)}),Ce(()=>{window.removeEventListener("resize",q)}),pe(u,U=>{if(U){const I=R=>{R.target.closest(".comm-composer")||(u.value=!1,document.removeEventListener("click",I))};setTimeout(()=>document.addEventListener("click",I),0)}}),(U,I)=>(c(),d("div",X_,[s.hideRecipientSelector?M("",!0):(c(),d("div",Z_,[n("div",eg,[ge(n("select",{"onUpdate:modelValue":I[0]||(I[0]=R=>a.value=R),class:"form-select form-select-sm",disabled:p.value},[I[3]||(I[3]=n("option",{value:""},"-- Select Recipient --",-1)),n("optgroup",sg,[(c(!0),d(re,null,ue(_.value,R=>(c(),d("option",{key:R.session_id,value:`minion:${R.session_id}`},w(C(R))+" "+w(T(R)),9,ng))),128))])],8,tg),[[fn,a.value]])]),n("div",og,[ge(n("select",{"onUpdate:modelValue":I[1]||(I[1]=R=>r.value=R),class:"form-select form-select-sm",disabled:p.value},[...I[4]||(I[4]=[n("option",{value:"task"},"Task",-1),n("option",{value:"question"},"Question",-1),n("option",{value:"info"},"Info",-1),n("option",{value:"report"},"Report",-1)])],8,ig),[[fn,r.value]])])])),n("div",ag,[n("div",rg,[ge(n("textarea",{ref_key:"contentTextarea",ref:b,"onUpdate:modelValue":I[2]||(I[2]=R=>m.value=R),class:"form-control form-control-sm",rows:"1",placeholder:"Type message... Use # to mention minions",disabled:p.value,onInput:W,onKeydown:V},null,40,lg),[[He,m.value]]),u.value?(c(),d("div",{key:0,ref_key:"autocompleteDropdown",ref:h,class:"autocomplete-dropdown position-absolute bg-white border rounded shadow-sm"},[(c(!0),d(re,null,ue(E.value,(R,F)=>(c(),d("div",{key:R.id,class:X(["autocomplete-item px-2 py-1",{"bg-light":F===g.value}]),onClick:x=>S(R),onMouseenter:x=>g.value=F},w(R.type==="minion"?C(R):"#ï¸âƒ£")+" "+w(R.name)+w(R.role?` (${R.role})`:""),43,cg))),128))],512)):M("",!0)]),n("div",null,[n("button",{class:"btn btn-primary btn-sm",disabled:!y.value||p.value,onClick:k},[p.value?(c(),d("span",dg,[...I[5]||(I[5]=[n("span",{class:"spinner-border spinner-border-sm me-1"},null,-1),Z(" Sending... ",-1)])])):(c(),d("span",mg,"Send"))],8,ug)])])]))}},fg=se(pg,[["__scopeId","data-v-e52b8e8f"]]),vg={class:"message-content-column-full"},hg=["aria-expanded"],_g={class:"comm-sender-recipient"},gg={class:"comm-badge-summary"},bg=["title"],yg={class:"comm-summary-text text-muted ms-2"},$g=["aria-label"],wg={key:0,class:"comm-content-body"},Eg=["innerHTML"],Sg="ffffffff-ffff-ffff-ffff-ffffffffffff",Cg={__name:"CommCard",props:{comm:{type:Object,required:!0},senderName:{type:String,required:!0},recipientName:{type:String,required:!0}},setup(s){const e=s;rt.setOptions({breaks:!0,gfm:!0});const t=j(!1);function o(){t.value=!t.value}const i=v(()=>e.comm.from_minion_id===Sg),a=v(()=>{const f=new Date(e.comm.timestamp*1e3);return`${e.senderName} â†’ ${e.recipientName}
${f.toLocaleString()}`}),r=v(()=>({task:"bg-primary",question:"bg-info",info:"bg-secondary",report:"bg-success",system:"bg-dark"})[e.comm.comm_type]||"bg-secondary"),m=v(()=>{if(e.comm.summary)return e.comm.summary;const f=e.comm.content||"";return f.length>100?f.substring(0,100)+"...":f}),p=v(()=>{const f=e.comm.content||"";let u=rt.parse(f);return u=u.replace(/\n</g,"<"),u=u.replace(/\n+$/,""),rs.sanitize(u)});return(f,u)=>(c(),d("div",{class:X(["message-row message-row-comm",{"system-comm":i.value}])},[n("div",vg,[n("div",{class:"comm-header-accordion",onClick:o,role:"button","aria-expanded":t.value},[n("div",_g,[n("strong",{class:X({"system-sender":i.value})},w(s.senderName),3),s.recipientName?(c(),d(re,{key:0},[u[0]||(u[0]=n("span",{class:"text-muted mx-1"},"â†’",-1)),n("strong",null,w(s.recipientName),1)],64)):M("",!0)]),n("div",gg,[n("span",{class:X(["badge",r.value]),title:a.value},w(s.comm.comm_type),11,bg),n("span",yg,w(m.value),1)]),n("div",{class:"expand-icon","aria-label":t.value?"Collapse":"Expand"},w(t.value?"â–¾":"â–¸"),9,$g)],8,hg),t.value?(c(),d("div",wg,[n("div",{class:"message-text",innerHTML:p.value},null,8,Eg)])):M("",!0)])],2))}},kg=se(Cg,[["__scopeId","data-v-28513f64"]]),Tg={class:"timeline-view d-flex flex-column h-100"},xg={key:0,class:"text-center text-muted"},Ag={key:1,class:"text-center text-danger"},Og={key:2,class:"text-center text-muted"},Mg={key:3,class:"comm-list"},Dg={__name:"TimelineView",props:{legionId:{type:String,required:!0}},setup(s){const e=s,t=vs();Le();const o=de(),i=et(),a=_e(),r=j(!0),m=j(null),p=j(null),f=v(()=>t.currentComms);function u(l){return l.from_user?"You":l.from_minion_id?l.from_minion_id==="ffffffff-ffff-ffff-ffff-ffffffffffff"?"SYSTEM":o.sessions.get(l.from_minion_id)?.name||"Unknown":"Unknown"}function E(l){return l.to_user?"You":l.to_minion_id?o.sessions.get(l.to_minion_id)?.name||"Unknown":"All"}async function g(){a.autoScrollEnabled&&(await yt(),p.value&&(p.value.scrollTop=p.value.scrollHeight))}async function $(){r.value=!0,m.value=null;try{t.setCurrentLegion(e.legionId),await Promise.all([t.loadTimeline(e.legionId),t.loadMinions(e.legionId)]),await yt(),await g(),setTimeout(()=>{g()},100)}catch(l){console.error("Failed to load timeline:",l),l.response?m.value=`${l.message} (${l.response.status})`:m.value=l.message||"Unknown error"}finally{r.value=!1}}function b(){i.connectLegion(e.legionId)}function h(){i.disconnectLegion()}return pe(()=>f.value.length,()=>{g()}),be(()=>{o.currentSessionId=null,$(),b(),setTimeout(()=>{g()},100)}),Ce(()=>{h()}),(l,_)=>(c(),d("div",Tg,[fe(K_,{"legion-id":s.legionId},null,8,["legion-id"]),n("div",{ref_key:"messagesArea",ref:p,class:"timeline-messages flex-grow-1 overflow-auto"},[r.value?(c(),d("div",xg,[..._[0]||(_[0]=[n("div",{class:"spinner-border spinner-border-sm me-2",role:"status"},null,-1),Z(" Loading timeline... ",-1)])])):m.value?(c(),d("div",Ag," Failed to load timeline: "+w(m.value),1)):f.value.length===0?(c(),d("div",Og," No messages yet. Minions will appear here once they start communicating. ")):(c(),d("div",Mg,[(c(!0),d(re,null,ue(f.value,y=>(c(),$e(kg,{key:y.comm_id,comm:y,"sender-name":u(y),"recipient-name":E(y)},null,8,["comm","sender-name","recipient-name"]))),128))]))],512),fe(fg,{"legion-id":s.legionId},null,8,["legion-id"]),fe(Q_,{"legion-id":s.legionId},null,8,["legion-id"])]))}},Ng=se(Dg,[["__scopeId","data-v-b6752179"]]),Lg={class:"minion-info flex-grow-1"},Ig={class:"minion-name"},jg={key:0,class:"me-1"},Pg={key:1,class:"badge bg-secondary ms-2"},Rg={key:0,class:"latest-activity text-muted"},Wg={key:0,class:"activity-prefix"},Hg=["title"],Vg={key:1,class:"activity-time ms-1"},Fg={key:1,class:"latest-activity text-muted"},Bg={class:"activity-prefix"},qg=["title"],Ug={key:2,class:"latest-activity text-muted fst-italic small"},zg={class:"node-row"},Kg={class:"node-left"},Gg={key:0,class:"me-2"},Yg={key:1,class:"badge bg-secondary ms-2"},Jg={class:"node-right"},Qg={key:0,class:"latest-message-preview"},Xg={key:0,class:"message-prefix"},Zg=["title"],eb={key:1,class:"message-time ms-1"},tb={key:1,class:"last-comm-preview"},sb={class:"comm-direction"},nb=["title"],ob={key:2,class:"text-muted fst-italic small"},ib={class:"node-actions"},ab={key:2,class:"minion-children"},rb={key:1,class:"text-danger small ms-4"},lb={__name:"MinionTreeNode",props:{minionData:{type:Object,required:!0},level:{type:Number,default:0},layout:{type:String,default:"two-column",validator:s=>["two-column","sidebar"].includes(s)}},emits:["minion-click"],setup(s,{emit:e}){const t=s,o=e,i=de(),a=ke(),r=_e(),m=v(()=>!t.minionData||!t.minionData.id?null:i.getSession(t.minionData.id)),p=v(()=>{if(!t.minionData||!t.minionData.id)return null;const S=a.messagesBySession.get(t.minionData.id);if(!S||S.length===0)return null;for(let k=S.length-1;k>=0;k--){const q=S[k];if(q.type!=="result"&&!(q.type==="user"&&q.content&&q.content.startsWith("Tool results:"))&&!(q.type==="system"&&q.content==="System message")&&!(q.type==="assistant"&&q.content==="Assistant response")&&(q.type==="user"||q.type==="assistant"||q.type==="system"))return{content:q.content,type:q.type,timestamp:q.timestamp}}return null}),f=v(()=>{if(!t.minionData)return null;const S={...t.minionData};return m.value&&(S.state=m.value.state,S.is_processing=m.value.is_processing,m.value.name&&(S.name=m.value.name),m.value.latest_message&&(S.latest_message=m.value.latest_message,S.latest_message_type=m.value.latest_message_type,S.latest_message_time=m.value.latest_message_time)),p.value&&(S.latest_message=p.value.content,S.latest_message_type=p.value.type,S.latest_message_time=p.value.timestamp),S}),u=v(()=>t.level*24),E=v(()=>!t.minionData||!t.minionData.id?!1:i.currentSessionId===t.minionData.id),g=v(()=>t.minionData&&t.minionData.children&&t.minionData.children.length>0),$=v(()=>t.minionData&&t.minionData.is_overseer&&g.value),b=v(()=>{const S=f.value;return S?S.state==="paused"&&S.is_processing?"pending-prompt":S.is_processing?"processing":S.state||"created":"created"}),h=v(()=>{const S=b.value;return{created:"status-dot-grey",starting:"status-dot-green status-blinking",active:"status-dot-green",running:"status-dot-green",processing:"status-dot-purple status-blinking",paused:"status-dot-grey","pending-prompt":"status-dot-yellow status-blinking",terminated:"status-dot-grey",error:"status-dot-red",failed:"status-dot-red"}[S]||"status-dot-grey"}),l=v(()=>{const S=b.value;return{backgroundColor:{created:"#d3d3d3",starting:"#90ee90",active:"#90ee90",running:"#90ee90",processing:"#dda0dd",paused:"#d3d3d3","pending-prompt":"#ffc107",terminated:"#d3d3d3",error:"#ffb3b3",failed:"#ffb3b3"}[S]||"#d3d3d3"}}),_=v(()=>{const S=f.value;if(!S||!S.latest_message_type)return"";const k=S.latest_message_type;return k==="user"?"User -->:":k==="system"?"System:":""}),y=v(()=>{const S=f.value;if(!S||!S.latest_message)return"";const k=S.latest_message,q=150;return k.length>q?k.slice(0,q)+"...":k}),C=v(()=>{const S=f.value;if(!S||!S.latest_message_time)return"";try{const k=Date.now();let q;if(typeof S.latest_message_time=="number"?q=S.latest_message_time<3250368e4?S.latest_message_time*1e3:S.latest_message_time:q=new Date(S.latest_message_time).getTime(),isNaN(q)||q<9466848e5||q>k+6e4)return console.warn("Invalid timestamp for relative time calculation:",S.latest_message_time,"parsed to:",q),"";const U=k-q;if(U<0)return"just now";const I=Math.floor(U/6e4),R=Math.floor(I/60),F=Math.floor(R/24);return F>0?`${F}d ago`:R>0?`${R}h ago`:I>0?`${I}m ago`:"just now"}catch(k){return console.error("Error calculating relative time:",k,S.latest_message_time),""}});function T(S){return S.to_user?"User":S.to_minion_name?S.to_minion_name:"unknown"}function P(S){const k=S.summary||S.content||"";return k.length>150?k.substring(0,150)+"...":k}function W(){o("minion-click",t.minionData.id)}function A(){const S=i.sessions.get(t.minionData.id);S&&r.showModal("edit-session",{session:S})}function V(){const S=i.sessions.get(t.minionData.id);S&&r.showModal("manage-session",{session:S})}return(S,k)=>{const q=lo("MinionTreeNode",!0);return s.minionData?(c(),d("div",{key:0,class:"minion-tree-node",style:bt({marginLeft:`${u.value}px`})},[s.layout==="sidebar"?(c(),d("div",{key:0,class:X(["minion-card minion-card-clickable border-start border-2 mb-2 d-flex align-items-center p-2",{active:E.value}]),onClick:W},[n("div",{class:X(["status-dot me-2",h.value]),style:bt(l.value)},null,6),n("div",Lg,[n("div",Ig,[$.value?(c(),d("span",jg,"ðŸ‘‘")):M("",!0),n("strong",null,w(f.value?.name||s.minionData.name),1),$.value?(c(),d("span",Pg,w(s.minionData.children.length)+" "+w(s.minionData.children.length===1?"child":"children"),1)):M("",!0)]),f.value?.latest_message?(c(),d("div",Rg,[_.value?(c(),d("span",Wg,w(_.value),1)):M("",!0),n("span",{class:"activity-content",title:f.value.latest_message},w(y.value),9,Hg),C.value?(c(),d("span",Vg,"("+w(C.value)+")",1)):M("",!0)])):s.minionData?.last_comm?(c(),d("div",Fg,[n("span",Bg,[k[1]||(k[1]=Z("â†’ ",-1)),n("strong",null,w(T(s.minionData.last_comm)),1),k[2]||(k[2]=Z(": ",-1))]),n("span",{class:"activity-content",title:s.minionData.last_comm.content||""},w(P(s.minionData.last_comm)),9,qg)])):(c(),d("div",Ug," No activity yet "))]),n("button",{class:"btn btn-sm btn-outline-secondary me-1",title:"Edit minion",onClick:he(A,["stop"])}," âœï¸ "),n("button",{class:"btn btn-sm btn-outline-secondary",title:"Manage minion",onClick:he(V,["stop"])}," âš™ï¸ ")],2)):(c(),d("div",{key:1,class:X(["minion-card minion-card-clickable border-start border-2 mb-2",{active:E.value}]),onClick:W},[n("div",zg,[n("div",Kg,[n("div",{class:X(["status-dot me-2",h.value]),style:bt(l.value)},null,6),$.value?(c(),d("span",Gg,"ðŸ‘‘")):M("",!0),n("strong",null,w(f.value?.name||s.minionData.name),1),$.value?(c(),d("span",Yg,w(s.minionData.children.length)+" "+w(s.minionData.children.length===1?"child":"children"),1)):M("",!0)]),n("div",Jg,[f.value?.latest_message?(c(),d("div",Qg,[_.value?(c(),d("span",Xg,w(_.value),1)):M("",!0),n("span",{class:"message-content",title:f.value.latest_message},w(y.value),9,Zg),C.value?(c(),d("span",eb,"("+w(C.value)+")",1)):M("",!0)])):s.minionData?.last_comm?(c(),d("div",tb,[n("span",sb,[k[3]||(k[3]=Z("â†’ ",-1)),n("strong",null,w(T(s.minionData.last_comm)),1),k[4]||(k[4]=Z(":",-1))]),n("span",{class:"comm-content",title:s.minionData.last_comm.content||""},w(P(s.minionData.last_comm)),9,nb)])):(c(),d("div",ob," No activity yet "))]),n("div",ib,[n("button",{class:"btn btn-sm btn-outline-secondary me-1",title:"Edit minion",onClick:he(A,["stop"])}," âœï¸ "),n("button",{class:"btn btn-sm btn-outline-secondary",title:"Manage minion",onClick:he(V,["stop"])}," âš™ï¸ ")])])],2)),g.value?(c(),d("div",ab,[(c(!0),d(re,null,ue(s.minionData.children,U=>(c(),$e(q,{key:U.id,"minion-data":U,level:s.level+1,layout:s.layout,onMinionClick:k[0]||(k[0]=I=>S.$emit("minion-click",I))},null,8,["minion-data","level","layout"]))),128))])):M("",!0)],4)):(c(),d("div",rb," âš  Minion data is missing "))}}},vi=se(lb,[["__scopeId","data-v-5dae8a96"]]),cb={class:"project-overview d-flex flex-column h-100"},ub={class:"project-overview-header border-bottom p-3"},db={class:"d-flex align-items-center justify-content-between"},mb={class:"mb-1"},pb={key:0,class:"me-2"},fb={class:"text-muted font-monospace"},vb={class:"d-flex gap-2"},hb=["title"],_b={class:"project-overview-content flex-grow-1 overflow-auto p-3"},gb={key:0,class:"text-center py-5"},bb={key:1,class:"alert alert-danger"},yb={key:2,class:"text-center py-5"},$b={key:3},wb={class:"row g-3 mb-4"},Eb={class:"col-md-4"},Sb={class:"card h-100"},Cb={class:"card-body"},kb={class:"card-title mb-0"},Tb={class:"text-muted"},xb={class:"col-md-4"},Ab={class:"card h-100"},Ob={class:"card-body"},Mb={class:"card-title mb-0"},Db={class:"text-muted"},Nb={key:0,class:"card mb-4"},Lb={class:"card mb-4"},Ib={class:"card-header d-flex align-items-center justify-content-between"},jb={class:"mb-0"},Pb={class:"badge bg-secondary"},Rb={class:"card-body"},Wb={key:0,class:"text-center py-4"},Hb={key:1,class:"text-center text-muted py-4"},Vb={key:2,class:"hierarchy-tree"},Fb={class:"user-root-node mb-3 border rounded bg-white"},Bb={class:"node-row"},qb={class:"node-left"},Ub={class:"badge bg-primary ms-2"},zb={class:"node-right"},Kb={key:0,class:"last-comm-preview"},Gb={class:"comm-direction"},Yb=["title"],Jb={key:1,class:"text-muted fst-italic"},Qb={class:"root-minions ms-4"},Xb={class:"card"},Zb={class:"card-body"},ey={class:"row mb-0"},ty={class:"col-sm-8 font-monospace text-break"},sy={class:"col-sm-8 font-monospace text-break"},ny={class:"col-sm-8"},oy={class:"project-overview-statusbar border-top p-2 bg-light d-flex align-items-center justify-content-between"},iy={class:"text-muted"},ay={__name:"ProjectOverview",props:{projectId:{type:String,required:!0}},setup(s){const e=s,t=Rt(),o=Le(),i=de(),a=_e(),r=vs(),m=et(),p=j(!1),f=j(null),u=j(null),E=j(!1);let g=null;const $=v(()=>o.getProject(e.projectId)),b=v(()=>$.value?.session_ids?$.value.session_ids.map(R=>i.getSession(R)).filter(R=>R!=null):[]),h=v(()=>b.value.length>0),l=v(()=>b.value.length),_=v(()=>b.value.filter(R=>R.state==="ACTIVE").length),y=v(()=>{const R=b.value.some(O=>O.state==="ACTIVE"),F=b.value.some(O=>O.is_processing);return b.value.some(O=>O.state==="ERROR")?"Error":F?"Working":R?"Active":l.value>0?"Idle":"Empty"}),C=v(()=>{switch(y.value){case"Error":return"text-danger";case"Working":return"text-warning";case"Active":return"text-success";case"Idle":return"text-muted";default:return"text-secondary"}}),T=v(()=>{switch(y.value){case"Error":return"One or more sessions have errors";case"Working":return"Processing in progress";case"Active":return"Sessions are running";case"Idle":return"No active processing";default:return"No sessions created"}});async function P(){E.value=!0;try{const R=await ce.get(`/api/legions/${e.projectId}/hierarchy`);u.value=R}catch(R){console.error("Failed to load minion hierarchy:",R),u.value=null}finally{E.value=!1}}function W(R,F){if(R&&R.id===F)return R;if(R&&R.children)for(const x of R.children){const O=W(x,F);if(O)return O}return null}function A(R){return R.to_user?"User":R.to_minion_name?R.to_minion_name:"unknown"}function V(R){const F=R.summary||R.content||"";return F.length>150?F.substring(0,150)+"...":F}function S(R){if(u.value){if(R.from_minion_id){const F=W(u.value,R.from_minion_id);F&&F.type==="minion"&&(F.last_comm=R)}R.from_user&&u.value.type==="user"&&(u.value.last_comm=R)}}function k(R){t.push(`/session/${R}`)}function q(){t.push(`/timeline/${e.projectId}`)}function U(){a.showModal("edit-project",{project:$.value})}function I(){a.showModal("create-minion",{project:$.value})}return be(()=>{o.selectProject(e.projectId),i.currentSessionId=null,P(),r.setCurrentLegion(e.projectId),m.connectLegion(e.projectId),g=pe(()=>i.sessions,R=>{if(u.value){for(const[F,x]of R)if(x.project_id===e.projectId){const O=W(u.value,F);O&&O.type==="minion"&&(O.state!==x.state&&(O.state=x.state),O.is_processing!==x.is_processing&&(O.is_processing=x.is_processing),O.latest_message!==x.latest_message&&(O.latest_message=x.latest_message,O.latest_message_type=x.latest_message_type,O.latest_message_time=x.latest_message_time))}}},{deep:!0}),pe(()=>r.commsByLegion.get(e.projectId),R=>{if(R&&R.length>0){const F=R[R.length-1];S(F)}},{deep:!0}),pe(()=>o.projects.get(e.projectId)?.session_ids?.length||0,(R,F)=>{R!==F&&P()})}),pe(()=>e.projectId,R=>{o.selectProject(R),i.currentSessionId=null,P(),r.setCurrentLegion(R),m.connectLegion(R)}),Ce(()=>{g&&g()}),(R,F)=>(c(),d("div",cb,[n("div",ub,[n("div",db,[n("div",null,[n("h4",mb,[h.value?(c(),d("span",pb,"ðŸ›")):M("",!0),Z(" "+w($.value?.name||"Project Overview"),1)]),n("small",fb,w($.value?.working_directory),1)]),n("div",vb,[n("button",{class:"btn btn-sm btn-outline-secondary",title:"Edit project",onClick:U}," âœï¸ Edit "),n("button",{class:"btn btn-sm btn-outline-primary",title:h.value?"Create minion":"Add session",onClick:I}," âž• "+w(h.value?"Add Minion":"Add Session"),9,hb)])])]),n("div",_b,[p.value?(c(),d("div",gb,[...F[0]||(F[0]=[n("div",{class:"spinner-border",role:"status"},[n("span",{class:"visually-hidden"},"Loading...")],-1),n("p",{class:"text-muted mt-2"},"Loading project data...",-1)])])):f.value?(c(),d("div",bb,w(f.value),1)):$.value?(c(),d("div",$b,[n("div",wb,[n("div",Eb,[n("div",Sb,[n("div",Cb,[F[2]||(F[2]=n("h6",{class:"card-subtitle mb-2 text-muted"},"Sessions",-1)),n("h3",kb,w(l.value),1),n("small",Tb,w(_.value)+" active",1)])])]),n("div",xb,[n("div",Ab,[n("div",Ob,[F[3]||(F[3]=n("h6",{class:"card-subtitle mb-2 text-muted"},"Status",-1)),n("h3",Mb,[n("span",{class:X(C.value)},w(y.value),3)]),n("small",Db,w(T.value),1)])])])]),h.value?(c(),d("div",Nb,[F[4]||(F[4]=n("div",{class:"card-header"},[n("h5",{class:"mb-0"},"ðŸ› Legion Controls")],-1)),n("div",{class:"card-body"},[n("div",{class:"d-flex gap-2 flex-wrap"},[n("button",{class:"btn btn-outline-primary",onClick:q}," ðŸ“Š View Timeline ")])])])):M("",!0),n("div",Lb,[n("div",Ib,[n("h5",jb,"ðŸŒ³ "+w(h.value?"Minion Hierarchy":"Sessions"),1),n("span",Pb,w(b.value.length),1)]),n("div",Rb,[E.value?(c(),d("div",Wb,[...F[5]||(F[5]=[n("div",{class:"spinner-border spinner-border-sm",role:"status"},[n("span",{class:"visually-hidden"},"Loading...")],-1),n("p",{class:"text-muted mt-2 mb-0"},"Loading hierarchy...",-1)])])):!u.value||!u.value.children||u.value.children.length===0?(c(),d("div",Hb,' No sessions yet. Click "Add Session" to create one. ')):(c(),d("div",Vb,[n("div",Fb,[n("div",Bb,[n("div",qb,[F[6]||(F[6]=n("span",{class:"me-2",style:{"font-size":"1.2rem"}},"ðŸ‘¤",-1)),n("strong",null,w(u.value.name),1),n("span",Ub,w(u.value.children.length)+" "+w(u.value.children.length===1?"minion":"minions"),1)]),n("div",zb,[u.value.last_comm?(c(),d("div",Kb,[n("span",Gb,[F[7]||(F[7]=Z(" â†’ ",-1)),n("strong",null,w(A(u.value.last_comm)),1),F[8]||(F[8]=Z(": ",-1))]),n("span",{class:"comm-content",title:u.value.last_comm.content||""},w(V(u.value.last_comm)),9,Yb)])):(c(),d("div",Jb," No communications yet "))])])]),n("div",Qb,[(c(!0),d(re,null,ue(u.value.children,x=>(c(),$e(vi,{key:x.id,"minion-data":x,level:1,layout:"two-column",onMinionClick:k},null,8,["minion-data"]))),128))])]))])]),n("div",Xb,[F[12]||(F[12]=n("div",{class:"card-header"},[n("h5",{class:"mb-0"},"Configuration")],-1)),n("div",Zb,[n("dl",ey,[F[9]||(F[9]=n("dt",{class:"col-sm-4"},"Working Directory",-1)),n("dd",ty,w($.value.working_directory),1),F[10]||(F[10]=n("dt",{class:"col-sm-4"},"Project ID",-1)),n("dd",sy,w($.value.project_id),1),F[11]||(F[11]=n("dt",{class:"col-sm-4"},"Legion Mode",-1)),n("dd",ny,w(h.value?"Yes (has minions)":"No"),1)])])])])):(c(),d("div",yb,[...F[1]||(F[1]=[n("h5",{class:"text-muted"},"Project not found",-1),n("p",{class:"text-secondary"},"The requested project does not exist.",-1)])]))]),n("div",oy,[F[13]||(F[13]=n("small",{class:"text-muted"}," Project Overview ",-1)),n("small",iy,w(l.value)+" session"+w(l.value!==1?"s":""),1)])]))}},ry=se(ay,[["__scopeId","data-v-168bf04c"]]),ly=[{path:"/",name:"home",component:Si},{path:"/project/:projectId",name:"project",component:ry,props:!0},{path:"/session/:sessionId",name:"session",component:V_,props:!0},{path:"/timeline/:legionId",name:"timeline",component:Ng,props:!0}],cy=_i({history:gi(),routes:ly}),uy={class:"connection-indicators"},dy=["title"],my=["title"],py=["title"],fy={__name:"ConnectionIndicator",setup(s){const e=et();function t(i){const a={ui:{connected:e.uiConnected,retryCount:e.uiRetryCount},session:{connected:e.sessionConnected,retryCount:e.sessionRetryCount},legion:{connected:e.legionConnected,retryCount:e.legionRetryCount}},{connected:r,retryCount:m}=a[i];return m>0&&!r?"indicator-connecting":r?"indicator-connected":"indicator-disconnected"}function o(i){const a={ui:"UI WebSocket",session:"Session WebSocket",legion:"Legion WebSocket"},r={ui:"Global UI state updates",session:"Session message streaming",legion:"Multi-agent communications"},m={ui:{connected:e.uiConnected,retryCount:e.uiRetryCount},session:{connected:e.sessionConnected,retryCount:e.sessionRetryCount},legion:{connected:e.legionConnected,retryCount:e.legionRetryCount}},{connected:p,retryCount:f}=m[i];let u="Disconnected";return p?u="Connected":f>0&&(u=`Reconnecting (attempt ${f})`),`${a[i]}
${r[i]}
Status: ${u}`}return(i,a)=>(c(),d("div",uy,[n("div",{class:X(["indicator",t("ui")]),title:o("ui")}," ðŸŒ ",10,dy),n("div",{class:X(["indicator",t("session")]),title:o("session")}," ðŸ’¬ ",10,my),n("div",{class:X(["indicator",t("legion")]),title:o("legion")}," ðŸ‘¥ ",10,py)]))}},vy=se(fy,[["__scopeId","data-v-d35b07c8"]]),hy={class:"bg-white border-bottom shadow-sm d-flex justify-content-between align-items-center px-3 py-2"},_y={class:"d-flex align-items-center gap-2"},gy={__name:"AppHeader",setup(s){const e=_e();function t(){e.toggleSidebar()}return(o,i)=>(c(),d("header",hy,[n("div",{class:"d-flex align-items-center gap-2"},[n("button",{id:"sidebar-toggle-btn",class:"btn btn-sm btn-outline-secondary",title:"Toggle sidebar",onClick:t},[...i[0]||(i[0]=[n("span",null,"â˜°",-1)])]),i[1]||(i[1]=n("h1",{class:"mb-0 fs-4"},"Claude Code WebUI",-1))]),n("div",_y,[fe(vy)])]))}},by={class:"progress project-status-line",style:{height:"4px","border-radius":"0"}},yy={key:0,class:"progress-bar bg-secondary",style:{width:"100%"}},$y=["title"],wy={__name:"ProjectStatusLine",props:{project:{type:Object,required:!0},sessions:{type:Array,default:()=>[]}},setup(s){const e=s,t=v(()=>!e.sessions||e.sessions.length===0?"100%":`${100/e.sessions.length}%`);function o(m){return m.state==="paused"&&m.is_processing?"pending-prompt":m.is_processing?"processing":m.state}function i(m){const p=o(m);return{created:"#d3d3d3",starting:"#90ee90",active:"#90ee90",running:"#90ee90",processing:"#dda0dd",paused:"#d3d3d3","pending-prompt":"#ffc107",terminated:"#d3d3d3",error:"#ffb3b3",failed:"#ffb3b3"}[p]||"#d3d3d3"}function a(m){const p=o(m);return p==="starting"||p==="processing"||p==="pending-prompt"}function r(m){const p=o(m),f=p.charAt(0).toUpperCase()+p.slice(1),u=m.name||"Unnamed Session",E=m.role?` (${m.role})`:"";return`${u}${E}: ${f}`}return(m,p)=>(c(),d("div",by,[!s.sessions||s.sessions.length===0?(c(),d("div",yy)):(c(!0),d(re,{key:1},ue(s.sessions,f=>(c(),d("div",{key:f.session_id,class:X(["progress-bar",{"progress-bar-striped progress-bar-animated":a(f)}]),style:bt({width:t.value,backgroundColor:i(f),cursor:"help"}),title:r(f)},null,14,$y))),128))]))}},Ey=se(wy,[["__scopeId","data-v-391d77c1"]]),Sy=["data-project-id"],Cy=["id"],ky=["aria-expanded","aria-controls","aria-label","onKeydown"],Ty=["aria-label","onKeydown"],xy={class:"d-flex align-items-center mb-1",style:{gap:"0.5rem"}},Ay={class:"fw-semibold",style:{"flex-shrink":"0"}},Oy={key:0,class:"legion-icon",style:{"font-size":"1rem","margin-right":"0.25rem"}},My={class:"d-flex gap-1 ms-auto",style:{"flex-shrink":"0"}},Dy=["title"],Ny=["title"],Ly=["id","aria-labelledby"],Iy={class:"accordion-body p-0"},jy={class:"list-group list-group-flush"},Py={class:"minion-hierarchy-container"},Ry={key:0,class:"text-center py-2"},Wy={key:2,class:"text-muted text-center py-2 small"},Hy={__name:"ProjectItem",props:{project:{type:Object,required:!0}},setup(s){const e=s,t=Rt(),o=Le(),i=de(),a=_e(),r=j(e.project.is_expanded||!1),m=j(null),p=j(!1);let f=null;const u=v(()=>o.formatPath(e.project.working_directory)),E=v(()=>!e.project?.session_ids||e.project.session_ids.length===0?[]:e.project.session_ids.map(I=>i.getSession(I)).filter(I=>I!=null)),g=v(()=>E.value.length>0),$=v(()=>{const I=t.currentRoute.value;return I.name==="timeline"&&I.params.legionId===e.project.project_id}),b=v(()=>{const I=t.currentRoute.value;return I.name==="project"&&I.params.projectId===e.project.project_id});function h(I){const R=window.bootstrap;if(!R)return;const F=document.getElementById(`collapse-${e.project.project_id}`);if(!F)return;R.Collapse.getOrCreateInstance(F).toggle(),r.value=!r.value}function l(){o.selectProject(e.project.project_id),t.push(`/project/${e.project.project_id}`)}function _(){r.value||(o.toggleExpansion(e.project.project_id),r.value=!0)}function y(){if(r.value){o.toggleExpansion(e.project.project_id),r.value=!1;const I=i.currentSessionId;I&&i.getSession(I)&&e.project.session_ids?.includes(I)&&t.push("/"),o.currentProjectId===e.project.project_id&&t.push("/")}}function C(){a.showModal("edit-project",{project:e.project})}function T(){a.showModal("create-minion",{project:e.project})}function P(){t.push(`/timeline/${e.project.project_id}`)}async function W(){p.value=!0;try{const I=await ce.get(`/api/legions/${e.project.project_id}/hierarchy`);m.value=I}catch(I){console.error("Failed to load minion hierarchy:",I),m.value=null}finally{p.value=!1}}function A(I){t.push(`/session/${I}`)}function V(I,R){if(I&&I.id===R)return I;if(I&&I.children)for(const F of I.children){const x=V(F,R);if(x)return x}return null}pe(r,I=>{I&&W()}),be(()=>{f=pe(()=>i.sessions,I=>{if(!(!m.value||!r.value)){for(const[R,F]of I)if(F.project_id===e.project.project_id){const x=V(m.value,R);x&&x.type==="minion"&&(x.state!==F.state&&(x.state=F.state),x.is_processing!==F.is_processing&&(x.is_processing=F.is_processing),x.latest_message!==F.latest_message&&(x.latest_message=F.latest_message,x.latest_message_type=F.latest_message_type,x.latest_message_time=F.latest_message_time))}}},{deep:!0}),pe(()=>i.sessions.size,(I,R)=>{if(r.value&&(I>R&&Array.from(i.sessions.values()).some(O=>O.project_id===e.project.project_id&&(!m.value||!V(m.value,O.session_id)))&&(console.log("New minion detected, reloading hierarchy"),W()),I<R&&m.value)){const F=i.sessions,x=O=>O.type==="minion"&&!F.has(O.id)?!0:O.children?O.children.some(z=>x(z)):!1;x(m.value)&&(console.log("Minion deletion detected, reloading hierarchy"),W())}}),r.value&&W()}),Ce(()=>{f&&f()});function S(I){I.dataTransfer.effectAllowed="move",I.dataTransfer.setData("application/project-id",e.project.project_id),I.dataTransfer.setData("text/plain",e.project.project_id),I.target.classList.add("dragging")}function k(I){I.target.classList.remove("dragging")}function q(I){I.preventDefault(),I.dataTransfer.dropEffect="move";const R=I.currentTarget.getBoundingClientRect(),F=R.top+R.height/2;I.clientY<F?(I.currentTarget.classList.add("drop-above"),I.currentTarget.classList.remove("drop-below")):(I.currentTarget.classList.add("drop-below"),I.currentTarget.classList.remove("drop-above"))}function U(I){I.preventDefault(),I.currentTarget.classList.remove("drop-above","drop-below");const R=I.dataTransfer.getData("application/project-id")||I.dataTransfer.getData("text/plain");if(!R||R===e.project.project_id)return;const F=I.currentTarget.getBoundingClientRect(),x=F.top+F.height/2,O=I.clientY<x,z=o.orderedProjects,L=z.findIndex(ae=>ae.project_id===e.project.project_id),D=z.findIndex(ae=>ae.project_id===R);if(L===-1||D===-1)return;const G=[...z],[ie]=G.splice(D,1);let J=O?L:L+1;D<L&&J--,G.splice(J,0,ie);const Q=G.map(ae=>ae.project_id);o.reorderProjects(Q)}return(I,R)=>(c(),d("div",{class:"accordion-item border rounded mb-2","data-project-id":s.project.project_id,draggable:"true",onDragstart:S,onDragend:k,onDragover:q,onDrop:U},[n("h2",{class:"accordion-header",id:`heading-${s.project.project_id}`},[n("div",{class:X(["accordion-button bg-white p-2 project-header-split",{collapsed:!r.value,"project-selected":b.value}])},[n("button",{class:"chevron-toggle btn btn-link p-0 me-2",type:"button","aria-expanded":r.value,"aria-controls":`collapse-${s.project.project_id}`,"aria-label":r.value?"Collapse session list":"Expand session list",onClick:he(h,["stop"]),onKeydown:[We(he(h,["prevent"]),["enter"]),We(he(h,["prevent"]),["space"])]},[(c(),d("svg",{class:X(["chevron-icon",{expanded:r.value}]),width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor"},[...R[0]||(R[0]=[n("path",{d:"M4.5 2L8.5 6L4.5 10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",fill:"none"},null,-1)])],2))],40,ky),n("div",{class:"flex-grow-1 d-flex flex-column project-name-area",style:{"min-width":"0",cursor:"pointer"},role:"button",tabindex:"0","aria-label":`View ${s.project.name} overview`,onClick:l,onKeydown:[We(he(l,["prevent"]),["enter"]),We(he(l,["prevent"]),["space"])]},[n("div",xy,[n("div",Ay,[g.value?(c(),d("span",Oy,"ðŸ›")):M("",!0),Z(" "+w(s.project.name),1)]),n("div",My,[n("button",{class:"btn btn-sm btn-outline-secondary",title:"Edit or delete project",type:"button",onClick:he(C,["stop"])}," âœï¸ "),n("button",{class:"btn btn-sm btn-outline-primary",title:g.value?"Create minion":"Add session or minion",type:"button",onClick:he(T,["stop"])}," âž• ",8,Dy)])]),n("small",{class:"text-muted font-monospace",title:s.project.working_directory,style:{display:"block","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","min-width":"0"}},w(u.value),9,Ny)],40,Ty)],2)],8,Cy),fe(Ey,{project:s.project,sessions:E.value},null,8,["project","sessions"]),n("div",{id:`collapse-${s.project.project_id}`,class:X(["accordion-collapse collapse",{show:r.value}]),"aria-labelledby":`heading-${s.project.project_id}`,onShown:_,onHidden:y},[n("div",Iy,[n("div",jy,[g.value?(c(),d("div",{key:0,class:X(["list-group-item list-group-item-action timeline-item d-flex align-items-center p-2",{active:$.value}]),style:{cursor:"pointer"},onClick:P},[...R[1]||(R[1]=[n("div",{class:"flex-grow-1"},[n("span",{style:{"font-size":"1rem","margin-right":"0.5rem"}},"ðŸ“Š"),n("span",{class:"fw-semibold"},"Timeline"),n("small",{class:"text-muted ms-2"},"(Comms)")],-1)])],2)):M("",!0),n("div",Py,[p.value?(c(),d("div",Ry,[...R[2]||(R[2]=[n("div",{class:"spinner-border spinner-border-sm",role:"status"},[n("span",{class:"visually-hidden"},"Loading...")],-1)])])):m.value&&m.value.children&&m.value.children.length>0?(c(!0),d(re,{key:1},ue(m.value.children,F=>(c(),$e(vi,{key:F.id,"minion-data":F,level:0,layout:"sidebar",onMinionClick:A},null,8,["minion-data"]))),128)):(c(),d("div",Wy," No sessions "))])])])],42,Ly)],40,Sy))}},Vy=se(Hy,[["__scopeId","data-v-a15b34e8"]]),Fy={class:"project-list"},By={key:0,class:"text-muted text-center py-3"},qy={__name:"ProjectList",setup(s){const e=Le(),t=v(()=>e.orderedProjects);return(o,i)=>(c(),d("div",Fy,[t.value.length===0?(c(),d("div",By,' No projects yet. Click "New" to create one. ')):M("",!0),(c(!0),d(re,null,ue(t.value,a=>(c(),$e(Vy,{key:a.project_id,project:a},null,8,["project"]))),128))]))}},Uy={class:"flex-grow-1 overflow-auto p-3"},zy={id:"sessions-container"},Ky={__name:"Sidebar",setup(s){const e=_e(),t=v(()=>e.sidebarCollapsed),o=v(()=>e.isMobile),i=v(()=>{if(o.value)return{};const u=`${e.sidebarWidth}px`;return{width:u,minWidth:"200px",maxWidth:"30vw","--sidebar-width":u}});function a(){e.showModal("create-project")}const r=j(!1);function m(u){r.value=!0,document.addEventListener("mousemove",p),document.addEventListener("mouseup",f)}function p(u){r.value&&e.setSidebarWidth(u.clientX)}function f(){r.value=!1,document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",f)}return(u,E)=>(c(),d("aside",{id:"sidebar",class:X(["col-auto bg-light border-end d-flex flex-column overflow-auto",{collapsed:t.value,"mobile-open":!t.value&&o.value,"desktop-collapsed":t.value&&!o.value}]),style:bt(i.value)},[n("div",Uy,[n("div",{class:"d-flex justify-content-between align-items-center mb-3"},[E[0]||(E[0]=n("h6",{class:"text-muted mb-0"},"Projects",-1)),n("button",{id:"create-project-btn",class:"btn btn-sm btn-outline-primary",title:"New Project",onClick:a}," ðŸ“ New ")]),n("div",zy,[fe(qy)])]),n("div",{class:"sidebar-resize-handle",onMousedown:m},null,32)],6))}},Gy=se(Ky,[["__scopeId","data-v-d792f0f0"]]),Yy={class:"modal-dialog modal-lg"},Jy={class:"modal-content"},Qy={class:"modal-body"},Xy={class:"mb-3"},Zy={class:"input-group"},e$=["disabled"],t$={key:0,class:"text-center py-4"},s$={key:1,class:"alert alert-danger",role:"alert"},n$={key:2,class:"folder-list"},o$=["onClick","onDblclick"],i$={class:"d-flex align-items-center flex-grow-1"},a$=["onClick"],r$={key:1,class:"text-center text-muted py-3"},l$={class:"modal-footer"},c$=["disabled"],u$={__name:"FolderBrowserModal",setup(s){const e=_e(),t=j(""),o=j(""),i=j([]),a=j(!1),r=j(""),m=j(null);let p=null,f=null;const u=v(()=>{if(!t.value)return null;const C=t.value.split(/[\\/]/).filter(Boolean);return C.length<=1?null:(C.pop(),C.length>0?"/"+C.join("/"):"/")});function E(C){if(!C)return"";const T=C.split(/[\\/]/).filter(Boolean);return T.length<=2?C:".../"+T.slice(-2).join("/")}async function g(){a.value=!0,r.value="",i.value=[],o.value="";try{const C=t.value?{path:t.value}:{},T=await ce.get("/api/filesystem/browse",{params:C});T.current_path&&(t.value=T.current_path),i.value=T.directories||[]}catch(C){console.error("Failed to load directory:",C),r.value=C.message||"Failed to load directory"}finally{a.value=!1}}function $(C){o.value=C.path}function b(C){t.value=C.path,o.value="",g()}function h(){u.value&&(t.value=u.value,o.value="",g())}function l(){const C=o.value||t.value;C&&f&&f(C),p&&p.hide()}function _(){g()}function y(){i.value=[],o.value="",r.value="",f=null,e.hideModal()}return pe(()=>e.currentModal,C=>{if(C?.name==="folder-browser"&&p){const T=C.data||{};t.value=T.defaultPath||T.currentPath||"",f=T.onSelect||null,p.show()}}),be(()=>{m.value&&Oe(async()=>{const{default:C}=await import("./modal-D6mKceGM.js").then(T=>T.m);return{default:C}},__vite__mapDeps([0,1])).then(({default:C})=>{p=new C(m.value),m.value.addEventListener("shown.bs.modal",_),m.value.addEventListener("hidden.bs.modal",y)})}),Ce(()=>{m.value&&(m.value.removeEventListener("shown.bs.modal",_),m.value.removeEventListener("hidden.bs.modal",y)),p&&p.dispose()}),(C,T)=>(c(),d("div",{class:"modal fade folder-browser-modal",id:"folderBrowserModal",tabindex:"-1","aria-labelledby":"folderBrowserModalLabel","aria-hidden":"true",ref_key:"modalElement",ref:m},[n("div",Yy,[n("div",Jy,[T[6]||(T[6]=n("div",{class:"modal-header"},[n("h5",{class:"modal-title",id:"folderBrowserModalLabel"},"Browse Folders"),n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),n("div",Qy,[n("div",Xy,[T[1]||(T[1]=n("label",{class:"form-label"},"Current Path:",-1)),n("div",Zy,[ge(n("input",{type:"text",class:"form-control","onUpdate:modelValue":T[0]||(T[0]=P=>t.value=P),onKeyup:We(g,["enter"]),placeholder:"Enter or select a directory path"},null,544),[[He,t.value]]),n("button",{class:"btn btn-outline-secondary",onClick:g,disabled:a.value}," ðŸ”„ Refresh ",8,e$)])]),a.value?(c(),d("div",t$,[...T[2]||(T[2]=[n("div",{class:"spinner-border",role:"status"},[n("span",{class:"visually-hidden"},"Loading...")],-1)])])):r.value?(c(),d("div",s$,w(r.value),1)):(c(),d("div",n$,[u.value?(c(),d("div",{key:0,class:"folder-item d-flex align-items-center p-2 border-bottom",onClick:h,role:"button"},[...T[3]||(T[3]=[n("span",{class:"me-2 text-secondary"},"â¬†ï¸",-1),n("span",{class:"text-secondary"},"..",-1)])])):M("",!0),(c(!0),d(re,null,ue(i.value,P=>(c(),d("div",{key:P.path,class:X(["folder-item d-flex align-items-center justify-content-between p-2 border-bottom",{selected:P.path===o.value}]),onClick:W=>$(P),onDblclick:W=>b(P),role:"button"},[n("div",i$,[T[4]||(T[4]=n("span",{class:"me-2"},"ðŸ“",-1)),n("span",null,w(P.name),1)]),n("button",{class:"btn btn-sm btn-outline-primary",onClick:he(W=>b(P),["stop"])}," Open ",8,a$)],42,o$))),128)),i.value.length===0?(c(),d("div",r$," No subdirectories found ")):M("",!0)]))]),n("div",l$,[T[5]||(T[5]=n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),n("button",{type:"button",class:"btn btn-primary",onClick:l,disabled:!o.value},' Select "'+w(E(o.value||t.value))+'" ',9,c$)])])])],512))}},d$=se(u$,[["__scopeId","data-v-0d61ed46"]]),m$={class:"modal-dialog"},p$={class:"modal-content"},f$={class:"modal-body"},v$={class:"mb-3"},h$={key:0,class:"invalid-feedback"},_$={class:"mb-3"},g$={class:"input-group"},b$={key:0,class:"invalid-feedback"},y$={class:"mb-3 form-check"},$$={key:0,class:"mb-3 ms-4"},w$={key:1,class:"alert alert-danger",role:"alert"},E$={class:"modal-footer"},S$=["disabled"],C$={key:0,class:"spinner-border spinner-border-sm me-2"},k$={__name:"ProjectCreateModal",setup(s){const e=Le(),t=de(),o=_e(),i=j({name:"",workingDirectory:"",createSession:!0,sessionName:"main"}),a=j({name:"",workingDirectory:""}),r=j(!1),m=j(""),p=j(null);let f=null;function u(){o.showModal("folder-browser",{currentPath:i.value.workingDirectory||"",onSelect:l=>{i.value.workingDirectory=l,a.value.workingDirectory=""}})}function E(){a.value={};let l=!0;return i.value.name.trim()||(a.value.name="Project name is required",l=!1),i.value.workingDirectory.trim()||(a.value.workingDirectory="Working directory is required",l=!1),l}async function g(){if(E()){r.value=!0,m.value="";try{const l=await e.createProject(i.value.name,i.value.workingDirectory);i.value.createSession&&await t.createSession(l.project_id,{name:i.value.sessionName||"main",permission_mode:"default",tools:[],model:"sonnet"}),f&&f.hide(),$()}catch(l){console.error("Failed to create project:",l),m.value=l.message||"Failed to create project. Please try again."}finally{r.value=!1}}}function $(){i.value={name:"",workingDirectory:"",createSession:!0,sessionName:"main"},a.value={},m.value=""}function b(){const l=document.getElementById("projectName");l&&l.focus()}function h(){$(),o.hideModal()}return pe(()=>o.currentModal,l=>{l?.name==="create-project"&&f&&f.show()}),be(()=>{p.value&&Oe(async()=>{const{default:l}=await import("./modal-D6mKceGM.js").then(_=>_.m);return{default:l}},__vite__mapDeps([0,1])).then(({default:l})=>{f=new l(p.value),p.value.addEventListener("shown.bs.modal",b),p.value.addEventListener("hidden.bs.modal",h)})}),Ce(()=>{p.value&&(p.value.removeEventListener("shown.bs.modal",b),p.value.removeEventListener("hidden.bs.modal",h)),f&&f.dispose()}),(l,_)=>(c(),d("div",{class:"modal fade",id:"createProjectModal",tabindex:"-1","aria-labelledby":"createProjectModalLabel","aria-hidden":"true",ref_key:"modalElement",ref:p},[n("div",m$,[n("div",p$,[_[11]||(_[11]=n("div",{class:"modal-header"},[n("h5",{class:"modal-title",id:"createProjectModalLabel"},"Create New Project"),n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),n("div",f$,[n("form",{onSubmit:he(g,["prevent"])},[n("div",v$,[_[4]||(_[4]=n("label",{for:"projectName",class:"form-label"},"Project Name",-1)),ge(n("input",{type:"text",class:X(["form-control",{"is-invalid":a.value.name}]),id:"projectName","onUpdate:modelValue":_[0]||(_[0]=y=>i.value.name=y),placeholder:"My Project",required:""},null,2),[[He,i.value.name]]),a.value.name?(c(),d("div",h$,w(a.value.name),1)):M("",!0)]),n("div",_$,[_[5]||(_[5]=n("label",{for:"workingDirectory",class:"form-label"},"Working Directory",-1)),n("div",g$,[ge(n("input",{type:"text",class:X(["form-control",{"is-invalid":a.value.workingDirectory}]),id:"workingDirectory","onUpdate:modelValue":_[1]||(_[1]=y=>i.value.workingDirectory=y),placeholder:"/path/to/project",required:""},null,2),[[He,i.value.workingDirectory]]),n("button",{class:"btn btn-outline-secondary",type:"button",onClick:u}," Browse... "),a.value.workingDirectory?(c(),d("div",b$,w(a.value.workingDirectory),1)):M("",!0)]),_[6]||(_[6]=n("div",{class:"form-text"}," The project's working directory (cannot be changed after creation) ",-1))]),n("div",y$,[ge(n("input",{type:"checkbox",class:"form-check-input",id:"createSession","onUpdate:modelValue":_[2]||(_[2]=y=>i.value.createSession=y)},null,512),[[bi,i.value.createSession]]),_[7]||(_[7]=n("label",{class:"form-check-label",for:"createSession"}," Create initial session ",-1)),_[8]||(_[8]=n("div",{class:"form-text"}," You can add minions later from the project sidebar ",-1))]),i.value.createSession?(c(),d("div",$$,[_[9]||(_[9]=n("label",{for:"sessionName",class:"form-label"}," Initial Session Name ",-1)),ge(n("input",{type:"text",class:"form-control",id:"sessionName","onUpdate:modelValue":_[3]||(_[3]=y=>i.value.sessionName=y),placeholder:"main"},null,512),[[He,i.value.sessionName]])])):M("",!0),m.value?(c(),d("div",w$,w(m.value),1)):M("",!0)],32)]),n("div",E$,[_[10]||(_[10]=n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),n("button",{type:"button",class:"btn btn-primary",onClick:g,disabled:r.value},[r.value?(c(),d("span",C$)):M("",!0),Z(" "+w(r.value?"Creating...":"Create Project"),1)],8,S$)])])])],512))}},T$=se(k$,[["__scopeId","data-v-ea55fdae"]]),x$={class:"modal-dialog"},A$={class:"modal-content"},O$={class:"modal-body"},M$={class:"mb-3"},D$={key:0,class:"invalid-feedback"},N$={class:"mb-3"},L$=["value"],I$={key:0,class:"alert alert-danger",role:"alert"},j$={class:"danger-zone"},P$={class:"text-muted small"},R$=["disabled"],W$={key:0,class:"alert alert-warning mt-3",role:"alert"},H$={class:"mb-2"},V$={class:"d-flex gap-2"},F$=["disabled"],B$={key:0,class:"spinner-border spinner-border-sm me-2"},q$=["disabled"],U$={class:"modal-footer"},z$=["disabled"],K$={key:0,class:"spinner-border spinner-border-sm me-2"},G$={__name:"ProjectEditModal",setup(s){const e=Le(),t=_e(),o=j(null),i=j({name:""}),a=j({name:""}),r=j(!1),m=j(!1),p=j(""),f=j(!1),u=j(null);let E=null;const g=v(()=>o.value?.session_ids?.length||0);function $(){a.value={};let C=!0;return i.value.name.trim()||(a.value.name="Project name is required",C=!1),C}async function b(){if(!(!$()||!o.value)){r.value=!0,p.value="";try{await e.updateProject(o.value.project_id,{name:i.value.name}),E&&E.hide()}catch(C){console.error("Failed to update project:",C),p.value=C.message||"Failed to update project. Please try again."}finally{r.value=!1}}}async function h(){if(o.value){m.value=!0,p.value="";try{await e.deleteProject(o.value.project_id),E&&E.hide()}catch(C){console.error("Failed to delete project:",C),p.value=C.message||"Failed to delete project. Please try again."}finally{m.value=!1}}}function l(){i.value={name:""},a.value={},p.value="",f.value=!1}function _(){const C=document.getElementById("editProjectName");C&&(C.focus(),C.select())}function y(){l(),o.value=null,t.hideModal()}return pe(()=>t.currentModal,C=>{if(C?.name==="edit-project"&&E){const T=C.data||{};o.value=T.project,o.value&&(i.value.name=o.value.name),E.show()}}),be(()=>{u.value&&Oe(async()=>{const{default:C}=await import("./modal-D6mKceGM.js").then(T=>T.m);return{default:C}},__vite__mapDeps([0,1])).then(({default:C})=>{E=new C(u.value),u.value.addEventListener("shown.bs.modal",_),u.value.addEventListener("hidden.bs.modal",y)})}),Ce(()=>{u.value&&(u.value.removeEventListener("shown.bs.modal",_),u.value.removeEventListener("hidden.bs.modal",y)),E&&E.dispose()}),(C,T)=>(c(),d("div",{class:"modal fade",id:"editProjectModal",tabindex:"-1","aria-labelledby":"editProjectModalLabel","aria-hidden":"true",ref_key:"modalElement",ref:u},[n("div",x$,[n("div",A$,[T[10]||(T[10]=n("div",{class:"modal-header"},[n("h5",{class:"modal-title",id:"editProjectModalLabel"},"Edit Project"),n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),n("div",O$,[n("form",{onSubmit:he(b,["prevent"])},[n("div",M$,[T[3]||(T[3]=n("label",{for:"editProjectName",class:"form-label"},"Project Name",-1)),ge(n("input",{type:"text",class:X(["form-control",{"is-invalid":a.value.name}]),id:"editProjectName","onUpdate:modelValue":T[0]||(T[0]=P=>i.value.name=P),placeholder:"My Project",required:""},null,2),[[He,i.value.name]]),a.value.name?(c(),d("div",D$,w(a.value.name),1)):M("",!0)]),n("div",N$,[T[4]||(T[4]=n("label",{class:"form-label"},"Working Directory",-1)),n("input",{type:"text",class:"form-control",value:o.value?.working_directory,disabled:"",readonly:""},null,8,L$),T[5]||(T[5]=n("div",{class:"form-text text-muted"}," Working directory cannot be changed after creation ",-1))]),p.value?(c(),d("div",I$,w(p.value),1)):M("",!0)],32),T[8]||(T[8]=n("hr",null,null,-1)),n("div",j$,[T[6]||(T[6]=n("h6",{class:"text-danger"},"Danger Zone",-1)),n("p",P$," Deleting this project will also delete all "+w(g.value)+" session(s) and their data. This action cannot be undone. ",1),n("button",{type:"button",class:"btn btn-outline-danger",onClick:T[1]||(T[1]=P=>f.value=!0),disabled:m.value}," ðŸ—‘ï¸ Delete Project ",8,R$)]),f.value?(c(),d("div",W$,[T[7]||(T[7]=n("strong",null,"Are you sure?",-1)),n("p",H$,' This will permanently delete the project "'+w(o.value?.name)+'" and all '+w(g.value)+" session(s). ",1),n("div",V$,[n("button",{type:"button",class:"btn btn-danger btn-sm",onClick:h,disabled:m.value},[m.value?(c(),d("span",B$)):M("",!0),Z(" "+w(m.value?"Deleting...":"Yes, Delete Permanently"),1)],8,F$),n("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:T[2]||(T[2]=P=>f.value=!1),disabled:m.value}," Cancel ",8,q$)])])):M("",!0)]),n("div",U$,[T[9]||(T[9]=n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),n("button",{type:"button",class:"btn btn-primary",onClick:b,disabled:r.value},[r.value?(c(),d("span",K$)):M("",!0),Z(" "+w(r.value?"Saving...":"Save Changes"),1)],8,z$)])])])],512))}},Y$=se(G$,[["__scopeId","data-v-52679516"]]),J$={class:"general-tab"},Q$={key:0,class:"mb-3"},X$={for:"template-select",class:"form-label"},Z$=["value"],ew=["value"],tw={key:0,class:"form-text"},sw={class:"mb-3"},nw={for:"config-name",class:"form-label"},ow=["value","placeholder","pattern","title"],iw={key:0,class:"invalid-feedback"},aw={key:1,class:"form-text"},rw={key:1,class:"mb-3"},lw=["value"],cw={class:"mb-3"},uw=["value"],dw={class:"form-text"},mw={key:0,class:"text-warning"},pw={key:1},fw={class:"mb-3"},vw={for:"config-permission-mode",class:"form-label"},hw={key:0,class:"field-indicator autofilled",title:"Auto-filled from template"},_w={key:1,class:"field-indicator modified",title:"Modified from template"},gw=["value","disabled"],bw={key:0,value:"bypassPermissions"},yw={class:"form-text"},$w={key:0,class:"text-warning"},ww={key:1},Ew={class:"mb-3"},Sw={for:"config-role",class:"form-label"},Cw={key:0,class:"field-indicator autofilled",title:"Auto-filled from template"},kw={key:1,class:"field-indicator modified",title:"Modified from template"},Tw=["value","placeholder"],xw={class:"form-text"},Aw={key:2,class:"mb-3"},Ow={class:"input-group"},Mw=["value","placeholder","disabled","readonly"],Dw={class:"form-text"},Nw={key:3,class:"mb-3"},Lw={class:"form-control-plaintext"},Iw={key:4,class:"mb-3 form-check"},jw=["checked"],Pw={__name:"GeneralTab",props:{mode:{type:String,required:!0},formData:{type:Object,required:!0},errors:{type:Object,required:!0},templates:{type:Array,default:()=>[]},selectedTemplateId:{type:String,default:null},session:{type:Object,default:null},fieldStates:{type:Object,default:()=>({default_role:"normal",permission_mode:"normal"})}},emits:["update:form-data","update:selected-template-id","open-folder-browser","open-template-manager"],setup(s){const e=s,t=v(()=>e.mode==="create-session"||e.mode==="edit-session"),o=v(()=>e.mode==="create-template"||e.mode==="edit-template"),i=v(()=>e.mode==="create-session"),a=v(()=>e.mode==="edit-session"),r=v(()=>e.session?.state==="active"||e.session?.state==="starting"),m=v(()=>{if(!e.session)return!1;const h=e.session.model||"sonnet";return e.formData.model!==h}),p=v(()=>e.session?.initial_permission_mode==="bypassPermissions"),f=v(()=>e.selectedTemplateId?e.templates.find(h=>h.template_id===e.selectedTemplateId):null),u={sonnet:{description:"Smart model for coding and complex agents - best balance of speed & capability"},opus:{description:"Most capable model for complex reasoning, advanced analysis, and sophisticated tasks"},haiku:{description:"Optimized for speed and cost-efficiency on straightforward tasks"},opusplan:{description:"Uses Opus for planning phase, Sonnet for execution - best of both worlds"}},E=v(()=>u[e.formData.model]||null),g=v(()=>({"field-autofilled":e.fieldStates.default_role==="autofilled","field-modified":e.fieldStates.default_role==="modified"})),$=v(()=>({"field-autofilled":e.fieldStates.permission_mode==="autofilled","field-modified":e.fieldStates.permission_mode==="modified"}));function b(h){return{created:"bg-secondary",starting:"bg-info",active:"bg-success",paused:"bg-warning",terminating:"bg-warning",terminated:"bg-secondary",error:"bg-danger"}[h]||"bg-secondary"}return(h,l)=>(c(),d("div",J$,[i.value?(c(),d("div",Q$,[n("label",X$,[l[10]||(l[10]=Z(" Template ",-1)),n("button",{type:"button",onClick:l[0]||(l[0]=_=>h.$emit("open-template-manager")),class:"btn btn-link btn-sm p-0 ms-2"}," Manage Templates ")]),n("select",{id:"template-select",value:s.selectedTemplateId,onChange:l[1]||(l[1]=_=>h.$emit("update:selected-template-id",_.target.value||null)),class:"form-select"},[l[11]||(l[11]=n("option",{value:null},"[None - Manual Configuration]",-1)),(c(!0),d(re,null,ue(s.templates,_=>(c(),d("option",{key:_.template_id,value:_.template_id},w(_.name),9,ew))),128))],40,Z$),f.value?(c(),d("div",tw,w(f.value.description),1)):M("",!0)])):M("",!0),n("div",sw,[n("label",nw,[Z(w(o.value?"Template Name":"Session Name")+" ",1),l[12]||(l[12]=n("span",{class:"text-danger"},"*",-1))]),n("input",{id:"config-name",type:"text",class:X(["form-control",{"is-invalid":s.errors.name}]),value:s.formData.name,onInput:l[2]||(l[2]=_=>h.$emit("update:form-data","name",_.target.value)),placeholder:o.value?"e.g., Code Expert":"main",pattern:t.value?"[^\\s]+":void 0,title:t.value?"Session name must be a single word with no spaces":void 0,required:""},null,42,ow),s.errors.name?(c(),d("div",iw,w(s.errors.name),1)):M("",!0),t.value?(c(),d("div",aw,"Must be a single word (no spaces) for #nametag matching")):M("",!0)]),o.value?(c(),d("div",rw,[l[13]||(l[13]=n("label",{for:"config-description",class:"form-label"},"Description",-1)),n("textarea",{id:"config-description",class:"form-control",value:s.formData.description,onInput:l[3]||(l[3]=_=>h.$emit("update:form-data","description",_.target.value)),rows:"2",placeholder:"Brief description of this template's purpose"},null,40,lw)])):M("",!0),n("div",cw,[l[16]||(l[16]=n("label",{for:"config-model",class:"form-label"},"Model",-1)),n("select",{id:"config-model",class:"form-select",value:s.formData.model,onChange:l[4]||(l[4]=_=>h.$emit("update:form-data","model",_.target.value))},[...l[14]||(l[14]=[n("option",{value:"sonnet"},"Sonnet 4.5 (Recommended) - Coding & complex agents",-1),n("option",{value:"opus"},"Opus 4.5 - Complex reasoning tasks",-1),n("option",{value:"haiku"},"Haiku 4.5 - Fastest for simple tasks",-1),n("option",{value:"opusplan"},"OpusPlan - Opus planning + Sonnet execution",-1)])],40,uw),n("div",dw,[a.value&&r.value&&m.value?(c(),d("span",mw,[...l[15]||(l[15]=[Z(" Model change requires a ",-1),n("strong",null,"reset",-1),Z(" (not restart) to take effect. ",-1)])])):E.value?(c(),d("span",pw,w(E.value.description),1)):M("",!0)])]),n("div",fw,[n("label",vw,[l[17]||(l[17]=Z(" Permission Mode ",-1)),s.fieldStates.permission_mode==="autofilled"?(c(),d("span",hw," < ")):M("",!0),s.fieldStates.permission_mode==="modified"?(c(),d("span",_w," * ")):M("",!0)]),n("select",{id:"config-permission-mode",class:X(["form-select",$.value]),value:s.formData.permission_mode,onChange:l[5]||(l[5]=_=>h.$emit("update:form-data","permission_mode",_.target.value)),disabled:a.value&&!r.value},[l[18]||(l[18]=n("option",{value:"default"},"Default (Prompt for tools not in settings)",-1)),l[19]||(l[19]=n("option",{value:"acceptEdits"},"Accept Edits (Auto-approve Edit/Write)",-1)),l[20]||(l[20]=n("option",{value:"plan"},"Plan Mode (Auto-resets after ExitPlanMode)",-1)),!a.value||p.value?(c(),d("option",bw," Bypass Permissions (No prompts - use with caution) ")):M("",!0)],42,gw),n("div",yw,[a.value&&!r.value?(c(),d("span",$w," Session must be active to change permission mode. Start the session first. ")):(c(),d("span",ww,"Controls which tool actions require permission prompts"))])]),n("div",Ew,[n("label",Sw,[Z(w(o.value?"Default Role":"Role")+" ",1),s.fieldStates.default_role==="autofilled"?(c(),d("span",Cw," < ")):M("",!0),s.fieldStates.default_role==="modified"?(c(),d("span",kw," * ")):M("",!0)]),n("input",{id:"config-role",type:"text",class:X(["form-control",g.value]),value:s.formData.default_role,onInput:l[6]||(l[6]=_=>h.$emit("update:form-data","default_role",_.target.value)),placeholder:o.value?"e.g., Code review and refactoring specialist":"Optional role description"},null,42,Tw),n("div",xw,w(o.value?"Default role for minions using this template":"Optional role description for the session"),1)]),t.value?(c(),d("div",Aw,[l[21]||(l[21]=n("label",{for:"config-working-dir",class:"form-label"},"Working Directory",-1)),n("div",Ow,[n("input",{id:"config-working-dir",type:"text",class:"form-control",value:s.formData.working_directory,onInput:l[7]||(l[7]=_=>h.$emit("update:form-data","working_directory",_.target.value)),placeholder:a.value?"":"Leave empty to inherit from project",disabled:a.value,readonly:a.value},null,40,Mw),a.value?M("",!0):(c(),d("button",{key:0,type:"button",class:"btn btn-outline-secondary",onClick:l[8]||(l[8]=_=>h.$emit("open-folder-browser"))}," Browse "))]),n("div",Dw,w(a.value?"Working directory is inherited from project":"Custom working directory for git worktrees or multi-repo workflows"),1)])):M("",!0),a.value&&s.session?(c(),d("div",Nw,[l[22]||(l[22]=n("label",{class:"form-label"},"Current State",-1)),n("div",Lw,[n("span",{class:X(["badge",b(s.session.state)])},w(s.session.state),3)])])):M("",!0),i.value?(c(),d("div",Iw,[n("input",{type:"checkbox",class:"form-check-input",id:"config-start-immediately",checked:s.formData.startImmediately,onChange:l[9]||(l[9]=_=>h.$emit("update:form-data","startImmediately",_.target.checked))},null,40,jw),l[23]||(l[23]=n("label",{class:"form-check-label",for:"config-start-immediately"}," Start session immediately after creation ",-1))])):M("",!0)]))}},Rw=se(Pw,[["__scopeId","data-v-b9edc342"]]),Ww={class:"permissions-tab"},Hw={class:"mb-3"},Vw={for:"config-allowed-tools",class:"form-label"},Fw={key:0,class:"field-indicator autofilled",title:"Auto-filled from template"},Bw={key:1,class:"field-indicator modified",title:"Modified from template"},qw={key:0,class:"tools-list mb-2"},Uw=["onClick"],zw={class:"input-group input-group-sm"},Kw=["onKeydown"],Gw=["disabled"],Yw={class:"mt-2"},Jw=["onClick"],Qw={class:"form-text"},Xw={key:0,class:"text-warning"},Zw={key:1},e1={class:"mb-3"},t1={class:"capabilities-editor"},s1={key:0,class:"capabilities-list mb-2"},n1=["onClick"],o1={class:"input-group input-group-sm"},i1=["onKeydown"],a1=["disabled"],r1={key:0,class:"mb-3"},l1={class:"settings-sources-editor"},c1={class:"form-check"},u1=["checked"],d1={class:"form-check"},m1=["checked"],p1={class:"form-check"},f1=["checked"],v1={class:"form-text"},h1={key:0,class:"text-warning"},_1={key:1},g1={key:1,class:"mb-3"},b1={class:"mb-3"},y1={key:0,class:"mt-2"},$1=["value"],w1=["value"],E1={__name:"PermissionsTab",props:{mode:{type:String,required:!0},formData:{type:Object,required:!0},errors:{type:Object,required:!0},session:{type:Object,default:null},fieldStates:{type:Object,default:()=>({allowed_tools:"normal"})}},emits:["update:form-data","preview-permissions"],setup(s,{emit:e}){const t=s,o=e,i=j(""),a=j(""),r=j(!1),m=["Bash","Read","Edit","Write","Glob","Grep","WebFetch","WebSearch","Task","TodoWrite"],p=v(()=>t.mode==="create-template"||t.mode==="edit-template"),f=v(()=>t.mode==="create-session"||t.mode==="edit-session"),u=v(()=>t.mode==="edit-session"),E=v(()=>t.session?.state==="active"||t.session?.state==="starting"),g=v(()=>{if(!t.session)return!1;const S=t.session.allowed_tools?.join(", ")||"";return t.formData.allowed_tools!==S}),$=v(()=>t.formData.setting_sources||["user","project","local"]),b=v(()=>{if(!t.session)return!1;const S=t.session.setting_sources||["user","project","local"],k=t.formData.setting_sources||["user","project","local"];return JSON.stringify(S.sort())!==JSON.stringify(k.sort())}),h=v(()=>!t.formData.allowed_tools||!t.formData.allowed_tools.trim()?[]:t.formData.allowed_tools.split(",").map(S=>S.trim()).filter(S=>S.length>0)),l=v(()=>!t.formData.capabilities||!t.formData.capabilities.trim()?[]:t.formData.capabilities.split(",").map(S=>S.trim()).filter(S=>S.length>0)),_=v(()=>({"field-autofilled":t.fieldStates.allowed_tools==="autofilled","field-modified":t.fieldStates.allowed_tools==="modified"})),y=v(()=>({"editor-autofilled":t.fieldStates.allowed_tools==="autofilled","editor-modified":t.fieldStates.allowed_tools==="modified"}));function C(){const S=i.value.trim();if(S){if(!h.value.includes(S)){const k=[...h.value,S];o("update:form-data","allowed_tools",k.join(", "))}i.value=""}}function T(S){const k=[...h.value];k.splice(S,1),o("update:form-data","allowed_tools",k.join(", "))}function P(S){if(h.value.includes(S)){const k=h.value.indexOf(S);T(k)}else{const k=[...h.value,S];o("update:form-data","allowed_tools",k.join(", "))}}function W(){const S=a.value.trim().toLowerCase();if(S){if(!l.value.includes(S)){const k=[...l.value,S];o("update:form-data","capabilities",k.join(", "))}a.value=""}}function A(S){const k=[...l.value];k.splice(S,1),o("update:form-data","capabilities",k.join(", "))}function V(S){const k=[...$.value],q=k.indexOf(S);q>=0?k.splice(q,1):k.push(S),o("update:form-data","setting_sources",k)}return(S,k)=>(c(),d("div",Ww,[n("div",Hw,[n("label",Vw,[k[9]||(k[9]=Z(" Allowed Tools ",-1)),s.fieldStates.allowed_tools==="autofilled"?(c(),d("span",Fw," < ")):M("",!0),s.fieldStates.allowed_tools==="modified"?(c(),d("span",Bw," * ")):M("",!0)]),n("div",{class:X(["allowed-tools-editor",y.value])},[h.value.length>0?(c(),d("div",qw,[(c(!0),d(re,null,ue(h.value,(q,U)=>(c(),d("span",{key:U,class:"badge bg-primary me-1 mb-1 tool-badge"},[Z(w(q)+" ",1),n("button",{type:"button",class:"btn-close btn-close-white ms-1",onClick:I=>T(U),"aria-label":"Remove tool"},null,8,Uw)]))),128))])):M("",!0),n("div",zw,[ge(n("input",{type:"text",class:"form-control","onUpdate:modelValue":k[0]||(k[0]=q=>i.value=q),onKeydown:We(he(C,["prevent"]),["enter"]),placeholder:"Add tool (e.g., Bash, Read, Edit)"},null,40,Kw),[[He,i.value]]),n("button",{type:"button",class:"btn btn-outline-primary",onClick:C,disabled:!i.value.trim()}," Add ",8,Gw)]),n("div",Yw,[k[10]||(k[10]=n("span",{class:"form-text me-2"},"Quick add:",-1)),(c(),d(re,null,ue(m,q=>n("button",{key:q,type:"button",class:X(["btn btn-outline-secondary btn-sm me-1 mb-1",{"btn-secondary text-white":h.value.includes(q)}]),onClick:U=>P(q)},w(q),11,Jw)),64))])],2),n("div",Qw,[u.value&&E.value&&g.value?(c(),d("span",Xw,[...k[11]||(k[11]=[Z(" Allowed tools change requires a ",-1),n("strong",null,"reset",-1),Z(" (not restart) to take effect. ",-1)])])):(c(),d("span",Zw,w(p.value?"Default tools allowed for sessions using this template":"Leave empty to allow all tools"),1))])]),n("div",e1,[k[12]||(k[12]=n("label",{for:"config-capabilities",class:"form-label"},"Capabilities",-1)),n("div",t1,[l.value.length>0?(c(),d("div",s1,[(c(!0),d(re,null,ue(l.value,(q,U)=>(c(),d("span",{key:U,class:"badge bg-info me-1 mb-1 capability-badge"},[Z(w(q)+" ",1),n("button",{type:"button",class:"btn-close btn-close-white ms-1",onClick:I=>A(U),"aria-label":"Remove capability"},null,8,n1)]))),128))])):M("",!0),n("div",o1,[ge(n("input",{type:"text",class:"form-control","onUpdate:modelValue":k[1]||(k[1]=q=>a.value=q),onKeydown:We(he(W,["prevent"]),["enter"]),placeholder:"Add capability (e.g., python, testing)"},null,40,i1),[[He,a.value]]),n("button",{type:"button",class:"btn btn-outline-info",onClick:W,disabled:!a.value.trim()}," Add ",8,a1)])]),k[13]||(k[13]=n("div",{class:"form-text"},"Comma-separated list of capability keywords for discovery",-1))]),f.value?(c(),d("div",r1,[k[18]||(k[18]=n("label",{class:"form-label"},"Settings Sources",-1)),n("div",l1,[n("div",c1,[n("input",{type:"checkbox",class:"form-check-input",id:"setting-source-user",checked:$.value.includes("user"),onChange:k[2]||(k[2]=q=>V("user"))},null,40,u1),k[14]||(k[14]=n("label",{class:"form-check-label",for:"setting-source-user"},[Z(" User "),n("code",{class:"small"},"~/.claude/settings.json")],-1))]),n("div",d1,[n("input",{type:"checkbox",class:"form-check-input",id:"setting-source-project",checked:$.value.includes("project"),onChange:k[3]||(k[3]=q=>V("project"))},null,40,m1),k[15]||(k[15]=n("label",{class:"form-check-label",for:"setting-source-project"},[Z(" Project "),n("code",{class:"small"},".claude/settings.json")],-1))]),n("div",p1,[n("input",{type:"checkbox",class:"form-check-input",id:"setting-source-local",checked:$.value.includes("local"),onChange:k[4]||(k[4]=q=>V("local"))},null,40,f1),k[16]||(k[16]=n("label",{class:"form-check-label",for:"setting-source-local"},[Z(" Local "),n("code",{class:"small"},".claude/settings.local.json")],-1))])]),n("div",v1,[u.value&&E.value&&b.value?(c(),d("span",h1,[...k[17]||(k[17]=[Z(" Settings sources change requires a ",-1),n("strong",null,"restart",-1),Z(" to take effect. ",-1)])])):(c(),d("span",_1," Select which settings files to load permissions from "))])])):M("",!0),f.value?(c(),d("div",g1,[n("button",{type:"button",class:"btn btn-outline-secondary btn-sm",onClick:k[5]||(k[5]=q=>S.$emit("preview-permissions"))}," Preview Effective Permissions ")])):M("",!0),n("div",b1,[n("a",{class:"text-muted small",role:"button",onClick:k[6]||(k[6]=q=>r.value=!r.value)},w(r.value?"Hide":"Show")+" raw input ",1),r.value?(c(),d("div",y1,[k[19]||(k[19]=n("label",{class:"form-label small text-muted"},"Allowed Tools (comma-separated)",-1)),n("input",{type:"text",class:X(["form-control form-control-sm",_.value]),value:s.formData.allowed_tools,onInput:k[7]||(k[7]=q=>S.$emit("update:form-data","allowed_tools",q.target.value)),placeholder:"bash, read, edit, write, glob, grep"},null,42,$1),k[20]||(k[20]=n("label",{class:"form-label small text-muted mt-2"},"Capabilities (comma-separated)",-1)),n("input",{type:"text",class:"form-control form-control-sm",value:s.formData.capabilities,onInput:k[8]||(k[8]=q=>S.$emit("update:form-data","capabilities",q.target.value)),placeholder:"python, testing, debugging"},null,40,w1)])):M("",!0)])]))}},S1=se(E1,[["__scopeId","data-v-e58aa2be"]]),C1={class:"advanced-tab"},k1={key:0,class:"alert alert-warning mb-3",role:"alert"},T1={class:"mb-3"},x1={for:"config-system-prompt",class:"form-label"},A1={key:0,class:"field-indicator autofilled",title:"Auto-filled from template"},O1={key:1,class:"field-indicator modified",title:"Modified from template"},M1=["value","rows","maxlength","placeholder"],D1={class:"form-text d-flex justify-content-between"},N1={key:0,class:"invalid-feedback"},L1={class:"mb-3 form-check"},I1=["checked"],j1={key:0,class:"form-text text-warning"},P1={key:1,class:"mb-3 form-check"},R1=["checked"],W1={__name:"AdvancedTab",props:{mode:{type:String,required:!0},formData:{type:Object,required:!0},errors:{type:Object,required:!0},session:{type:Object,default:null},fieldStates:{type:Object,default:()=>({initialization_context:"normal"})}},emits:["update:form-data"],setup(s,{emit:e}){const t=s,o=e,i=v(()=>t.mode==="create-session"||t.mode==="edit-session"),a=v(()=>t.mode==="create-template"||t.mode==="edit-template"),r=v(()=>t.mode==="edit-session"),m=v(()=>t.session?.state==="active"||t.session?.state==="starting"),p=v(()=>{if(!t.session)return!1;const y=(t.formData.initialization_context||"")!==(t.session.system_prompt||""),C=(t.formData.override_system_prompt||!1)!==(t.session.override_system_prompt||!1),T=(t.formData.sandbox_enabled||!1)!==(t.session.sandbox_enabled||!1);return y||C||T}),f=v(()=>a.value?6e3:2e3),u=v(()=>a.value?t.formData.system_prompt:t.formData.initialization_context),E=v(()=>u.value?.length||0),g=v(()=>E.value>f.value),$=v(()=>{const y=f.value*.9;return E.value>y&&E.value<=f.value}),b=v(()=>a.value?"Optional default system prompt for sessions using this template":"Instructions and context for the session..."),h=v(()=>t.formData.override_system_prompt?a.value?"This prompt will replace Claude Code's preset":"This context will replace Claude Code's preset and legion guide":a.value?"This prompt will be appended to Claude Code's preset":"This context will be appended to legion guide and Claude Code's preset"),l=v(()=>{const y={};return g.value&&(y["is-invalid"]=!0),t.fieldStates.initialization_context==="autofilled"&&(y["field-autofilled"]=!0),t.fieldStates.initialization_context==="modified"&&(y["field-modified"]=!0),y});function _(y){const C=y.target.value,T=a.value?"system_prompt":"initialization_context";o("update:form-data",T,C)}return(y,C)=>(c(),d("div",C1,[r.value&&m.value&&p.value?(c(),d("div",k1,[...C[2]||(C[2]=[n("small",null,[Z("Changes to these settings require a "),n("strong",null,"reset"),Z(" (not restart) to take effect.")],-1)])])):M("",!0),n("div",T1,[n("label",x1,[Z(w(a.value?"Default System Prompt":"Initialization Context")+" ",1),s.fieldStates.initialization_context==="autofilled"?(c(),d("span",A1," < ")):M("",!0),s.fieldStates.initialization_context==="modified"?(c(),d("span",O1," * ")):M("",!0)]),n("textarea",{id:"config-system-prompt",class:X(["form-control",l.value]),value:u.value,onInput:_,rows:a.value?4:5,maxlength:f.value,placeholder:b.value},null,42,M1),n("div",D1,[n("span",null,w(h.value),1),n("span",{class:X({"text-danger":g.value,"text-warning":$.value})},w(E.value)+" / "+w(f.value)+" chars ",3)]),g.value?(c(),d("div",N1,w(a.value?"System prompt":"Initialization context")+" exceeds "+w(f.value)+" character limit ",1)):M("",!0)]),n("div",L1,[n("input",{type:"checkbox",class:"form-check-input",id:"config-override-prompt",checked:s.formData.override_system_prompt,onChange:C[0]||(C[0]=T=>y.$emit("update:form-data","override_system_prompt",T.target.checked))},null,40,I1),C[3]||(C[3]=n("label",{class:"form-check-label",for:"config-override-prompt"}," Override Claude Code preset (use custom prompt only) ",-1)),s.formData.override_system_prompt?(c(),d("div",j1,[n("small",null,"Override mode may cause unexpected behaviors. Only custom instructions will be used (no Claude Code preset"+w(a.value?"":" or legion guide")+").",1)])):M("",!0)]),i.value?(c(),d("div",P1,[n("input",{type:"checkbox",class:"form-check-input",id:"config-sandbox",checked:s.formData.sandbox_enabled,onChange:C[1]||(C[1]=T=>y.$emit("update:form-data","sandbox_enabled",T.target.checked))},null,40,R1),C[4]||(C[4]=n("label",{class:"form-check-label",for:"config-sandbox"}," Enable Sandbox Mode ",-1)),n("div",{class:X(["form-text",s.formData.sandbox_enabled?"text-info":"text-muted"])},[n("small",null,w(s.formData.sandbox_enabled?"Sandbox enabled: Session will have OS-level isolation restricting file system and network access.":"Sandbox mode restricts file system and network access for added security."),1)],2)])):M("",!0)]))}},H1=se(W1,[["__scopeId","data-v-1909e7ae"]]),V1={class:"modal-dialog modal-lg"},F1={class:"modal-content"},B1={class:"modal-body"},q1={key:0,class:"text-center py-4"},U1={key:1,class:"alert alert-danger"},z1={key:2},K1={class:"mb-3"},G1={class:"small text-muted mb-2"},Y1={key:0},J1={key:0,class:"alert alert-info"},Q1={key:1},X1={class:"table table-sm table-striped"},Z1={key:2,class:"mt-3"},eE={class:"modal-footer"},tE=["disabled"],sE={__name:"PermissionPreviewModal",props:{workingDirectory:{type:String,required:!0},settingSources:{type:Array,default:()=>["user","project","local"]},sessionAllowedTools:{type:Array,default:()=>[]}},emits:["close"],setup(s,{expose:e,emit:t}){const o=s,i=t,a=j(null);let r=null;const m=j(!1),p=j(""),f=j([]);pe(a,h=>{h&&(r=new ut(h),h.addEventListener("hidden.bs.modal",()=>{i("close")}))});function u(){r&&(r.show(),g())}function E(){r&&r.hide()}async function g(){m.value=!0,p.value="",f.value=[];try{const h=await ce.post("/api/permissions/preview",{working_directory:o.workingDirectory,setting_sources:o.settingSources,session_allowed_tools:o.sessionAllowedTools});f.value=h.permissions||[]}catch(h){console.error("Failed to load permissions:",h),p.value=h.response?.data?.detail||h.message||"Failed to load permissions"}finally{m.value=!1}}function $(){g()}function b(h){switch(h){case"user":return"bg-info";case"project":return"bg-primary";case"local":return"bg-secondary";case"session":return"bg-success";default:return"bg-dark"}}return e({show:u,hide:E}),(h,l)=>(c(),d("div",{ref_key:"modalRef",ref:a,class:"modal fade",tabindex:"-1","aria-labelledby":"permissionPreviewModalLabel","aria-hidden":"true"},[n("div",V1,[n("div",F1,[l[7]||(l[7]=n("div",{class:"modal-header"},[n("h5",{class:"modal-title",id:"permissionPreviewModalLabel"}," Effective Permissions Preview "),n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),n("div",B1,[m.value?(c(),d("div",q1,[...l[0]||(l[0]=[n("div",{class:"spinner-border text-primary",role:"status"},[n("span",{class:"visually-hidden"},"Loading...")],-1),n("p",{class:"mt-2 text-muted"},"Loading permissions...",-1)])])):p.value?(c(),d("div",U1,w(p.value),1)):(c(),d("div",z1,[n("div",K1,[l[2]||(l[2]=n("h6",null,"Settings Sources",-1)),n("div",G1,[l[1]||(l[1]=Z(" Loading permissions from: ",-1)),(c(!0),d(re,null,ue(s.settingSources,(_,y)=>(c(),d("span",{key:_},[n("code",null,w(_),1),y<s.settingSources.length-1?(c(),d("span",Y1,", ")):M("",!0)]))),128))])]),f.value.length===0?(c(),d("div",J1," No pre-approved permissions found in the selected settings sources. All tool usages will prompt for approval. ")):(c(),d("div",Q1,[n("h6",null,"Pre-approved Permissions ("+w(f.value.length)+")",1),n("table",X1,[l[3]||(l[3]=n("thead",null,[n("tr",null,[n("th",null,"Permission"),n("th",null,"Source(s)")])],-1)),n("tbody",null,[(c(!0),d(re,null,ue(f.value,_=>(c(),d("tr",{key:_.permission},[n("td",null,[n("code",null,w(_.permission),1)]),n("td",null,[(c(!0),d(re,null,ue(_.sources,(y,C)=>(c(),d("span",{key:y,class:X(["badge me-1",b(y)])},w(y),3))),128))])]))),128))])])])),s.sessionAllowedTools.length>0?(c(),d("div",Z1,[l[4]||(l[4]=n("h6",null,"Session Allowed Tools",-1)),l[5]||(l[5]=n("p",{class:"small text-muted"}," These tools are explicitly allowed for this session: ",-1)),n("div",null,[(c(!0),d(re,null,ue(s.sessionAllowedTools,_=>(c(),d("span",{key:_,class:"badge bg-success me-1 mb-1"},w(_),1))),128))])])):M("",!0)]))]),n("div",eE,[l[6]||(l[6]=n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),n("button",{type:"button",class:"btn btn-outline-primary",onClick:$,disabled:m.value}," Refresh ",8,tE)])])])],512))}},nE=se(sE,[["__scopeId","data-v-988ff7c4"]]),oE={class:"modal-dialog modal-lg modal-dialog-centered"},iE={class:"modal-content"},aE={class:"modal-header"},rE={id:"configurationModalLabel",class:"modal-title"},lE={class:"modal-body"},cE={key:0,class:"template-list-view"},uE={key:0,class:"alert alert-info"},dE={class:"card-body"},mE={class:"d-flex justify-content-between align-items-start"},pE={class:"flex-grow-1"},fE={class:"card-title mb-1"},vE={key:0,class:"card-text text-muted small mb-2"},hE={class:"template-meta"},_E={class:"badge bg-secondary me-2"},gE={class:"text-muted small"},bE={class:"btn-group btn-group-sm ms-3"},yE=["onClick"],$E=["onClick"],wE={key:1},EE={class:"nav nav-tabs nav-tabs-responsive mb-3",role:"tablist"},SE={class:"nav-item",role:"presentation"},CE={key:0,class:"error-indicator",title:"This tab has validation errors"},kE={class:"nav-item",role:"presentation"},TE={key:0,class:"error-indicator",title:"This tab has validation errors"},xE={class:"nav-item",role:"presentation"},AE={key:0,class:"error-indicator",title:"This tab has validation errors"},OE={class:"tab-content"},ME={key:2,class:"alert alert-danger mt-3"},DE={class:"modal-footer"},NE={type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},LE=["disabled"],IE={key:0,class:"spinner-border spinner-border-sm me-2"},jE={__name:"ConfigurationModal",setup(s){const e=Rt(),t=Le(),o=de(),i=_e(),a=j(null);let r=null;const m=j(null),p=j("create-session"),f=j("general"),u=j(null),E=j(null),g=j(null),$=j([]),b=j(null),h=j(null),l=j({default_role:null,initialization_context:null,permission_mode:null,allowed_tools:null}),_=bs({default_role:"normal",initialization_context:"normal",permission_mode:"normal",allowed_tools:"normal"}),y=bs({name:"",model:"sonnet",permission_mode:"default",working_directory:"",description:"",default_role:"",startImmediately:!0,allowed_tools:"",capabilities:"",setting_sources:["user","project","local"],system_prompt:"",override_system_prompt:!1,initialization_context:"",sandbox_enabled:!1}),C=bs({name:"",system_prompt:"",initialization_context:""}),T=v(()=>({general:!!C.name,permissions:!1,advanced:!!C.system_prompt||!!C.initialization_context})),P=j(!1),W=j(""),A=v(()=>p.value==="create-session"||p.value==="edit-session"),V=v(()=>p.value==="edit-session"||p.value==="edit-template"),S=v(()=>{switch(p.value){case"create-session":return"Create Session";case"edit-session":return"Edit Session";case"create-template":return"Create Template";case"edit-template":return"Edit Template";case"template-list":return"Manage Templates";default:return"Configuration"}}),k=v(()=>P.value?V.value?"Saving...":"Creating...":V.value?"Save Changes":A.value?"Create Session":"Save Template"),q=v(()=>!(!y.name.trim()||y.system_prompt.length>6e3||y.initialization_context.length>2e3||A.value&&y.name.includes(" "))),U=v(()=>E.value?.working_directory?E.value.working_directory:y.working_directory?y.working_directory:t.projects.get(u.value)?.working_directory||""),I=v(()=>!y.allowed_tools||!y.allowed_tools.trim()?[]:y.allowed_tools.split(",").map(B=>B.trim()).filter(B=>B.length>0));function R(){m.value&&m.value.show()}function F(B,oe){y[B]=oe,B==="name"&&(C.name=""),B==="system_prompt"&&(C.system_prompt=""),B==="initialization_context"&&(C.initialization_context="")}function x(B){b.value=B,z()}async function O(){try{const B=await ce.get("/api/templates");$.value=B||[]}catch(B){console.error("Failed to load templates:",B),$.value=[]}}function z(){if(!b.value){y.default_role="",y.initialization_context="",y.permission_mode="default",y.allowed_tools="",_.default_role="normal",_.initialization_context="normal",_.permission_mode="normal",_.allowed_tools="normal",l.value={default_role:null,initialization_context:null,permission_mode:null,allowed_tools:null};return}const B=$.value.find(oe=>oe.template_id===b.value);if(B)if(_.default_role="normal",_.initialization_context="normal",_.permission_mode="normal",_.allowed_tools="normal",B.default_role?(y.default_role=B.default_role,l.value.default_role=B.default_role,_.default_role="autofilled"):(y.default_role="",l.value.default_role=null),B.default_system_prompt?(y.initialization_context=B.default_system_prompt,l.value.initialization_context=B.default_system_prompt,_.initialization_context="autofilled"):(y.initialization_context="",l.value.initialization_context=null),B.permission_mode?(y.permission_mode=B.permission_mode,l.value.permission_mode=B.permission_mode,_.permission_mode="autofilled"):(y.permission_mode="default",l.value.permission_mode=null),B.allowed_tools&&B.allowed_tools.length>0){const oe=B.allowed_tools.join(", ");y.allowed_tools=oe,l.value.allowed_tools=oe,_.allowed_tools="autofilled"}else y.allowed_tools="",l.value.allowed_tools=null}function L(){const oe=(u.value?t.projects.get(u.value):null)?.working_directory||"";i.showModal("folder-browser",{defaultPath:oe,currentPath:y.working_directory||"",onSelect:le=>{y.working_directory=le}})}function D(){p.value==="create-session"&&(h.value={mode:"create-session",projectId:u.value,formData:{...y},selectedTemplateId:b.value}),p.value="template-list",ee()}function G(){p.value="create-template",ee(),f.value="general"}function ie(B){p.value="edit-template",g.value=B,ee(),ve(B),f.value="general"}async function J(B){if(confirm(`Delete template "${B.name}"?

This action cannot be undone.`))try{await ce.delete(`/api/templates/${B.template_id}`),await O()}catch(oe){console.error("Failed to delete template:",oe),W.value=oe.response?.data?.detail||"Failed to delete template"}}function Q(){let B=!0;return C.name="",C.system_prompt="",C.initialization_context="",y.name.trim()||(C.name="Name is required",B=!1),A.value&&y.name.includes(" ")&&(C.name="Session name must be a single word (no spaces)",B=!1),y.system_prompt.length>6e3&&(C.system_prompt="System prompt exceeds 6000 character limit",B=!1),y.initialization_context.length>2e3&&(C.initialization_context="Initialization context exceeds 2000 character limit",B=!1),B}async function ae(){if(!Q()){C.name?f.value="general":(C.system_prompt||C.initialization_context)&&(f.value="advanced");return}P.value=!0,W.value="";try{switch(p.value){case"create-session":await me(),r&&r.hide();break;case"edit-session":await H(),r&&r.hide();break;case"create-template":await N();break;case"edit-template":await Y();break}}catch(B){console.error("Submit failed:",B),W.value=B.response?.data?.detail||B.message||"Operation failed. Please try again."}finally{P.value=!1}}async function me(){if(!u.value)throw new Error("Project ID is missing");const B=y.allowed_tools.split(",").map(Re=>Re.trim()).filter(Re=>Re.length>0),oe=y.capabilities.split(",").map(Re=>Re.trim()).filter(Re=>Re.length>0),le={name:y.name.trim(),model:y.model||null,role:y.default_role.trim()||null,initialization_context:y.initialization_context.trim()||null,override_system_prompt:y.override_system_prompt,capabilities:oe.length>0?oe:null,permission_mode:y.permission_mode,allowed_tools:B.length>0?B:null,working_directory:y.working_directory.trim()||null,sandbox_enabled:y.sandbox_enabled,setting_sources:y.setting_sources},Pe=await ce.post(`/api/legions/${u.value}/minions`,le);if(Pe.success&&Pe.minion_id)await t.fetchProjects(),await o.fetchSessions(),y.startImmediately&&await o.startSession(Pe.minion_id),e.push(`/session/${Pe.minion_id}`);else throw new Error("Failed to create session")}async function H(){if(!E.value)throw new Error("Session data is missing");const B=E.value.session_id,oe=E.value.state==="active"||E.value.state==="starting",le=y.allowed_tools.split(",").map(ye=>ye.trim()).filter(ye=>ye.length>0),Pe=y.capabilities.split(",").map(ye=>ye.trim()).filter(ye=>ye.length>0),Re={name:y.name.trim(),model:y.model,role:y.default_role.trim()||null,system_prompt:y.initialization_context.trim()||null,override_system_prompt:y.override_system_prompt,allowed_tools:le.length>0?le:null,capabilities:Pe.length>0?Pe:null,sandbox_enabled:y.sandbox_enabled,setting_sources:y.setting_sources};await o.patchSession(B,Re),oe&&y.permission_mode!==E.value.current_permission_mode&&await o.setPermissionMode(B,y.permission_mode)}async function N(){const B=y.allowed_tools.split(",").map(le=>le.trim()).filter(le=>le.length>0),oe={name:y.name.trim(),description:y.description.trim()||null,permission_mode:y.permission_mode,allowed_tools:B.length>0?B:null,default_role:y.default_role.trim()||null,default_system_prompt:y.initialization_context.trim()||null};await ce.post("/api/templates",oe),await O(),p.value="template-list",ee()}async function Y(){if(!g.value)throw new Error("Template data is missing");const B=y.allowed_tools.split(",").map(le=>le.trim()).filter(le=>le.length>0),oe={name:y.name.trim(),description:y.description.trim()||null,permission_mode:y.permission_mode,allowed_tools:B.length>0?B:null,default_role:y.default_role.trim()||null,default_system_prompt:y.initialization_context.trim()||null};await ce.put(`/api/templates/${g.value.template_id}`,oe),await O(),p.value="template-list",g.value=null,ee()}function ee(){y.name="",y.model="sonnet",y.permission_mode="default",y.working_directory="",y.description="",y.default_role="",y.startImmediately=!0,y.allowed_tools="",y.capabilities="",y.setting_sources=["user","project","local"],y.system_prompt="",y.override_system_prompt=!1,y.initialization_context="",y.sandbox_enabled=!1,C.name="",C.system_prompt="",C.initialization_context="",_.default_role="normal",_.initialization_context="normal",_.permission_mode="normal",_.allowed_tools="normal",l.value={default_role:null,initialization_context:null,permission_mode:null,allowed_tools:null},b.value=null,W.value="",f.value="general"}function ne(B){y.name=B.name||"",y.model=B.model||"sonnet",y.permission_mode=B.current_permission_mode||"default",y.working_directory=B.working_directory||"",y.default_role=B.role||"",y.initialization_context=B.system_prompt||"",y.override_system_prompt=B.override_system_prompt||!1,y.system_prompt="",y.allowed_tools=B.allowed_tools?.join(", ")||"",y.capabilities=B.capabilities?.join(", ")||"",y.sandbox_enabled=B.sandbox_enabled||!1,y.setting_sources=B.setting_sources||["user","project","local"]}function ve(B){y.name=B.name||"",y.description=B.description||"",y.permission_mode=B.permission_mode||"default",y.default_role=B.default_role||"",y.initialization_context=B.default_system_prompt||"",y.allowed_tools=B.allowed_tools?.join(", ")||""}function je(){yt(()=>{const B=document.getElementById("config-name");B&&(B.focus(),V.value&&B.select())})}function Ye(){ee(),p.value="create-session",u.value=null,E.value=null,g.value=null,i.hideModal()}return pe(()=>i.currentModal,async(B,oe)=>{if(!(!B||!r)){if(B.name==="configuration"){const le=B.data||{};p.value=le.mode||"create-session",u.value=le.project?.project_id||le.projectId||null,E.value=le.session||null,g.value=le.template||null,ee(),p.value==="create-session"&&await O(),p.value==="edit-session"&&E.value?ne(E.value):p.value==="edit-template"&&g.value&&ve(g.value),r.show()}else if(B.name==="create-minion"||B.name==="create-session"){const le=B.data||{};p.value="create-session",u.value=le.project?.project_id||null,E.value=null,g.value=null,ee(),await O(),r.show()}else if(B.name==="edit-session"){const le=B.data||{};p.value="edit-session",E.value=le.session||null,u.value=E.value?.project_id||null,g.value=null,ee(),E.value&&ne(E.value),r.show()}else B.name==="template-management"&&(p.value="template-list",ee(),await O(),r.show());oe?.name==="configuration"&&oe.data?.mode?.includes("template")&&B?.name==="configuration"&&p.value==="create-session"&&await O()}}),pe(()=>y.default_role,B=>{l.value.default_role!==null&&(_.default_role=B===l.value.default_role?"autofilled":"modified")}),pe(()=>y.initialization_context,B=>{l.value.initialization_context!==null&&(_.initialization_context=B===l.value.initialization_context?"autofilled":"modified")}),pe(()=>y.permission_mode,B=>{l.value.permission_mode!==null&&(_.permission_mode=B===l.value.permission_mode?"autofilled":"modified")}),pe(()=>y.allowed_tools,B=>{l.value.allowed_tools!==null&&(_.allowed_tools=B===l.value.allowed_tools?"autofilled":"modified")}),be(()=>{a.value&&Oe(()=>import("./modal-D6mKceGM.js").then(B=>B.m),__vite__mapDeps([0,1])).then(B=>{const oe=B.default;r=new oe(a.value),a.value.addEventListener("shown.bs.modal",je),a.value.addEventListener("hidden.bs.modal",Ye)})}),Ce(()=>{a.value&&(a.value.removeEventListener("shown.bs.modal",je),a.value.removeEventListener("hidden.bs.modal",Ye)),r&&r.dispose()}),(B,oe)=>(c(),d(re,null,[n("div",{ref_key:"modalElement",ref:a,class:"modal fade",tabindex:"-1","aria-labelledby":"configurationModalLabel","aria-hidden":"true"},[n("div",oE,[n("div",iE,[n("div",aE,[n("h5",rE,[p.value==="create-template"||p.value==="edit-template"?(c(),d("button",{key:0,type:"button",class:"btn btn-link p-0 me-2",onClick:D,title:"Back to template list"}," â† ")):M("",!0),Z(" "+w(S.value),1)]),oe[3]||(oe[3]=n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),n("div",lE,[p.value==="template-list"?(c(),d("div",cE,[n("div",{class:"d-flex justify-content-between align-items-center mb-3"},[oe[4]||(oe[4]=n("h6",{class:"mb-0"},"Templates",-1)),n("button",{onClick:G,class:"btn btn-primary btn-sm"}," + Create New ")]),$.value.length===0?(c(),d("div",uE," No templates found. Create your first template! ")):M("",!0),(c(!0),d(re,null,ue($.value,le=>(c(),d("div",{key:le.template_id,class:"card mb-2"},[n("div",dE,[n("div",mE,[n("div",pE,[n("h6",fE,w(le.name),1),le.description?(c(),d("p",vE,w(le.description),1)):M("",!0),n("div",hE,[n("span",_E,w(le.permission_mode),1),n("span",gE,w(le.allowed_tools?.length||0)+" tools",1)])]),n("div",bE,[n("button",{onClick:Pe=>ie(le),class:"btn btn-outline-primary",title:"Edit"}," Edit ",8,yE),n("button",{onClick:Pe=>J(le),class:"btn btn-outline-danger",title:"Delete"}," Delete ",8,$E)])])])]))),128))])):(c(),d("div",wE,[n("ul",EE,[n("li",SE,[n("button",{class:X(["nav-link",{active:f.value==="general","has-error":T.value.general}]),type:"button",onClick:oe[0]||(oe[0]=le=>f.value="general")},[oe[5]||(oe[5]=Z(" General ",-1)),T.value.general?(c(),d("span",CE)):M("",!0)],2)]),n("li",kE,[n("button",{class:X(["nav-link",{active:f.value==="permissions","has-error":T.value.permissions}]),type:"button",onClick:oe[1]||(oe[1]=le=>f.value="permissions")},[oe[6]||(oe[6]=Z(" Permissions ",-1)),T.value.permissions?(c(),d("span",TE)):M("",!0)],2)]),n("li",xE,[n("button",{class:X(["nav-link",{active:f.value==="advanced","has-error":T.value.advanced}]),type:"button",onClick:oe[2]||(oe[2]=le=>f.value="advanced")},[oe[7]||(oe[7]=Z(" Advanced ",-1)),T.value.advanced?(c(),d("span",AE)):M("",!0)],2)])]),n("div",OE,[ge(fe(Rw,{mode:p.value,"form-data":y,errors:C,templates:$.value,"selected-template-id":b.value,session:E.value,"field-states":_,"onUpdate:formData":F,"onUpdate:selectedTemplateId":x,onOpenFolderBrowser:L,onOpenTemplateManager:D},null,8,["mode","form-data","errors","templates","selected-template-id","session","field-states"]),[[gs,f.value==="general"]]),ge(fe(S1,{mode:p.value,"form-data":y,errors:C,session:E.value,"field-states":_,"onUpdate:formData":F,onPreviewPermissions:R},null,8,["mode","form-data","errors","session","field-states"]),[[gs,f.value==="permissions"]]),ge(fe(H1,{mode:p.value,"form-data":y,errors:C,session:E.value,"field-states":_,"onUpdate:formData":F},null,8,["mode","form-data","errors","session","field-states"]),[[gs,f.value==="advanced"]])])])),W.value?(c(),d("div",ME,w(W.value),1)):M("",!0)]),n("div",DE,[n("button",NE,w(p.value==="template-list"?"Close":"Cancel"),1),p.value!=="template-list"?(c(),d("button",{key:0,type:"button",class:"btn btn-primary",disabled:P.value||!q.value,onClick:ae},[P.value?(c(),d("span",IE)):M("",!0),Z(" "+w(k.value),1)],8,LE)):M("",!0)])])])],512),fe(nE,{ref_key:"permissionPreviewModal",ref:m,"working-directory":U.value,"setting-sources":y.setting_sources,"session-allowed-tools":I.value},null,8,["working-directory","setting-sources","session-allowed-tools"])],64))}},PE=se(jE,[["__scopeId","data-v-bb54bc71"]]),RE={class:"modal-dialog modal-dialog-centered"},WE={class:"modal-content"},HE={class:"modal-header"},VE={class:"modal-title",id:"manageSessionModalLabel"},FE={class:"modal-body"},BE={key:0,class:"text-center py-4"},qE={class:"text-muted"},UE={key:1},zE={key:2},KE={class:"text-muted"},GE={key:0,class:"text-center py-2"},YE={key:1,class:"alert alert-warning mt-3"},JE={class:"mb-0 mt-2"},QE={key:0,class:"text-muted"},XE={key:3},ZE={key:0,class:"alert alert-danger alert-dismissible fade show",role:"alert"},eS={class:"d-grid gap-2"},tS=["disabled"],sS=["disabled"],nS=["disabled"],oS=["disabled"],iS={class:"modal-footer"},aS={key:1,type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},rS={__name:"SessionManageModal",setup(s){const e=Rt(),t=de(),o=_e(),i=et();ke();const a=j(null),r=j(!1),m=j(""),p=j(""),f=j(null),u=j(null);let E=null;const g=j([]),$=j(!1),b=v(()=>f.value==="reset"?"Reset Session":f.value==="delete"?"Delete Session":"Manage Session");function h(){f.value="reset"}async function l(){if(f.value="delete",g.value=[],!!a.value){$.value=!0;try{const S=await ce.get(`/api/sessions/${a.value.session_id}/descendants`);g.value=S.descendants||[]}catch(S){console.error("Failed to fetch descendants:",S),g.value=[]}finally{$.value=!1}}}function _(){f.value=null}async function y(){f.value==="reset"?await P():f.value==="delete"&&await W()}async function C(){if(a.value){r.value=!0,m.value="Restarting session...";try{const S=a.value.session_id,k=t.currentSessionId===S,q=await ce.post(`/api/sessions/${S}/restart`);if(q.success)console.log("Session restarted successfully"),k&&(await i.disconnectSession(),t.currentSessionId=null,await t.selectSession(S)),E&&E.hide();else{const U=q.error||q.detail||"Failed to restart session";console.error("Failed to restart session:",U),p.value=`Failed to restart session: ${U}`}}catch(S){console.error("Error restarting session:",S);const k=S.data?.detail||S.message||"Unknown error";p.value=`Error restarting session: ${k}`}finally{r.value=!1}}}async function T(){if(a.value)try{E&&E.hide(),console.log("Ending session",a.value.session_id);const S=a.value.session_id;await ce.post(`/api/sessions/${S}/terminate`),t.currentSessionId===S&&(await i.disconnectSession(),t.currentSessionId=null,e.push("/"))}catch(S){console.error("Error ending session:",S),t.currentSessionId===a.value?.session_id&&(await i.disconnectSession(),t.currentSessionId=null,e.push("/"))}}async function P(){if(a.value){r.value=!0,m.value="Resetting session...";try{const S=a.value.session_id,k=t.currentSessionId===S,q=await ce.post(`/api/sessions/${S}/reset`);if(q.success)console.log("Session reset successfully"),k&&(await i.disconnectSession(),t.currentSessionId=null,await t.selectSession(S)),E&&E.hide();else{const U=q.error||q.detail||"Failed to reset session";console.error("Failed to reset session:",U),p.value=`Failed to reset session: ${U}`,f.value=null}}catch(S){console.error("Error resetting session:",S);const k=S.data?.detail||S.message||"Unknown error";p.value=`Error resetting session: ${k}`,f.value=null}finally{r.value=!1}}}async function W(){if(a.value){r.value=!0,m.value="Deleting session...";try{const S=a.value.session_id;await t.deleteSession(S),e.currentRoute.value.params.sessionId===S&&e.push("/"),E&&E.hide()}catch(S){console.error("Error deleting session:",S);const k=S.data?.detail||S.message||"Unknown error";p.value=`Error deleting session: ${k}`,f.value=null}finally{r.value=!1}}}function A(){f.value=null,r.value=!1,m.value="",p.value="",g.value=[],$.value=!1}function V(){A(),a.value=null,o.hideModal()}return pe(()=>o.currentModal,S=>{if(S?.name==="manage-session"&&E){const k=S.data||{};a.value=k.session,A(),E.show()}}),be(()=>{u.value&&Oe(async()=>{const{default:S}=await import("./modal-D6mKceGM.js").then(k=>k.m);return{default:S}},__vite__mapDeps([0,1])).then(({default:S})=>{E=new S(u.value),u.value.addEventListener("hidden.bs.modal",V)})}),Ce(()=>{u.value&&u.value.removeEventListener("hidden.bs.modal",V),E&&E.dispose()}),(S,k)=>(c(),d("div",{class:"modal fade",id:"manageSessionModal",tabindex:"-1","aria-labelledby":"manageSessionModalLabel","aria-hidden":"true",ref_key:"modalElement",ref:u},[n("div",RE,[n("div",WE,[n("div",HE,[n("h5",VE,w(f.value?b.value:"Manage Session"),1),k[1]||(k[1]=n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),n("div",FE,[r.value?(c(),d("div",BE,[k[2]||(k[2]=n("div",{class:"spinner-border text-primary mb-3",role:"status"},[n("span",{class:"visually-hidden"},"Loading...")],-1)),n("p",qE,w(m.value),1)])):f.value==="reset"?(c(),d("div",UE,[...k[3]||(k[3]=[n("div",{class:"alert alert-danger mb-3"},[n("strong",null,"âš ï¸ Warning: This action cannot be undone")],-1),n("p",{class:"text-muted"},"This will permanently delete all messages and conversation history for this session.",-1),n("p",{class:"text-muted"},"The session settings and configuration will be preserved, but you will start with a completely fresh conversation.",-1)])])):f.value==="delete"?(c(),d("div",zE,[k[9]||(k[9]=n("div",{class:"alert alert-danger mb-3"},[n("strong",null,"âš ï¸ Warning: This action cannot be undone")],-1)),n("p",KE,[k[4]||(k[4]=Z("This will permanently delete session ",-1)),n("strong",null,w(a.value?.name),1),k[5]||(k[5]=Z(".",-1))]),k[10]||(k[10]=n("p",{class:"text-muted"},"All messages, conversation history, settings, and configuration will be completely destroyed. This is more destructive than Reset Session.",-1)),$.value?(c(),d("div",GE,[...k[6]||(k[6]=[n("div",{class:"spinner-border spinner-border-sm text-secondary",role:"status"},[n("span",{class:"visually-hidden"},"Checking for child sessions...")],-1),n("span",{class:"ms-2 text-muted small"},"Checking for child sessions...",-1)])])):g.value.length>0?(c(),d("div",YE,[k[7]||(k[7]=n("strong",null,"Cascading Deletion:",-1)),k[8]||(k[8]=Z(" This session has ",-1)),n("strong",null,w(g.value.length),1),Z(" child session"+w(g.value.length===1?"":"s")+" that will also be deleted: ",1),n("ul",JE,[(c(!0),d(re,null,ue(g.value,q=>(c(),d("li",{key:q.session_id,class:"small"},[n("strong",null,w(q.name||q.session_id),1),q.role?(c(),d("span",QE," ("+w(q.role)+")",1)):M("",!0)]))),128))])])):M("",!0)])):(c(),d("div",XE,[p.value?(c(),d("div",ZE,[k[11]||(k[11]=n("strong",null,"Error:",-1)),Z(" "+w(p.value)+" ",1),n("button",{type:"button",class:"btn-close",onClick:k[0]||(k[0]=q=>p.value="")})])):M("",!0),k[18]||(k[18]=n("p",{class:"text-muted"},"Choose how to manage this session:",-1)),n("div",eS,[n("button",{class:"btn btn-outline-primary text-start",onClick:C,disabled:r.value},[...k[12]||(k[12]=[n("strong",null,"ðŸ”„ Restart Agent",-1),n("div",{class:"small text-muted"},"Disconnect and resume session (keeps all messages)",-1)])],8,tS),n("button",{class:"btn btn-outline-secondary text-start",onClick:T,disabled:r.value},[...k[13]||(k[13]=[n("strong",null,"ðŸšª End Session",-1),n("div",{class:"small text-muted"},"Close agent and return to session list",-1)])],8,sS),k[16]||(k[16]=n("hr",{class:"my-2"},null,-1)),k[17]||(k[17]=n("div",{class:"danger-zone-header"},[n("h6",{class:"text-danger mb-2"},"âš ï¸ Danger Zone")],-1)),n("button",{class:"btn btn-outline-warning text-start",onClick:h,disabled:r.value},[...k[14]||(k[14]=[n("strong",null,"ðŸ§¹ Reset Session",-1),n("div",{class:"small text-muted"},"Clear all messages and start fresh (keeps settings)",-1)])],8,nS),n("button",{class:"btn btn-outline-danger text-start",onClick:l,disabled:r.value},[...k[15]||(k[15]=[n("strong",null,"ðŸ—‘ï¸ Delete Session",-1),n("div",{class:"small text-muted"},"Permanently delete this session and all its data",-1)])],8,oS)]),k[19]||(k[19]=n("div",{class:"alert alert-warning mt-3 mb-0"},[n("small",null,[n("strong",null,"Note:"),Z(" Restart is the recommended option for unsticking the agent.")])],-1))]))]),n("div",iS,[f.value&&!r.value?(c(),d(re,{key:0},[n("button",{type:"button",class:"btn btn-secondary",onClick:_},"Cancel"),n("button",{type:"button",class:X(["btn",f.value==="delete"?"btn-danger":"btn-warning"]),onClick:y},w(f.value==="delete"?"Delete Session":"Confirm Reset"),3)],64)):r.value?M("",!0):(c(),d("button",aS,"Cancel"))])])])],512))}},lS=se(rS,[["__scopeId","data-v-6b832853"]]),cS={class:"modal-dialog modal-dialog-centered modal-lg"},uS={class:"modal-content"},dS={class:"modal-body"},mS={key:0,class:"text-center text-muted py-4"},pS={key:1},fS={class:"mb-3"},vS={class:"font-monospace small"},hS={class:"mb-3"},_S=["value"],gS={class:"mb-3"},bS={class:"mb-3"},yS={class:"mb-3"},$S={key:0},wS={class:"d-flex flex-wrap gap-1"},ES={key:1,class:"text-muted small"},SS={key:0,class:"mb-3"},CS={class:"d-flex flex-wrap gap-1"},kS={key:1,class:"mb-3"},TS={class:"bg-light p-2 rounded small",style:{"max-height":"200px","overflow-y":"auto"}},xS={class:"mb-3"},AS={class:"text-muted"},OS={key:0,class:"bg-light p-2 rounded small",style:{"max-height":"300px","overflow-y":"auto"}},MS={__name:"SessionInfoModal",setup(s){const e=de(),t=ke(),o=_e(),i=j(null),a=j(!1),r=j(null);let m=null;const p={sonnet:"Sonnet 4.5",opus:"Opus 4.5",haiku:"Haiku 4.5",opusplan:"OpusPlan (Opus + Sonnet)"},f=v(()=>{if(!i.value)return null;const h=e.initData.get(i.value);return h||(t.messagesBySession.get(i.value)||[]).find(y=>y.type==="system"&&(y.subtype==="init"||y.metadata?.subtype==="init")&&y.metadata?.init_data)?.metadata?.init_data||null});function u(h){return h?p[h]||h:"Default (Sonnet 4.5)"}function E(h){return typeof h=="string"?h:typeof h=="object"&&h.type==="preset"?`Preset: ${h.preset}`:JSON.stringify(h,null,2)}function g(h){h.target.select()}function $(){i.value=null,a.value=!1}function b(){$(),o.hideModal()}return pe(()=>o.currentModal,h=>{if(h?.name==="session-info"&&m){const l=h.data||{};i.value=l.sessionId,a.value=!1,m.show()}}),be(()=>{r.value&&Oe(async()=>{const{default:h}=await import("./modal-D6mKceGM.js").then(l=>l.m);return{default:h}},__vite__mapDeps([0,1])).then(({default:h})=>{m=new h(r.value),r.value.addEventListener("hidden.bs.modal",b)})}),Ce(()=>{r.value&&r.value.removeEventListener("hidden.bs.modal",b),m&&m.dispose()}),(h,l)=>(c(),d("div",{class:"modal fade",id:"sessionInfoModal",tabindex:"-1","aria-labelledby":"sessionInfoModalLabel","aria-hidden":"true",ref_key:"modalElement",ref:r},[n("div",cS,[n("div",uS,[l[9]||(l[9]=n("div",{class:"modal-header"},[n("h5",{class:"modal-title",id:"sessionInfoModalLabel"},"Session Configuration"),n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),n("div",dS,[f.value?(c(),d("div",pS,[n("div",fS,[l[1]||(l[1]=n("h6",{class:"text-muted"},"Session ID",-1)),n("div",vS,w(i.value),1)]),n("div",hS,[l[2]||(l[2]=n("h6",{class:"text-muted"},"Working Directory",-1)),n("input",{type:"text",class:"form-control form-control-sm font-monospace path-input",value:f.value.cwd||"Not specified",readonly:"",onClick:g},null,8,_S)]),n("div",gS,[l[3]||(l[3]=n("h6",{class:"text-muted"},"Model",-1)),n("div",null,w(u(f.value.model)),1)]),n("div",bS,[l[4]||(l[4]=n("h6",{class:"text-muted"},"Permission Mode",-1)),n("div",null,w(f.value.permissionMode||"default"),1)]),n("div",yS,[l[5]||(l[5]=n("h6",{class:"text-muted"},"Pre-Authorized Tools",-1)),(f.value.allowed_tools||f.value.tools)&&(f.value.allowed_tools||f.value.tools).length>0?(c(),d("div",$S,[n("div",wS,[(c(!0),d(re,null,ue(f.value.allowed_tools||f.value.tools,_=>(c(),d("span",{key:_,class:"badge bg-secondary"},w(_),1))),128))])])):(c(),d("div",ES,"No pre-authorized tools (will prompt for permissions)"))]),f.value.commands&&f.value.commands.length>0?(c(),d("div",SS,[l[6]||(l[6]=n("h6",{class:"text-muted"},"Commands",-1)),n("div",CS,[(c(!0),d(re,null,ue(f.value.commands,_=>(c(),d("span",{key:_,class:"badge bg-info"},w(_),1))),128))])])):M("",!0),f.value.systemPrompt?(c(),d("div",kS,[l[7]||(l[7]=n("h6",{class:"text-muted"},"System Prompt",-1)),n("pre",TS,w(E(f.value.systemPrompt)),1)])):M("",!0),n("div",xS,[n("h6",AS,[l[8]||(l[8]=Z(" Raw Configuration ",-1)),n("button",{class:"btn btn-sm btn-outline-secondary ms-2",onClick:l[0]||(l[0]=_=>a.value=!a.value)},w(a.value?"Hide":"Show"),1)]),a.value?(c(),d("pre",OS,w(JSON.stringify(f.value,null,2)),1)):M("",!0)])])):(c(),d("div",mS," No session configuration data available "))]),l[10]||(l[10]=n("div",{class:"modal-footer"},[n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])],512))}},DS=se(MS,[["__scopeId","data-v-b28b39b3"]]),NS={class:"modal-dialog modal-dialog-centered modal-lg"},LS={class:"modal-content"},IS={class:"modal-body"},jS={key:0,class:"text-center text-muted py-4"},PS={key:1},RS={class:"mb-3"},WS={class:"mb-3"},HS={class:"font-monospace small"},VS={class:"mb-3"},FS={class:"mb-3"},BS={class:"mb-3"},qS={key:0},US={class:"d-flex flex-wrap gap-1"},zS={key:1,class:"text-muted small"},KS={class:"mb-3"},GS={key:0,class:"bg-light p-2 rounded small",style:{"max-height":"200px","overflow-y":"auto","white-space":"pre-wrap"}},YS={key:1,class:"text-muted small"},JS={class:"mb-3"},QS={key:0,class:"badge bg-info"},XS={key:1,class:"badge bg-secondary"},ZS={class:"mb-3"},eC={key:0,class:"font-monospace small"},tC={key:1,class:"text-muted small"},sC={key:0,class:"mb-3"},nC={key:0},oC={class:"list-unstyled mb-0"},iC={key:1,class:"text-muted small"},aC={class:"mb-3"},rC={class:"small"},lC={class:"mb-3"},cC={class:"small"},uC={__name:"MinionViewModal",setup(s){const e=_e(),t=j(null),o=j(null);let i=null;function a(f){return{created:"bg-secondary",starting:"bg-info",active:"bg-success",paused:"bg-warning",terminating:"bg-warning",terminated:"bg-secondary",error:"bg-danger"}[f]||"bg-secondary"}function r(f){if(!f)return"N/A";try{const u=new Date(f);return isNaN(u.getTime())?"Invalid date":u.toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch(u){return console.error("Error formatting timestamp:",u),"Invalid date"}}function m(){t.value=null}function p(){m(),e.hideModal()}return pe(()=>e.currentModal,f=>{if(f?.name==="minion-view"&&i){const u=f.data||{};t.value=u.session,i.show()}}),be(()=>{o.value&&Oe(async()=>{const{default:f}=await import("./modal-D6mKceGM.js").then(u=>u.m);return{default:f}},__vite__mapDeps([0,1])).then(({default:f})=>{i=new f(o.value),o.value.addEventListener("hidden.bs.modal",p)})}),Ce(()=>{o.value&&o.value.removeEventListener("hidden.bs.modal",p),i&&i.dispose()}),(f,u)=>(c(),d("div",{class:"modal fade",id:"minionViewModal",tabindex:"-1","aria-labelledby":"minionViewModalLabel","aria-hidden":"true",ref_key:"modalElement",ref:o},[n("div",NS,[n("div",LS,[u[11]||(u[11]=n("div",{class:"modal-header"},[n("h5",{class:"modal-title",id:"minionViewModalLabel"},"Minion Details"),n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),n("div",IS,[t.value?(c(),d("div",PS,[n("div",RS,[u[0]||(u[0]=n("h6",{class:"text-muted"},"Name",-1)),n("div",null,w(t.value.name||"Unnamed Minion"),1)]),n("div",WS,[u[1]||(u[1]=n("h6",{class:"text-muted"},"Session ID",-1)),n("div",HS,w(t.value.session_id),1)]),n("div",VS,[u[2]||(u[2]=n("h6",{class:"text-muted"},"Role",-1)),n("div",null,w(t.value.role||"Not specified"),1)]),n("div",FS,[u[3]||(u[3]=n("h6",{class:"text-muted"},"Current State",-1)),n("div",null,[n("span",{class:X(["badge",a(t.value.state)])},w(t.value.state),3)])]),n("div",BS,[u[4]||(u[4]=n("h6",{class:"text-muted"},"Capabilities",-1)),t.value.capabilities&&t.value.capabilities.length>0?(c(),d("div",qS,[n("div",US,[(c(!0),d(re,null,ue(t.value.capabilities,E=>(c(),d("span",{key:E,class:"badge bg-secondary"},w(E),1))),128))])])):(c(),d("div",zS,"None"))]),n("div",KS,[u[5]||(u[5]=n("h6",{class:"text-muted"},"Initialization Context",-1)),t.value.initialization_context?(c(),d("div",GS,w(t.value.initialization_context),1)):(c(),d("div",YS,"Not specified"))]),n("div",JS,[u[6]||(u[6]=n("h6",{class:"text-muted"},"Overseer",-1)),n("div",null,[t.value.is_overseer?(c(),d("span",QS,"Yes")):(c(),d("span",XS,"No"))])]),n("div",ZS,[u[7]||(u[7]=n("h6",{class:"text-muted"},"Parent Overseer",-1)),t.value.parent_overseer_id?(c(),d("div",eC,w(t.value.parent_overseer_id),1)):(c(),d("div",tC," Root overseer (user-created) "))]),t.value.is_overseer?(c(),d("div",sC,[u[8]||(u[8]=n("h6",{class:"text-muted"},"Child Minions",-1)),t.value.child_minion_ids&&t.value.child_minion_ids.length>0?(c(),d("div",nC,[n("ul",oC,[(c(!0),d(re,null,ue(t.value.child_minion_ids,E=>(c(),d("li",{key:E,class:"font-monospace small"},w(E),1))),128))])])):(c(),d("div",iC,"No children"))])):M("",!0),n("div",aC,[u[9]||(u[9]=n("h6",{class:"text-muted"},"Created",-1)),n("div",rC,w(r(t.value.created_at)),1)]),n("div",lC,[u[10]||(u[10]=n("h6",{class:"text-muted"},"Last Active",-1)),n("div",cC,w(r(t.value.updated_at)),1)])])):(c(),d("div",jS," No minion data available "))]),u[12]||(u[12]=n("div",{class:"modal-footer"},[n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])],512))}},dC=se(uC,[["__scopeId","data-v-d996dc6f"]]),mC={class:"container-fluid vh-100 d-flex flex-column p-0"},pC={class:"d-flex flex-grow-1 overflow-hidden position-relative"},fC={class:"flex-grow-1 d-flex flex-column overflow-hidden"},vC={__name:"App",setup(s){const e=_e(),t=et(),o=de(),i=Le(),a=Rt(),r=v(()=>e.sidebarCollapsed),m=v(()=>e.isMobile);be(async()=>{typeof marked<"u"&&marked.setOptions({breaks:!0,gfm:!0}),t.connectUI(),await Promise.all([i.fetchProjects(),o.fetchSessions()]);const u=window.location.hash;if(u.startsWith("#/session/")){const E=u.replace("#/session/","");o.sessions.has(E)&&await o.selectSession(E)}else if(u.startsWith("#/timeline/")){const E=u.replace("#/timeline/","");a.push(`/timeline/${E}`)}window.addEventListener("popstate",p),window.addEventListener("resize",e.handleResize)}),Ce(()=>{window.removeEventListener("popstate",p),window.removeEventListener("resize",e.handleResize),t.disconnectUI()});function p(){const u=window.location.hash;if(u.startsWith("#/session/")){const E=u.replace("#/session/","");o.sessions.has(E)&&o.selectSession(E)}}function f(){e.toggleSidebar()}return(u,E)=>{const g=lo("router-view");return c(),d("div",mC,[fe(gy),n("div",{id:"sidebar-backdrop",class:X({show:!r.value&&m.value}),onClick:f},null,2),n("div",pC,[fe(Gy),n("main",fC,[fe(g)])]),fe(d$),fe(T$),fe(Y$),fe(PE),fe(lS),fe(DS),fe(dC)])}}},rn=yi(vC);rn.use($i());rn.use(cy);rn.mount("#app");
